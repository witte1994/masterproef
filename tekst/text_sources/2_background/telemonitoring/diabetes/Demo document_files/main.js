webpackJsonp([8],{104:function(e,t,n){"use strict";function r(e,t){if(!e)throw new l("string"==typeof t?t:t&&t())}function i(e,t){if(!e)throw new l("string"==typeof t?t:t&&t());return e}function o(e){throw new p(e)}function s(e){if(!u.isObject(e))return!1;var t=e.name,n=e.message;return"FetchError"===t&&n===f||"TypeError"===t&&n===h||"TypeError"===t&&"Failed to fetch"===n}function a(e){return void 0!==e&&(e>=500&&e<=599)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(17),u=n(267);t.CustomError=function(e){void 0===e&&(e="(nomessage)"),Error.call(this,e),this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name},t.CustomError.prototype=Object.create(Error.prototype);var l=function(e){function t(t){return e.call(this,"Invariant condition failed: "+(t||"(unnamed)"))||this}return c.__extends(t,e),t}(t.CustomError);t.InvariantError=l;var d=function(e){function t(t){return e.call(this,t)||this}return c.__extends(t,e),t}(t.CustomError);t.IllegalArgumentError=d;var p=function(e){function t(t){return e.call(this,"Matching not exhaustive"+(t?": unexpected value "+t:""))||this}return c.__extends(t,e),t}(t.CustomError);t.MatchingNotExhaustiveError=p,t.invariant=r,t.expectNonNull=i,t.assertNever=o;var h="NetworkError when attempting to fetch resource.",f="Client fetch error: Failed to fetch";t.isClientFetchError=s,t.isServerErrorCode=a},105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(184);t.BaseComponent=r.BaseComponent,t.withContext=r.withContext,t.BaseComponentContext=r.BaseComponentContext;var i=n(256);t.BasePage=i.BasePage;var o=n(1281);t.Link=o.Link;var s=n(124);t.Router=s.Router;var a=n(272);t.DocumentLoaderContextImpl=a.DocumentLoaderContextImpl},107:function(e,t,n){"use strict";function r(e){return _.dialectType.is(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(101),o=n(152),s=n(7),a=n(16),c=n(18),u=n(6),l=n(4),d=n(2),p=n(18),h=n(63),f=n(517),g=n(91);t.isDialectString=r;var m;!function(e){e.Normal="Normal"}(m=t.FontSize||(t.FontSize={}));var _;!function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return h.decode(t).mapLeft(o.failure).mapLeft(function(e){return l.Monitoring.Logging.getLogger("model.settings.parse").warn("fail",e),e}).getOrElse(e.empty)}catch(t){return l.Monitoring.Logging.getLogger("model.settings.parse").error("fail",t),e.empty}}function n(e){return h.encode(e)}e.empty={firstCall:!1,seenWelcome:!1,suppressedWelcome:!1,acceptedTermsVersion:"",dialectStrong:s.None,dialectWeak:s.None,banners:{dismiss:[],shown:[],later:[]},denaliLens:{},onboardingPassed:new Set,showExitNotification:!0,showSetGoalsLoader:!0,seenDenaliWelcome:!1,forcedDenaliUI:!1,forcedEditorTsDocuments:new Set,autoScrollToNextAlert:!0,showWordCount:!1,fontSize:m.Normal},e.possibleBanners=p.IO.literalArray(["referral","no-referral","desktop-mac","desktop-windows","office-addin","safari-extension","firefox-extension","chrome-extension","edge-extension","campaign-end","proofit-cancelled","proofit-completed"]),e.possibleDialects=p.IO.literalArray(["american","british","canadian","australian"]),e.dialectType=p.IO.Type.literalUnion("dialect",e.possibleDialects);var r=p.IO.Type.literalUnion("banner",e.possibleBanners),a=i.interface({dismiss:i.array(r),shown:i.array(r),later:p.IO.Type.fallback(i.array(i.interface({type:r,expire:i.number})),[])}),c=i.dictionary(i.string,i.partial({dismissAllCounter:i.number,important:i.boolean})),u=p.IO.Type.propetries({firstCall:p.IO.Type.withDefault(i.boolean,e.empty.firstCall),seenWelcome:p.IO.Type.withDefault(i.boolean,e.empty.seenWelcome),suppressedWelcome:p.IO.Type.withDefault(i.boolean,e.empty.suppressedWelcome),acceptedTermsVersion:p.IO.Type.withDefault(i.string,e.empty.acceptedTermsVersion),dialectStrong:p.IO.Type.option(e.dialectType),dialectWeak:p.IO.Type.option(e.dialectType),banners:p.IO.Type.fallback(a,e.empty.banners),denaliLens:p.IO.Type.fallback(c,e.empty.denaliLens),onboardingPassed:p.IO.Type.fallback(p.IO.Type.set(p.IO.Type.createStringEnum(f.OnboardingStep.Id,"OnboardingStep")),e.empty.onboardingPassed),showExitNotification:p.IO.Type.withDefault(i.boolean,e.empty.showExitNotification)},"","legacyProps"),d=p.IO.Type.propetries({seenDenaliWelcome:p.IO.Type.withDefault(i.boolean,e.empty.seenDenaliWelcome),showSetGoalsLoader:p.IO.Type.withDefault(i.boolean,e.empty.showSetGoalsLoader),forcedDenaliUI:p.IO.Type.withDefault(i.boolean,e.empty.forcedDenaliUI),forcedEditorTsDocuments:p.IO.Type.fallback(p.IO.Type.set(i.string),e.empty.forcedEditorTsDocuments),autoScrollToNextAlert:p.IO.Type.withDefault(i.boolean,e.empty.autoScrollToNextAlert),showWordCount:p.IO.Type.withDefault(i.boolean,e.empty.showWordCount),fontSize:p.IO.Type.fallback(p.IO.Type.createStringEnum(m,"FontSize"),e.empty.fontSize)},"DN","namespacedProps"),h=p.IO.Type.combineProperties([u,d]);e.parse=t,e.serialize=n}(_=t.UserSettings||(t.UserSettings={}));var y;!function(e){e[e.EditorTs=0]="EditorTs",e[e.Denali=1]="Denali"}(y=t.DocumentMode||(t.DocumentMode={}));var v=function(){function e(e,t,n,r){var i=this;this._userSettings=e,this._customFields=t,this._dapi=n,this._userId=r,this._log=l.Monitoring.Logging.getLogger("model.settings"),this.firstCall=this._userSettings.lens("firstCall"),this.dialect=this._userSettings.view(function(e){return e.dialectStrong.orElse(e.dialectWeak)}),this.dialectOrDefault=this.dialect.view(function(e){return e.fold(function(){return h.appConfig.defaultDialect},function(e){return e})}),this.seenWelcome=this._userSettings.lens("seenWelcome"),this.seenDenaliWelcome=this._userSettings.lens("seenDenaliWelcome"),this.suppressedWelcome=this._userSettings.lens("suppressedWelcome"),this.forcedDenaliUI=this._userSettings.lens("forcedDenaliUI"),this.acceptedTermsVersion=this._userSettings.lens("acceptedTermsVersion"),this.banners=this._userSettings.lens("banners"),this.denaliLens=this._userSettings.lens("denaliLens"),this.onboardingPassed=this._userSettings.lens("onboardingPassed"),this.showExitNotification=this._userSettings.lens("showExitNotification"),this.enableSetGoalsLoader=this._userSettings.lens("showSetGoalsLoader"),this.disableProofit=this._customFields.lens("disableProofit"),this.autoScrollToNextAlert=this._userSettings.lens("autoScrollToNextAlert"),this.showWordCount=this._userSettings.lens("showWordCount"),this.fontSize=this._userSettings.lens("fontSize"),this.docForcedToEditorTsLens=function(e){return i._userSettings.lens("forcedEditorTsDocuments").lens(b(e))},this.getDocumentMode=function(e){return i.docForcedToEditorTsLens(e).view(function(e){return void 0!==e?y.EditorTs:y.Denali})}}return e.prototype._sync=function(e){var t=this;return this._dapi.save(e).then(function(){return E.write(t._userId.get(),_.serialize(t._userSettings.get()))}).catch(this._log.handler("dapiError: save failed",{data:e}).warn)},e.prototype._setProperty=function(e,t){var n=this;return void 0===t&&(t=!0),d.Async.modifyRemoteStateOptimistic(this._userSettings,d.ObjectUtils.modify(e),function(){return n._sync(_.serialize(e))},t)},e.prototype.firstCallDone=function(){var e=this;return this._setProperty({firstCall:!0},!1).catch(function(t){t instanceof a.TimeoutError?e._log.warn("Cannot set first call as done",t):e._log.error("Cannot set first call as done",t)})},e.prototype.setDialect=function(e){return this._setProperty({dialectStrong:s.Some(e)}).then(function(t){return e})},e.prototype.setDialectWeak=function(e){return this._setProperty({dialectWeak:s.Some(e)}).then(function(t){return e})},e.prototype.welcomeTourSeen=function(){var e=this;return this._setProperty({seenWelcome:!0},!1).catch(function(t){return e._log.warn("Cannot mark welcome tour as looked",t)})},e.prototype.denaliWelcomeTourSeen=function(){var e=this;return this._setProperty({seenDenaliWelcome:!0},!1).catch(function(t){return e._log.warn("Cannot mark denali welcome tour as seen",t)})},e.prototype.acceptTerms=function(e){return this._setProperty({acceptedTermsVersion:e},!1).catch(this._log.handler("Cannot mark terms as accepted").error)},e.prototype.updateBanners=function(e){var t=this;return this._setProperty({banners:e}).catch(function(e){e instanceof a.TimeoutError?t._log.warn("Cannot update banners state",e):t._log.error("Cannot update banners state",e)})},e.prototype.toggleMarkAsImportant=function(e,t){var n=Object.assign({},this.denaliLens.get());return n[e]=Object.assign({},n[e],{important:t}),this._setProperty({denaliLens:Object.assign({},n)},!1)},e.prototype.dismissAll=function(e){var t=Object.assign({},this.denaliLens.get());return t[e]=Object.assign({},t[e],{dissmissAllCounter:Math.sqrt(function(e){return e?e*e:1}(t[e]&&t[e].dismissAllCounter||0)+1)}),this._setProperty({denaliLens:Object.assign({},t)},!1)},e.prototype.updateOnboardingPassed=function(e){var t=new Set(this._userSettings.get().onboardingPassed),n=t.size;return e.forEach(function(e){return t.add(e)}),n===t.size?Promise.resolve():this._setProperty({onboardingPassed:t},!1)},e.prototype.updateExitNotification=function(e){var t=this;return this._setProperty({showExitNotification:e},!1).catch(function(e){t._log.warn("Cannot set showExitNotification",e)})},e.prototype.updateSetGoalsLoader=function(e){var t=this;return this._setProperty({showSetGoalsLoader:e},!1).catch(function(e){t._log.warn("Cannot set showSetGoalsLoader",e)})},e.prototype.setDocumentMode=function(e,t){var n=t===y.Denali?void 0:e;return this.docForcedToEditorTsLens(e).set(n),this._setProperty({forcedEditorTsDocuments:this._userSettings.lens("forcedEditorTsDocuments").get()})},e.prototype.updateAutoScroll=function(e){var t=this;return this._setProperty({autoScrollToNextAlert:e},!1).catch(function(e){t._log.warn("Cannot set autoScrollToNextAlert",e)})},e.prototype.updateWordCount=function(e){var t=this;return this._setProperty({showWordCount:e},!1).catch(function(e){t._log.warn("Cannot set showWordCount",e)})},e.prototype.updateFontSize=function(e){var t=this;return this._setProperty({fontSize:e},!1).catch(function(e){t._log.warn("Cannot set fontSize",e)})},e}();t.SettingsModelImpl=v;var b=function(e){return u.Lens.create(function(t){return t.has(e)?e:void 0},function(t,n){var r=new Set(n);return void 0!==t?r.add(t):r.delete(e),r})},w=""+h.appConfig.userSettingsPrefix+h.appConfig.userSettingsVersion+"-",E=function(){function e(){}return e.read=function(e){try{var t=""+w+e;return c.Properties.of(JSON.parse(g.LocalStorage.readProperties(t)[t]))}catch(e){return c.Properties.of({})}},e.write=function(e,t){g.LocalStorage.writeProperties(c.Properties.of((n={},n[""+w+e]=JSON.stringify(t),n)));var n},e}();t.LocalStorageUserSettings=E;!function(e){var t=function(){function e(){this.seenDenaliWelcome=u.Atom.create(!1),this.enableSetGoalsLoader=u.Atom.create(!0),this.denaliLens=u.Atom.create({}),this.onboardingPassed=u.Atom.create(new Set),this.showExitNotification=u.Atom.create(!0)}return e.prototype.updateSetGoalsLoader=function(e){return Promise.resolve()},e.prototype.toggleMarkAsImportant=function(e,t){return Promise.resolve()},e.prototype.dismissAll=function(e){return Promise.resolve()},e.prototype.updateOnboardingPassed=function(e){return Promise.resolve()},e.prototype.updateExitNotification=function(e){return Promise.resolve()},e.prototype.denaliWelcomeTourSeen=function(){return Promise.resolve()},e}();e.Mock=t}(t.DenaliSettingsModel||(t.DenaliSettingsModel={}))},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(49),s=n(7),a=n(6),c=n(4),u=n(234),l=n(969),d=n(966),p=n(343),h=n(2),f=n(151);t.Location=f.Location;var g=p.default();!function(e){function t(e){return{route:e,href:function(t){return{pathname:u.compile(e.path)(t),exact:e.exact,path:e.path}}}}function n(e,t){return r.__assign({},e.route,{component:t})}var p="nextLocationState",f=function(){function t(){var e=this;this._reloadOnNavigation=!1,this._logger=c.Monitoring.Logging.getLogger("router"),this._nextLocationState=s.Option.empty(),this.location=a.Atom.create(this._parseLocation(g.location)),this.locationState=s.Option.empty(),this.query=new _(g.location.search),this.scheduleReloadOnNavigation=function(){e._reloadOnNavigation=!0,e._logger.info("forceReload.scheduled.onNavigation")},this.forceReloadCurrentLocation=function(){e._logger.info("forceReload.started.fromCurrentLocation"),window.location.reload()};var t=c.Monitoring.Logging.getLogger("router");t.info("Router init",g.location),this.locationState=this._loadLocationState(),g.listen(function(n){t.info("Location change",n),e.location.set(e._parseLocation(n)),e.locationState=e._nextLocationState,e._nextLocationState=s.None})}return t.prototype._parseLocation=function(e){return{pathname:e.pathname}},t.prototype.replace=function(e,t){return this.navigate(e,t,!0)},t.prototype.navigate=function(e,t,n){void 0===n&&(n=!1),t&&(this._nextLocationState=s.Option.of(t)),this._reloadOnNavigation?(this._saveLocationState(e.pathname),this._logger.info("forceReload.started.onNavigation"),window.location.href=e.pathname):n?g.replace(e):g.push(e)},t.prototype.isActive=function(t){return this.location.view(e.isActive(t))},t.prototype._saveLocationState=function(e){try{this._nextLocationState.forEach(function(t){window.localStorage.setItem(p,JSON.stringify({pathname:e,state:t}))})}catch(e){}},t.prototype._loadLocationState=function(){var e=this,t=s.Try.of(function(){var e=JSON.parse(window.localStorage.getItem(p)||"");return{state:e.state,pathname:e.pathname}}).filter(function(t){return t.pathname===e.location.get().pathname}).map(function(e){return e.state}).toOption();return function(){try{window.localStorage.removeItem(p)}catch(e){}}(),t},t}();e.Impl=f;var m=function(){function e(){this.location=a.Atom.create({pathname:"/",query:new URLSearchParams}),this.locationState=s.None,this._query=a.Atom.create(new _("")),this.navigate=h.noop,this.replace=h.noop,this.scheduleReloadOnNavigation=h.noop,this.forceReloadCurrentLocation=h.noop}return Object.defineProperty(e.prototype,"query",{get:function(){return this._query.get()},enumerable:!0,configurable:!0}),e.prototype.isActive=function(){return a.Atom.create(!1)},e.prototype.setQuery=function(e,t){var n=new URLSearchParams;n.set(e,t),this._query.set(new _(n.toString()))},e.prototype.setNextLocationState=function(){throw new Error("Method not implemented.")},e}();e.DummyImpl=m;var _=function(){function e(e){this._searchParam=new URLSearchParams(e)}return e.prototype.has=function(e){return this._searchParam.has(e)},e.prototype.get=function(e){return s.Option.of(this._searchParam.get(e))},e}();e.QueryImpl=_,e.ContextTypes={appRouter:o.object},e.page=t,e.bindComponent=n,e.isActive=function(e){return function(t){var n=t.pathname;return Boolean(l.matchPath(n,e))}},e.Wrapper=function(e){var t=e.routesMap,n=e.renderer;return i.createElement(l.Router,{history:g},i.createElement(l.Switch,null,h.ObjectUtils.toArray(t).map(function(e){return i.createElement(d.Route,{path:e.path,exact:e.exact,key:e.path,render:function(t){return n(t,e)}})})))},e.Block=function(e){var t=e.when,n=e.message;return i.createElement(a.F.div,null,t.map(function(e){return i.createElement(l.Prompt,{key:"prompt",when:e,message:n})}))},e.routes={documents:t({path:"/",exact:!0,private:!0}),profile:t({path:"/profile",private:!0}),subscription:t({path:"/subscription",private:!0}),apps:t({path:"/apps",private:!0}),new_document:t({path:"/docs/new",exact:!0,private:!0}),editor:t({path:"/docs/:docId",private:!0}),denali_editor:t({path:"/ddocs/:docId",private:!0}),free:t({path:"/free",private:!0}),component_browser:t({path:"/component_browser/:component?"}),card_iframe:t({path:"/card_iframe"}),diagnostic_test:t({path:"/diagnostic-test"}),notFound:t({path:"*"})}}(t.Router||(t.Router={}))},125:function(e,t,n){"use strict";function r(e){return!/[!$%^&*()_+|~={}\[\]:";<>?,.\/]/g.test(e)&&e.trim().length>0}function i(e){return new RegExp(["[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*","@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"].join("")).test(e)}function o(e){setTimeout(e,0)}function s(e){var t,n=!1;return{get value(){return n?t:(t=e(),n=!0,t)}}}function a(e){}function c(e,t){return e||t}function u(e,t){return e+t}function l(e){return Math.trunc(Math.random()*e)}function d(e){return e.length>0}function p(e){return function(t){return t[e]}}function h(e){var t;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t||(t=e.apply(void 0,n).then(function(e){return t=null,e}).catch(function(e){throw t=null,e}))}}function f(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),55296==(63488&t)&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):r.push(t,n)):r.push(t);return r}function g(e){return new(window.WebSocket||window.MozWebSocket)(e)}function m(e,t){var n=window;n.ddebug=n.ddebug||{},n.ddebug[e]=t}function _(e,t,n){return void 0===n&&(n=function(e,t){return e===t}),v.Option.map2(e,t,n).getOrElse(e.equals(t))}function y(e,t){return e.size===t.size&&Array.from(e.values()).every(function(e){return t.has(e)})}Object.defineProperty(t,"__esModule",{value:!0});var v=n(7);t.nameValidation=r,t.emailValidation=i,t.tick=o,t.lazy=s,t.noop=a,t.or=c,t.sum=u,t.rand=l,t.notEmpty=d,t.pick=p,t.delay=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.throttleByPromise=h,t.decode=f,t.getWebSocket=g,t.registerDebugHelper=m,t.isOptionsEq=_,t.isSetsEq=y;!function(e){e[e.lt=-1]="lt",e[e.eq=0]="eq",e[e.gt=1]="gt"}(t.Comparable||(t.Comparable={})),t.choose=function(e,t){return function(n){return n?e:t}}},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n(1309);t.GnarSpecEditor=i.GnarSpec;var o=n(1308);t.GnarSpecDesktopEditor=o.GnarSpec,t.oldEditorTelemetryContextType={telemetry:r.object},t.telemetryContextType={gnarSpec:r.object,pageId:r.string};var s=n(1307);t.EditorTelemetry=s.EditorTelemetry,t.TelemetryContainerId=s.TelemetryContainerId,t.errorSource=s.errorSource,t.ErrorSourceType=s.ErrorSourceType,t.DocumentTelemetry=s.DocumentTelemetry,t.CheckSettingName=s.CheckSettingName,t.DocumentTelemetryContext=s.DocumentTelemetryContext,t.AccountAndSupportTelemetry=s.AccountAndSupportTelemetry,t.AccountAndSupportTelemetryContext=s.AccountAndSupportTelemetryContext,t.accountType=s.accountType,t.SubscriptionTelemetry=s.SubscriptionTelemetry,t.SubscriptionTelemetryContext=s.SubscriptionTelemetryContext,t.AppsTelemetry=s.AppsTelemetry,t.AppsTelemetryContext=s.AppsTelemetryContext,t.TrackingAppType=s.TrackingAppType,t.TrackingBannerType=s.TrackingBannerType,t.DictionaryAndLanguageTelemetry=s.DictionaryAndLanguageTelemetry,t.DictionaryAndLanguageTelemetryContext=s.DictionaryAndLanguageTelemetryContext,t.DialectStringTelemetry=s.DialectStringTelemetry,t.TourTelemetry=s.TourTelemetry,t.TourTelemetryContext=s.TourTelemetryContext,t.BannersTelemetry=s.BannersTelemetry;var a=n(1311);t.PixelTracking=a.PixelTracking;var c=n(1313);t.Wootric=c.Wootric,t.WootricViewModel=c.WootricViewModel,t.FullWootricViewModel=c.FullWootricViewModel},1263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(49);!function(e){e.empty={hovered:void 0,disabled:void 0,active:void 0},e.withName=function(e,t){return r.__assign({},e,{name:t})},e.emptyWithName=function(t){return e.withName(e.empty,t)},e.GroupedContextTypes={name:i.string},e.HoveredContextTypes={hovered:i.object},e.DisabledContextTypes={disabled:i.object},e.ActiveContextTypes={active:i.object},e.contextTypes=Object.assign({},e.GroupedContextTypes,e.HoveredContextTypes,e.DisabledContextTypes,e.ActiveContextTypes)}(t.ElementState||(t.ElementState={}))},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(2),o=n(129);!function(e){function t(e,t){switch(e.platform){case o.Environment.Platform.WEB:return new n(t);case o.Environment.Platform.DESKTOP:return new s(e);case o.Environment.Platform.POPUP:throw new Error("Not Implemented");default:return i.assertNever(e.platform)}}var n=function(){function e(e){this._extensionInstalled=e}return e._notifyExtension=function(e){return r.Try.of(function(){window.GR_EXTENSION_SEND(e)})},e.prototype.openUrl=function(e){return r.Try.of(function(){document.location.href=e.toString()})},e.prototype.incFixedErrors=function(){return this._extensionInstalled()?e._notifyExtension("editor-fix"):r.Try.unit()},e.prototype.dialectChanged=function(){return this._extensionInstalled()?e._notifyExtension("changed-dialect"):r.Try.unit()},e.prototype.logout=function(){return this._extensionInstalled()?e._notifyExtension("cleanup"):r.Try.unit()},e}();e.WebImpl=n;var s=function(){function e(e){this._env=e,this.incFixedErrors=r.Try.unit,this.dialectChanged=r.Try.unit,this.logout=r.Try.unit}return e.prototype.openUrl=function(e){var t=this;return r.Try.of(function(){var n=e.toString();return t._env.has(o.Environment.Flag.useOpenUpgradePage)?window.Grammarly.desktopEditor.openUpgradePage(n):document.location.href=n})},e}();e.DesktopImpl=s,e.byPlatform=t;var a=function(){function e(){this.openUrl=r.Try.unit,this.incFixedErrors=r.Try.unit,this.dialectChanged=r.Try.unit,this.logout=r.Try.unit}return e}();e.Mock=a}(t.Actions||(t.Actions={}))},1265:function(e,t,n){"use strict";function r(){return void 0!==window.GR_EXTENSION_ID}function i(e){return"edge"===e.browser?e.parsedVersion.gte("15"):["chrome","firefox","safari"].indexOf(e.browser)>-1}function o(e){switch(e.browser){case"desktop-editor":return c.Auth.ClientType.desktop;case"chrome":return c.Auth.ClientType.webChrome;case"firefox":return c.Auth.ClientType.webFirefox;case"safari":return c.Auth.ClientType.webSafari;case"msie":return c.Auth.ClientType.webIE;case"edge":return c.Auth.ClientType.webEdge;default:return c.Auth.ClientType.unknown}}function s(e){return{tracking:e.platform===d.Environment.Platform.DESKTOP?"desktopEditor":"editor",auth:o(e.info),capi:{denali:{type:"denali_editor",sub:e.platform===d.Environment.Platform.DESKTOP?"desktop":"general"},classic:{type:"web",sub:e.platform===d.Environment.Platform.DESKTOP?"desktop":"general"}},dox:{denali:"denali_editor",classic:"web"}}}function a(e){return{tracking:e.platform===d.Environment.Platform.DESKTOP?"desktopEditor":"editor",auth:o(e.info),capi:{denali:{type:"denali_editor",sub:e.platform===d.Environment.Platform.DESKTOP?"desktop":"general"},classic:{type:"web",sub:e.platform===d.Environment.Platform.DESKTOP?"desktop":"general"}},dox:{denali:"denali_editor_test",classic:"web_test"}}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(18),u=n(2),l=n(482),d=n(129),p=n(1264),h=n(480),f=function(){function e(e){var t=this;this.info=e,this._flags=0,this.platform="desktop-editor"===this.info.browser?d.Environment.Platform.DESKTOP:d.Environment.Platform.WEB,this.names=s(this),this.textResources=l.getTextResources(this),this.actions=p.Actions.byPlatform(this,function(){return t.extension===d.Environment.ClientState.INSTALLED});var n=e.parsedVersion;this.platform===d.Environment.Platform.DESKTOP&&(this._flags|=d.Environment.Flag.disableSelection,n.gte("1.5.37")&&(this._flags|=d.Environment.Flag.checkCSRF),n.gte("1.5.31")&&(this._flags|=d.Environment.Flag.useOpenUpgradePage),n.gt("1.5.29")&&(this._flags|=d.Environment.Flag.redirectToSO)),"edge"!==e.browser&&(this._flags|=d.Environment.Flag.selectAndScroll),"safari"===e.browser&&n.lt("10")||(this._flags|=d.Environment.Flag.canDownloadBlobs),"chrome"===e.browser&&(this._flags|=d.Environment.Flag.canUseDownloadAttr),"edge"!==e.browser&&"msie"!==e.browser&&(this._flags|=d.Environment.Flag.supportsSVGDominantBaseline,this._flags|=d.Environment.Flag.supportsSVGTransitions),"windows"!==e.os&&"linux"!==e.os&&"firefox"!==e.browser||(this._flags|=d.Environment.Flag.highHighlights),"msie"===e.browser&&(this._flags|=d.Environment.Flag.useSetDataOnCopy)}return Object.defineProperty(e.prototype,"extension",{get:function(){switch(this.platform){case d.Environment.Platform.WEB:return i(this.info)?r()?d.Environment.ClientState.INSTALLED:d.Environment.ClientState.NOT_INSTALLED:d.Environment.ClientState.NOT_SUPPORTED;case d.Environment.Platform.DESKTOP:return d.Environment.ClientState.NOT_SUPPORTED;case d.Environment.Platform.POPUP:return d.Environment.ClientState.INSTALLED;default:return u.assertNever(this.platform)}},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return e===(this._flags&e)},e}();t.EnvironmentImpl=f;var g=function(){function e(e,t,n,r){void 0===e&&(e=h.EnvironmentInfo.parse()),void 0===t&&(t="desktop-editor"===e.browser?d.Environment.Platform.DESKTOP:d.Environment.Platform.WEB),void 0===n&&(n=i(e)?d.Environment.ClientState.NOT_INSTALLED:d.Environment.ClientState.NOT_SUPPORTED),void 0===r&&(r=0),this.info=e,this.platform=t,this.extension=n,this._flags=r,this.actions=new p.Actions.Mock,this.names=a(this),this.textResources=l.getTextResources(this)}return e.prototype.has=function(e){return e===(this._flags&e)},e}();t.EnvironmentMock=g},1266:function(e,t,n){"use strict";function r(e){return new a(String(e))}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=n(260),s=n(2),a=function(){function e(e){this.value=i.Try.of(function(){return o.coerce(e)}).filter(function(e){return null!==e})}return e.prototype.gte=function(e){return this._test(o.gte,e)},e.prototype.gt=function(e){return this._test(o.gt,e)},e.prototype.lt=function(e){return this._test(o.lt,e)},e.prototype.lte=function(e){return this._test(o.lte,e)},e.prototype._test=function(e,t){var n=o.coerce(t);return s.invariant(null!==n,"invalid version provided: "+t),this.value.filter(function(t){return e(t,n)}).isSuccess()},e}();t.parseVersion=r},1267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(6),o=n(8),s=n(16);!function(e){e.EMPTY=s.Subscription.EMPTY}(t.Subscription||(t.Subscription={}));var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._el=null,t}return r.__extends(t,e),t.prototype.unsubscribe=function(){this.subscription&&this.subscription.unsubscribe(),this.props.onUnmount&&this.props.onUnmount()},t.prototype.componentDidMount=function(){this.props.onMount&&(this.subscription=this.props.onMount(this._el))},t.prototype.componentDidUpdate=function(){this.props.remountOnUpdate&&this.props.onMount&&(this.unsubscribe(),this.subscription=this.props.onMount(this._el))},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.render=function(){var e=this,t=this.props,n=t.children,r=t.className;return n&&n.length>1||r?o.createElement(i.F.div,{mount:function(t){return e._el=t},className:r},n):o.Children.only(this.props.children)},t}(o.Component);t.Lifecycle=a},1268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49);!function(e){e.ContextTypes={textResources:r.object}}(t.TextResources||(t.TextResources={}))},1269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(483);t.textResources=function(e){return r.ObjectUtils.merge(i.textResources(e),{base:{tooltipDownloadProofreadVersion:"Export proofread version",tooltipDownloadOriginalVersion:"Export original version",tooltipDownload:"Export document",uploadText:"Import",tooltipUploadElementInput:"Click here to import document",menuDownloadText:"Export",documentPlaceholderText:"Import a document to save original formatting.",modalUploadingDocumentText:"Importing document",notificationUploadFileText:"Import a file in one of the following formats"},denali:{uploadMenuItem:"Import document",uploadDropZone:"Drop a text file here to import",downloadMenuItem:"Export",uploadNotificationTitle:"The document imported successfully",placeholder:{upload:"Import a document to save original formatting."}}})}},127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),i=n(180);!function(e){function t(e){return e.state!==r.Environment.ClientState.NOT_SUPPORTED}function n(e){return e.state===r.Environment.ClientState.NOT_INSTALLED}function o(e){return Array.from(e).some(function(e){return e.indexOf("office-addin")>-1})}var s;!function(e){e.officeAddin="officeAddin",e.desktopMac="macApp",e.desktopWindows="winApp",e.extensionChrome="chromeExt",e.extensionFirefox="firefoxExt",e.extensionSafari="safariExt",e.extensionEdge="edgeExt"}(s=e.App||(e.App={})),function(e){e.isExtension=function(t){return[e.extensionChrome,e.extensionFirefox,e.extensionSafari,e.extensionEdge].some(function(e){return e===t})}}(s=e.App||(e.App={})),e.isSupported=t,e.isNotInstalled=n,e.unsupported={state:r.Environment.ClientState.NOT_SUPPORTED};var a=function(){function t(t,n){this._environment=t,this._userProfile=n,this._isWin="windows"===this._environment.info.os,this._showDesktopApps=this._userProfile.features.desktopApps.get().enabled,this.extension=this._environment.extension===r.Environment.ClientState.NOT_SUPPORTED?e.unsupported:{name:this._getExtensionName(this._environment.info.browser),state:this._environment.extension},this.officeAddin=this._isWin&&this._showDesktopApps?{name:s.officeAddin,state:o(this._userProfile.profile.get().groups)?r.Environment.ClientState.INSTALLED:r.Environment.ClientState.NOT_INSTALLED}:e.unsupported,this.desktopApp=(this._isWin||"mac"===this._environment.info.os)&&this._showDesktopApps?{name:this._isWin?s.desktopWindows:s.desktopMac,state:this._userProfile.profile.get().groups.has(i.UserGroups.DESKTOP_EDITOR_INSTALLED)?r.Environment.ClientState.INSTALLED:r.Environment.ClientState.NOT_INSTALLED}:e.unsupported}return t.prototype.getAsArray=function(){return[this.officeAddin,this.desktopApp,this.extension]},t.prototype._getExtensionName=function(e){switch(e){case"chrome":return s.extensionChrome;case"firefox":return s.extensionFirefox;case"safari":return s.extensionSafari;case"edge":return s.extensionEdge;default:throw new Error("unsupported browser "+e)}},t}();e.Impl=a;var c=function(){function e(e,t,n){void 0===e&&(e={name:s.officeAddin,state:r.Environment.ClientState.NOT_INSTALLED}),void 0===t&&(t={name:s.extensionChrome,state:r.Environment.ClientState.NOT_INSTALLED}),void 0===n&&(n={name:s.desktopMac,state:r.Environment.ClientState.NOT_INSTALLED}),this.officeAddin=e,this.extension=t,this.desktopApp=n}return e.prototype.getAsArray=function(){return[this.officeAddin,this.desktopApp,this.extension]},e}();e.Mock=c}(t.GrammarlyClients||(t.GrammarlyClients={}))},1270:function(e,t,n){"use strict";function r(e,t){if(e.enableTracking){var n=new d.CookieStorage(e.domains.cookie),r=[new d.LocalStorage,new d.MemoryStorage];return{gnarClient:o(e,f.RxFetch.request("gnar"),n,r,t),gaClient:new d.GoogleAnalyticsClient(e.gaTrackingId,new d.GAClientIdManager(n,r,l.Monitoring.Logging.root.getLogger("gnar.gaClientIdManager"),l.Monitoring.TimeSeries.root.getMetric("gnar.gaClientIdManager")))}}return{gnarClient:new d.LocalStorageGnarClient,gaClient:{ga:_.noop,setUserId:_.noop}}}function i(e,t,n){var i=c.Atom.create(h.defaultState);l.Monitoring.Logging.root.debug("Constructing model for "+t.env+" on the client");var o=r(t,e),a=o.gnarClient,d=o.gaClient;a.getContainerId().then(function(e){return l.Monitoring.Logging.root.context.add({containerId:e})}).catch(function(e){return l.Monitoring.Logging.root.debug("cant get containerId",e)}),y.DenaliFingerprintsImpl.checkCsrfTokenExist();var w=new y.DenaliFingerprintsImpl(a,t),E=new v.UserActivityImpl,S=e.platform===b.Environment.Platform.DESKTOP?new m.GnarSpecDesktopEditor(s(a)):new m.GnarSpecEditor(s(a));return _.registerDebugHelper("getEnv",function(){return e}),new h.AppModelImpl(i,new u.Auth(t.api.authUrl,f.RxFetch.request(u.Auth.targetTag),e.names.auth,g.buildInfo.version,w),new u.Institution(t.api.institutionUrl,f.RxFetch.request(u.Institution.targetTag),w),new u.Dapi(t.api.dapiUrl,f.RxFetch.request(u.Dapi.targetTag)),new u.Dictionary(t.api.capiApiUrl,f.RxFetch.request(u.Dictionary.targetTag),w),new u.SubscriptionClient(t.api.subscriptionUrl,f.RxFetch.request(u.SubscriptionClient.targetTag),w),new u.Irbis(t.api.irbisUrl,f.RxFetch.request(u.Irbis.targetTag),w),new u.DOX.DoxClient(t.api.doxUrl,f.RxFetch.request(u.DOX.DoxClient.targetTag),w),new p.EditorTelemetry(a,E,e.names.tracking,t.pingMaybeGnarDelay),S,d,t,n,E,e,w)}function o(e,t,n,r,i){var o=e.api.gnarApi.url,s=new d.ContainerIdManager(n,r,l.Monitoring.Logging.root.getLogger("gnar.containerIdManager"),l.Monitoring.TimeSeries.root.getMetric("gnar.containerIdManager"));return new d.GnarClientImpl(o,i.names.tracking,g.buildInfo.version,t,s,l.Monitoring.Logging.root.getLogger("gnar"),l.Monitoring.TimeSeries.root.getMetric("gnar"))}function s(e){var t=l.Monitoring.Logging.root.getLogger("gnar.events");return a.__assign({},e,{track:function(n){var r=n.eventName,i=a.__rest(n,["eventName"]);return t.info(r,i),e.track(n)}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),c=n(6),u=n(18),l=n(4),d=n(182),p=n(126),h=n(515),f=n(32),g=n(63),m=n(126),_=n(2),y=n(481),v=n(523),b=n(128);t.getTrackingClients=r,t.defaultModel=i},1271:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1272:function(e,t,n){"use strict";function r(e){return Array.from(e.attributes).map(function(e){return e.value})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(69),s=n(4);t.Inline=o.import("blots/inline");var a=function(e){function t(n){var i=e.call(this,n)||this;return i._unwrapMe=!1,i._unwrapMe=i.allowUnwrap(),i._unwrapMe&&t._logger.warn("Created self-unwrapped blot",r(i.domNode)),i}return i.__extends(t,e),Object.defineProperty(t,"_logger",{get:function(){return void 0===t.__logger&&(t.__logger=s.Monitoring.Logging.getLogger("DEd.custom_inline_blot")),t.__logger},enumerable:!0,configurable:!0}),t.prototype.allowUnwrap=function(){return Object.getPrototypeOf(this)===t.prototype&&"SPAN"===this.domNode.tagName},t.prototype.optimize=function(t){e.prototype.optimize.call(this,t),this._tryUnwrap("optimize")},t.prototype._unwrap=function(){var e=this,n=window.getSelection();if(n.isCollapsed&&n.anchorNode===this.domNode){var i=this.offset(this.parent)+this.length();this.unwrap(),requestAnimationFrame(function(){try{for(var o=0,s=e.parent.children.head;s&&o+s.length()<i;)o+=s.length(),s=s.next;var a=i-o;n.collapse(s.domNode,a)}catch(n){t._logger.error("Self-unwrapped blot: cannot preserve selection",r(e.domNode))}})}else n.anchorNode===this.domNode||n.focusNode===this.domNode?(t._logger.error("Self-unwrapped blot: unknown case",r(this.domNode)),this.unwrap()):this.unwrap()},t.prototype.formatAt=function(t,n,r,i){e.prototype.formatAt.call(this,t,n,r,i),this._tryUnwrap("formatAt")},t.prototype.update=function(t,n){e.prototype.update.call(this,t,n),this._tryUnwrap("update")},t.prototype._tryUnwrap=function(e){if(this._unwrapMe)try{this._unwrap(),t._logger.warn('Self-unwrapped blot unwrapped on "'+e+'"',r(this.domNode))}catch(n){t._logger.warn('Cannot unwrap on "'+e+'"',n)}finally{this._unwrapMe=!1}},t.__logger=void 0,t}(t.Inline);t.SelfUnwrappingInlineBlot=a,o.register("blots/inline",a,!0)},1273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(16),o=n(69),s=n(2);t.Module=o.import("core/module");var a=o.import("delta"),c=/<((b|strong)\b|[^>]*font-weight:\s?(bold|(\d{2,}|[6-9])\d\d))(.|\n)*?>/g,u=/<h[1-6]\b(.|\n)*?>/g,l=/<(i\b|[^>]*font-style:\s?italic)(.|\n)*?>/g,d=/<((u\b|[^>]*text-decoration:\s?underline)|style\b(.|\n)*text-decoration:\s?underline)(.|\n)*?>/g,p=/<((u|o)l\b)(.|\n)*?>/g,h={bold:c,header:u,italic:l,underline:d,list:p},f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.quill=t,r._options=n,r.textChangedAfterPaste=new i.Subject,r._replaceTabsWithSpaces=function(e){return e.replace(/\t/g,"    ")},r._fetchTagsAmount=function(e){return Object.entries(h).filter(function(t){t[0];return t[1].test(e)}).map(function(e){return e[0]})},r.syntheticPaste=function(e){r._options.flush(),r._onPaste(e)},r.onPaste=function(e){var t=r._replaceTabsWithSpaces(e.clipboardData.getData("text/plain")),n=r._fetchTagsAmount(e.clipboardData.getData("text/html"));r._onPaste(t,n),e.preventDefault()},r._onPaste=function(e,t){void 0===t&&(t=[]);var n=r.quill.getSelection()||{index:0,length:0};r.quill.getLength()-(n.index+n.length)+e.length>r._maxAllowedTextLength?r._lengthExceededCallback():r._flushHistory(function(){return r._doPaste(e,n,t)})},r._doPaste=function(e,t,n){var i=r.quill.getText(),s=i.length-1,c=i.trim().length,u=(new a).retain(t.index).delete(t.length),l=(new a).retain(t.index).insert(e);u.ops&&u.ops.length>0&&r.quill.updateContents(u,o.sources.USER),r._options.flush(),r.quill.updateContents(l,o.sources.USER),r._options.flush();var d=0===c?"initial":t.length===s?"reset":"partial";r.quill.setSelection("initial"===d||"reset"===d?0:t.index+e.length,0),r.quill.focus(),r.textChangedAfterPaste.next({type:d,len:e.length,tags:n})},r.onCopy=function(e){var t=r.quill.getSelection();t.length&&(r._copyRangeToClipboard(e,t),e.preventDefault())},r.onCut=function(e){r._flushHistory(function(){return r._onCut(e)}),e.preventDefault()},r._onCut=function(e){var t=r.quill.getSelection();if(t.length){r._copyRangeToClipboard(e,t);var n=(new a).retain(t.index).delete(t.length);r.quill.updateContents(n,o.sources.USER),r.quill.setSelection(t.index,0),r._options.flush()}},r._maxAllowedTextLength=n.maxAllowedTextLength||r.DEFAULTS.maxAllowedTextLength,r._lengthExceededCallback=n.lengthExceededCallback||r.DEFAULTS.lengthExceededCallback,r.quill.root.addEventListener("paste",r.onPaste),r.quill.root.addEventListener("copy",r.onCopy),r.quill.root.addEventListener("cut",r.onCut),r.container=r.quill.addContainer("ql-clipboard"),n.className&&r.container.classList.add(n.className),r.container.setAttribute("contenteditable","true"),r.container.setAttribute("tabindex","-1"),r}return r.__extends(t,e),t.prototype._copyRangeToClipboard=function(e,t){var n=this.quill.getText(t.index,t.length);e.clipboardData?e.clipboardData.setData("text/plain",n):void 0!==window.clipboardData&&window.clipboardData.setData("text",n)},t.prototype._flushHistory=function(e){this.quill.history.cutoff(),e(),this.quill.history.cutoff()},t.prototype.convert=function(){return(new a).insert("\n")},t.prototype.dangerouslyPasteHTML=function(){throw new Error("dangerouslyPasteHTML is not implemented")},t.DEFAULTS={maxAllowedTextLength:1e5,lengthExceededCallback:s.noop},t}(t.Module);t.DenaliClipboard=f},1274:function(e,t,n){"use strict";function r(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(e){return null!=p.query(e,p.Scope.BLOCK)}))}function i(e){var t=e.reduce(function(e,t){return e+=t.delete||0},0),n=e.length()-t;return r(e)&&(n-=1),n}function o(e){if(e.ops&&e.ops.length){var t=e.reduce(function(e,t){return t.delete?e.delete(t.delete):t.insert?e.insert(t.insert,t.attributes&&s(t.attributes)):t.retain?e.retain(t.retain,t.attributes&&s(t.attributes)):e},new h);return t.ops&&1===t.ops.length&&t.ops[0].retain&&!t.ops[0].attributes?new h:t}return e}function s(e){return Object.keys(e).reduce(function(t,n){return g.test(n)?t:a.__assign({},t,(r={},r[n]=e[n],r));var r},{})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),c=n(69),u=n(2),l=n(255),d=n(16);t.Module=c.import("core/module");var p=c.import("parchment"),h=c.import("delta"),f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.quill=t,r._options=n,r._lastRecorded=0,r._ignoreChange=!1,r._stack={undo:[],redo:[]},r._changed=new d.Subject,r.changed=r._changed,r.clear(),r.quill.on(c.events.EDITOR_CHANGE,function(e,t,i,s){e!==c.events.TEXT_CHANGE||r._ignoreChange||(n.userOnly&&s!==c.sources.USER?r._transform(o(t)):r._record(o(t),o(i)))}),r.quill.keyboard.addBinding({key:"Z",shortKey:!0},r.undo.bind(r)),r.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},r.redo.bind(r)),r.quill.keyboard.addBinding({key:"Y",shortKey:!0},r.redo.bind(r)),r}return a.__extends(t,e),t.prototype.clear=function(){this._stack={undo:[],redo:[]}},t.prototype.cutoff=function(){this._lastRecorded=0},t.prototype.redo=function(){this._change("redo","undo")},t.prototype.undo=function(){this._change("undo","redo")},t.prototype._flush=function(){this._options.flush&&this._options.flush()},t.prototype._change=function(e,t){if(this._flush(),0!==this._stack[e].length){var n=this._stack[e].pop();this._lastRecorded=0,this._ignoreChange=!0,this.quill.updateContents(n[e],c.sources.USER),this._ignoreChange=!1;var r=i(n[e]);this.quill.setSelection(r,0),this._stack[t].push(n),this._changed.next(u.RxUtils.voidValue)}},t.prototype._record=function(e,t){if(!e.ops||0!==e.ops.length){this._stack.redo=[];var n=o(this.quill.getContents()).diff(t),r=Date.now();if(this._lastRecorded+this._options.delay>r&&this._stack.undo.length>0){var i=this._stack.undo.pop();n=n.compose(i.undo),e=i.redo.compose(e)}else this._lastRecorded=r;this._stack.undo.push({redo:e,undo:n}),this._stack.undo.length>this._options.maxStack&&this._stack.undo.shift()}},t.prototype._transform=function(e){e.ops&&0===e.ops.length||(this._stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this._stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))},t.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t}(t.Module);t.DenaliHistory=f,t.getLastChangeIndex=i,t.filterMarkers=o;var g=new RegExp("^"+l.MarkerBlotName+"_")},1275:function(e,t,n){"use strict";function r(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:s.noop}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(69),s=n(2);t.Keyboard=o.import("modules/keyboard");var a=t.Keyboard.DEFAULTS.bindings,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.DEFAULTS={bindings:{tab:a.tab,outdent:a.outdent,"outdent backspace":a["outdent backspace"],"remove tab":a["remove tab"],bold:r("bold"),italic:r("italic"),underline:r("underline")}},t}(t.Keyboard);t.DenaliKeyboard=c},1276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(69),o=n(16),s=n(7),a=n(175),c=n(64),u=n(485),l=n(255),d=n(2);t.Module=i.import("core/module");var p=i.import("blots/inline"),h=i.import("blots/text"),f=function(){function e(e,t,n,r){var i=this;this.id=e,this._getParentRect=t,this._getPosition=n,this._getNodeAt=r,this._isInline=function(e){return e instanceof p||e instanceof h},this._nextInline=function(e,t){var n="prev"===t?e.prev:e.next;return n&&i._isInline(n)?n:e.parent?i._nextInline(e.parent,t):null}}return e.prototype.fromEvent=function(e){var t=this._getNodes()[0],n=u.findMarkerUp(t);if(n)return o.Observable.fromEvent(n.domNode,e);throw new d.InvariantError("Cannot find dom element that corresponds to marker "+this.id)},Object.defineProperty(e.prototype,"range",{get:function(){return this._getPosition(this.id)},enumerable:!0,configurable:!0}),e.prototype._getInline=function(e){return e instanceof p?e:e.parent},Object.defineProperty(e.prototype,"rect",{get:function(){var e=this._getNodes(),t=this._getInline(e[0]).domNode,n=this._getInline(e[e.length-1]).domNode,r=this._getParentRect();return[d.DOM.absToRelative(t.getBoundingClientRect(),r),d.DOM.absToRelative(n.getBoundingClientRect(),r)]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstClientRect",{get:function(){var e=this._getNodes(),t=this._getInline(e[0]).domNode,n=this._getParentRect();return d.DOM.absToRelative(t.getClientRects()[0],n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewportRect",{get:function(){var e=this._getNodes(),t=this._getInline(e[0]).domNode,n=this._getInline(e[e.length-1]).domNode;return[t.getBoundingClientRect(),n.getBoundingClientRect()]},enumerable:!0,configurable:!0}),e.prototype._getNodes=function(){var e=this.range,t=e.start,n=e.end,r=t,i=[],o=this._getNodeAt(t+1)[0];d.invariant(null!==o,"Blot should not be null at this point. Looks like we are trying to show/hide non-existing alert/underline "+this.id);do{i.push(o),r+=o.length(),o=this._nextInline(o,"next")}while(o&&r<n);return i},e}();t.MarkModel=f;var g=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.quill=t,r.options=n,r._subs=[],r._marks=new Map,r.activeMarks=new o.BehaviorSubject(s.None),r.hoveredMarks=new o.BehaviorSubject(s.None),r.markChangeApplied=new o.Subject,r.changeMarks=function(e){if(0===e.length)return[];var t=r._getMarksModels(e);return r._preserveSelection(function(){return r.quill.updateContents(u.marksToDelta(e,r._getMarkAttributes),i.sources.API)}),e.forEach(function(e){return"remove"===e.action&&l.deregisterMark(e.id)}),r.markChangeApplied.next(e.map(function(e){return e.id})),t};var a=u.toQuillObservable(r.quill).share();return r._subs.push(a.filter(u.filterTextChange).filter(function(e){return e.source===i.sources.USER}).subscribe(function(e){var t=e.delta;r._unwrapMarkBreaks(t.ops)}),a.filter(u.filterSelectionChange).filter(function(e){var t=e.range;return t&&0===t.length}).map(function(e){var t=e.range;return e.source===i.sources.USER?s.Option.of(t).flatMap(function(e){var t=r.quill.getLeaf(e.index)[0],n=r.quill.getLeaf(e.index+1)[0];if(n!==t&&n){var i=r._getMarksByBlot(t).getOrElse([]),o=r._getMarksByBlot(n).getOrElse([]);return s.Option.of(i.concat(o)).filter(function(e){return e.length>0})}return r._getMarksByBlot(t)}):s.None}).subscribe(r.activeMarks),o.Observable.combineLatest(o.Observable.merge(o.Observable.fromEvent(r.quill.root,"mouseenter").mapTo(!0),o.Observable.fromEvent(r.quill.root,"mouseleave").mapTo(!1)).distinctUntilChanged(),r.options.ongoingSelection).switchMap(function(e){var t=e[0];return e[1]?o.Observable.of(s.Option.empty()):t?o.Observable.merge(n.contentUpdated.mapTo(s.None),n.scrollPositionChanged.mapTo(s.None),o.Observable.fromEvent(r.quill.root,"mousemove",{passive:!0}).auditTime(50).map(function(e){var t=document.elementFromPoint(e.clientX,e.clientY);try{var n=i.find(t,!0);return!n||n instanceof i?s.Option.empty():r._getMarksByBlot(n)}catch(e){return s.Option.empty()}})):o.Observable.of(s.Option.empty()).delay(200)}).distinctUntilChanged(r._optionMarksEqual).subscribe(r.hoveredMarks)),r}return r.__extends(t,e),t.prototype._getMarksByBlot=function(e){var t=this;return s.Option.of(u.getMarksIdsByBlot(e)).map(function(e){return e.map(function(e){return t._marks.get(e)}).filter(Boolean)}).filter(d.notEmpty)},t.prototype.dispose=function(){this._subs.forEach(function(e){return e.unsubscribe()}),this._subs=[]},t.prototype._optionMarksEqual=function(e,t){return d.isOptionsEq(e,t,function(e,t){return e.length===t.length&&e.every(function(e,n){return t[n]===e})})},t.prototype._getMarksModels=function(e){var t=this;return e.map(function(e){switch(e.action){case c.Mark.ActionType.create:var n=new f(e.id,function(){return t.quill.container.getBoundingClientRect()},function(t){return e.range(t)},function(e){return t.quill.getLeaf(e)});return t._marks.set(n.id,n),l.registerMark(n.id),n;case c.Mark.ActionType.update:if(t._marks.has(e.id))return t._marks.get(e.id);throw new d.InvariantError("Cannot update unknown mark");case c.Mark.ActionType.remove:if(t._marks.has(e.id))return t._marks.delete(e.id),t._ensureActive(e.id),null;throw new d.InvariantError("Cannot remove unknown mark");default:return d.assertNever(e)}}).map(function(e){return null===e?null:0===e.range.length?null:e})},t.prototype._getMarkAttributes=function(e){var t=l.getBlotName(e.id);switch(e.action){case c.Mark.ActionType.create:return n={},n[t]={action:c.Mark.ActionType.create,id:e.id,classes:e.classes,order:e.order},n;case c.Mark.ActionType.update:return r={},r[t]={action:c.Mark.ActionType.update,id:e.id,classes:e.classes,order:e.order},r;case c.Mark.ActionType.remove:return i={},i[t]={action:c.Mark.ActionType.remove,id:e.id,removeType:e.removeType},i;default:return d.assertNever(e)}var n,r,i},t.prototype._preserveSelection=function(e){var t=this.quill.getSelection();e(),t&&t.length>0&&(this.quill.setSelection(t.index,0,i.sources.API),this.quill.setSelection(t.index,t.length,i.sources.API))},t.prototype._ensureActive=function(e){var t=this;this.activeMarks.getValue().filter(function(t){return t.some(function(t){return t.id===e})}).map(function(){t.activeMarks.next(s.None)}),this.hoveredMarks.getValue().filter(function(t){return t.some(function(t){return t.id===e})}).map(function(){return t.hoveredMarks.next(s.None)})},Object.defineProperty(t.prototype,"_rootBlot",{get:function(){return this._rootBlotCached||(this._rootBlotCached=i.find(this.quill.scroll)),this._rootBlotCached},enumerable:!0,configurable:!0}),t.prototype._findInsertsToUnwrap=function(e,t,n){var r=this,i=[],o=this.quill.getLeaf(e+1)[0];return u.findCornerBlotsUp(o,n).forEach(function(o){var s=o.offset(r._rootBlot),u=s+o.length();("prefix"===n?s===e:u===t)&&i.push(c.Mark.getRemoveAction({range:function(){return new a.Range(e,t)},id:o.markId},c.Mark.RemoveType.partial))}),i},t.prototype._unwrapMarkBreaks=function(e){var t=this,n=e.reduce(function(e,n){var r=e.start,i=e.toRemove;return u.isMarkChangeOperation(n)&&(u.isBreakWordInsert(n,"prefix")&&i.push.apply(i,t._findInsertsToUnwrap(r,r+n.insert.length,"prefix")),u.isBreakWordInsert(n,"suffix")&&i.push.apply(i,t._findInsertsToUnwrap(r,r+n.insert.length,"suffix"))),{start:r+u.changeDiff(n),toRemove:i}},{start:0,toRemove:[]}).toRemove;n.length&&this.quill.updateContents(u.marksToDelta(n,this._getMarkAttributes),i.sources.API)},t.DEFAULTS={},t}(t.Module);t.MarksManager=g},1277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(69),o=n(2);t.Theme=i.import("core/theme");var s=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(t.root.setAttribute("spellcheck","false"),n.classes){var i=n.classes;t.root.className=o.DOM.classes(i.editor,t.root.className),t.container.className=o.DOM.classes(t.container.className,i.editorContainer)}return r}return r.__extends(t,e),t}(t.Theme);t.DenaliTheme=s},1278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(6),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.printClassName,s=e.containerClassName,a=e.title,c=e.onMount;return i.createElement("div",{className:s},i.createElement(o.F.input,r.__assign({type:"text",placeholder:"Type your title",maxLength:5e3,"data-name":"title-input",key:"title-input",spellCheck:!1,className:t,mount:c},o.bind({value:a}))),n&&i.createElement(o.F.div,{className:n},a))},t}(i.Component),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount(this._editorWrapEl)},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this,t=this.props,n=t.theme,r=void 0===n?{}:n,o=t.children;return i.createElement("div",{className:r.editorContentWrap},i.createElement("div",{className:r.editorContent,ref:function(t){return t&&(e._editorWrapEl=t)}},o))},t}(i.Component);t.DedWrapper=a;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onMount=function(e){var n=e.parentNode.parentNode;t.props.denaliEditor.attach(e,n,t._titleEl,t.props.viewportPadding)},t}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.componentWillUnmount=function(){this.props.denaliEditor.dispose()},t.prototype.render=function(){var e=this,t=this.props,n=t.theme,r=void 0===n?{}:n,c=t.title,u=t.children;return i.createElement(a,{theme:r,onMount:this._onMount},i.createElement(s,{className:r.title,printClassName:r.printTitle,containerClassName:r.titleWrap,onMount:function(t){return t&&(e._titleEl=t)},title:c}),i.createElement(o.F.div,null,u))},t}(i.Component);t.DedComponent=c},1279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(6),s=n(2),a=n(105),c=n(184),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getChildContext=function(){var e=this.props.model,t=e.telemetry,n=e.gnarSpec,r=e.notifications,i=e.tooltip,u=e.environment;return{appRouter:this.props.router,appConfig:this.props.config,environment:u,textResources:u.textResources,telemetry:t,gnarSpec:n,pageId:"home",notifications:r,tooltip:i,screen:new c.ScreenContextImpl,documentLoader:new a.DocumentLoaderContextImpl,pageSessionId:s.StringUtils.alphanumeric(10),visibleOverlays:o.Atom.create(new Set)}},t.prototype.render=function(){return i.Children.only(this.props.children)},t.childContextTypes=c.baseComponentContextTypes,t}(i.Component);t.ContextAppender=u},128:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(129);t.Environment=r.Environment;var i=n(1265);t.EnvironmentImpl=i.EnvironmentImpl,t.EnvironmentMock=i.EnvironmentMock;var o=n(480);t.EnvironmentInfo=o.EnvironmentInfo},1280:function(e,t,n){"use strict";function r(e,t){var n=a.Monitoring.Logging.getLogger("config.parser");return t.flatMap(function(e){return i.Try.of(function(){return JSON.parse(e)}).recover(n.handler("Parse error of the provided JSON config",{config:e}).info).toOption()}).fold(function(){return e},function(t){return l.decode(t).mapLeft(s.failure).mapLeft(function(e){return n.info("Validation error of the provided JSON config",{config:t,error:e})}).fold(function(){return e},function(t){return n.info("Load app with custom config",t),c.merge(e,t)})})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=n(101),s=n(152),a=n(4),c=n(484),u=o.refinement(o.string,function(e){return/^(https?|wss):\/\/(\w|\d|-|\/|\.|\?|\=|\_)*(:(\d)*)?$/.test(e)},"HttpString"),l=o.partial({api:o.partial({authUrl:u,capiApiUrl:u,capiWsUrl:u,crashLogUrl:u,dapiUrl:u,doxUrl:u,felogUrl:u,gnarApi:o.partial({url:u}),institutionUrl:u,irbisUrl:u,onlineTestUrl:u,proofitResultUrl:u,wsTest:u}),desktop:o.partial({mac:o.partial({infoURL:u,installURL:u}),windows:o.partial({infoURL:u,installURL:u})}),edu:o.partial({adminPanelURL:u}),extension:o.partial({chrome:o.partial({infoURL:u,installURL:u}),firefox:o.partial({iconURL:u,infoURL:u,installURL:u}),safari:o.partial({installURL:u})}),funnel:o.partial({accountDeleted:u,mainPage:u,resetPassword:u,signin:u,signup:u,subscribe:u,upgrade:u}),officeAddIn:o.partial({infoURL:u,installURL:u}),support:o.partial({connectionTroubleshooting:u,contact:u,diagnosticTestPath:u,documentAcceptTrackedChanges:u,email:u,emailExistsKBUrl:u,login:u,mainPage:u,newRequest:u,phoenixSupportUrl:u,phoenixWritingHelpUrl:u})});t.createConfig=r},1281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(49),s=n(6),a=n(124),c=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){if(t.props.onClick&&t.props.onClick(e),!e.defaultPrevented&&0===e.button&&!t.props.target&&!c(e)){e.preventDefault();var n=t.props.destination;t.context.appRouter.navigate(n)}},t}return r.__extends(t,e),t.prototype.componentWillMount=function(){if(!(this.context.appRouter instanceof a.Router.Impl||this.context.appRouter instanceof a.Router.DummyImpl))throw new TypeError("No router or invalid router supplied to Link.\n        It should be the editor-router and should come from the context.")},t.prototype.render=function(){var e=this.props,t=e.destination,n=e.className,o=e.activeClassName,a=e.children,c=r.__rest(e,["destination","className","activeClassName","children"]),u=this.context.router.history.createHref(t),l=this.context.appRouter.isActive(t);return i.createElement(s.F.a,r.__assign({},r.__assign({href:u},s.classes(n,l.view(function(e){return e&&o})),c),{onClick:this.handleClick}),a)},t.contextTypes=Object.assign({router:o.shape({history:o.shape({push:o.func.isRequired,replace:o.func.isRequired,createHref:o.func.isRequired}).isRequired}).isRequired},a.Router.ContextTypes),t}(i.Component);t.Link=u},1282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(6),s=n(63),a=n(32),c=n(1270),u=n(270),l=n(497),d=n(124),p=n(1283),h=n(1279),f=n(1280),g=n(256),m=n(2),_=n(330),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getContent=function(e){return function(t){return m.Async.isOk(t)?e():m.Async.isError(t)||m.Async.isFatal(t)?i.createElement(l.Error500Page,null):i.createElement(g.BasePage.PageWrapper,null,i.createElement(u.Spinner,{className:_.spinner}))}},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=new d.Router.Impl,n=f.createConfig(s.appConfig,t.query.get("config")),u=c.defaultModel(this.props.environment,n,t),l=p.routesMap(u);return i.createElement(d.Router.Wrapper,{routesMap:l,renderer:function(s,c){var l=s.match;return c.private&&(u.authentication.ensureAuthenticated(),u.authentication.status.filter(m.Async.isOk).first().subscribe(function(){u.apis.dox.clientType=u.userAccount.features.denali.enabled?"denali_editor":"web"})),i.createElement(h.ContextAppender,r.__assign({},{model:u,router:t,config:n}),c.private?i.createElement(o.F.div,r.__assign({},o.classes(u.environment.has(a.Environment.Flag.disableSelection)&&_.desktopEditorPreventSelection)),u.authentication.status.view(e._getContent(function(){return p.globalExperiment(u,t).getOrElseL(function(){return c.component(l.params)})}))):c.component(l.params))}})},t}(i.Component);t.Main=y},1283:function(e,t,n){"use strict";function r(e,t){var n=e.switchMap(function(e){return e.fold(function(){return l.Observable.of(c.createElement(m.Spinner,{className:w.spinner})).delay(50).startWith(null)},function(e){return l.Observable.of(e.fold(function(e){return p.Monitoring.Logging.getLogger("routes.loader").fatal("Fail on component load",e),c.createElement(h.Error500Page,null)},t))})});return c.createElement(y.BasePage.PageWrapper,null,n)}function i(e){return{documents:g.Router.bindComponent(g.Router.routes.documents,function(){return r(E("editor-base/documents_page",function(){return new Promise(function(e){return n.e(0).then(function(t){return e(n(1370))}.bind(null,n)).catch(n.oe)})}),function(t){return c.createElement(t.DocumentsPage,{model:e})})}),profile:g.Router.bindComponent(g.Router.routes.profile,function(){return r(E("editor-base/profile_page",function(){return new Promise(function(e){return n.e(0).then(function(t){return e(n(1372))}.bind(null,n)).catch(n.oe)})}),function(t){return c.createElement(t.ProfilePage,{model:e})})}),subscription:g.Router.bindComponent(g.Router.routes.subscription,function(){return r(E("editor-base/subscription_page",function(){return new Promise(function(e){return n.e(0).then(function(t){return e(n(1373))}.bind(null,n)).catch(n.oe)})}),function(t){return e.userAccount.features.isFree?c.createElement(S,{destination:g.Router.routes.free.href({})}):c.createElement(t.SubscriptionPage,{model:e})})}),apps:g.Router.bindComponent(g.Router.routes.apps,function(){return r(E("editor-base/apps_page",function(){return new Promise(function(e){return n.e(0).then(function(t){return e(n(1368))}.bind(null,n)).catch(n.oe)})}),function(t){return c.createElement(t.AppsPage,{model:e})})}),new_document:g.Router.bindComponent(g.Router.routes.new_document,function(){return c.createElement(d.F.div,null,v.RxUtils.promiseToStream(function(){return e.documentsPage.actions.createDocument()}).map(function(e){return e.fold(function(){return c.createElement(m.Spinner,{className:w.spinner})},function(e){return e.map(function(e){return e.id.toString()}).fold(function(e){return p.Monitoring.Logging.getLogger("routes").fatal("Fail create new document",e),c.createElement(h.Error500Page,null)},function(e){return c.createElement(S,{destination:g.Router.routes.editor.href({docId:e})})})})}))}),editor:g.Router.bindComponent(g.Router.routes.editor,function(t){var i=t.docId;return e.userAccount.features.denali.isDenaliDocument(i).get()?c.createElement(S,{destination:g.Router.routes.denali_editor.href({docId:i})}):(e.apis.dox.clientType=e.environment.names.dox.classic,r(E("editor-page",function(){return n.e(4).then(n.bind(null,1374))}),function(t){return c.createElement(t.EditorPage,{model:e,docId:i})}))}),denali_editor:g.Router.bindComponent(g.Router.routes.denali_editor,function(t){var i=t.docId;return e.userAccount.features.denali.isDenaliDocument(i).get()?(e.apis.dox.clientType=e.environment.names.dox.denali,r(E("denali-editor-page",function(){return n.e(2).then(n.bind(null,1367))}),function(t){return c.createElement(t.DenaliEditorPage,{wsConnectivity:e.wsConnectivity,networkState:e.networkState,selfUpdate:e.selfUpdate,notifications:e.denaliNotifications,doxApi:e.apis.dox,docId:i,userAccount:e.userAccount,upgradeHook:e.upgradeHook,logout:function(){return e.authentication.logout()}})})):c.createElement(S,{destination:g.Router.routes.editor.href({docId:i})})}),free:g.Router.bindComponent(g.Router.routes.free,function(){return e.userAccount.features.isFree?r(E("editor-base/free_page",function(){return n.e(6).then(n.bind(null,1371))}),function(t){return c.createElement(t.FreePage,{authentication:e.authentication,userAccount:e.userAccount})}):c.createElement(S,{destination:g.Router.routes.documents.href({})})}),componentBrowser:g.Router.bindComponent(g.Router.routes.component_browser,function(e){var t=e.component;return r(E("pages/component_browser",function(){return n.e(1).then(n.bind(null,1375))}),function(e){return c.createElement(e.ComponentBrowserPage,{component:t})})}),card_iframe:g.Router.bindComponent(g.Router.routes.card_iframe,function(){return r(E("editor-base/cardiframe_page",function(){return n.e(3).then(n.bind(null,1369))}),function(e){return c.createElement(e.CardIframePage,null)})}),diagnostic_test:g.Router.bindComponent(g.Router.routes.diagnostic_test,function(){return r(E("pages/diagnostic-test",function(){return n.e(5).then(n.bind(null,1376))}),function(e){return c.createElement(e.DiagnosticPage,null)})}),notFound:g.Router.bindComponent(g.Router.routes.notFound,function(){return c.createElement(f.Error404Page,{requestedData:"page"})})}}function o(e,t){var n=t.title,r=t.text,i=v.RxUtils.promiseToStream(function(){return e.documentsPage.actions.createDocument(r,n)});return u.Option.some(c.createElement(d.F.div,null,i.map(function(e){return e.fold(function(){return c.createElement(m.Spinner,{className:w.spinner})},function(e){return e.map(function(e){return e.id.toString()}).fold(function(e){return p.Monitoring.Logging.getLogger("global_experiment").fatal("Fail when redirecting to readability prototype doc",e),c.createElement(S,{destination:g.Router.routes.documents.href({})})},function(e){return c.createElement(S,{destination:g.Router.routes.denali_editor.href({docId:e})})})})})))}function s(e,t){return e.userAccount.features.isReadabilityPrototypeDemoUser&&!t.isActive(g.Router.routes.denali_editor.href({docId:"*"})).get()?o(e,b.DemoText.readabilityDemoText):u.Option.none()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),c=n(8),u=n(7),l=n(16),d=n(6),p=n(4),h=n(497),f=n(1305),g=n(124),m=n(270),_=n(184),y=n(256),v=n(2),b=n(91),w=n(330),E=function(){var e=new v.LRUCache(20);return function(t,n){return u.Option.of(e.get(t)).fold(function(){return v.RxUtils.promiseToStream(function(){return n().then(function(n){return e.put(t,n),n})})},function(e){return l.Observable.of(u.Some(u.Either.right(e)))})}}(),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.context.appRouter;e.replace(this.props.destination,e.locationState.getOrElse(void 0))},t.prototype.render=function(){return null},t}(_.BaseComponent);t.routesMap=i,t.testReadabilityPrototypeDemo=o,t.globalExperiment=s},1284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(127),i=n(32),o=function(){function e(e,t,n){this._clientsState=e,this._extension=t,this._telemetry=n}return e.prototype.getAppsItems=function(){return this._clientsState.getAsArray().filter(r.GrammarlyClients.isSupported).map(function(e){return{app:e.name,installed:e.state===i.Environment.ClientState.INSTALLED}})},e.prototype.onInstallClicked=function(e){r.GrammarlyClients.App.isExtension(e)&&this._extension.install(),this._telemetry.installAppClicked(e)},e.prototype.onMoreClicked=function(e){this._telemetry.learnMoreClicked(e)},e}();t.AppsModelImpl=o},1285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(16),o=n(7),s=n(6),a=n(18),c=n(4),u=n(2),l=n(91),d=n(180),p=n(259),h=n(107),f=n(32);t.defaultState=u.Async.defaultValue();var g=function(e){function t(){return e.call(this,{code:403,status:"error",message:"User is anonymous"})||this}return r.__extends(t,e),t}(a.HTTPError);t.AnonymousUserError=g;var m=function(e){function t(){return e.call(this,{code:0,status:"error",message:"User cannot use editor"})||this}return r.__extends(t,e),t}(a.HTTPError);t.CannotUseEditorError=m;var _=function(e){function t(t){return e.call(this,{code:t,status:"error",message:"Connection failed"})||this}return r.__extends(t,e),t}(a.HTTPError);t.ConnectionError=_;var y=function(){function e(e,t,n,r,i,o,s,l,d,p,h){var f=this;this._state=e,this._authApi=t,this._institutionApi=n,this._dapi=r,this._onAuthenticated=i,this._appConfig=o,this._telemetry=s,this._navigateToFreePage=l,this._modal=d,this._overlay=p,this._environment=h,this._log=c.Monitoring.Logging.getLogger("model.authentication"),this.status=this._state.view(function(e){return u.Async.map(e,function(e){return e})}),this._disableProofitField="disableProofit",this._handleAuthError=function(e){e instanceof m?f._gotoFreePage():!e||401!==e.code&&403!==e.code?(f._log.fatal("authError: Failed to get user session","string"==typeof e?e:c.EventProps.fromAny(e)),f._state.modify(function(t){return u.Async.isOk(t)?u.Async.error(e||new Error("authError: Failed to get user session, error is undefined"))(t):t})):(f._log.warn("authError: Bad user session",e),f._gotoLogin())},this._retryWhen=function(e){return!(e instanceof a.HTTPError)||u.isServerErrorCode(e.code)}}return e.prototype._checkCsrf=function(){return this._authApi.csrfToken.then(function(e){return e?Promise.resolve():Promise.reject("CSRF token is empty")})},e.prototype.ensureAuthenticated=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,i,o=this;return r.__generator(this,function(r){switch(r.label){case 0:if(!u.Async.isIdle(this._state.get()))return[2];r.label=1;case 1:return r.trys.push([1,7,,8]),this._state.modify(u.Async.begin),[4,this._getUserSession()];case 2:if(e=r.sent(),t=setTimeout(function(){o._onAuthenticated(e),o._state.modify(u.Async.success(e))},0),!e.userProfile.canUseEditor)throw new m;if(!this._environment.has(f.Environment.Flag.checkCSRF))return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,this._checkCsrf()];case 4:return r.sent(),[3,6];case 5:return n=r.sent(),this._log.warn("No CSRF token found"),l.LocalStorage.ls.getItem("wasLoggedOutForMissingToken")?this._log.warn("User was previously logged out due to missing CSRF token"):(l.LocalStorage.ls.setItem("wasLoggedOutForMissingToken","true"),clearTimeout(t),this.logout()),[3,6];case 6:return[3,8];case 7:return i=r.sent(),this._handleAuthError(i),i instanceof m||this._state.modify(u.Async.error(i)),[3,8];case 8:return[2]}})})},e.prototype._parseUserProfileJSON=function(e,t,n,r){var i=new Set(e.groups.filter(Boolean)),s="Free"===e.type?d.UserType.free:"Premium"===e.type?d.UserType.premium:function(){throw new Error("Unknown user type "+e.type)}(),a=this._parseCustomFields(e.customFields);return{userProfile:{id:e.id,email:e.email,newEmail:e.newEmail,fullName:e.name,isFreebie:i.has(d.UserGroups.FREEBIE_USER),isTest:e.isTest||!1,canUseEditor:"Premium"===e.type||e.freemium||!1,groups:i,type:s,loginType:e.loginType,registrationDate:e.registrationDate?o.Some(new Date(e.registrationDate)):o.None},subscription:p.defaultState,institution:r,settings:t,experiments:n,customFields:a}},e.prototype._parseCustomFields=function(e){return void 0===e&&(e={}),{disableProofit:Boolean(e[this._disableProofitField])}},e.prototype.checkAuthenticated=function(){return this._authApi.getUser().then(function(e){if(e.anonymous)throw new g}).catch(this._handleAuthError)},e.prototype._getUserMimicWithProps=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t=(e=this._dapi).getMimicWithProps,[4,this._telemetry.getContainerId()];case 1:return[4,t.apply(e,[r.sent()])];case 2:return[2,r.sent()];case 3:return n=r.sent(),this._log.warn("dapiError: Failed to get dapi props and mimic groups",n),[2,{experiments:new Set,properties:a.Properties.of({})}];case 4:return[2]}})})},e.prototype._getUserSession=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,i,o,s,c;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._authApi.getUser(this._disableProofitField)];case 1:if(e=r.sent(),e.anonymous)throw new g;return[4,Promise.all([this._getUserMimicWithProps(),void 0!==e.institutionId?this._getUserInstitution():Promise.resolve(null)])];case 2:return t=r.sent(),n=t[0],i=n.properties,o=n.experiments,s=t[1],c=h.UserSettings.parse(i,h.LocalStorageUserSettings.read(e.id),a.Properties.of(e.settings)),h.LocalStorageUserSettings.write(e.id,h.UserSettings.serialize(c)),[2,this._parseUserProfileJSON(e,c,o,s)]}})})},e.prototype._getUserInstitution=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t=this;return r.__generator(this,function(n){return e=s.Atom.create(u.Async.defaultValue()),u.Async.OperationRetrier.create(function(){return t._institutionApi.getInfo()},e,u.Async.OperationRetrier.RetryStrategy.conditional(this._retryWhen,u.Async.OperationRetrier.RetryStrategy.linear(3,3e3))),[2,e.do(function(e){u.Async.isError(e)&&1===e.attempt?t._log.info("institutionError: Failed to get institution info from first try",e.error):u.Async.isFatal(e)&&t._log.warn("institutionError: Can not get institution info",e.error)}).filter(u.Async.isTerminated).map(function(e){return u.Async.isFatal(e)?Promise.reject(e.error):e.value}).first().toPromise()]})})},e.prototype._gotoLogin=function(){this._gotoFunnelPage(this._appConfig.funnel.signin)},e.prototype._gotoFreePage=function(){this._navigateToFreePage()},e.prototype._gotoMainPage=function(){this._gotoFunnelPage(this._appConfig.funnel.mainPage)},e.prototype._gotoFunnelPage=function(e){this._environment.has(f.Environment.Flag.redirectToSO)?(this._log.info("Redirecting DTE to social signin page"),document.location.href=this._appConfig.funnel.socialSignin+"?fromDesktopEditor=true"):document.location.href=e},e.prototype.logout=function(){var e,t=this,n=s.Atom.create(0),r=s.Atom.create(5),o=s.Atom.create(5),a=function(){return t._authApi.logout().catch(function(e){throw t._log.error("Logout error",e),e})},c=new i.Subject,u=function(){e.unsubscribe(),c.next(0),n.set(1),o.set(0),r.set(5)};this._modal.show({type:"inProgressSpinner"}),i.Observable.defer(a).retryWhen(function(s){return s.scan(function(e){return e+1},0).flatMap(function(s){if(s>10)throw o.set(-1),t._modal.hide(),t._overlay.show(),new Error("Logout retry limit exceeded");n.set(s);var a=Math.min(5*s,30);return r.set(a),o.set(a),e=i.Observable.interval(1e3).take(a).subscribe(function(){o.modify(function(e){return e-1}),0===o.get()&&c.next(0)}),c=new i.Subject})}).subscribe(function(){t._environment.actions.logout().recover(function(e){t._log.error("env error during logout",e)}),t._gotoMainPage()},function(e){return t._log.error("Logout error",e)}),n.filter(function(e){return e>1}).first().subscribe(function(){return t._modal.notifications.show(t._modal.notifications.create.logoutError(u,o))})},e}();t.AuthenticationModelImpl=y},1286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(4),o=n(2),s=function(){function e(e,t){this._notification=e,this._overlay=t}return e.prototype.getDisposer=function(e,t){var n=this;return void 0===t&&(t={hideOverlay:!1}),function(){e&&n._notification.hide(e),t.hideOverlay&&n._overlay.hide()}},e}();t.ErrorHandler=s;var a=function(e){function t(t,n){return e.call(this,t,n)||this}return r.__extends(t,e),t.prototype.handle=function(e){switch(e.type){case"slow":return this.getDisposer(this._notification.show(this._notification.create.slowNetwork()));case"offline":return this._overlay.show(),this.getDisposer(this._notification.show(this._notification.create.offline(e.timer.resetClock,e.timer.reconnectTime)),{hideOverlay:!0});default:return o.assertNever(e)}},t}(s);t.NetworkErrorHandler=a;var c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._log=i.Monitoring.Logging.getLogger("connectivity.wsProtocol"),r}return r.__extends(t,e),t.prototype.handle=function(e){switch(this._log.info(e.type),e.type){case"offline":return this._overlay.show(),this.getDisposer(this._notification.show(this._notification.create.connectionWSError()),{hideOverlay:!0});default:return o.assertNever(e.type)}},t}(s);t.WsProtocolErrorHandler=c;var u=function(e){function t(t,n,r,o){var s=e.call(this,t,n)||this;return s._authentication=r,s._navigateToDocuments=o,s._log=i.Monitoring.Logging.getLogger("connectivity.dox"),s}return r.__extends(t,e),t.prototype.handle=function(e){switch(this._log.info(e.type),this._overlay.show(),e.type){case"unauthorized":return this._authentication.checkAuthenticated(),this.getDisposer(this._notification.show(this._notification.create.unauthorizedError()),{hideOverlay:!0});case"serverError":return this.getDisposer(this._notification.show(this._notification.create.serverError()),{hideOverlay:!0});case"blockedByClient":return this.getDisposer(this._notification.show(this._notification.create.connectionWSError()),{hideOverlay:!0});case"clientConnectionError":return this.getDisposer(this._notification.show(this._notification.create.clientConnectionError()),{hideOverlay:!0});case"unknownConnectionError":return this.getDisposer(this._notification.show(this._notification.create.unknownConnectionError()),{hideOverlay:!0});case"documentNotFoundError":return this.getDisposer(this._notification.show(this._notification.create.documentNotFoundError(this._navigateToDocuments)),{hideOverlay:!0});default:return o.assertNever(e.type)}},t}(s);t.DoxErrorHandler=u;var l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._log=i.Monitoring.Logging.getLogger("connectivity.capi"),r}return r.__extends(t,e),t.prototype.handle=function(e){switch(this._log.info(e.type),e.type){case"offline":return this.getDisposer(this._notification.show(this._notification.create.checkingIsDown()));default:return o.assertNever(e.type)}},t}(s);t.CapiErrorHandler=l},1287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(6),o=n(2),s=n(487);t.DoxOfflineType=s.DoxOfflineType;var a=function(){function e(e){var t=this;this._handlers=e,this.onlineState=i.Atom.create({network:{type:s.ONLINE},dox:{type:s.ONLINE},wsProtocol:{type:s.ONLINE},wsDox:{type:s.ONLINE},wsCapi:{type:s.ONLINE}}),this.networkOnline=this.onlineState.view(function(e){return"offline"!==e.network.type}),o.invariant(!this._subscription,"ConnectivityModel already subscribed"),this.onlineState.pairwise().subscribe(function(e){var n=e[0],r=e[1],i=t._getNextOfflineKey(n),o=t._getNextOfflineKey(r);if(null===o)return void(t._dispose&&t._dispose());var s=r[o];i===o&&n[i].type===s.type||(t._dispose&&t._dispose(),"online"!==s.type&&(t._dispose=t._handlers[o].handle(s)))})}return e.prototype.setState=function(e){var t=e.type,n=e.state;this.onlineState.modify(function(e){return r.__assign({},e,(i={},i[t]=n,i));var i})},e.prototype._getNextOfflineKey=function(e){if("offline"===e.network.type)return"network";if(e.wsProtocol.type!==s.ONLINE)return"wsProtocol";if(e.dox.type!==s.ONLINE)return"dox";if(e.wsDox.type!==s.ONLINE)return"wsDox";if(e.wsCapi.type!==s.ONLINE)return"wsCapi";if("slow"===e.network.type)return"network";var t=Object.keys(e).find(function(t){return"online"!==e[t].type});if(t)throw new o.InvariantError("Expected that state is online but got '"+t+"' is '"+e[t].type+"'");return null},e}();t.ConnectivityModelImpl=a},1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),i=n(6),o=n(4),s=n(32),a=n(2),c=10,u=5e3,l={method:"HEAD",mode:"cors"},d=function(){function e(e,t){var n=this;this._connectivity=e,this._onlineTestUrl=t,this._log=o.Monitoring.Logging.getLogger("networkConnectivity"),this._online=i.Atom.create("online"),this.check=a.throttleByPromise(function(){return n._checkRequest().then(n._setOnline).catch(function(){n._log.info("Online check failed, switching to offline state"),n._setOffline(n.check)})}),this.getOnlineStatus=function(){return n._online.get()},this.checkOnlineStatus=function(){return n.check().then(n.getOnlineStatus)},this._startReconnectTimer=function(e){n._stopTimer();var t=i.Atom.create(c),o=function(){t.set(c),e&&e()};n._reconnectTimer=r.Observable.interval(1e3).subscribe(function(){t.get()<=1&&e&&e(),t.modify(function(e){return e<=1?c:e-1})}),n._timer={resetClock:o,reconnectTime:t}},this._setOnline=function(){n._stopTimer(),n._online.modify(n._toSlowOrOnline)},this._setOffline=function(e){"offline"!==n._online.get()&&(n._startReconnectTimer(e),n._online.modify(n._toOffline))},this._checkRequest=function(){return a.Async.promiseWithTimeout(s.RxFetch.nativeFetch(n._onlineTestUrl+"?_="+Date.now(),l),u)},this._online.subscribe(function(e){switch(e){case"online":n._log.info("Switch back to online state"),n._connectivity.setState({type:"network",state:{type:"online"}});break;case"slow":n._connectivity.setState({type:"network",state:{type:"slow"}});break;case"offline":n._connectivity.setState({type:"network",state:{type:"offline",timer:n._timer}});break;default:a.assertNever(e)}}),this._online.filter(function(e){return"slow"!==e}).switchMap(function(e){return"offline"===e?r.Observable.empty():s.RxFetch.requestResults.filter(function(e){return"timeoutWarn"===e.type}).do(function(){n._online.modify(n._toSlow)}).switchMap(function(){return r.Observable.of(!1).delay(s.RxFetch.FETCH_TIMEOUT)})}).subscribe(function(){return n._online.modify(n._toOnline)}),r.Observable.fromEvent(window,"online").subscribe(this._setOnline),r.Observable.fromEvent(window,"offline").mapTo(void 0).subscribe(this._setOffline),this._online.switchMap(function(e){return"offline"===e?s.RxFetch.requestResults.filter(function(e){return"success"===e.type}):r.Observable.merge(s.RxFetch.requestResults.filter(function(e){var t=e.type;return"clientError"===t||"timeoutWarn"===t||"timeoutError"===t}),n._connectivity.onlineState.skip(1).filter(function(e){var t=e.dox,n=e.wsDox;return"online"!==e.wsCapi.type||"online"!==t.type||"online"!==n.type}))}).debounceTime(1e3).subscribe(this.check)}return e.prototype._stopTimer=function(){this._reconnectTimer&&(this._reconnectTimer.unsubscribe(),this._reconnectTimer=null)},e.prototype._toSlow=function(e){return"online"===e?"slow":e},e.prototype._toOnline=function(e){return"online"},e.prototype._toSlowOrOnline=function(e){return"offline"===e?"online":e},e.prototype._toOffline=function(e){return"offline"},e}();t.NetworkConnectivityModelImpl=d},1289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(6),o=n(487),s=n(2),a=function(){function e(e,t){var n=this;this._connectivity=e,this._wsHandlers=t,this._wsState=i.Atom.create({wsDox:{type:o.ONLINE},wsCapi:{type:o.ONLINE}}),this._getChangedState=function(e){var t=e[0],r=e[1],i=Object.keys(t).find(function(e){return n._wasChanged(t,r,e)});return s.invariant(!!i,"WsState must be changed"),{type:i,state:r[i]}},this._handleStateChange=function(e){var t=e.type,r=e.state;r.type===o.ONLINE?n._connectivity.setState({type:t,state:{type:"online"}}):n._wsHandlers[t].handle(r)},this._wsState.pairwise().map(this._getChangedState).subscribe(this._handleStateChange)}return e.prototype.setState=function(e){var t=e.type,n=e.state;this._wsState.modify(function(e){return r.__assign({},e,(i={},i[t]=n,i));var i})},e.prototype._wasChanged=function(e,t,n){return e[n].type!==t[n].type},e}();t.WsConnectivityModelImpl=a},129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){!function(e){e.WEB="web",e.DESKTOP="desktop",e.POPUP="popup"}(e.Platform||(e.Platform={}));!function(e){e.INSTALLED="INSTALLED",e.NOT_INSTALLED="NOT_INSTALLED",e.NOT_SUPPORTED="NOT_SUPPORTED"}(e.ClientState||(e.ClientState={}));!function(e){e[e.checkCSRF=1]="checkCSRF",e[e.redirectToSO=2]="redirectToSO",e[e.useOpenUpgradePage=4]="useOpenUpgradePage",e[e.disableSelection=8]="disableSelection",e[e.selectAndScroll=16]="selectAndScroll",e[e.canDownloadBlobs=32]="canDownloadBlobs",e[e.canUseDownloadAttr=64]="canUseDownloadAttr",e[e.supportsSVGDominantBaseline=128]="supportsSVGDominantBaseline",e[e.supportsSVGTransitions=256]="supportsSVGTransitions",e[e.highHighlights=512]="highHighlights",e[e.useSetDataOnCopy=1024]="useSetDataOnCopy"}(e.Flag||(e.Flag={})),function(e){e.toString=function(t){return e[t]}}(e.Flag||(e.Flag={}))}(t.Environment||(t.Environment={}))},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(63),o=n(2),s=n(528),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(o.CustomError),c=function(){function e(e,t){var n=this;this.networkState=e,this.connectivity=t,this.checkWs=function(){return"offline"===n.networkState.getOnlineStatus()?Promise.resolve():n._wsTest().catch(n._checkOnline)},this._wsTest=function(){return Promise.race([new Promise(function(e,t){var n=o.getWebSocket(i.appConfig.api.wsTest);if(!n)throw new a("Socket is not accessible");n.onmessage=function(){try{n.close(),e()}catch(e){t(e)}},n.onerror=function(e){return t(e)}}),s.timeoutLimit(s.TIMEOUT)])},this._checkOnline=function(){return n.networkState.checkOnlineStatus().then(function(e){return"offline"===e?Promise.resolve():Promise.reject(new a("Websocket test failed while network test passed"))})}}return e}();t.WsErrorHandler=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.handle=function(e){var t=this;switch(e.type){case"unknownConnectionError":case"clientConnectionError":case"blockedByClient":this.checkWs().then(function(){return t.connectivity.setState({type:"wsDox",state:{type:e.type}})}).catch(function(){t.connectivity.setState({type:"wsProtocol",state:{type:"offline"}})});break;case"serverError":case"unauthorized":case"documentNotFoundError":this.connectivity.setState({type:"wsDox",state:{type:e.type}});break;default:o.assertNever(e.type)}},t}(c);t.WsDoxErrorHandler=u;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.handle=function(e){var t=this;switch(e.type){case"offline":this.checkWs().then(function(){return t.connectivity.setState({type:"wsCapi",state:{type:e.type}})}).catch(function(){t.connectivity.setState({type:"wsProtocol",state:{type:"offline"}})});break;default:o.assertNever(e.type)}},t}(c);t.WsCapiErrorHandler=l},1291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(2);t.defaultState={dictionary:null,status:i.Async.defaultValue()};var o=function(){function e(e,t){this._state=e,this._api=t,this.dictionary=this._state.lens("dictionary"),this.syncStatus=this._state.lens("status"),this.isInProgress=this.syncStatus.view(function(e){return e.status===i.Async.Status.inProgress}),this.ready=this.dictionary.view(function(e){return null!==e}),this.isReadyOrError=r.Atom.combine(this.ready,this.syncStatus,function(e,t){return e||t.status===i.Async.Status.error}),this.isNotReadyOrInProgres=r.Atom.combine(this.ready,this.isInProgress,function(e,t){return!e||t})}return e.prototype.update=function(){var e=this;return this.isInProgress.get()?Promise.resolve():i.Async.runWithTimeout(function(){return e._api.get().then(function(t){return e.dictionary.set(t)})},this.syncStatus)},e.prototype.add=function(e){var t=this;return i.Async.modifyRemoteState(this.dictionary,function(t){return[e].concat(t||[])},function(){return i.Async.runWithTimeout(function(){return t._api.add(e).then(function(e){return Promise.resolve()})},t.syncStatus)})},e.prototype.remove=function(e){var t=this;return i.Async.modifyRemoteState(this.dictionary,function(t){return(t||[]).filter(function(t){return t!==e})},function(){return i.Async.runWithTimeout(function(){return t._api.delete(e).then(function(e){return Promise.resolve()})},t.syncStatus)})},e}();t.DictionaryModelImpl=o},1292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(6),o=n(4),s=n(488),a=n(2),c=n(18);!function(e){e[e.documentTypeUnsupported=0]="documentTypeUnsupported",e[e.documentIsEmpty=1]="documentIsEmpty",e[e.documentSizeExceeded=2]="documentSizeExceeded",e[e.noFilesToUpload=3]="noFilesToUpload",e[e.onlyOneDocumentAllowed=4]="onlyOneDocumentAllowed"}(r=t.ValidationError||(t.ValidationError={}));var u=function(e){return e&&s.ACCEPTED_UPLOAD_EXTENSIONS.some(function(t){return e.toLowerCase().endsWith(t)})},l=function(){return a.Async.defaultValue()},d=function(){function e(e,t,n,r){var o=this;this._upload=e,this._navigateToDocument=t,this._notifications=n,this._telemetry=r,this._state=i.Atom.create(l()),this._inBackground=!1,this.state=this._state.view(),this._state.filter(function(e){return a.Async.isTerminated(e)}).subscribe(function(e){if(a.Async.isOk(e)){var t=e.value,n=t.id,r=t.notify,i=o._navigateToDocument.bind(o,n,{openSidebar:!0,showDocumentUploadedNotification:r});o._inBackground?o._notifications.show(o._notifications.create.documentUploaded(i)):i()}else o._handleError(e.error)})}return e.prototype.upload=function(e,t){var n=this;if(void 0===t&&(t=!0),a.Async.isInProgress(this._state.get())){var i={type:"clientError",errorType:r.onlyOneDocumentAllowed};return this._handleError(i),Promise.resolve(a.Either.left(i))}this._inBackground=!1,this._state.modify(a.Async.begin);var o=this._validateFile(e);if(null!==o){var s={type:"clientError",errorType:o};return this._state.modify(a.Async.fatal(s)),this._state.set(l()),Promise.resolve(a.Either.left(s))}return this._upload(e[0]).then(function(e){var r=String(e.id);return n._state.modify(a.Async.success({id:r,notify:t})),n._telemetry.uploadDocument(!0),a.Either.right(r)}).catch(function(e){var t={type:"serverError",error:e};return n._state.modify(a.Async.fatal(t)),a.Either.left(t)}).then(function(e){return n._state.set(l()),e})},e.prototype.navigated=function(){this._inBackground=!0},e.prototype._handleError=function(e){"clientError"===e.type?this._handleClientError(e):this._handleServerError(e)},e.prototype._handleServerError=function(e){var t=e.error;o.Monitoring.Logging.getLogger("document.upload").error("uploadDocument failed",t),t instanceof c.DoxErrors.FileSizeOutOfRangeError?(this._telemetry.uploadDocument(!1,"serverError",r[r.documentSizeExceeded]),this._notifications.show(this._notifications.create.documentSizeExceeded())):t instanceof c.DoxErrors.UnsupportedFileTypeError?(this._telemetry.uploadDocument(!1,"serverError",r[r.documentTypeUnsupported]),this._notifications.show(this._notifications.create.documentTypeUnsupported())):t instanceof c.DoxErrors.TrackedChangesIsUnsupported?(this._telemetry.uploadDocument(!1,"serverError",t.message),this._notifications.show(this._notifications.create.trackedChangesIsUnsupported())):t instanceof c.DoxErrors.TooManyRequestsError?(this._telemetry.uploadDocument(!1,"serverError",t.message),this._notifications.show(this._notifications.create.error())):(this._telemetry.uploadDocument(!1,"serverError",t&&t.message),this._notifications.show(this._notifications.create.documentUploadGeneralError()))},e.prototype._handleClientError=function(e){var t=e.errorType;switch(this._telemetry.uploadDocument(!1,"clientError",r[t]),t){case r.documentTypeUnsupported:this._notifications.show(this._notifications.create.documentTypeUnsupported());break;case r.documentIsEmpty:this._notifications.show(this._notifications.create.documentIsEmpty());break;case r.documentSizeExceeded:this._notifications.show(this._notifications.create.documentSizeExceeded());break;case r.noFilesToUpload:this._notifications.showMessage("No files to upload!");break;case r.onlyOneDocumentAllowed:this._notifications.showMessage("Only one document upload at a time is allowed");break;default:a.assertNever(t)}},e.prototype._validateFile=function(e){var t=e?e[0]:null;return t?e&&e.length>1?r.onlyOneDocumentAllowed:u(t.name)?t.size?t.size>4194304?r.documentSizeExceeded:null:r.documentIsEmpty:r.documentTypeUnsupported:r.noFilesToUpload},e}();t.UploadModel=d},1293:function(e,t,n){"use strict";function r(e,t){function n(r){try{return e()}catch(e){if(r<t.length)return t[r](),n(r+1);throw e}}return n(0)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=n(2),s=n(91),a=function(){function e(e,t,n,r,a,c){void 0===a&&(a=s.LocalStorage.DenaliStorage.fromLocalStorage(s.LocalStorage.ls)),void 0===c&&(c=12096e5);var u=this;this._deserializeAlerts=e,this._serializeAlerts=t,this._storageNamePrefix=n,this._storageAlertVersion=r,this._storage=a,this._maxCacheAgeMs=c,this._log=i.Monitoring.Logging.getLogger("model.editor.alert_cache"),this._alertCacheKeyRe=new RegExp(o.StringUtils.escapeRegExp(this._getStorageKeyVersionedPrefix())+"-.+"),requestAnimationFrame(function(){try{u._pruneOldVersions()}catch(e){u._log.debug("could not clean old versions alerts",e)}})}return e.prototype._decodeCacheItem=function(e){var t=this,n=e.match(/([^;]+);([^;]+);([^;]+);(.*)/);if(!n)throw new TypeError("unexpected value content");var r=n.splice(1,5).map(function(e){return JSON.parse(e)}),i=r[0],s=r[1],a=r[2],c=r[3];if(void 0!==i&&"number"==typeof i&&void 0!==s&&void 0!==a&&"boolean"==typeof a&&void 0!==c&&Array.isArray(c)){var u=o.lazy(function(){return t._deserializeAlerts(c)});return{timeStamp:i,context:s,isFreeUser:a,get alerts(){return u.value}}}throw new TypeError("unexpected value content")},e.prototype._encodeCacheItem=function(e){var t=e.timeStamp,n=e.context,r=e.isFreeUser,i=e.alerts;return[t,n,r,this._serializeAlerts(i)].map(function(e){return JSON.stringify(e)}).join(";")},e.prototype._getStorageKeyVersionedPrefix=function(){return this._storageNamePrefix+this._storageAlertVersion},e.prototype._getStorageKeyForDoc=function(e){return this._getStorageKeyVersionedPrefix()+"-"+e},e.prototype._isAlertCacheKey=function(e){return this._alertCacheKeyRe.test(e)},e.prototype._isOldAlertCacheKey=function(e){return e.startsWith(this._storageNamePrefix)&&!e.startsWith(this._getStorageKeyVersionedPrefix())},e.prototype._saveAlerts=function(e,t,n,r){var i=this._encodeCacheItem({timeStamp:Date.now(),context:t,isFreeUser:n,alerts:r});this._storage.setItem(this._getStorageKeyForDoc(e),i)},e.prototype._loadAlerts=function(e,t,n){var r=this._storage.getItem(this._getStorageKeyForDoc(e));if(r.isEmpty())return null;var i=void 0;try{i=this._decodeCacheItem(r.get())}catch(t){try{this._removeAlerts(e)}catch(e){this._log.debug("could not remove broken cache item",e)}return null}if(i.isFreeUser===n&&i.context===t)return i.alerts;try{this._removeAlerts(e)}catch(e){this._log.debug("could not remove cache for a user of different type",e)}return null},e.prototype._removeAlerts=function(e){this._storage.removeItem(this._getStorageKeyForDoc(e))},e.prototype._pruneOldEditor=function(){var e=this;this._storage.getKeys().filter(function(e){return/matches_\d+/.test(e)}).forEach(function(t){return e._storage.removeItem(t)})},e.prototype._getAlertCacheKeys=function(){var e=this;return this._storage.getKeys().filter(function(t){return e._isAlertCacheKey(t)})},e.prototype._pruneOld=function(){var e=this,t=Date.now();this._getAlertCacheKeys().forEach(function(n){var r=e._storage.getItem(n);if(!r.isEmpty()){var i=void 0;try{i=e._decodeCacheItem(r.get())}catch(t){return void e._storage.removeItem(n)}t-i.timeStamp>e._maxCacheAgeMs&&e._storage.removeItem(n)}})},e.prototype._pruneAll=function(){var e=this;this._getAlertCacheKeys().forEach(function(t){return e._storage.removeItem(t)})},e.prototype._pruneOldVersions=function(){var e=this;this._storage.getKeys().filter(function(t){return e._isOldAlertCacheKey(t)}).forEach(function(t){return e._storage.removeItem(t)})},e.prototype.load=function(e,t,n){return this._loadAlerts(e,t,n)},e.prototype.hasCache=function(e,t,n){var r=this;return this._storage.getItem(this._getStorageKeyForDoc(e)).map(function(e){return r._decodeCacheItem(e)}).filter(function(e){return e.context===t&&e.isFreeUser===n}).map(function(e){return!0}).getOrElse(!1)},e.prototype.save=function(e,t,n,i){var o=this;try{return r(function(){return o._saveAlerts(e,t,n,i)},[function(){return o._pruneOldEditor()},function(){return o._pruneOld()},function(){return o._pruneAll()}])}catch(e){this._log.warn("Cannot write to localStorage",e)}},e.prototype.remove=function(e){this._removeAlerts(e)},e}();t.AlertCacheImpl=a},1294:function(e,t,n){"use strict";function r(e,t){var n=e.extra_properties&&e.extra_properties[t];return o.Option.of(n)}function i(e){var n=e.rawMatch,i=r(n,"source").filter(function(e){return"PUBLICATION"===e}),a=r(n,"title"),c=i.fold(function(){return o.Option.some("A part of your paper is matching some text from the web. Please make sure that this text is properly referenced.")},function(){return a.map(function(e){return'A part of your document is matching the publication "'+e+'."'})}),u=i.fold(function(){return o.Either.left({title:a,dateAccessed:t.parseDateAccessed(n.details)})},function(){return o.Either.right({mla:r(n,"reference_mla"),apa:r(n,"reference_apa"),chicago:r(n,"reference_chicago")})});return{title:"Unoriginal text: "+s.StringUtils.wordCount(n.text)+" words",description:c,url:r(n,"url").filter(function(e){return e.length>0}),reference:u}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),s=n(2);t.parseDateAccessed=function(e){void 0===e&&(e="");var t=e.match(/accessed\s(.*?)\)/);return o.Option.of(t).mapN(function(e){return e[1]})},t.parsePlagiarism=i},1295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(6),o=n(4),s=n(174),a=n(2),c=n(490),u=n(492),l=n(258),d=n(18),p=n(91);t.defaultState={session:null,document:c.defaultState};var h=function(){function e(e,t,n,s,a,d,h,f,g,m,_,y){var v=this;this._state=e,this._dialectSettingsModel=t,this._doxApi=n,this._capiWsUrl=s,this._features=a,this._telemetry=d,this._modal=h,this._alertCache=f,this._wsConnectivity=g,this._connectivity=m,this._notifications=_,this._environment=y,this._log=o.Monitoring.Logging.getLogger("model.editor.editor_page"),this._sessionState=this._state.lens("session"),this.currentSession=i.Atom.create(null),this._doStartSession=function(e){return r.__awaiter(v,void 0,void 0,function(){var t,n,i,o,s,a,d;return r.__generator(this,function(r){switch(r.label){case 0:return t=new c.DocumentModelImpl(e,this._state.lens("document"),this._doxApi,this._doxConnectivity,this._features.demoMode),[4,t.startSession()];case 1:return n=r.sent(),i=n.documentSession,o=n.initialGenre,s=n.initialChecks,this._sessionState.set(u.createDefaultState(o,s,this._features.defaultAcademicGenre.get().enabled)),a=this._sessionState,d=new u.EditorSessionImpl(a,i,new l.TextStatsModelImpl(a.lens("textStats")),this._capiWsUrl,this._dialectSettingsModel,this._features,this._telemetry,this._alertCache,this._capiConnectivity,this._environment),this._telemetry.documentShow(e.toString()),[2,d]}})})},this._connectionManager=new p.ConnectionManager(this._doStartSession,function(e){return e.end()},this.currentSession),this._capiConnectivity=i.Atom.create({type:"init"}),this._doxConnectivity=i.Atom.create({type:"init"}),this._subs=[]}return e.prototype.startSession=function(e){var t=this;if(isNaN(Number(e)))throw new Error("Invalid documentId");var n=i.Atom.create(a.Async.defaultValue());this._subs=[a.Async.OperationRetrier.create(function(){return t._connectionManager.terminate(),t._connectionManager.connect(e)},n,a.Async.OperationRetrier.RetryStrategy.conditional(this._retryWhen,a.Async.OperationRetrier.RetryStrategy.noRetry)),n.filter(function(e){return a.Async.isError(e)&&3===e.attempt||a.Async.isFatal(e)}).subscribe(function(e){t._doxConnectivity.set({type:"error",reason:"session open",error:e.error})}),n.filter(a.Async.isOk).take(1).subscribe(function(){t._doxConnectivity.set({type:"success"})}),this._connectivity.networkOnline.subscribe(function(e){return e?t.listenConnectivity():t.clearConnectivityListener()})]},e.prototype.endSession=function(){this._subs.forEach(function(e){return e.unsubscribe}),this._subs=[],this.clearConnectivityListener(),this._connectionManager.terminate()},e.prototype._doxErrorHandler=function(e){var t=e.reason,n=e.error,r={reason:t};if(n)if(n instanceof d.HTTPError)this._httpErrorHandler(n.code,t,n);else if(n instanceof d.WSError)this._wsErrorHandler(n.code,t,n);else if(n instanceof s.FetchError){var i="clientConnectionError";this._log.warn("DOX connectivity error: "+i,n,r),this._connectivity.setState({type:"dox",state:{type:i}})}else{var i="unknownConnectionError";this._log.info("DOX connectivity error: "+i,n,r),this._connectivity.setState({type:"dox",state:{type:i}})}else this._log.info("DOX connectivity error: unknown",r)},e.prototype._httpErrorHandler=function(e,t,n){var r=this,i={code:e,reason:t},o=function(e){r._log.info("DOX connectivity error: "+e,n,i),r._connectivity.setState({type:"dox",state:{type:e}})};switch(e){case d.DoxErrors.HttpCodes.NOT_FOUND:this._log.info("DOX connectivity error",n,i),this._modal.show({type:"documentNotFound"});break;case d.DoxErrors.HttpCodes.UNAUTHORIZED:o("unauthorized");break;case d.DoxErrors.HttpCodes.TOO_MANY_REQUESTS:this._log.warn("Too many requests",n,i),this._notifications.show(this._notifications.create.error());break;default:o(a.isServerErrorCode(e)?"serverError":"unknownConnectionError")}},e.prototype._wsErrorHandler=function(e,t,n){var r=this,i={code:e,reason:t},o=function(e){r._log.info("WS DOX connectivity error: "+e,n,i),r._wsConnectivity.setState({type:"wsDox",state:{type:e}})};switch(e){case d.Reconnect.WsCodes.NOT_FOUND:this._log.info("WS DOX connectivity error",n,i),this._modal.show({type:"documentNotFound"});break;case d.Reconnect.WsCodes.UNAUTHORIZED:o("unauthorized");break;case d.Reconnect.WsCodes.BLOCKED_BY_CLIENT:o("blockedByClient");break;default:o([0,-1,1005,1006].indexOf(e)>0?"unknownConnectionError":"serverError")}},e.prototype.listenConnectivity=function(){var e=this;this._connectivitySubs=[this._doxConnectivity.distinctUntilChanged(function(e,t){return e instanceof d.WSError&&t instanceof d.WSError&&e===t}).subscribe(function(t){switch(t.type){case"error":e._doxErrorHandler(t);break;case"success":e._connectivity.setState({type:"dox",state:{type:"online"}}),e._wsConnectivity.setState({type:"wsDox",state:{type:"online"}});break;case"init":break;default:a.assertNever(t)}}),this._capiConnectivity.subscribe(function(t){switch(t.type){case"connected":e._wsConnectivity.setState({type:"wsCapi",state:{type:"online"}});break;case"disconnected":e._log.warn("CAPI disconnected",t.error),e._wsConnectivity.setState({type:"wsCapi",state:{type:"offline"}});break;case"init":break;default:a.assertNever(t)}})]},e.prototype.clearConnectivityListener=function(){this._connectivitySubs&&(this._connectivitySubs.forEach(function(e){return e.unsubscribe()}),this._connectivitySubs=[]),this._wsConnectivity.setState({type:"wsDox",state:{type:"online"}}),this._wsConnectivity.setState({type:"wsCapi",state:{type:"online"}}),this._doxConnectivity.set({type:"init"}),this._capiConnectivity.set({type:"init"}),this._connectivity.setState({type:"dox",state:{type:"online"}})},e.prototype._retryWhen=function(e){return e instanceof d.HTTPError?a.isServerErrorCode(e.code)||0===e.code:!(e instanceof d.WSError)||e.code<4e3},e}();t.EditorPageModelImpl=h},1296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=n(494),o=n(6),s=function(){function e(e,t,n){var r=this;this._synonymsModel=e,this._es=t,this._apply=n,this.viewState=o.Atom.create(null),this._synonymsModel.state.subscribe(function(e){i.SynonymsModel.isReady(e)&&void 0!==e.synonyms&&r.viewState.set({synonymsState:e,popupVisible:!1})})}return e.prototype.apply=function(e){var t=this.viewState.get();null!==t&&i.SynonymsModel.isReady(t.synonymsState)&&void 0!==t.synonymsState.synonyms&&this._apply(t.synonymsState.synonyms.alert,t.synonymsState.query,e),this.hide()},e.prototype.showPopup=function(){r.invariant(i.SynonymsModel.isReady(this._synonymsModel.state.get()));var e=this._synonymsModel.state.get().query;this._es().highlightSynonym(e.start,e.word),this.viewState.modify(function(e){return null===e?null:{cursorPosition:e.cursorPosition,wordPosition:e.wordPosition,popupVisible:!0,synonymsState:e.synonymsState}})},e.prototype.hidePopup=function(){this.viewState.modify(function(e){return null===e?null:{cursorPosition:e.cursorPosition,popupVisible:!1,synonymsState:e.synonymsState}})},e.prototype.showButton=function(e){this.hide(),this._synonymsModel.query(e)},e.prototype.hide=function(){this._synonymsModel.abortQuery(),this.viewState.set(null)},e.prototype.move=function(e,t){this.viewState.modify(function(n){return null===n?null:{cursorPosition:e,wordPosition:t,popupVisible:n.popupVisible,synonymsState:n.synonymsState}})},e}();t.SynonymsViewModelImpl=s},1297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(4),o=n(2),s=n(63),a=function(){function e(e,t,n,r,o){this._environment=e,this._chromeUrl=t,this._firefoxUrl=n,this._firefoxIconUrl=r,this._notifications=o,this._log=i.Monitoring.Logging.getLogger("model.extInstall")}return e.prototype._installChromeExtension=function(){var e=this;return new Promise(function(t,n){return window.chrome.webstore.install(e._chromeUrl,function(){o.Cookie.setInstallSourceCookie(s.appConfig.domains.cookie),t(!0)},function(e,t){return n({err:e,errorCode:t})})})},e.prototype.install=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,i=this;return r.__generator(this,function(r){switch(r.label){case 0:switch(e=this._environment.info.browser){case"chrome":return[3,1];case"firefox":return[3,4];case"safari":case"edge":return[3,5]}return[3,6];case 1:return r.trys.push([1,3,,4]),[4,this._installChromeExtension()];case 2:return[2,r.sent()];case 3:return t=r.sent(),"userCancelled"===t.errorCode?this._log.warn("chrome extension install cancelled"):(n=t||new Error("banner: Click on install error is undefined"),this._log.error("chrome extension install failed",{error:n}),this._notifications.show(this._notifications.create.extensionInstallFailed())),[2,!1];case 4:return o.Cookie.setInstallSourceCookie(s.appConfig.domains.cookie),window.InstallTrigger.install({Grammarly:{URL:this._firefoxUrl,IconURL:this._firefoxIconUrl,toString:function(){return i._firefoxUrl}}}),[2,!0];case 5:return[2,!0];case 6:throw new TypeError("Unexpected input in browser variable: "+this._environment.info.browser)}})})},e}();t.ExtensionInstallModelImpl=a},1298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState={visible:!1,opts:{type:null}};var r=function(){function e(e,t){this._state=e,this.notifications=t,this.state=this._state.view()}return e.prototype.show=function(e){this._state.set({visible:!0,opts:e})},e.prototype.hide=function(){this._state.set(t.defaultState)},e}();t.ModalDialogModelImpl=r;var i=function(){function e(e){this._state=e,this.state=this._state.view()}return e.prototype.show=function(){this._state.set({visible:!0})},e.prototype.hide=function(){this._state.set({visible:!1})},e}();t.ModalOverlayModelImpl=i},1299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(127),i=function(){function e(e,t){this.features=e,this._clientsState=t,this._appsSection=this.features.appsSection.get().enabled}return e.prototype.getNotInstalledAppsCount=function(){return this._clientsState.getAsArray().filter(r.GrammarlyClients.isNotInstalled).length},e.prototype.isAppsVisible=function(){return this._appsSection&&this._getSupportedAppsCount()>0},e.prototype._getSupportedAppsCount=function(){return this._clientsState.getAsArray().filter(r.GrammarlyClients.isSupported).length},e}();t.NavigationBarModelImpl=i},1300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(16),o=function(){function e(){this._dismissStream=new i.Subject}return e.prototype.dismiss=function(){this._cancel()},e.prototype.remind=function(){this._cancel()},e.prototype.cancel=function(){this._cancel()},e.prototype._cancel=function(){this._dismissStream.next(!1)},e}();t.ProofitBanner=o;var s=function(e){function t(t,n){var r=e.call(this)||this;return r._proofit=t,r._goToDocument=n,r._proofitStream=r._proofit.do(function(e){var t=e.id;return r._id=t}).map(function(e){return null!==e.id}),r.state=r._dismissStream.merge(r._proofitStream).distinctUntilChanged(),r}return r.__extends(t,e),t.prototype.install=function(){this.cancel(),this._id&&this._goToDocument(this._id)},t}(o);t.CancelledBanner=s;var a=function(e){function t(t){var n=e.call(this)||this;return n._proofitState=t,n.proofit=n._dismissStream.mapTo(null).merge(n._proofitState.map(function(e){return e})).distinctUntilChanged(),n}return r.__extends(t,e),t.prototype.install=function(){this.cancel()},t}(o);t.CompletedBanner=a},1301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(260),i=n(16),o=n(6),s=n(4),a=n(174),c=n(2),u=n(63),l=n(7),d={currentVersion:"1.0.0-0",minimalVersion:"1.0.0-0"},p=function(){function e(e,t,n,r,a,p){var h=this;this._config=t,this._overlay=n,this._modal=r,this._onlineState=a,this._userActivity=p,this._logger=s.Monitoring.Logging.getLogger("selfUpdate"),this._versions=o.Atom.create(d),this._notificationId=o.Atom.create(l.None),this._isUpdateInProgress=!1,this.shouldUpdate=new i.Subject,this._canReloadSemaphore=new c.RxSemaphore.Impl("selfUpdate"),c.invariant("string"==typeof u.buildInfo.version,"buildInfo.version should be a string, but "+u.buildInfo.version+" is "+typeof u.buildInfo.version);var f="auto"===this._config.debugBuildVersion?u.buildInfo.version:this._config.debugBuildVersion;this._versions.skip(1).subscribe(function(t){return h._handleUpdate(e,f,t,h._config)}),setInterval(function(){return h._getVersion(h._config)},this._config.versionCheckInterval),this.watch(this._onlineState.view(function(e){return"online"===e.network.type}),"online"),this.watchForIdleState(this._userActivity.generalActivity,"generalActivity"),this.shouldUpdate.first().switchMap(function(){return h._onlineState.filter(function(e){return"online"!==e.network.type})}).withLatestFrom(this._notificationId).subscribe(function(e){e[0];e[1].forEach(function(e){h._modal.notifications.hide(e),h._notificationId.set(l.None)})})}return e.prototype.watchForIdleState=function(e,t){var n=this;return this.watch(e.throttleTime(3e3).switchMap(function(){return i.Observable.timer(n._config.canReloadCheckInterval).mapTo(!0).startWith(!1)}),t)},e.prototype.watch=function(e,t){return this._canReloadSemaphore.watch(this.shouldUpdate.first().switchMapTo(e).startWith(!0),t)},e.prototype._getVersion=function(e){var t=this,n=o.Atom.create(c.Async.defaultValue());c.Async.OperationRetrier.create(function(){return a.RxFetch.request("self_update")(e.versionFilePath,{credentials:"include"}).then(function(e){return e.json()})},n,c.Async.OperationRetrier.RetryStrategy.linear(e.retryFailedVersionCheckLimit,e.retryFailedVersionCheckInterval)),n.filter(c.Async.isTerminated).first().toPromise().then(function(e){if(c.Async.isFatal(e))throw e.error;t._versions.set(e.value)}).catch(function(e){return t._logger.warn("getVersion failed",e)})},e.prototype._handleUpdate=function(e,t,n,o){var s=this,a=n.currentVersion,u=n.minimalVersion;if(r.lt(t,a)){var d=r.lt(t,u),p=d?0:o.selfUpdateDelay,h=function(){i.Observable.fromEvent(document,"visibilitychange").startWith(void 0).map(function(){return document.hidden}).switchMap(function(e){return e?s._canReloadSemaphore.state.switchMap(c.RxUtils.orEmpty(i.Observable.timer(o.canReloadCheckInterval))):i.Observable.empty()}).subscribe(e.forceReloadCurrentLocation)},f=function(){var t=function(){s._overlay.show(),s._notificationId.get()===l.None&&s._notificationId.set(l.Some(s._modal.notifications.show(s._modal.notifications.create.selfUpdate())))};s._canReloadSemaphore.state.switchMap(function(e){return e?i.Observable.timer(o.canReloadCheckInterval).do(t).switchMap(function(){return i.Observable.timer(o.blockingModalAutoReloadDelay)}):i.Observable.empty()}).subscribe(e.forceReloadCurrentLocation)};if(!this._isUpdateInProgress||d){var g=d?"hard":"soft";this._logger.info("scheduled."+g),this._isUpdateInProgress=!0,this.shouldUpdate.next(),setTimeout(function(){s._logger.info("started."+g),e.scheduleReloadOnNavigation(),h(),d&&f()},p)}}},e}();t.SelfUpdateImpl=p},1302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(6),o=n(572),s=n(573),a=n(4),c=n(183),u=function(e,t){return new Promise(function(n,r){return e(t,function(e,t){if(e)return r(e);n(t)})})},l="braintree-hosted-fields-invalid",d=function(){function e(e,t,n){var d=this;this._notificationModel=e,this._subscriptionApi=t,this._updateSubscriptionState=n,this._log=a.Monitoring.Logging.getLogger("model.subscription.braintree"),this._braintreeInitializedInCreditCardForm=i.Atom.create(!1),this._teardownInProgress=!1,this.braintreeInitializedInCreditCardForm=this._braintreeInitializedInCreditCardForm.view(),this.updateCreditCard=function(e){return new Promise(function(t,n){d._hostedFields.tokenize(function(r,i){if(r){var o=d._hostedFields.getState().fields;return Object.keys(o).forEach(function(e){o[e].isValid||o[e].container.classList.add(l)}),void n(r)}i||n(r),d._subscriptionApi.updateCreditCard(i.nonce,e).then(function(){return Object.keys(d._hostedFields.getState().fields).forEach(function(e){return d._hostedFields.clear(e)}),t()}).then(d._updateSubscriptionState).catch(n)})})},this.getBraintreeClient=function(){return r.__awaiter(d,void 0,void 0,function(){var e,t;return r.__generator(this,function(n){switch(n.label){case 0:return this._braintreeClient?[2,this._braintreeClient]:[4,this._generateCardToken()];case 1:return e=n.sent(),[4,u(o.create,{authorization:e})];case 2:return t=n.sent(),this._braintreeClient=t,[2,t]}})})},this.initInCreditCardForm=function(e){return r.__awaiter(d,void 0,void 0,function(){var t,n,i,o;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),this._notificationModel.clearNotification(),[4,this.getBraintreeClient()];case 1:return t=r.sent(),n={client:t,styles:e.styles,fields:e.fields},[4,u(s.create,n)];case 2:return i=r.sent(),this._hostedFields=i,this._braintreeInitializedInCreditCardForm.set(!0),[3,4];case 3:return(o=r.sent())&&"HOSTED_FIELDS_INVALID_FIELD_SELECTOR"!==o.code?[2]:(this._notificationModel.setNotification(c.SubscriptionNotificationType.unknownError),[3,4]);case 4:return[2]}})})},this.cleanupInCreditCardForm=function(){try{if(d._notificationModel.clearNotification(),d._teardownInProgress)return;return d._teardownInProgress=!0,d._hostedFields&&d._hostedFields.teardown(function(e){d._teardownInProgress=!1,e?d._log.error("Could not tear down Hosted Fields!",e):d._braintreeInitializedInCreditCardForm.set(!1)})}catch(e){d._log.warn("Braintree teardown error",e)}}}return e.prototype._generateCardToken=function(){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(t){switch(t.label){case 0:return[4,this._subscriptionApi.generateTokenCreditCard()];case 1:return e=t.sent().requestId,[4,this._subscriptionApi.getTokenRequest(e)];case 2:return[2,t.sent()]}})})},e}();t.BraintreeModelImpl=d},1303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(4),o=n(2),s=n(183),a=function(){function e(e,t,n){this._notificationModel=e,this._subscriptionApi=t,this._updateSubscriptionState=n,this._log=i.Monitoring.Logging.getLogger("model.subscription.PayPal")}return e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._initialize(e)];case 1:return n.sent(),[4,this._generateToken()];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),this._log.error("paypal init error",t),this._notificationModel.setNotification(s.SubscriptionNotificationType.paypalError),[3,4];case 4:return[2]}})})},e.prototype.update=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t;return r.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this._token?[3,2]:[4,this._generateToken()];case 1:n.sent(),n.label=2;case 2:return[4,this._subscriptionApi.getPaypalRedirectPageRequest(this._token)];case 3:if(!(e=n.sent()))throw new Error("Irbis return undefined paypal url");return document.location.href=e,[4,o.delay(5e3)];case 4:return n.sent(),[3,6];case 5:return t=n.sent(),this._log.error("paypal update error",t),this._notificationModel.setNotification(s.SubscriptionNotificationType.paypalError),[3,6];case 6:return[2]}})})},e.prototype._initialize=function(e){var t=e.token,n=e.paypal;return r.__awaiter(this,void 0,void 0,function(){var e=this;return r.__generator(this,function(i){return t.map(function(t){return r.__awaiter(e,void 0,void 0,function(){return r.__generator(this,function(e){switch(e.label){case 0:return[4,this._subscriptionApi.updatePaypal(t)];case 1:return e.sent(),[4,this._updateSubscriptionState()];case 2:return e.sent(),[2]}})})}),n.map(function(e){return"ok"===e.toLowerCase()?s.SubscriptionNotificationType.paypalSuccess:s.SubscriptionNotificationType.paypalError}).map(this._notificationModel.setNotification),[2]})})},e.prototype._generateToken=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t;return r.__generator(this,function(n){switch(n.label){case 0:return e=this._generateLinks(),[4,this._subscriptionApi.generateTokenPaypal(e)];case 1:return t=n.sent().requestId,this._token=t,[2]}})})},e.prototype._generateLinks=function(){var e=document.location.protocol+"//"+document.location.host+document.location.pathname.replace(/\/$/,"");return{cancelUrl:e+"?paypal=error",returnUrl:e+"?paypal=ok"}},e}();t.PayPalModelImpl=a},1304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(513);t.Logo=function(e){var t=e.className;return i.createElement("svg",{"data-name":"gr-logo",className:t,width:"140",height:"33",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none"},i.createElement("path",{d:"M43 24.2c-.5-.2-.8-.7-.8-1.2a1.2 1.2 0 0 1 1.7-1.1c.8.4 1.8.6 2.9.6 2 0 3-1 3-2.9v-.5c-.9 1-1.8 1.7-3.4 1.7-2.5 0-4.7-1.8-4.7-5 0-3.1 2.2-4.9 4.7-4.9 1.6 0 2.6.7 3.4 1.6 0-.8.6-1.5 1.5-1.5.8 0 1.5.7 1.5 1.5v6.8c0 1.9-.5 3.3-1.4 4.2-1 1-2.5 1.4-4.5 1.4-1.4 0-2.7-.2-3.9-.7zm6.8-8.3c0-1.5-1.1-2.5-2.6-2.5-1.4 0-2.5 1-2.5 2.5s1 2.4 2.5 2.4 2.6-1 2.6-2.4zM54.5 12.5a1.5 1.5 0 1 1 3 0v.5c.4-1 1.1-2 2-2 1 0 1.5.6 1.5 1.5 0 .7-.5 1.2-1.2 1.4-1.5.3-2.3 1.5-2.3 3.6v2.8a1.5 1.5 0 1 1-3 0v-7.8M60.6 18.7c0-2.4 1.8-3.5 4.3-3.5 1 0 1.8.2 2.6.5v-.2c0-1.2-.8-2-2.3-2-.8 0-1.5.2-2 .4h-.5c-.7 0-1.3-.5-1.3-1.2 0-.5.4-1 .9-1.2.9-.3 2-.5 3.3-.5 1.7 0 2.8.4 3.6 1.2.8.8 1.1 2 1.1 3.4v4.8c0 .8-.6 1.4-1.4 1.4-.9 0-1.5-.6-1.5-1.2a4 4 0 0 1-3.2 1.3c-2 0-3.6-1.2-3.6-3.2zm6.9-.7v-.6c-.5-.2-1.2-.4-2-.4-1.2 0-2 .5-2 1.5 0 .8.7 1.3 1.7 1.3 1.4 0 2.3-.8 2.3-1.8zM72 12.5a1.5 1.5 0 1 1 3 0v.1c.6-.9 1.5-1.7 3-1.7 1.4 0 2.5.6 3 1.7 1-1 2-1.7 3.5-1.7 2.2 0 3.6 1.4 3.6 4v5.4a1.5 1.5 0 1 1-3 0v-4.5c0-1.4-.6-2.2-1.8-2.2-1 0-1.8.8-1.8 2.2v4.5a1.5 1.5 0 1 1-3 0v-4.5c0-1.4-.6-2.2-1.7-2.2-1.2 0-1.9.8-1.9 2.2v4.5a1.5 1.5 0 1 1-3 0v-7.8M89.7 12.5a1.5 1.5 0 1 1 3 0v.1c.7-.9 1.6-1.7 3.1-1.7 1.4 0 2.5.6 3 1.7 1-1 2-1.7 3.5-1.7 2.2 0 3.6 1.4 3.6 4v5.4a1.5 1.5 0 1 1-3 0v-4.5c0-1.4-.7-2.2-1.8-2.2s-1.8.8-1.8 2.2v4.5a1.5 1.5 0 1 1-3 0v-4.5c0-1.4-.7-2.2-1.8-2.2s-1.8.8-1.8 2.2v4.5a1.5 1.5 0 1 1-3 0v-7.8M106.8 18.7c0-2.4 1.8-3.5 4.3-3.5 1 0 1.8.2 2.6.5v-.2c0-1.2-.8-2-2.3-2-.8 0-1.5.2-2 .4h-.5c-.7 0-1.2-.5-1.2-1.2 0-.5.3-1 .8-1.2 1-.3 2-.5 3.4-.5 1.6 0 2.8.4 3.5 1.2.8.8 1.2 2 1.2 3.4v4.8c0 .8-.7 1.4-1.5 1.4-.9 0-1.4-.6-1.4-1.2a4 4 0 0 1-3.2 1.3c-2 0-3.7-1.2-3.7-3.2zm7-.7v-.6c-.6-.2-1.3-.4-2-.4-1.3 0-2 .5-2 1.5 0 .8.6 1.3 1.6 1.3 1.4 0 2.3-.8 2.3-1.8zM118.2 12.5a1.5 1.5 0 1 1 3 0v.5c.4-1 1.1-2 2-2 1 0 1.5.6 1.5 1.5 0 .7-.6 1.2-1.2 1.4-1.5.3-2.3 1.5-2.3 3.6v2.8a1.5 1.5 0 1 1-3 0v-7.8M125.6 8.7a1.5 1.5 0 1 1 3 0v11.6a1.5 1.5 0 1 1-3 0V8.7M131 24.6c-.5-.1-1-.5-1-1.2s.6-1.2 1.2-1.2h.5l.6.2c.6 0 .8-.1 1-.7l.2-.2-3.6-8.4-.2-.7c0-.8.7-1.4 1.5-1.4.7 0 1.2.4 1.4 1.1l2.3 6.2 2.2-6.2c.3-.6.7-1.1 1.5-1.1.7 0 1.4.6 1.4 1.4l-.1.7-3.7 8.9c-1 2.1-1.8 3-3.6 3-.7 0-1.1-.2-1.6-.4",fill:"#4C4C4C"}),i.createElement("path",{d:"M33.4 16.4a16.4 16.4 0 1 1-32.8 0 16.4 16.4 0 0 1 32.8 0",fill:"#15C39A"}),i.createElement("path",{d:"M20.2 18.6c-.7 0-1.2.6-1 1.3 0 .6.5 1 1 1H22l1-.2a7.3 7.3 0 0 1-7.4 3 7 7 0 0 1-5.5-4.4A7.5 7.5 0 0 1 17 8.9a7.9 7.9 0 0 1 6.2 3.5c.4.5 1 .6 1.6.3.4-.4.6-1 .3-1.5a9.6 9.6 0 1 0-.9 11.5l-.2 1.1v1c0 .6.4 1.1 1 1.2.6.2 1.2-.4 1.2-1v-6.4h-6",fill:"#FFF"})))},t.Robot=function(e){var t=e.className;return i.createElement("svg",{className:t,width:"167",height:"180",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd",stroke:"none"},i.createElement("ellipse",{fill:"#E4E6F2",cx:"76.736",cy:"169.525",rx:"76.736",ry:"8.525"}),i.createElement("g",{transform:"rotate(-12 160.324 -47.034)"},i.createElement("path",{d:"M16.538 65.746c.637-21.105 16.672-38.003 36.36-38.003 19.687 0 35.722 16.898 36.36 38.003h.166l.184 66.84s-11.152 9.413-35.01 9.413c-25.471 0-38.043-9.414-38.043-9.414l-.184-66.839h.167z",fill:"#CCE6FC"}),i.createElement("path",{d:"M54.184 119.778v11.835c8.157.775 23.328-1.874 31.472-7.361-.028-7.116 0-11.854 0-11.854s-14.139 7.175-31.472 7.38zm-25.809-2.668s7.084 2.463 14.45 2.463v11.491s-9.64.116-14.45-3.6V117.11z",fill:"#8CB4FB"}),i.createElement("path",{d:"M5.375 99.29l6.384-1.746s2.756-23.059 2.08-23.059c-.675 0-7.863-3.275-7.863-.152 0 3.122-.601 24.956-.601 24.956z",fill:"#E4F2FE"}),i.createElement("path",{fill:"#8CB4FB",d:"M4.267 66.614l8.358 1.776-5.66 18.81L.197 85.76z"}),i.createElement("path",{d:"M87.871 85.607V72.666c-35.454 16.21-67.514 5.257-72.437 3.263v13.236c10.357 4.49 51.39 9.867 72.437-3.558z",fill:"#8CB4FB",fillRule:"nonzero"}),i.createElement("path",{d:"M30.714 135.91l6.646 8.524s9.23 3.075 15.702 2.353c6.472-.722 16.167-.043 17.789-1.681 1.621-1.639 7.412-9.304 7.412-9.304s-15.5 3.998-24.088 3.255c-8.588-.743-23.461-3.147-23.461-3.147z",fill:"#8CB4FB"}),i.createElement("path",{d:"M86.305 64.552h.698v-.7l-.7.002.002.698zm.187 65.794l.001.347.258-.544c-.05.04-.136.107-.259.197zm-74.103-.026a8.282 8.282 0 0 1-.289-.196l.29.565-.001-.369zm-.187-65.768l-.002-.702-.7.002v.7h.702z",stroke:"none",strokeWidth:"1.4"}),i.createElement("path",{d:"M33.482 40.864c-7.739 6.54-10.257 18.802-10.257 28.202v59.05",stroke:"#FFF",strokeWidth:"3.15"}),i.createElement("path",{d:"M11.54 71.23c6.32 2.718 19.888 6.893 36.359 6.893 17.469 0 30.294-4.146 37.842-7.007M12 84.576c6.32 2.719 20.906 6.73 37.376 6.73 17.47 0 28.688-3.838 36.235-6.7",stroke:"#4E5356",strokeWidth:"1.4"}),i.createElement("path",{d:"M28.979 33.806a94.487 94.487 0 0 0 20.171 2.158c8.168 0 15.334-.758 21.42-1.858",stroke:"#4E5356",strokeWidth:"1.89"}),i.createElement("ellipse",{stroke:"#4E5356",strokeWidth:"1.4",fill:"#8CB4FB",cx:"34.333",cy:"54.621",rx:"2.131",ry:"2.21"}),i.createElement("path",{stroke:"#4E5356",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",d:"M36.552 65.712l5.062-3.595 5.233 3.436 3.566-4.302 6.125 4.273 6.212-3.666 5.277 3.622M57.309 49.253l5.701 4.992M57.309 54.767l5.938-5.514"}),i.createElement("path",{d:"M26.534 136.392l6.445 7.536s6.97 2.73 16.353 2.73c9.382 0 17.33-1.776 17.33-1.776l6.823-8.49",stroke:"#4E5356",strokeWidth:"1.4"}),i.createElement("g",{transform:"rotate(-27 52.62 -33.966)"},i.createElement("ellipse",{stroke:"#4E5356",strokeWidth:"1.4",fill:"#8CB4FB",cx:"20.571",cy:"2.21",rx:"2.131",ry:"2.21"}),i.createElement("path",{d:"M20.643 8.579l.217-4.388",stroke:"#4E5356",strokeWidth:"1.4"}),i.createElement("path",{d:"M1.905 14.627s10.26-5.97 20.031-5.97c9.771 0 20.487 6.995 20.487 6.995s-12.013 2.706-19.335 2.706c-7.322 0-21.183-3.731-21.183-3.731z",fill:"#FFF"}),i.createElement("path",{d:"M7.284 15.727s8.657-5.244 18.374-4.223c9.717 1.021 17.52 8.087 17.52 8.087s-10.683 2.27-17.965 1.504c-7.282-.765-17.929-5.368-17.929-5.368z",fill:"#8CB4FB"}),i.createElement("path",{d:"M.298 15.243s13.31 3.63 21.887 3.455c8.577-.173 19.77-.726 19.912-2.618-3.333-3.004-12.298-7.646-21.237-7.196C9.597 9.451.298 15.243.298 15.243z",stroke:"#4E5356",strokeWidth:"1.4"}))),i.createElement("path",{fill:"#CCE6FC",d:"M33.336 118.155l4.936-.143v28.415l-4.936.143z"}),i.createElement("path",{d:"M25.86 92.406v24.49l12.98.073V92.48l-12.98-.073z",stroke:"#4E5356",strokeWidth:"1.4"}),i.createElement("path",{d:"M30.894 116.818l.094 22.25 8.089 3.766-.092-26.016h-8.09z",stroke:"#4E5356",strokeWidth:"1.4"}),i.createElement("path",{d:"M27.161 137.546l13.005 5.757-11.5 27.534-12.694-5.579s-.434-11.485.026-17.511c.052-.68 11.163-10.201 11.163-10.201z",fill:"#FFF"}),i.createElement("path",{fill:"#8CB4FB",d:"M27.164 137.549l13.906 6.192-13.367 30.022-9.72-4.327 1.536-20.12z"}),i.createElement("path",{d:"M28.312 137.61l-12.24 10.266-.529 18.49 12.839 5.716 12.797-28.743-12.867-5.73z",stroke:"#4E5356",strokeWidth:"1.4"}),i.createElement("path",{fill:"#CCE6FC",d:"M119.77 111.8l9.228-1.962 5.908 27.794-9.229 1.962z"}),i.createElement("path",{fill:"#FFF",d:"M114.081 87.973l11.912-2.532 4.595 21.618-11.912 2.532z"}),i.createElement("path",{fill:"#8CB4FB",d:"M116.738 91.14l10.72-2.278 4.464 21-10.72 2.279z"}),i.createElement("path",{fill:"#FFF",d:"M124.573 135.213l14.084-3.542 7.226 16.631-4.126 16.998-10.462 1.534z"}),i.createElement("path",{fill:"#8CB4FB",d:"M123.67 138.73l14.89-3.165 9.106 15.193-4.023 15.084-13.596 2.89z"}),i.createElement("path",{d:"M117.94 110.968l5.32 23.864 7.564-1.608-5.32-23.864-7.564 1.608z",stroke:"#4E5356",strokeWidth:"1.4"}),i.createElement("path",{d:"M123.194 134.795l6.541 30.777 12.216-2.597 4.024-16.97-9.05-14.128-13.731 2.918zM112.81 86.734l12.33-2.62 5.091 23.954-12.33 2.621z",stroke:"#4E5356",strokeWidth:"1.4"}),i.createElement("path",{d:"M79.881 53.454c0-9.556 9.692-17.224 16.68-15.353 6.986 1.87 4.872 13.52 1.293 12.004-4.088-1.73.41-12.004 8.663-12.004s4.96 18.666 0 16.544 3.847-11.938 11.777-9.397",stroke:"#8CB4FB",strokeWidth:"1.89"}),i.createElement("ellipse",{stroke:"#4E5356",strokeWidth:"1.89",strokeLinecap:"round",strokeLinejoin:"round",cx:"11.007",cy:"58.34",rx:"4.717",ry:"4.736"}),i.createElement("ellipse",{stroke:"#4E5356",strokeWidth:"1.89",strokeLinecap:"round",strokeLinejoin:"round",cx:"96.235",cy:"3.4",rx:"3.145",ry:"3.157"}),i.createElement("path",{d:"M33.196 21.101a8.262 8.262 0 0 0-8.26-8.262 8.261 8.261 0 0 0 8.26-8.263 8.261 8.261 0 0 0 8.26 8.263c-4.561 0-8.26 3.699-8.26 8.262M158.496 30.73a8.262 8.262 0 0 0-8.26-8.262 8.261 8.261 0 0 0 8.26-8.263 8.261 8.261 0 0 0 8.26 8.263c-4.561 0-8.26 3.699-8.26 8.262",fill:"#F5EF93"}),i.createElement("path",{d:"M34.378 20.966c0-3.716-3.001-6.73-6.703-6.73 3.702 0 6.703-3.011 6.703-6.728 0 3.717 3 6.729 6.702 6.729-3.701 0-6.702 3.013-6.702 6.729zM160.077 29.135c0-2.964-2.394-5.368-5.347-5.368 2.953 0 5.347-2.402 5.347-5.367 0 2.965 2.394 5.367 5.346 5.367-2.952 0-5.346 2.404-5.346 5.368z",stroke:"#4E5356",strokeWidth:"1.89",strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("path",{d:"M39.152 125.147l6.168-2.052",stroke:"#4E5356",strokeWidth:"1.4"})))},t.ArrowIcon=function(e){var t=e.className;return i.createElement(o.IconWrapper,r.__assign({},{className:t},{viewBox:"0 0 16 16",width:16}),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none"},i.createElement("circle",{fill:"#15C39A",cx:"8",cy:"8",r:"8"}),i.createElement("path",{stroke:"#FFF",strokeWidth:"1.5",strokeLinecap:"round",d:"M7.1 4.9L10.3 8 7 11.2"})))}},1305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(105),s=n(534),a=n(948),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.back=function(){window.history.back()},t.prototype.render=function(){return i.createElement(o.BasePage,{title:"Page not found | Grammarly"},i.createElement("div",null,i.createElement(s.Logo,{mainPageUrl:this.context.appConfig.funnel.mainPage}),i.createElement("div",{className:a.header},i.createElement("div",{className:a.headOne},"Sorry, we couldn’t find that ",this.props.requestedData),i.createElement("div",{className:a.headSub},i.createElement("span",{className:a.sub},"We can’t get you there from here, but here are some options that might help you get back on track:"))),i.createElement("div",{className:a.linkWrapper},i.createElement("span",{className:a.home},"Go to the"," ",i.createElement("a",{"data-name":"linkHomePage",className:a.link,href:this.context.appConfig.funnel.mainPage},"Grammarly Homepage"))),i.createElement("div",{className:a.linkWrapper},i.createElement("span",{className:a.back},"Return to"," ",i.createElement("a",{"data-name":"linkBackPage",className:a.link,onClick:this.back},"Previous Page"))),i.createElement("div",{className:a.linkWrapper},i.createElement("span",{className:a.support},"Contact"," ",i.createElement("a",{"data-name":"linkSupportPage",className:a.link,href:this.context.appConfig.support.mainPage},"Grammarly Support")))))},t}(o.BaseComponent);t.Error404Page=c},1306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1323),n(1318),n(951);var r=n(279);n(1319);try{"edge"===r().browser&&(window.fetch=null)}catch(e){}n(346)},1307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(4),o=n(1312);t.errorSource={client:"client",server:"server"},t.accountType={free:"free",premium:"premium"};var s=function(){function e(e,t,n,r){var o=this;this._gnar=e,this._userActivity=t,this._clientName=n,this.pingMaybeGnarDelay=r,this._eventLogger=i.Monitoring.Logging.getLogger("events.tracking"),this._exceptionLogger=i.Monitoring.Logging.getLogger("exceptions"),this._unhandledLogger=this._exceptionLogger.getLogger("unhandled"),this._userActivityLogger=i.Monitoring.Logging.getLogger("pingActivity"),this._tsRoot=i.Monitoring.TimeSeries.root,this.getContainerId=function(){return o._gnar.getContainerId()},this._rejections=new Map,i.Monitoring.Logging.root.debug("Starting telemetry"),window.addEventListener("error",this._unhandledError.bind(this)),window.addEventListener("unhandledrejection",this._unhandledRejection.bind(this)),window.addEventListener("rejectionhandled",this._rejectionHandled.bind(this)),document.addEventListener("visibilitychange",this._visibilityChanged.bind(this)),this._visibilityChanged(),window.screen&&i.Monitoring.Logging.getLogger("userStats").info("Screen",{size:window.screen.width+"x"+window.screen.height})}return e.prototype.listenUserActivity=function(){var e=this;this._userActivitySubscription?this._userActivitySubscription.unsubscribe():this._userActivitySubscription=this._userActivity.generalActivity.throttleTime(this.pingMaybeGnarDelay).subscribe(function(){e._gnar.pingMaybe(),e._userActivityLogger.info("Ping activity")})},e.prototype.setUser=function(e,t){i.Monitoring.Logging.root.context.add({user:{id:e}}),this._gnar.setUser(e,t),this._logEvent("setUser"),this._tsRoot.getCounter("userChanged").increment(),this.listenUserActivity()},e.prototype._track=function(e,t){return void 0===t&&(t={}),this._gnar.track(r.__assign({eventName:this._clientName+"/"+e},t))},e.prototype.documentListOpened=function(){this._logEvent("myGrammarly-page-show"),this._track("myGrammarly-page-show")},e.prototype.deleteDocument=function(e){this._logEvent("deleteDocument-button-click",{docId:e}),this._track("deleteDocument-button-click")},e.prototype.uploadDocument=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=""),this._logEvent("uploadDocument-form-submit",{isSuccess:e,errorSource:t,errorMessage:n}),this._track("uploadDocument-form-submit",{isSuccess:e,errorSource:t,errorMessage:n})},e.prototype.downloadDocument=function(e){this._logEvent("downloadDocument-button-click",{docId:e}),this._track("downloadDocument-button-click")},e.prototype.copyDocument=function(e){this._logEvent("copyDocument-button-click",{docId:e}),this._track("copyDocument-button-click")},e.prototype.newDocument=function(){this._logEvent("newDocument-button-click"),this._track("newDocument-button-click")},e.prototype.documentShow=function(e){this._logEvent("document-page-show",{docId:e}),this._track("document-page-show"),this._tsRoot.getCounter("documentPageShow").increment()},e.prototype.reportOpened=function(e){this._logEvent("detailedReport-page-show",{score:e}),this._track("detailedReport-page-show")},e.prototype.reportDownload=function(e){this._logEvent("detailedReportDownload-button-click",{score:e}),this._track("detailedReportDownload-button-click")},e.prototype.settingsToggled=function(e,t){this._logEvent("setting-toggle-click",{isEnabled:e,settingName:t}),this._track("setting-toggle-click",{isEnabled:e,settingName:t})},e.prototype.documentGenreSelected=function(e){this._logEvent("documentGenre-button-click",{documentGenre:e}),this._track("documentGenre-button-click",{documentGenre:e})},e.prototype.profileOpened=function(){this._logEvent("profile-page-show"),this._track("profile-page-show")},e.prototype.accountOpened=function(){this._logEvent("account-page-show"),this._track("account-page-show")},e.prototype.supportClicked=function(){this._logEvent("support-link-click"),this._track("support-link-click")},e.prototype.deleteAccountButtonClicked=function(e){this._logEvent("deleteAccount-button-click",{accountType:e}),this._track("deleteAccount-button-click",{accountType:e})},e.prototype.keepAccountButtonClicked=function(e){this._logEvent("keepAccount-button-click",{accountType:e}),this._track("keepAccount-button-click",{accountType:e})},e.prototype.deleteAccountFormSubmit=function(e,t,n,r){void 0===n&&(n=""),void 0===r&&(r=""),this._logEvent("deleteAccount-form-submit",{isSuccess:e,accountType:t,errorSource:n,errorMessage:r}),this._track("deleteAccount-form-submit",{isSuccess:e,accountType:t,errorSource:n,errorMessage:r})},e.prototype.cancelFutureBillingClicked=function(){this._logEvent("cancelFutureBilling-button-click"),this._track("cancelFutureBilling-button-click")},e.prototype.confirmSubscriptionCancelClicked=function(){this._logEvent("confirmSubscriptionCancel-button-click"),this._track("confirmSubscriptionCancel-button-click")},e.prototype.continueUsingGrammarlyClicked=function(){this._logEvent("continueUsingGrammarly-button-click"),this._track("continueUsingGrammarly-button-click")},e.prototype.reactivateSubscriptionClicked=function(){this._logEvent("reactivateSubscription-button-click"),this._track("reactivateSubscription-button-click")},e.prototype.downloadReceiptButtonClicked=function(){this._logEvent("downloadReceipt-form-submit"),this._track("downloadReceipt-form-submit",{isSuccess:!0})},e.prototype.downloadReceiptError=function(e){this._exceptionLogger.error("downloadReceipt-form-error",e),this._track("downloadReceipt-form-submit",{isSuccess:!1,errorSource:t.errorSource.client,errorMessage:e.message})},e.prototype.appsPageShown=function(){this._logEvent("apps-page-show"),this._track("apps-page-show")},e.prototype.installAppClicked=function(e){this._logEvent("installApp-button-click",{app:e}),this._track("installApp-button-click",{app:e})},e.prototype.learnMoreClicked=function(e){this._logEvent("learnMoreAboutApp-button-click",{app:e}),this._track("learnMoreAboutApp-button-click",{app:e})},e.prototype.bannerActionClicked=function(e,t){this._logEvent("bannerMainAction-button-click",{bannerType:e,cta:t}),this._track("bannerMainAction-button-click",{bannerType:e,cta:t})},e.prototype.bannerCloseClicked=function(e){this._logEvent("bannerClose-button-click",{bannerType:e}),this._track("bannerClose-button-click",{bannerType:e})},e.prototype.bannerDismissClicked=function(e){this._logEvent("bannerDismiss-button-click",{bannerType:e}),this._track("bannerDismiss-button-click",{bannerType:e})},e.prototype.bannerLaterClicked=function(e){this._logEvent("bannerRemindLater-button-click",{bannerType:e}),this._track("bannerRemindLater-button-click",{bannerType:e})},e.prototype.bannerNotificationShow=function(e){this._logEvent("banner-notification-show",{bannerType:e}),this._track("banner-notification-show",{bannerType:e})},e.prototype.dictionaryOpened=function(){this._logEvent("dictionary-page-show"),this._track("dictionary-page-show")},e.prototype.addToDictionary=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=""),this._logEvent("addToDictionary-button-click",{isSuccess:e,errorSource:t,errorMessage:n}),this._track("addToDictionary-button-click")},e.prototype.removeFromDictionary=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=""),this._logEvent("removeFromDictionary-button-click",{isSuccess:e,errorSource:t,errorMessage:n}),this._track("removeFromDictionary-button-click")},e.prototype.languageOpened=function(){this._logEvent("language-page-show"),this._track("language-page-show")},e.prototype.showTour=function(e){this._logEvent("tour-popup-show",{theme:e}),this._track("tour-popup-show",{theme:e})},e.prototype.closeTour=function(e){this._logEvent("tour-popup-close",{theme:e}),this._track("tour-popup-close",{theme:e})},e.prototype.showTutorial=function(){this._logEvent("tutorial-popup-show"),this._track("tutorial-popup-show")},e.prototype.closeTutorial=function(){this._logEvent("tutorial-popup-close"),this._track("tutorial-popup-close")},e.prototype._getExtraProps=function(e){return e.reason||i.EventProps.fromAny(e)},e.prototype._logUnhandledPromiseRejection=function(e,t,n){var r=this._exceptionLogger.getLogger("unhandled.promiseRejection");("error"===e?r.error:r.warn).bind(r)("Unhandled rejection at promise: "+t,this._getExtraProps(n))},e.prototype._unhandledError=function(e){var t=e.error?e.error.message:e.message,n=o.isExternalException(e),r=n?i.Logging.LogLevel.INFO:i.Logging.LogLevel.ERROR,s=n?"unknownUnhandledError":"unhandledError";this._tsRoot.getCounter(s).increment();var a=e.reason;this._unhandledLogger.log(r,"Unhandled exception at "+e.filename+":"+e.lineno+":"+e.colno+" \n"+t,e.error,a&&{reason:a})},e.prototype._isEventSimulated=function(e){return!1===e.isTrusted},e.prototype._isExternalPromiseRejection=function(e,t){return o.isExternalException(e)||o.isExternalExceptionMessage(t)||this._isEventSimulated(e)},e.prototype._unhandledRejection=function(e){this._rejections.set(e.promise,Date.now());var t=e.reason?e.reason.message:e.message;this._isExternalPromiseRejection(e,t)?this._tsRoot.getCounter("unknownUnhandledPromise").increment():e.reason&&"gnar"===e.reason.target?this._exceptionLogger.getLogger("unhandled.promiseRejection.gnar").warn(t,this._getExtraProps(e)):(this._logUnhandledPromiseRejection("error",t,e),this._tsRoot.getCounter("unhandledPromise").increment())},e.prototype._rejectionHandled=function(e){var t=this._rejections.get(e.promise);this._rejections.delete(e.promise);var n=e.reason?e.reason.message:e.message;this._exceptionLogger.getLogger("handled.promiseRejection").error("Rejection handled at promise: "+n+" in "+(t?Date.now()-t:NaN)+" ms",e.reason)},e.prototype._visibilityChanged=function(){i.Monitoring.Logging.root.context.add({visibilityState:document.visibilityState})},e.prototype._logEvent=function(e,t){void 0===t&&(t={}),this._eventLogger.info(e,t)},e}();t.EditorTelemetry=s},1308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.gnar=e}return e.prototype.addToDictionaryButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/addToDictionary-button-click",object:"button",objectId:"addToDictionary",pageId:e})},e.prototype.advancedIssuesButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/advancedIssues-button-click",isDenali:!0,object:"button",objectId:"advancedIssues",pageId:e,placement:t})},e.prototype.advancedIssuesSidebarShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/advancedIssues-sidebar-show",isDenali:!0,object:"sidebar",objectId:"advancedIssues",pageId:e,withItemizedIssues:t})},e.prototype.alertCardShow=function(e,t,n){return this.gnar.track({action:"show",eventName:"desktopEditor/alert-card-show",isDenali:!0,object:"card",objectId:"alert",pageId:e,showOrder:t,sessionId:n})},e.prototype.alertMinicardButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/alertMinicard-button-click",isDenali:!0,object:"button",objectId:"alertMinicard",pageId:e,sessionId:t})},e.prototype.alertUnderlineClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"desktopEditor/alert-underline-click",isDenali:!0,object:"underline",objectId:"alert",pageId:e,writingMode:t,sessionId:n})},e.prototype.alertUnderlineHover=function(e,t,n){return this.gnar.track({action:"hover",eventName:"desktopEditor/alert-underline-hover",isDenali:!0,object:"underline",objectId:"alert",pageId:e,writingMode:t,sessionId:n})},e.prototype.appsPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/apps-page-show",object:"page",objectId:"apps",pageId:e,url:t})},e.prototype.assistantCloseButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/assistantClose-button-click",isDenali:!0,object:"button",objectId:"assistantClose",pageId:e,placement:t})},e.prototype.assistantOpenButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/assistantOpen-button-click",isDenali:!0,object:"button",objectId:"assistantOpen",pageId:e,placement:t})},e.prototype.assistantSidebarClose=function(e){return this.gnar.track({action:"close",eventName:"desktopEditor/assistant-sidebar-close",isDenali:!0,object:"sidebar",objectId:"assistant",pageId:e})},e.prototype.assistantSidebarShow=function(e){return this.gnar.track({action:"show",eventName:"desktopEditor/assistant-sidebar-show",isDenali:!0,object:"sidebar",objectId:"assistant",pageId:e})},e.prototype.backToClassicButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/backToClassic-button-click",object:"button",objectId:"backToClassic",pageId:e})},e.prototype.bannerCloseButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/bannerClose-button-click",object:"button",objectId:"bannerClose",bannerType:e,pageId:t})},e.prototype.bannerDismissButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/bannerDismiss-button-click",object:"button",objectId:"bannerDismiss",bannerType:e,pageId:t})},e.prototype.bannerMainActionButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"desktopEditor/bannerMainAction-button-click",object:"button",objectId:"bannerMainAction",bannerType:e,cta:t,pageId:n})},e.prototype.bannerNotificationShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/banner-notification-show",object:"notification",objectId:"banner",bannerType:e,pageId:t})},e.prototype.bannerRemindLaterButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/bannerRemindLater-button-click",object:"button",objectId:"bannerRemindLater",bannerType:e,pageId:t})},e.prototype.cancelFutureBillingButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/cancelFutureBilling-button-click",object:"button",objectId:"cancelFutureBilling",pageId:e})},e.prototype.confirmSubscriptionCancelButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/confirmSubscriptionCancel-button-click",object:"button",objectId:"confirmSubscriptionCancel",pageId:e})},e.prototype.contactSupportButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/contactSupport-button-click",object:"button",objectId:"contactSupport",pageId:e})},e.prototype.continueUsingGrammarlyButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/continueUsingGrammarly-button-click",object:"button",objectId:"continueUsingGrammarly",pageId:e})},e.prototype.copyDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/copyDocument-button-click",object:"button",objectId:"copyDocument",pageId:e})},e.prototype.copyToClipboardButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/copyToClipboard-button-click",isDenali:!0,object:"button",objectId:"copyToClipboard",pageId:e})},e.prototype.deleteAccountButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/deleteAccount-button-click",object:"button",objectId:"deleteAccount",accountType:e,pageId:t})},e.prototype.deleteAccountFormFail=function(e,t,n,r){return this.gnar.track({action:"fail",eventName:"desktopEditor/deleteAccount-form-fail",object:"form",objectId:"deleteAccount",accountType:e,pageId:t,fieldErrors:n,formErrorMessage:r})},e.prototype.deleteAccountFormSuccess=function(e,t){return this.gnar.track({action:"success",eventName:"desktopEditor/deleteAccount-form-success",object:"form",objectId:"deleteAccount",accountType:e,pageId:t})},e.prototype.deleteDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/deleteDocument-button-click",object:"button",objectId:"deleteDocument",pageId:e})},e.prototype.denaliDocumentPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/document-page-show",isDenali:!0,object:"page",objectId:"document",pageId:e,url:t})},e.prototype.detailedReportDownloadButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/detailedReportDownload-button-click",object:"button",objectId:"detailedReportDownload",pageId:e,reportScore:t})},e.prototype.detailedReportPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/detailedReport-page-show",object:"page",objectId:"detailedReport",pageId:e,url:t})},e.prototype.dismissAllButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"desktopEditor/dismissAll-button-click",isDenali:!0,object:"button",objectId:"dismissAll",lensName:e,pageId:t,sessionId:n})},e.prototype.documentGenreButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/documentGenre-button-click",object:"button",objectId:"documentGenre",documentGenre:e,pageId:t})},e.prototype.documentPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/document-page-show",object:"page",objectId:"document",pageId:e,url:t})},e.prototype.documentShow=function(e){return this.gnar.track({action:"show",eventName:"desktopEditor/document-show",object:"document",pageId:e})},e.prototype.documentStatisticsButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/documentStatistics-button-click",isDenali:!0,object:"button",objectId:"documentStatistics",pageId:e})},e.prototype.documentTypeUpdate=function(e,t){return this.gnar.track({action:"update",eventName:"desktopEditor/document-type-update",object:"type",objectId:"document",documentType:e,pageId:t})},e.prototype.downloadButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/download-button-click",isDenali:!0,object:"button",objectId:"download",pageId:e})},e.prototype.downloadDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/downloadDocument-button-click",object:"button",objectId:"downloadDocument",pageId:e})},e.prototype.downloadReceiptButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/downloadReceipt-button-click",object:"button",objectId:"downloadReceipt",pageId:e})},e.prototype.editEmailButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/editEmail-button-click",object:"button",objectId:"editEmail",pageId:e})},e.prototype.editEmailFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"desktopEditor/editEmail-form-fail",object:"form",objectId:"editEmail",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editEmailFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"desktopEditor/editEmail-form-success",object:"form",objectId:"editEmail",pageId:e})},e.prototype.editNameButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/editName-button-click",object:"button",objectId:"editName",pageId:e})},e.prototype.editNameFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"desktopEditor/editName-form-fail",object:"form",objectId:"editName",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editNameFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"desktopEditor/editName-form-success",object:"form",objectId:"editName",pageId:e})},e.prototype.editPasswordButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/editPassword-button-click",object:"button",objectId:"editPassword",pageId:e})},e.prototype.editPasswordFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"desktopEditor/editPassword-form-fail",object:"form",objectId:"editPassword",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editPasswordFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"desktopEditor/editPassword-form-success",object:"form",objectId:"editPassword",pageId:e})},e.prototype.entireDocumentCopy=function(e){return this.gnar.track({action:"copy",eventName:"desktopEditor/entire-document-copy",object:"document",objectId:"entire",pageId:e})},e.prototype.entireDocumentPaste=function(e){return this.gnar.track({action:"paste",eventName:"desktopEditor/entire-document-paste",object:"document",objectId:"entire",pageId:e})},e.prototype.extensionPopupPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/extensionPopup-page-show",object:"page",objectId:"extensionPopup",pageId:e,url:t})},e.prototype.getPremiumButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/getPremium-button-click",isDenali:!0,object:"button",objectId:"getPremium",pageId:e,placement:t})},e.prototype.goalsFormSuccess=function(e,t,n,r,i,o,s){return this.gnar.track({action:"success",eventName:"desktopEditor/goals-form-success",isDenali:!0,object:"form",objectId:"goals",pageId:e,source:t,audience:n,domain:r,emotion:i,intent:o,style:s})},e.prototype.goalsPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/goals-popup-show",isDenali:!0,object:"popup",objectId:"goals",pageId:e,source:t})},e.prototype.installAppButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/installApp-button-click",object:"button",objectId:"installApp",app:e,pageId:t})},e.prototype.keepAccountButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/keepAccount-button-click",object:"button",objectId:"keepAccount",accountType:e,pageId:t})},e.prototype.learnMoreAboutAppButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/learnMoreAboutApp-button-click",object:"button",objectId:"learnMoreAboutApp",app:e,pageId:t})},e.prototype.lensSidebarShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/lens-sidebar-show",isDenali:!0,object:"sidebar",objectId:"lens",lensName:e,pageId:t})},e.prototype.myGrammarlyPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/myGrammarly-page-show",object:"page",objectId:"myGrammarly",pageId:e,url:t})},e.prototype.newDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/newDocument-button-click",object:"button",objectId:"newDocument",pageId:e})},e.prototype.newDocumentDenaliButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/newDocument-button-click",isDenali:!0,object:"button",objectId:"newDocument",pageId:e})},e.prototype.newTitleButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/newTitle-button-click",isDenali:!0,object:"button",objectId:"newTitle",pageId:e})},e.prototype.notAuthorizedUserSignout=function(e){return this.gnar.track({action:"signout",eventName:"desktopEditor/notAuthorized-user-signout",object:"user",objectId:"notAuthorized",pageId:e})},e.prototype.openLensButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"desktopEditor/openLens-button-click",isDenali:!0,object:"button",objectId:"openLens",lensName:e,pageId:t,sessionId:n})},e.prototype.plagiarismButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/plagiarism-button-click",isDenali:!0,object:"button",objectId:"plagiarism",pageId:e,placement:t})},e.prototype.printButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/print-button-click",isDenali:!0,object:"button",objectId:"print",pageId:e})},e.prototype.professionalProofreadingButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/professionalProofreading-button-click",isDenali:!0,object:"button",objectId:"professionalProofreading",pageId:e,placement:t})},e.prototype.profileAccountPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/profileAccount-page-show",object:"page",objectId:"profileAccount",pageId:e,url:t})},e.prototype.profileDictionaryPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/profileDictionary-page-show",object:"page",objectId:"profileDictionary",pageId:e,url:t})},e.prototype.profileLanguagePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/profileLanguage-page-show",object:"page",objectId:"profileLanguage",pageId:e,url:t})},e.prototype.reactivateSubscriptionButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/reactivateSubscription-button-click",object:"button",objectId:"reactivateSubscription",pageId:e})},e.prototype.removeFromDictionaryButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/removeFromDictionary-button-click",object:"button",objectId:"removeFromDictionary",pageId:e})},e.prototype.reportPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/report-popup-show",object:"popup",objectId:"report",pageId:e,reportScore:t})},e.prototype.selectLanguageButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/selectLanguage-button-click",object:"button",objectId:"selectLanguage",language:e,pageId:t})},e.prototype.setGoalsButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/setGoals-button-click",isDenali:!0,object:"button",objectId:"setGoals",pageId:e})},e.prototype.settingToggleClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"desktopEditor/setting-toggle-click",object:"toggle",objectId:"setting",isEnabled:e,pageId:t,settingName:n})},e.prototype.showGoalsNewDocumentFormSuccess=function(e,t,n){return this.gnar.track({action:"success",eventName:"desktopEditor/showGoalsNewDocument-form-success",isDenali:!0,object:"form",objectId:"showGoalsNewDocument",isEnabled:e,pageId:t,source:n})},e.prototype.subscriptionBillingInfoPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionBillingInfo-page-show",object:"page",objectId:"subscriptionBillingInfo",pageId:e,url:t})},e.prototype.subscriptionCancelDonePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionCancelDone-page-show",object:"page",objectId:"subscriptionCancelDone",pageId:e,url:t})},e.prototype.subscriptionCancelPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionCancel-page-show",object:"page",objectId:"subscriptionCancel",pageId:e,url:t})},e.prototype.subscriptionManagePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionManage-page-show",object:"page",objectId:"subscriptionManage",pageId:e,url:t})},e.prototype.subscriptionSummaryPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionSummary-page-show",object:"page",objectId:"subscriptionSummary",pageId:e,url:t})},e.prototype.suggestedReplacementButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"desktopEditor/suggestedReplacement-button-click",isDenali:!0,object:"button",objectId:"suggestedReplacement",pageId:e,writingMode:t,sessionId:n})},e.prototype.supportButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/support-button-click",object:"button",objectId:"support",pageId:e})},e.prototype.supportLinkClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/support-link-click",object:"link",objectId:"support",pageId:e,placement:t})},e.prototype.switchToDenaliButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/switchToDenali-button-click",object:"button",objectId:"switchToDenali",pageId:e})},e.prototype.tourPopupClose=function(e,t){return this.gnar.track({action:"close",eventName:"desktopEditor/tour-popup-close",object:"popup",objectId:"tour",pageId:e,theme:t})},e.prototype.tourPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/tour-popup-show",object:"popup",objectId:"tour",pageId:e,theme:t})},e.prototype.tutorialPopupClose=function(e){return this.gnar.track({action:"close",eventName:"desktopEditor/tutorial-popup-close",object:"popup",objectId:"tutorial",pageId:e})},e.prototype.tutorialPopupShow=function(e){return this.gnar.track({action:"show",eventName:"desktopEditor/tutorial-popup-show",object:"popup",objectId:"tutorial",pageId:e})},e.prototype.uploadDocumentFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"desktopEditor/uploadDocument-form-fail",object:"form",objectId:"uploadDocument",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.uploadDocumentFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"desktopEditor/uploadDocument-form-success",object:"form",objectId:"uploadDocument",pageId:e})},e.prototype.welcomeTourPopupClose=function(e,t){return this.gnar.track({action:"close",eventName:"desktopEditor/welcomeTour-popup-close",isDenali:!0,object:"popup",objectId:"welcomeTour",pageId:e,theme:t})},e.prototype.welcomeTourPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/welcomeTour-popup-show",isDenali:!0,object:"popup",objectId:"welcomeTour",pageId:e,theme:t})},e}();t.GnarSpec=r},1309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.gnar=e}return e.prototype.addToDictionaryButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/addToDictionary-button-click",object:"button",objectId:"addToDictionary",pageId:e})},e.prototype.advancedIssuesButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/advancedIssues-button-click",isDenali:!0,object:"button",objectId:"advancedIssues",pageId:e,placement:t})},e.prototype.advancedIssuesSidebarShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/advancedIssues-sidebar-show",isDenali:!0,object:"sidebar",objectId:"advancedIssues",pageId:e,withItemizedIssues:t})},e.prototype.alertCardShow=function(e,t,n){return this.gnar.track({action:"show",eventName:"editor/alert-card-show",isDenali:!0,object:"card",objectId:"alert",pageId:e,showOrder:t,sessionId:n})},e.prototype.alertMinicardButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/alertMinicard-button-click",isDenali:!0,object:"button",objectId:"alertMinicard",pageId:e,sessionId:t})},e.prototype.alertUnderlineClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"editor/alert-underline-click",isDenali:!0,object:"underline",objectId:"alert",pageId:e,writingMode:t,sessionId:n})},e.prototype.alertUnderlineHover=function(e,t,n){return this.gnar.track({action:"hover",eventName:"editor/alert-underline-hover",isDenali:!0,object:"underline",objectId:"alert",pageId:e,writingMode:t,sessionId:n})},e.prototype.appsPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/apps-page-show",object:"page",objectId:"apps",pageId:e,url:t})},e.prototype.assistantCloseButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/assistantClose-button-click",isDenali:!0,object:"button",objectId:"assistantClose",pageId:e,placement:t})},e.prototype.assistantOpenButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/assistantOpen-button-click",isDenali:!0,object:"button",objectId:"assistantOpen",pageId:e,placement:t})},e.prototype.assistantSidebarClose=function(e){return this.gnar.track({action:"close",eventName:"editor/assistant-sidebar-close",isDenali:!0,object:"sidebar",objectId:"assistant",pageId:e})},e.prototype.assistantSidebarShow=function(e){return this.gnar.track({action:"show",eventName:"editor/assistant-sidebar-show",isDenali:!0,object:"sidebar",objectId:"assistant",pageId:e})},e.prototype.backToClassicButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/backToClassic-button-click",object:"button",objectId:"backToClassic",pageId:e})},e.prototype.bannerCloseButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/bannerClose-button-click",object:"button",objectId:"bannerClose",bannerType:e,pageId:t})},e.prototype.bannerDismissButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/bannerDismiss-button-click",object:"button",objectId:"bannerDismiss",bannerType:e,pageId:t})},e.prototype.bannerMainActionButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"editor/bannerMainAction-button-click",object:"button",objectId:"bannerMainAction",bannerType:e,cta:t,pageId:n})},e.prototype.bannerNotificationShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/banner-notification-show",object:"notification",objectId:"banner",bannerType:e,pageId:t})},e.prototype.bannerRemindLaterButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/bannerRemindLater-button-click",object:"button",objectId:"bannerRemindLater",bannerType:e,pageId:t})},e.prototype.cancelFutureBillingButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/cancelFutureBilling-button-click",object:"button",objectId:"cancelFutureBilling",pageId:e})},e.prototype.confirmSubscriptionCancelButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/confirmSubscriptionCancel-button-click",object:"button",objectId:"confirmSubscriptionCancel",pageId:e})},e.prototype.contactSupportButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/contactSupport-button-click",object:"button",objectId:"contactSupport",pageId:e})},e.prototype.continueUsingGrammarlyButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/continueUsingGrammarly-button-click",object:"button",objectId:"continueUsingGrammarly",pageId:e})},e.prototype.copyDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/copyDocument-button-click",object:"button",objectId:"copyDocument",pageId:e})},e.prototype.copyToClipboardButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/copyToClipboard-button-click",isDenali:!0,object:"button",objectId:"copyToClipboard",pageId:e})},e.prototype.deleteAccountButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/deleteAccount-button-click",object:"button",objectId:"deleteAccount",accountType:e,pageId:t})},e.prototype.deleteAccountFormFail=function(e,t,n,r){return this.gnar.track({action:"fail",eventName:"editor/deleteAccount-form-fail",object:"form",objectId:"deleteAccount",accountType:e,pageId:t,fieldErrors:n,formErrorMessage:r})},e.prototype.deleteAccountFormSuccess=function(e,t){return this.gnar.track({action:"success",eventName:"editor/deleteAccount-form-success",object:"form",objectId:"deleteAccount",accountType:e,pageId:t})},e.prototype.deleteDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/deleteDocument-button-click",object:"button",objectId:"deleteDocument",pageId:e})},e.prototype.denaliDocumentPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/document-page-show",isDenali:!0,object:"page",objectId:"document",pageId:e,url:t})},e.prototype.detailedReportDownloadButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/detailedReportDownload-button-click",object:"button",objectId:"detailedReportDownload",pageId:e,reportScore:t})},e.prototype.detailedReportPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/detailedReport-page-show",object:"page",objectId:"detailedReport",pageId:e,url:t})},e.prototype.dismissAllButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"editor/dismissAll-button-click",isDenali:!0,object:"button",objectId:"dismissAll",lensName:e,pageId:t,sessionId:n})},e.prototype.documentGenreButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/documentGenre-button-click",object:"button",objectId:"documentGenre",documentGenre:e,pageId:t})},e.prototype.documentPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/document-page-show",object:"page",objectId:"document",pageId:e,url:t})},e.prototype.documentShow=function(e){return this.gnar.track({action:"show",eventName:"editor/document-show",object:"document",pageId:e})},e.prototype.documentStatisticsButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/documentStatistics-button-click",isDenali:!0,object:"button",objectId:"documentStatistics",pageId:e})},e.prototype.documentTypeUpdate=function(e,t){return this.gnar.track({action:"update",eventName:"editor/document-type-update",object:"type",objectId:"document",documentType:e,pageId:t})},e.prototype.downloadButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/download-button-click",isDenali:!0,object:"button",objectId:"download",pageId:e})},e.prototype.downloadDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/downloadDocument-button-click",object:"button",objectId:"downloadDocument",pageId:e})},e.prototype.downloadReceiptButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/downloadReceipt-button-click",object:"button",objectId:"downloadReceipt",pageId:e})},e.prototype.editEmailButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/editEmail-button-click",object:"button",objectId:"editEmail",pageId:e})},e.prototype.editEmailFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"editor/editEmail-form-fail",object:"form",objectId:"editEmail",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editEmailFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"editor/editEmail-form-success",object:"form",objectId:"editEmail",pageId:e})},e.prototype.editNameButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/editName-button-click",object:"button",objectId:"editName",pageId:e})},e.prototype.editNameFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"editor/editName-form-fail",object:"form",objectId:"editName",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editNameFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"editor/editName-form-success",object:"form",objectId:"editName",pageId:e})},e.prototype.editPasswordButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/editPassword-button-click",object:"button",objectId:"editPassword",pageId:e})},e.prototype.editPasswordFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"editor/editPassword-form-fail",object:"form",objectId:"editPassword",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editPasswordFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"editor/editPassword-form-success",object:"form",objectId:"editPassword",pageId:e})},e.prototype.entireDocumentCopy=function(e){return this.gnar.track({action:"copy",eventName:"editor/entire-document-copy",object:"document",objectId:"entire",pageId:e})},e.prototype.entireDocumentPaste=function(e){return this.gnar.track({action:"paste",eventName:"editor/entire-document-paste",object:"document",objectId:"entire",pageId:e})},e.prototype.extensionPopupPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/extensionPopup-page-show",object:"page",objectId:"extensionPopup",pageId:e,url:t})},e.prototype.getPremiumButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/getPremium-button-click",isDenali:!0,object:"button",objectId:"getPremium",pageId:e,placement:t})},e.prototype.goalsFormSuccess=function(e,t,n,r,i,o,s){return this.gnar.track({action:"success",eventName:"editor/goals-form-success",isDenali:!0,object:"form",objectId:"goals",pageId:e,source:t,audience:n,domain:r,emotion:i,intent:o,style:s})},e.prototype.goalsPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/goals-popup-show",isDenali:!0,object:"popup",objectId:"goals",pageId:e,source:t})},e.prototype.installAppButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/installApp-button-click",object:"button",objectId:"installApp",app:e,pageId:t})},e.prototype.keepAccountButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/keepAccount-button-click",object:"button",objectId:"keepAccount",accountType:e,pageId:t})},e.prototype.learnMoreAboutAppButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/learnMoreAboutApp-button-click",object:"button",objectId:"learnMoreAboutApp",app:e,pageId:t})},e.prototype.lensSidebarShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/lens-sidebar-show",isDenali:!0,object:"sidebar",objectId:"lens",lensName:e,pageId:t})},e.prototype.myGrammarlyPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/myGrammarly-page-show",object:"page",objectId:"myGrammarly",pageId:e,url:t})},e.prototype.newDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/newDocument-button-click",object:"button",objectId:"newDocument",pageId:e})},e.prototype.newDocumentDenaliButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/newDocument-button-click",isDenali:!0,object:"button",objectId:"newDocument",pageId:e})},e.prototype.newTitleButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/newTitle-button-click",isDenali:!0,object:"button",objectId:"newTitle",pageId:e})},e.prototype.notAuthorizedUserSignout=function(e){return this.gnar.track({action:"signout",eventName:"editor/notAuthorized-user-signout",object:"user",objectId:"notAuthorized",pageId:e})},e.prototype.openLensButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"editor/openLens-button-click",isDenali:!0,object:"button",objectId:"openLens",lensName:e,pageId:t,sessionId:n})},e.prototype.plagiarismButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/plagiarism-button-click",isDenali:!0,object:"button",objectId:"plagiarism",pageId:e,placement:t})},e.prototype.printButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/print-button-click",isDenali:!0,object:"button",objectId:"print",pageId:e})},e.prototype.professionalProofreadingButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/professionalProofreading-button-click",isDenali:!0,object:"button",objectId:"professionalProofreading",pageId:e,placement:t})},e.prototype.profileAccountPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/profileAccount-page-show",object:"page",objectId:"profileAccount",pageId:e,url:t})},e.prototype.profileDictionaryPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/profileDictionary-page-show",object:"page",objectId:"profileDictionary",pageId:e,url:t})},e.prototype.profileLanguagePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/profileLanguage-page-show",object:"page",objectId:"profileLanguage",pageId:e,url:t})},e.prototype.reactivateSubscriptionButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/reactivateSubscription-button-click",object:"button",objectId:"reactivateSubscription",pageId:e})},e.prototype.removeFromDictionaryButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/removeFromDictionary-button-click",object:"button",objectId:"removeFromDictionary",pageId:e})},e.prototype.reportPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/report-popup-show",object:"popup",objectId:"report",pageId:e,reportScore:t})},e.prototype.selectLanguageButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/selectLanguage-button-click",object:"button",objectId:"selectLanguage",language:e,pageId:t})},e.prototype.setGoalsButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/setGoals-button-click",isDenali:!0,object:"button",objectId:"setGoals",pageId:e})},e.prototype.settingToggleClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"editor/setting-toggle-click",object:"toggle",objectId:"setting",isEnabled:e,pageId:t,settingName:n})},e.prototype.showGoalsNewDocumentFormSuccess=function(e,t,n){return this.gnar.track({action:"success",eventName:"editor/showGoalsNewDocument-form-success",isDenali:!0,object:"form",objectId:"showGoalsNewDocument",isEnabled:e,pageId:t,source:n})},e.prototype.subscriptionBillingInfoPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionBillingInfo-page-show",object:"page",objectId:"subscriptionBillingInfo",pageId:e,url:t})},e.prototype.subscriptionCancelDonePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionCancelDone-page-show",object:"page",objectId:"subscriptionCancelDone",pageId:e,url:t})},e.prototype.subscriptionCancelPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionCancel-page-show",object:"page",objectId:"subscriptionCancel",pageId:e,url:t})},e.prototype.subscriptionManagePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionManage-page-show",object:"page",objectId:"subscriptionManage",pageId:e,url:t})},e.prototype.subscriptionSummaryPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionSummary-page-show",object:"page",objectId:"subscriptionSummary",pageId:e,url:t})},e.prototype.suggestedReplacementButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"editor/suggestedReplacement-button-click",isDenali:!0,object:"button",objectId:"suggestedReplacement",pageId:e,writingMode:t,sessionId:n})},e.prototype.supportButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/support-button-click",object:"button",objectId:"support",pageId:e})},e.prototype.supportLinkClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/support-link-click",object:"link",objectId:"support",pageId:e,placement:t})},e.prototype.switchToDenaliButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/switchToDenali-button-click",object:"button",objectId:"switchToDenali",pageId:e})},e.prototype.tourPopupClose=function(e,t){return this.gnar.track({action:"close",eventName:"editor/tour-popup-close",object:"popup",objectId:"tour",pageId:e,theme:t})},e.prototype.tourPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/tour-popup-show",object:"popup",objectId:"tour",pageId:e,theme:t})},e.prototype.tutorialPopupClose=function(e){return this.gnar.track({action:"close",eventName:"editor/tutorial-popup-close",object:"popup",objectId:"tutorial",pageId:e})},e.prototype.tutorialPopupShow=function(e){return this.gnar.track({action:"show",eventName:"editor/tutorial-popup-show",object:"popup",objectId:"tutorial",pageId:e})},e.prototype.uploadDocumentFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"editor/uploadDocument-form-fail",object:"form",objectId:"uploadDocument",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.uploadDocumentFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"editor/uploadDocument-form-success",object:"form",objectId:"uploadDocument",pageId:e})},e.prototype.welcomeTourPopupClose=function(e,t){return this.gnar.track({action:"close",eventName:"editor/welcomeTour-popup-close",isDenali:!0,object:"popup",objectId:"welcomeTour",pageId:e,theme:t})},e.prototype.welcomeTourPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/welcomeTour-popup-show",isDenali:!0,object:"popup",objectId:"welcomeTour",pageId:e,theme:t})},e}();t.GnarSpec=r},1310:function(e,t,n){"use strict";function r(){try{var e=localStorage.getItem("pageReloadReason");if(!e)return;localStorage.removeItem("pageReloadReason");var t=JSON.parse(e);(function(e,t){return window.location.href===e&&Date.now()-t<f})(t.location,t.timestamp)&&o.Monitoring.Logging.root.info("Page was reloaded",t)}catch(e){}}function i(e){var t=o.TimeSeriesImpl.MetricsStorage.createRoot(s.appConfig.env+"."+s.appConfig.app.nameWeb,s.appConfig.api.felogUrl,a.RxFetch.nativeFetch.bind(window));o.TimeSeriesImpl.MetricsConfig.configure(t);var n=function(){function e(e){var t=this;this._sink=e,this._counters=new Map;var n=o.Monitoring.TimeSeries.root.getMetric("logging.levels");Object.keys(o.Logging.LogLevel).map(function(e){return o.Logging.LogLevel[e]}).filter(function(e){return"number"==typeof e}).forEach(function(e){return t._counters.set(e,n.getCounter(o.Logging.LogLevel[e]))})}return e.prototype.append=function(e){var t=this._counters.get(e.level);return t&&t.increment(),this._sink.append(e)},e}(),i=function(){function e(e){this._sink=e,this._shortRateReporter={name:"short",indicator:new c.RateLimiter.RateLimitIndicator(new c.RateLimiter(30,2e3),1e4),counter:o.Monitoring.TimeSeries.root.getCounter("logRates.short")},this._longRateReporter={name:"long",indicator:new c.RateLimiter.RateLimitIndicator(new c.RateLimiter(120,24e4),3e4),counter:o.Monitoring.TimeSeries.root.getCounter("logRates.long")},this._counting=o.Monitoring.TimeSeries.root.getCounter("logRates.either"),this._countingStarted=0,this._droppingLimiter=new c.RateLimiter(2,6e4),this._dropped=0}return e.prototype.append=function(t){var n=this._shortRateReporter.indicator.hit(),r=this._longRateReporter.indicator.hit();if((n.wasTriggered||r.wasTriggered)&&(n.wasTriggered&&n.aboveThreshold&&this._shortRateReporter.counter.increment(),r.wasTriggered&&r.aboveThreshold&&this._longRateReporter.counter.increment(),n.aboveThreshold||r.aboveThreshold?this._counts||(this._counting.increment(),this._counts=new c.LRUCache(50),this._countingStarted=Date.now(),this._sink.append(this._createTriggeredEvent(t,"Logging rate is above threshold",{short:n,long:r})).catch(console.warn)):(this._counts=void 0,this._sink.append(this._createTriggeredEvent(t,"Logging rate is back to normal",{dropped:this._dropped})).catch(console.warn))),this._counts){var i=this._eventToString(t),o=this._counts.set(i,function(e){return(e||0)+1})||0;return o/((Date.now()-this._countingStarted)/1e3)>e.DROP_RATE&&o>e.DROP_COUNT&&!this._droppingLimiter.hit()?(this._drop(),Promise.reject("Log message discarded due to rate limiting: "+t.message)):this._sink.append(t)}return this._sink.append(t)},e.prototype._drop=function(){++this._dropped},e.prototype._createTriggeredEvent=function(e,t,n){return new o.LoggingImpl.LogEvent(o.Logging.LogLevel.ERROR,t,"editor.logging.rate",Date.now(),void 0,n,e.context)},e.prototype._eventToString=function(e){return e.level+e.logger+e.message},e.DROP_RATE=.5,e.DROP_COUNT=15,e}(),f=function(e,t){return void 0===t&&(t=!0),new o.LoggingImpl.PostFelogClient(e,s.appConfig.app.nameWeb,s.buildInfo.version,s.appConfig.env,a.RxFetch.request("logs"),t)},g=o.Logging.LogLevel.fromString(s.appConfig.logLevel),m=function(e,t){return new i(new n(new o.LoggingImpl.LogQueue(f(s.appConfig.api.felogUrl+e,t),p,h)))},_=s.appConfig.collectLogs?m("/log",!0):{append:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.resolve()}},y=s.appConfig.collectCrashLogs?m("/crash",!1):void 0,v=function(e){return console.error("Error sending logs",e)},b=o.Logging.LogLevel.fromString(s.appConfig.crashLogLevel),w=s.appConfig.app.nameWeb,E=function(e){e.level>=g&&(s.appConfig.copyLogsToConsole&&u.ConsoleLogger.printToConsole(e),_.append(e).catch(v))},S=new u.TreeContext,C=E;if(y){var k=new u.SimpleLogger(w+".crashLogs",b,function(e){return y.append(e).catch(v)},new u.TreeContext(S)),T=new l.CrashLogWrapper(100,o.Logging.LogLevel.ERROR,E,k);C=T.sink,c.registerDebugHelper("printLogs",function(){T.logs.forEach(u.ConsoleLogger.printToConsole)})}var x=new u.SimpleLogger(w,Math.min(g,b),C,S);o.LoggingImpl.LoggingConfig.configure(x);var A=c.StringUtils.alphanumeric(d),I=e.info,O=I.browser,D=I.os,P=I.version,N=I.type,M=I.parsedVersion,R={browser:O,os:D,version:String(P),type:N,raw:navigator.userAgent};o.Monitoring.Logging.root.context.add({userAgent:R,sessionId:A}),o.Monitoring.TimeSeries.root.getCounter("sessions").increment(),r(),o.Monitoring.Logging.root.info("Application starting. HTTP referrer: "+document.referrer),M.value.isFailure()&&o.Monitoring.Logging.root.warn("Incorrect environment version",M.value.failed().get(),{info:e.info}),c.registerDebugHelper("kibana",function(){var e=encodeURIComponent("http://kibana.grammarly.io/app/kibana#/discover?_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-30m,mode:quick,to:now))&_a=(columns:!(_source),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:'f-log-editor-*',key:context.sessionId,negate:!f,value:'"+A+"'),query:(match:(context.sessionId:(query:'"+A+"',type:phrase))))),index:'f-log-editor-*',interval:auto,query:(query_string:(analyze_wildcard:!t,lowercase_expanded_terms:!f,query:'*')),sort:!('@timestamp',desc))");fetch("https://private.gram.ly/shorten?url="+e).then(function(e){return e.text()}).then(function(e){return o.Monitoring.Logging.root.info("Kibana URL for this session: ",e)})})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),s=n(63),a=n(174),c=n(2),u=n(292),l=n(290),d=14,p=100,h=1e4,f=3e5;t.initializeMonitoring=i},1311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(){function e(e,t,n){this._profile=e,this._subscription=t,this._gaClient=n,this._log=r.Monitoring.Logging.getLogger("pixels"),this._counter=r.Monitoring.TimeSeries.root.getCounter("pixels")}return e.doTracking=function(t,n,r,i){n&&n.isPremiumConversion&&new e(t,n,i)._doTracking(r)},e.prototype._doTracking=function(e){var t=this;this._log.info("Forcing premium conversion tracking"),this._counter.increment(),e.ackPremiumConversion().then(function(){t._try(function(){return t._googleAdwordsPixel()},"googleAdwordsPixel"),t._try(function(){return t._universalTracking()},"universalTracking")}).catch(function(e){return t._log.error("ackPremiumConversion failed",e)})},e.prototype._try=function(e,t){try{e()}catch(e){this._log.error("Error while calling tracking pixel "+t,e)}},e.prototype._googleAdwordsPixel=function(){var e,t=this._subscription.currentPlan.periodMonths;switch(t){case 1:e="DWnkCMbLrwkQ4ozj9gM";break;case 3:e="lqBBCL7MrwkQ4ozj9gM";break;case 12:e="w4TvCLbNrwkQ4ozj9gM";break;default:e="-eBYCKTnylgQ4ozj9gM",this._log.error("Unexpected periodMonths "+t)}new Image(1,1).src="https://www.googleadservices.com/pagead/conversion/1054393954/?label="+e+"&guid=ON&script=0"},e.prototype._universalTracking=function(){var e=this._subscription.currentPlan;this._gaClient.ga("require","displayfeatures"),this._gaClient.ga("require","ecommerce"),this._gaClient.ga("send","pageview","/thankyou"),this._gaClient.ga("ecommerce:addTransaction",{id:this._profile.email,affiliation:"",revenue:e.price.toString(),shipping:"",tax:""}),this._gaClient.ga("ecommerce:addItem",{id:this._profile.email,sku:e.periodMonths+"M",name:e.title.toString(),category:"Grammarly Subscription",price:e.price.toString(),quantity:"1"}),this._gaClient.ga("ecommerce:send")},e}();t.PixelTracking=i},1312:function(e,t,n){"use strict";function r(e){return/Unhandled exception at https?:\/\//.test(e)&&!/grammarly|cloudfront/.test(e)}function i(e){return u.test(e)}function o(e){return r(e)||c.test(e)}function s(e){var t=e.reason||e.error,n=t&&t.stack;if(n&&-1!==n.indexOf("denali"))return!1;if(!e.filename||/^javascript:/.test(e.filename))return!0;if(n&&i(n))return!0;try{return o((t?t.message:e.message)||JSON.stringify(t||a.EventProps.fromAny(e)))}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),c=new RegExp(["^(Script error.?|Javascript error: Script error.? on line 0)$","(.*__gCrWeb.autofill.extractForms'\\))","(.*safari-extension.*)|(.*chrome-extension.*)|(.*moz-extension.*)",'Permission denied to access property "',"a[b].target.className.indexOf","Uncaught TypeError: Cannot set property 'install' of undefined"].join("|"),"m"),u=new RegExp(["(.*safari-extension.*)|(.*chrome-extension.*)|(.*moz-extension.*)","<anonymous>"].join("|"),"m");t.containsExternalUrl=r,t.isExternalExceptionStack=i,t.isExternalExceptionMessage=o,t.isExternalException=s},1313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(6),o=n(2),s="wootric-modal",a="wootric-text";!function(e){function t(e){return e&&e.id===a}e.isWootricTextArea=t;var n=function(){function e(e,t,n){var o=this;this._ls=e,this._isWootricTest=t,this._experimentGroup=n,this._log=r.Monitoring.Logging.getLogger("external.wootric"),this._isLoaded=this._isEnabled(),this._runOnLoad=!1,this._containerObserver=new MutationObserver(function(e){e.forEach(function(e){Array.from(e.addedNodes).forEach(function(e){if(e&&e.id===s){o.height.set(0);var t=document.getElementById(s);t&&o._surveyObserver.observe(t,{subtree:!0,attributes:!0,attributeFilter:["style","class"]})}})})}),this._surveyObserver=new MutationObserver(function(e){var t=document.getElementById(s);if(t)if(t.classList.contains("show")){var n=t.getBoundingClientRect();o.height.set(n.height)}else o.height.set(0)}),this.height=i.Atom.create(0)}return e.prototype._isEnabled=function(){return void 0!==window.wootric&&void 0!==window.WootricSurvey},e.prototype.load=function(e,t){var n=this;if(this._containerObserver.observe(document.body,{childList:!0}),this._isEnabled())this._isLoaded=!0;else{this._log.info("Loading Wootric snippet..");var r=document.createElement("script");r.type="text/javascript",r.async=!0;var i={email:e,created_at:Math.floor(t.getOrElse(new Date).getTime()/1e3),modal_footprint:"compact",account_token:"NPS-a6a6ec54",properties:{group:this._experimentGroup}};r.innerHTML="\n        "+(this._isWootricTest?"wootric_survey_immediately = true;":"")+"\n        window.wootricSettings = "+JSON.stringify(i)+";\n        ",document.body.appendChild(r);var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://disutgh7q0ncc.cloudfront.net/beacon.js",o.onload=function(){n._isLoaded=!0,n._runOnLoad&&(n._runOnLoad=!1,n.takeSurvey())},document.body.appendChild(o)}},e.prototype.getAppliedCount=function(){try{var e=this._ls.getItem("wootric_applied_alerts"),t=e?JSON.parse(e):0;return t&&"number"==typeof t?t:0}catch(e){return this._log.warn("Can't get applied alerts count",e),0}},e.prototype.updateAppliedCount=function(e){try{var t=this.getAppliedCount();this._ls.setItem("wootric_applied_alerts",e(t).toString())}catch(e){this._log.warn("Can't set applied alerts count",e)}},e.prototype.takeSurvey=function(){if(this._isLoaded){this._log.info("Wootric run called"),o.invariant(this._isEnabled(),"Wootric snippet should be loaded");try{window.wootric("run")}catch(e){this._log.warn("Can't run survey",e)}}else this._log.info("Wootric run called. Waiting for beacon onload..."),this._runOnLoad=!0},e.prototype.dispose=function(){if(this._isEnabled())try{window.WootricSurvey.stop()}catch(e){this._log.warn("Can't stop survey",e)}var e=document.getElementById(s);e&&e.remove(),this.height.set(0),this._containerObserver.disconnect(),this._surveyObserver.disconnect()},e}();e.WootricListenerModelImpl=n;var c=function(){function e(e,t,n,r){void 0===r&&(r=5),this._wootricListenerImpl=e,this._appliedAlertsCount=t,this._userInfo=n,this._appliedAlertsLimit=r,this._subs=[],this.height=this._wootricListenerImpl.height}return e.prototype._takeSurvey=function(e){return this._wootricListenerImpl.getAppliedCount()>=this._appliedAlertsLimit&&(e&&this._wootricListenerImpl.takeSurvey(),!0)},e.prototype.init=function(){var e=this;this._wootricListenerImpl.load(this._userInfo.id,this._userInfo.registrationDate),this._takeSurvey(!0)||this._subs.push(this._appliedAlertsCount.take(this._appliedAlertsLimit).subscribe(function(t){e._wootricListenerImpl.updateAppliedCount(function(e){return e+1}),e._takeSurvey(!1)&&(e._subs.forEach(function(e){return e.unsubscribe()}),e._subs=[])}))},e.prototype.dispose=function(){this._subs.forEach(function(e){return e.unsubscribe()}),this._wootricListenerImpl.dispose()},e}();e.WootricViewModelImpl=c}(t.Wootric||(t.Wootric={}))},1314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(3),o=n(6),s=n(18);!function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.TERMINATING=3]="TERMINATING"}(r||(r={}));var a;!function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.TERMINATE=2]="TERMINATE",e[e.TERMINATED=3]="TERMINATED"}(a||(a={}));var c=function(){function e(e,t,n){void 0===n&&(n=o.Atom.create(null));var c=this;this._connector=e,this._terminator=t,this._currentConnection=n,this._create=function(){return i.__awaiter(c,void 0,void 0,function(){var e,t,n;return i.__generator(this,function(r){switch(r.label){case 0:return e=this._connectionParams,[4,this._connector(e)];case 1:return t=r.sent(),n=e===this._connectionParams,n?[4,this._fsm.event(a.CONNECTED,t)]:[3,3];case 2:n=r.sent(),r.label=3;case 3:return n?(this._currentConnection.set(t),[3,6]):[3,4];case 4:return[4,this._terminator(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})},this._remove=function(){return i.__awaiter(c,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:return e=this._currentConnection.get(),this._currentConnection.set(null),[4,this._terminator(e)];case 1:return t.sent(),[4,this._fsm.event(a.TERMINATED,"removed")];case 2:return t.sent(),[2]}})})},this._processQueue=function(){return c._connectionParams?c._fsm.event(a.CONNECT,c._connectionParams):Promise.resolve(!0)},this._fsm=new s.FSM.StateMachine(r.IDLE).from(r.CONNECTED).to(r.TERMINATING).on(a.CONNECT,a.TERMINATE).from(r.IDLE,r.CONNECTING,r.TERMINATING).to(r.CONNECTING).on(a.CONNECT).from(r.CONNECTING).to(r.CONNECTED).on(a.CONNECTED).from(r.TERMINATING).to(r.IDLE).on(a.TERMINATED).on(r.CONNECTING,this._create).on(r.TERMINATING,this._remove).on(r.IDLE,this._processQueue)}return e.prototype.connect=function(e){return void 0===e&&(e="connection"),i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return(t=e===this._connectionParams&&this._fsm.is(r.CONNECTED,r.CONNECTING))?[3,2]:(this._connectionParams=e,[4,this._fsm.event(a.CONNECT,e)]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.terminate=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return this._connectionParams=null,[4,this._fsm.event(a.TERMINATE)];case 1:return e.sent(),[2]}})})},e}();t.ConnectionManager=c},1315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readabilityDemoText={title:"Readability prototype demo text",text:'ignaling they defeated the wolf Dana falls to the ground from using a lot of her magic engery on the fight as gray runs over to her and picks her up carrying her back to the hotle they were staying at as the rest of them follow\n  "we will head back to the guild tommorrow" erza the red head says as they all go into there seprate rooms in the hotle as night falls they all fall asleep few hours later the sun rises adn they head back to the guild will gray carrying an unconses Lana in his arms as they run back looking for wendy to see if she could tell whats wrong with Lana as they found her they rush her into one of the inferany rooms and wendy starts to heal her but cant\n  "she just used to much of her magic engery she just needs to rest for a few days she will be fine" the young blue haired girl says to the group as they all sit around the infermity bed waiting for Misty to wake up.\n\n  Amplification of ribosomal genes has been observed in other species.\n  "Shadowy Weapon" as a shadow  apears above the wolf and hits it with a weapons making the wolf fall to the ground with a loud thump signaling they defeated the wolf Dana falls to the ground from using a lot of her magic engery on the fight as gray runs over to her and picks her up carrying her back to the hotle they were staying at as the rest of them follow\n  "we will head back to the guild tommorrow" erza the red head says as they all go into there seprate rooms in the hotle as night falls they all fall asleep few hours later the sun rises adn they head back to the guild will gray carrying an unconses Lana in his arms as they run back looking for wendy to see if she could tell whats wrong with Lana as they found her they rush her into one of the inferany rooms and wendy starts to heal her but cant\n  "she just used to much of her magic engery she just needs to rest for a few days she will be fine" the young blue haired girl says to the group as they all sit around the infermity bed waiting for Misty to wake up.\n\n  Amplification of ribosomal genes has been observed in other species.'}},1316:function(e,t,n){"use strict";function r(e,t){return{dangerouslySetInnerHTML:{__html:l.StringUtils.sanitize(e,t)}}}function i(e){return function(t){t.stopPropagation(),e&&e(t)}}function o(e){return function(t){t.preventDefault(),e&&e(t)}}function s(e){return{MsTransform:e,WebkitTransform:e,MozTransform:e,OTransform:e,transform:e}}function a(e,t){return void 0===t&&(t="px"),s("translateY("+e+t+")")}function c(e,t,n){return void 0===n&&(n="px"),s("translate("+e+n+", "+t+n+")")}function u(e,t){return function(n){n.propertyName===e&&t(n)}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2);t.setInnerHTML=r,t.stopPropagation=i,t.preventDefault=o,t.transform=s,t.translateY=a,t.translate=c,t.waitTransition=u},1317:function(e,t,n){"use strict";function r(e){return new URLSearchParams(e.toString())}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){void 0===t&&(t=new URLSearchParams),this.base=e,this.params=t}return e.prototype.addParams=function(t){var n=Object.entries(t).reduce(function(e,t){var n=t[0],r=t[1];return e.append(n,r),e},r(this.params));return new e(this.base,n)},e.prototype.toString=function(){return this.base+"?"+this.params.toString()},e}();t.URLWithParams=i},1326:function(e,t){e.exports={}},1327:function(e,t){e.exports={countdown:"_6e8ae1-countdown",gutter:"_6e8ae1-gutter",bar:"_6e8ae1-bar"}},1328:function(e,t){e.exports={clearfix:"_568abf-clearfix",proofreading:"_568abf-proofreading",gutter:"_568abf-gutter",pgs:"_568abf-pgs",pgsPlaceholder:"_568abf-pgsPlaceholder",proofitCompleted:"_568abf-proofitCompleted",proofitCancelled:"_568abf-proofitCancelled"}},1329:function(e,t){e.exports={clearfix:"_3e896f-clearfix",header:"_3e896f-header",headOne:"_3e896f-headOne",headSub:"_3e896f-headSub",sub:"_3e896f-sub",link:"_3e896f-link",logoWrapper:"_3e896f-logoWrapper",logo:"_3e896f-logo"}},1330:function(e,t){e.exports={clearfix:"_e36e5b-clearfix",header:"_e36e5b-header",headOne:"_e36e5b-headOne",headSub:"_e36e5b-headSub",sub:"_e36e5b-sub",link:"_e36e5b-link",logoWrapper:"_e36e5b-logoWrapper",logo:"_e36e5b-logo",linkWrapper:"_e36e5b-linkWrapper",back:"_e36e5b-back",home:"_e36e5b-home",support:"_e36e5b-support"}},1331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=n(57),o=function(){function e(e,t,n,o,s,a){var c=this;this._url=e,this._fetch=t,this._clientType=n,this._clientVersion=o,this._fingerprints=s,this._token=a,this._headersAppender=i.createHeadersAppender({"X-Client-Version":this._clientVersion,"X-Client-Type":function(){return c._clientType},"X-Container-Id":this._fingerprints.containerId,"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=i.createCookiesAppender({grauth:function(){return c._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=r.Ajax.factory(this._fetch,void 0,r.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender))}return e.prototype._setToken=function(e){this._token=e},Object.defineProperty(e.prototype,"csrfToken",{get:function(){return this._fingerprints.csrfToken()},enumerable:!0,configurable:!0}),e.prototype.orAnonymous=function(){var e=r.RequestBuilder.get(this._url,"user/oranonymous").queryParam("app",this._clientType);return this._ajax(e)},e.prototype.login=function(e,t){var n=r.RequestBuilder.post(this._url,"api/login").json({email_login:{email:e,password:t}});return this._ajax(n)},e.prototype.logout=function(){var e=r.RequestBuilder.post(this._url,"/logout");return this._ajax(e,r.Ajax.toVoid)},e.prototype.changeName=function(e){var t=r.RequestBuilder.post(this._url,"/user").json({name:e});return this._ajax(t,r.Ajax.toVoid)},e.prototype.changeEmail=function(e,t){var n=r.RequestBuilder.post(this._url,"/user/email/change").json({newEmail:e,password:t});return this._ajax(n,r.Ajax.toVoid)},e.prototype.changePassword=function(e,t,n){var i=r.RequestBuilder.post(this._url,"/user/password/change").formParam("email",e).formParam("new_pwd",n).formParam("old_pwd",t);return this._ajax(i,r.Ajax.toVoid)},e.prototype.getUser=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r.RequestBuilder.get(this._url,"user").queryParam("app",this._clientType);return e.forEach(function(e){return n.queryParam("field",e)}),this._ajax(n)},e.prototype.getSettings=function(){var e=r.RequestBuilder.get(this._url,"/user/settings");return this._ajax(e)},e.prototype._setSettings=function(e){var t=r.RequestBuilder.post(this._url,"/user/settings").json(e);return this._ajax(t)},e.prototype.setSettings=function(e){var t=this;return this.getSettings().then(function(n){return t._setSettings(Object.assign({},n,e))})},e.prototype.enableSandbox=function(e){var t=r.RequestBuilder.put(this._url,"user").json({id:e,customFields:{"sandbox.payments":"Yes"}});return this._ajax(t,r.Ajax.toVoid)},e.prototype.addInstitution=function(e,t){var n=r.RequestBuilder.put(this._url,"user").json({id:e,institutionId:t});return this._ajax(n,r.Ajax.toVoid)},e.targetTag="auth",e}();t.Auth=o;!function(e){e.email="EMAIL",e.google="GOOGLE",e.facebook="FACEBOOK"}(t.LoginType||(t.LoginType={})),function(e){!function(e){e.webChrome="webeditor_chrome",e.webFirefox="webeditor_firefox",e.webSafari="webeditor_safari",e.webIE="webeditor_ie",e.webEdge="webeditor_edge",e.desktop="desktopeditor",e.webTest="webeditor_test",e.unknown="webeditor_unknown"}(e.ClientType||(e.ClientType={}))}(o=t.Auth||(t.Auth={})),t.Auth=o},1332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(90),i=function(){},o=function(){function e(e){this._logger=e,this.onSessionStarted=i,this.onStartMessageAcknowledged=i,this.beforeAlert=i,this.onAlert=i,this.onRemove=i,this.onSynonyms=i,this.onPlagiarism=i,this.onAsyncCheckFinish=i,this.onError=i,this.onBeforeFinish=i,this.onFinish=i,this.onStats=i,this.onTextMaps=i,this.onTextInfo=i,this.onPong=i,this.onDebugInfo=i,this.onDisconnect=r.Reconnect.getDefaultReconnect(this._logger,r.Reconnect.ClientType.capi),this.onQueueMsgAccepted=i,this.onQueueMsgDropped=i}return e}();t.DefaultCAPIEventHandler=o},1333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(17),o=n(4),s=n(7),a=n(2),c=n(176),u=n(64),l=n(263),d=n(177),p=n(62),h=n(261),f=n(1334),g=n(502),m=n(1332),_=n(501),y=n(90);!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.STARTED=3]="STARTED",e[e.ANY=4]="ANY",e[e.CLOSED=5]="CLOSED"}(r||(r={}));var v;!function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.START=3]="START",e[e.CLOSE=4]="CLOSE"}(v||(v={}));var b=5,w=function(){function e(e,t){var n=e.url,h=e.handler,g=e.context,y=void 0===g?l.DocumentContext.empty:g,w=e.dialect,C=void 0===w?"undefined":w,k=e.client,T=e.clientVersion,x=void 0===T?"":T,A=e.extDomain,I=void 0===A?"":A,O=e.sendDelay,D=void 0===O?1e3:O,P=e.docid,N=void 0===P?"":P,M=e.token,R=void 0===M?"":M,L=this;this._log=o.Monitoring.Logging.getLogger("coreclients.capi",o.Logging.LogLevel.DEBUG),this._nextId=0,this._textSize=0,this._idleRestore=s.None,this._runtimeErrorCounter=new E,this._asyncChecksManager=new S,this._sendCmd=function(e){return s.Option.of(e).map(function(e){return L._sendInbandCommand(e)}).getOrElse(-1)},this._statsRequester=new p.ValueRequester(this._sendCmd,15e3,"DocStats"),this._synonymsRequester=new p.ValueRequester(this._sendCmd,15e3,"Synonyms"),this._getTextRequester=new p.ValueRequester(this._sendCmd,15e3,"Text"),this._startSession=function(){L._sendMessage(L._createStartMessage()),L._handler.onSessionStarted({kind:"session_started"})},this._send=function(){if(L._resetTimer(),L._log.trace("send("+r[L._fsm.current]+")"),L._fsm.is(r.STARTED)&&!L._changesQueue.isEmpty)try{L._changesQueue.pollAll().map(L._processQueueMessage).forEach(L._sendMessage)}catch(e){L._log.warn("unexpected error on sending",e)}else L._trySend(L._fsm.current)},this._processQueueMessage=function(e){return _.ChangesQueue.isChange(e)?new f.Message.SubmitOt(e.id,e.rev,e.change.prevLen,[e.change.delta]):L._shouldHaveSeparateRevision(e.cmd)?i.__assign({},e.cmd,{rev:e.rev,id:e.id}):i.__assign({},e.cmd,{id:e.id})},this._sendMessage=function(e){L._log.isEnabled(o.Logging.LogLevel.TRACE)&&L._log.trace("Sending >>> "+JSON.stringify(e).replace("\n"," ").substring(0,300)),L._conn.send(e).catch(function(e){return L._log.debug("fail on send",e)})},this._resetTimer=function(){void 0!==L._timeout&&(clearTimeout(L._timeout),L._timeout=void 0)},this._onQueueMsgAccepted=function(e){L._handler.onQueueMsgAccepted({kind:"queue_msg_accepted",message:e})},this._onQueueMsgDropped=function(e,t){"runtime_error"===t&&e.some(_.ChangesQueue.isChange)&&(L._runtimeErrorCounter.count>b?(L._log.debug("too frequent runtime errors, goto idle"),L._conn._ws.close(1e3)):(L._log.debug("runtime error on delta send, restart session",{tries:L._runtimeErrorCounter.count}),L._startSession())),e.filter(_.ChangesQueue.isCmd).forEach(function(e){switch(e.cmd.action){case"get_text_stats":L._statsRequester.onError(e.id,new _.DroppedFromQueueError(t));break;case"synonyms":L._synonymsRequester.onError(e.id,new _.DroppedFromQueueError(t));break;case"get_debug_info":L._getTextRequester.onError(e.id,new _.DroppedFromQueueError(t))}}),L._handler.onQueueMsgDropped({kind:"queue_msgs_dropped",messages:e,reason:t})},this._handler=Object.assign(new m.DefaultCAPIEventHandler(this._log),h||{}),this._url=n,this._context=y,this._dialect=C,this._client=k,this._clientVersion=x,this._extDomain=I,this._sendDelay=D,this._docid=N,this._token=R,this._changesQueue=new _.CapiQueue(this._shouldHaveSeparateRevision,this._onQueueMsgAccepted,this._onQueueMsgDropped),this._fsm=new c.StateMachine(r.DISCONNECTED,r.CLOSED).with(r.ANY).parentOf(r.CONNECTED,r.CONNECTING,r.DISCONNECTED,r.STARTED).from(r.ANY).to(r.CLOSED).on(v.CLOSE).from(r.DISCONNECTED).to(r.CONNECTING).on(v.CONNECT).from(r.CONNECTING).to(r.CONNECTED).on(v.CONNECTED).from(r.CONNECTED,r.STARTED,r.CONNECTING).to(r.DISCONNECTED).on(v.DISCONNECT).from(r.CONNECTED).to(r.STARTED).on(v.START).on(r.CONNECTED,this._startSession).on(r.STARTED,function(e){return L._trySend(e.to)}).on(r.DISCONNECTED,function(e){return L._clear(e.args)}).on(r.CLOSED,function(){return L._close()}),this._log.isEnabled(o.Logging.LogLevel.TRACE)&&this._fsm.verbose(r,v),this._ws=d.WS.create(t).onMessage(function(e,t){return L._handleMessage(t)}).onDisconnect(function(e){return L._handleDisconnect(e)}).resetReconnectCounterWhen(function(e){return L._isInitialized(e)}).onError(d.errPrintln),this._tryConnect(),a.registerDebugHelper("closeCapiSocket",function(e,t){void 0===e&&(e=1e3),L._conn._ws.close(e,t)}),a.registerDebugHelper("capiState",this),a.registerDebugHelper("capiRuntimeError",function(){var e=u.Change.ins(0,"test",100500);L.pushChanges(e)})}return e.prototype.setText=function(e){this._log.debug("setText(...)");return this._clear("setText"),this._fsm.is(r.STARTED)&&this._sendMessage(this._createStartMessage()),this.pushChanges(u.Change.ins(0,e))},e.prototype.pushChanges=function(e){if(this._checkIdle(),u.Change.isDelta(e)){var t=this._changesQueue.pushChanges(e);return this._textSize=e.prevLen+e.length,this._asyncChecksManager.stage(this._changesQueue.localRevision),this._trySend(this._fsm.current),t}if(u.Change.isReset(e)){var t=this.setText(e.text.get());return this._trySend(this._fsm.current),t}return this._changesQueue.isEmpty||this.ping(),-1},Object.defineProperty(e.prototype,"checkingState",{get:function(){var e=0===this._checkedTextSize||1===this._textSize?"idle":this._checkedTextSize>h.BIG_TEXT_SIZE&&this._textSize>h.BIG_TEXT_SIZE/3?"full":"checking";return this._log.trace("current checking state",e),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncChecksState",{get:function(){return this._asyncChecksManager.getState()},enumerable:!0,configurable:!0}),e.prototype.accept=function(e,t,n){this._sendInbandCommand(new f.Message.UserFeedback(this._nextId++,h.FeedbackType.ACCEPTED,e,t,n))},e.prototype.setContext=function(e){this._log.debug("setContext(...)"),this._sendInbandCommand(new f.Message.SetContext(this._nextId++,-1,l.DocumentContext.serialize(e))),this._context=e},e.prototype.reportUserFeedback=function(e,t){this._sendInbandCommand(new f.Message.UserFeedback(this._nextId++,t===h.FeedbackType.SYNONYM_ACCEPTED?h.FeedbackType.ACCEPTED:t,e.id,e.begin))},e.prototype.dismissAll=function(e){this._sendInbandCommand(new f.Message.UserFeedback(this._nextId++,h.FeedbackType.DISMISS_BY_LENS,void 0,void 0,void 0,void 0,e))},e.prototype.requestSynonyms=function(e,t){return this._synonymsRequester.request(new f.Message.SynonymsRequest(this._nextId++,e,t))},e.prototype.requestDocStats=function(){var e=this,t=p.retryCountPredicate(3);return p.promiseRetrier(function(){return e._statsRequester.request(new f.Message.StatsRequest(e._nextId++))},function(e){return t()&&_.DroppedFromQueueError.isDroppedFromQueueError(e)})},e.prototype.enablePlagiarismSearch=function(){this._asyncChecksManager.resetCheck("plagiarism"),this._sendInbandCommand(new f.Message.ToggleChecks(this._nextId++,{plagiarism:!0}))},e.prototype.disablePlagiarismSearch=function(){this._sendInbandCommand(new f.Message.ToggleChecks(this._nextId++,{plagiarism:!1}))},e.prototype.setOption=function(e,t){this._log.trace("Set option "+t),this._sendInbandCommand(new f.Message.Option(this._nextId++,e,t))},e.prototype.ping=function(){this._sendInbandCommand(new f.Message.Ping(this._nextId++))},e.prototype.close=function(){return this._fsm.event(v.CLOSE)},e.prototype.getText=function(){return this._getTextRequester.request({id:this._nextId++,action:"get_debug_info"})},e.prototype._isInitialized=function(e){return"error"!==e.action},e.prototype._handleMessage=function(e){switch(this._log.isEnabled(o.Logging.LogLevel.TRACE)&&this._log.trace("Message <<< "+JSON.stringify(e).replace("\n"," ").substring(0,300)),e.action){case"start":this._handler.onStartMessageAcknowledged(),this._fsm.event(v.START);break;case"alert":this._handleAlert(e);break;case"remove":this._handler.onRemove({kind:"alert_removed",alertId:e.id.toString()});break;case"finished":this._handleFinish(e);break;case"async_check_finished":this._handleAsyncCheckFinished(e);break;case"submit_ot":this._handleAck(e);break;case"feedback":case"option":case"toggle_checks":case"set_context":this._handleAck(e);break;case"error":this._handleError(e);break;case"pong":this._handler.onPong();break;case"synonyms":this._handleSynonyms(e);break;case"text_stats":e.readingTime=g.DocumentStatistics.calculateReadingTime(e.words),e.speakingTime=g.DocumentStatistics.calculateSpeakingTime(e.words),this._handler.onStats({kind:"stats",stats:e}),this._statsRequester.onValue(e.id,e);break;case"text_maps":this._handleTextMaps(e);break;case"text_info":this._handleTextInfo(e);break;case"debug_info":this._handler.onDebugInfo({kind:"debug_info",info:e}),this._getTextRequester.onValue(e.id,e.text);break;default:this._log.error("Unknown message",{message:e}),a.assertNever(e)}},e.prototype._handleDisconnect=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,r,o,c,u=this;return i.__generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,5,,7]),t=this._changesQueue.isEmpty&&!this._changesQueue.isStaging,n=y.Reconnect.getReconnectAction(e,{canGoIdle:t,isInitialized:!0}),[4,this._fsm.event(v.DISCONNECT,e.reason)];case 1:return(r=l.sent())?(this._log.warn("Disconnected due to ",e.reason),o=function(t){return i.__awaiter(u,void 0,void 0,function(){var n,r,o,s;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,7]),[4,this._fsm.event(v.CONNECT)];case 1:return r=i.sent(),r?[4,e.reconnect.scheduleReconnect(t)]:[2];case 2:return n=i.sent(),this._conn=n,[4,this._fsm.event(v.CONNECTED,n)];case 3:if(!(o=i.sent()))throw new Error("State change failed");return[3,7];case 4:return s=i.sent(),this._log.warn("Reconnect failed due to error ",s),n?[4,n.close()]:[3,6];case 5:i.sent(),i.label=6;case 6:return[3,7];case 7:return[2]}})})},"idle"!==n?[3,2]:(this._idleRestore=s.Some(function(){return o(0)}),this._log.debug("Postponed reconnect until changes arrive"),[3,4])):[2];case 2:return[4,this._handler.onDisconnect(e,e.reconnect.nextDelay,o,n).catch(function(t){if(u._log.warn("Reconnect failed with an error",t),"error"===n)throw e.error})];case 3:l.sent(),l.label=4;case 4:return[3,7];case 5:return c=l.sent(),d.errPrintln(c),[4,this._fsm.event(v.CLOSE,c).catch(a.noop)];case 6:return l.sent(),[3,7];case 7:return[2]}})})},e.prototype._handleAlert=function(e){var t=this;this._handler.beforeAlert({kind:"before_alert"});var n=Object.assign(e,{id:e.id.toString()});this._log.trace("_handleAlert"),this._changesQueue.transformAlertAgainstQueue(n).fold(function(){t._log.isEnabled(o.Logging.LogLevel.TRACE)&&t._log.trace("OT ALERT: discarding alert due to position overlap",{message:JSON.stringify(n).substring(0,200)})},function(e){return t._handler.onAlert({kind:"alert_received",alert:e})})},e.prototype._handleTextMaps=function(e){var t=e.score,n=e.scores,r=e.textMaps,i={score:t,scores:n,textMaps:r};this._handler.onTextMaps({kind:"text_maps",data:i})},e.prototype._handleTextInfo=function(e){var t={wordsCount:e.wordsCount,charsCount:e.charsCount-1,readingTime:g.DocumentStatistics.calculateReadingTime(e.wordsCount),speakingTime:g.DocumentStatistics.calculateSpeakingTime(e.wordsCount),readabilityScore:e.readabilityScore};this._handler.onTextInfo({kind:"text_info",data:t})},e.prototype._handleFinish=function(e){this._handler.onBeforeFinish({kind:"before_finish"}),this._changesQueue.ack(e.rev);var t=this._createFinishEvent(e);this._handler.onFinish(t)},e.prototype._handleAsyncCheckFinished=function(e){this._asyncChecksManager.finish(e),this._handler.onAsyncCheckFinish({kind:"async_check_finished",check:e.check,revision:e.rev})},e.prototype._handleAck=function(e){this._log.trace("<<< Acknowledge for "+e.action,{message:e})},e.prototype._handleSynonyms=function(e){var t=this._parseSynonymsResult(e);this._handler.onSynonyms({kind:"synonyms",synonyms:t,word:e.token,position:e.synonyms.pos}),this._synonymsRequester.onValue(e.id,t)},e.prototype._createFinishEvent=function(e){return{kind:"finish",revision:e.rev,score:s.Option.of(e.scores).map(function(t){return{errorRateScore:e.score,accuracy:t.Accuracy,clarity:t.Clarity,effectiveness:t.Effectiveness,rank:Math.min(100,Math.round(.5*t.Accuracy+.25*(t.Clarity+t.Effectiveness)))}}),dialect:e.dialect}},e.prototype._parseSynonymsResult=function(e){var t=this,n=function(e){return e.derived};return e.synonyms.meanings.length>0?s.Some({id:e.id.toString(),originalWord:e.token,synonymsOrGroups:1===e.synonyms.meanings.length?s.Either.left(e.synonyms.meanings[0].synonyms.map(n)):s.Either.right(e.synonyms.meanings.map(function(r){return void 0===r.meaning&&t._log.warn("Absent meaning in synonyms group.",{token:e.token}),{meaning:r.meaning||"",words:r.synonyms.map(n)}}))}):s.None},e.prototype._createStartMessage=function(){return new f.Message.Start(this._nextId++,this._client.type,this._client.sub,this._clientVersion,this._extDomain,this._dialect,this._docid,this._token,l.DocumentContext.serialize(this._context))},e.prototype._trySend=function(e){this._log.trace("_trySend("+r[e]+")"),void 0===this._timeout&&e===r.STARTED&&(this._timeout=setTimeout(this._send,this._sendDelay))},e.prototype._checkIdle=function(){var e=this;this._idleRestore=this._idleRestore.flatMap(function(t){return e._log.debug("We are idle... reconnecting before push."),t(),s.None})},e.prototype._shouldHaveSeparateRevision=function(e){return"set_context"===e.action},e.prototype._sendInbandCommand=function(e){this._checkIdle(),this._log.trace("_sendInbandCommand "+e.action);var t=this._changesQueue.isEmpty,n=this._changesQueue.pushCommand(e);return t?(this._log.trace("Q.isEmpty, sending command immidiately",e),this._send()):this._trySend(this._fsm.current),n},Object.defineProperty(e.prototype,"_checkedTextSize",{get:function(){return this._changesQueue.stagedAmount},enumerable:!0,configurable:!0}),e.prototype._tryConnect=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,n,r,o;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this._fsm.event(v.CONNECT)];case 1:if(!(e=i.sent()))return[2];i.label=2;case 2:return i.trys.push([2,9,,10]),[4,this._ws.connect(this._url)];case 3:t=i.sent(),this._conn=t,i.label=4;case 4:return i.trys.push([4,6,,8]),[4,this._fsm.event(v.CONNECTED,t)];case 5:if(!(n=i.sent()))throw new Error("State change failed");return[3,8];case 6:return r=i.sent(),this._log.warn("Connection cannot be finalized due to error",r),[4,t.close()];case 7:return i.sent(),[3,8];case 8:return[3,10];case 9:return o=i.sent(),d.errPrintln(o),[3,10];case 10:return[2]}})})},e.prototype._close=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return this._clear("close() called"),this._conn?[4,this._conn.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype._clear=function(e){this._nextId=0,this._changesQueue.isEmpty||this._log.warn("clean queue with messages",{reason:e}),this._changesQueue.clear(e),this._asyncChecksManager.reset(),this._resetTimer()},e.prototype._handleError=function(e){switch(e.error){case h.ErrorCode.CANNOT_GET_TEXT_STATS:this._statsRequester.onError(e.id,new Error("Server Error"));break;case h.ErrorCode.CANNOT_FIND_SYNONYM:this._synonymsRequester.onError(e.id,new Error("can not find synonym"));break;case h.ErrorCode.RUNTIME_ERROR:this._runtimeErrorCounter.inc(),this._clear("runtime_error");break;default:this._handler.onError(i.__assign({kind:"error"},e)),this._log.error("Error",{message:e})}},e}();t.CAPIClientImpl=w;var E=function(){function e(e){void 0===e&&(e=s.Duration.minutes(5).toMillis()),this._windowTime=e,this._count=0}return e.prototype.inc=function(){this._count++,this._startCounter()},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype._startCounter=function(){var e=this;this._timer=this._timer||setTimeout(function(){e._timer=void 0,e._count-- >0&&e._startCounter()},this._windowTime)},e}(),S=function(){function e(){this.reset()}return e.prototype.getState=function(){return{plagiarism:this._pendingRevision>this._finishedRevisions.plagiarism?"checking":"idle"}},e.prototype.stage=function(e){this._pendingRevision=Math.max(this._pendingRevision,e)},e.prototype.finish=function(e){this._finishedRevisions[e.check]=Math.max(this._finishedRevisions[e.check],e.rev)},e.prototype.reset=function(){this._pendingRevision=0,this._finishedRevisions={plagiarism:-1}},e.prototype.resetCheck=function(e){this._finishedRevisions[e]=-1},e}();t.AsyncChecksStateManager=S},1334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);!function(e){var t=function(){function e(e){this.id=e}return e}();e.Base=t;var n=function(e){function t(t){var n=e.call(this,t)||this;return n.action="ping",n}return r.__extends(t,e),t}(t);e.Ping=n;var i=function(e){function t(t){var n=e.call(this,t)||this;return n.action="pong",n}return r.__extends(t,e),t}(t);e.Pong=i;var o=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.name=n,i.value=r,i.action="option",i}return r.__extends(t,e),t}(t);e.Option=o;var s=function(e){function t(t,n,r,i,o,s,a,c,u){void 0===c&&(c="");var l=e.call(this,t)||this;return l.client=n,l.clientSubtype=r,l.clientVersion=i,l.extDomain=o,l.dialect=s,l.docid=a,l.token=c,l.documentContext=u,l.action="start",l}return r.__extends(t,e),t}(t);e.Start=s;var a=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.rev=n,s.score=r,s.dialect=i,s.scores=o,s.action="finished",s}return r.__extends(t,e),t}(t);e.Finish=a;var c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.rev=n,i.documentContext=r,i.action="set_context",i}return r.__extends(t,e),t}(t);e.SetContext=c;var u=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.rev=n,i.check=r,i.action="async_check_finished",i}return r.__extends(t,e),t}(t);e.AsyncCheckFinished=u;var l=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.rev=n,o.doc_len=r,o.deltas=i,o.action="submit_ot",o}return r.__extends(t,e),t}(t);e.SubmitOt=l;var d=function(e){function t(t,n,r,i,o,s,a,c,u,l,d,p,h,f,g,m,_,y,v,b,w,E,S,C){var k=e.call(this,t)||this;return k.rev=n,k.begin=r,k.end=i,k.highlightBegin=o,k.highlightEnd=s,k.text=a,k.pname=c,k.highlightText=u,k.category=l,k.categoryHuman=d,k.group=p,k.title=h,k.details=f,k.examples=g,k.explanation=m,k.transforms=_,k.replacements=y,k.free=v,k.extra_properties=b,k.hidden=w,k.cardLayout=E,k.sentence_no=S,k.todo=C,k.action="alert",k}return r.__extends(t,e),t}(t);e.Alert=d;var p=function(e){function t(t){var n=e.call(this,t)||this;return n.action="remove",n}return r.__extends(t,e),Object.defineProperty(t.prototype,"alertId",{get:function(){return this.id},enumerable:!0,configurable:!0}),t}(t);e.RemoveAlert=p;var h=function(e){function t(t,n){var r=e.call(this,t)||this;return r.checks=n,r.action="toggle_checks",r}return r.__extends(t,e),t}(t);e.ToggleChecks=h;var f=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.begin=n,i.token=r,i.action="synonyms",i}return r.__extends(t,e),t}(t);e.SynonymsRequest=f;var g=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.token=n,i.synonyms=r,i.action="synonyms",i}return r.__extends(t,e),t}(t);e.SynonymsMessage=g;var m=function(e){function t(t,n,r,i,o,s,a){var c=e.call(this,t)||this;return c.type=n,c.alertId=r,c.position=i,c.text=o,c.previousText=s,c.lens=a,c.action="feedback",c}return r.__extends(t,e),t}(t);e.UserFeedback=m;var _=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.error=n,i.severity=r,i.action="error",i}return r.__extends(t,e),t}(t);e.Error=_;var y=function(e){function t(t){var n=e.call(this,t)||this;return n.action="get_text_stats",n}return r.__extends(t,e),t}(t);e.StatsRequest=y}(t.Message||(t.Message={}))},1335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=function(){function e(e,t){this._url=e,this._fetch=t,this._ajax=r.Ajax.factory(this._fetch,"omit")}return e.prototype.checkOrigin=function(){return this._ajax(r.RequestBuilder.get(this._url,"/origin")).then(function(e){return{isOkay:"origin okay"===e.message,url:e.origin}})},e.targetTag="diagnostics",e}();t.Diagnostics=i},1336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=n(57),o=function(){function e(e,t,n,o,s){void 0===o&&(o="web");var a=this;this._url=e,this._fetch=t,this._fingerprints=n,this._clientType=o,this._token=s,this._headersAppender=i.createHeadersAppender({"X-Client-Type":function(){return a._clientType},"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=i.createCookiesAppender({grauth:function(){return a._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=r.Ajax.factory(this._fetch,void 0,r.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender))}return e.prototype.get=function(){return this._ajax(r.RequestBuilder.get(this._url,"/dict"))},e.prototype.delete=function(e){return this._ajax(r.RequestBuilder.del(this._url,"/dict").pathParam(e),r.Ajax.toVoid)},e.prototype.add=function(e){return this._ajax(r.RequestBuilder.post(this._url,"/dict").json({word:e}),r.Ajax.toVoid)},e.targetTag="capi",e}();t.Dictionary=o},1337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=n(89),o=n(508),s=n(1339),a=n(264),c=n(504),u=n(57),l="1",d=function(){function e(e,t,n,o,s,a){void 0===o&&(o="web");var c=this;this._url=e,this._fetch=t,this._fingerprints=n,this._clientType=o,this._token=s,this._createWSInstance=a,this._headersAppender=u.createHeadersAppender({"X-API-Version":l,"X-Client-Type":function(){return c._clientType},"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=u.createCookiesAppender({grauth:function(){return c._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=r.Ajax.factory(this._fetch,void 0,r.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender),i.DoxErrors.doxErrorMapper),this._wsBaseUrl=this._getWsBaseUrl(e)}return e.prototype._getWsBaseUrl=function(e){var t=new RegExp("http(s?)://([^/]+)/?.*$"),n=t.exec(e);if(null===n)throw new Error("Cannot parse ws url");return"ws"+n[1]+"://"+n[2]},e.prototype._getWsUrl=function(e){var t=null===e||void 0===e?"/documents/ws":"/documents/"+e+"/ws";return""+this._wsBaseUrl+t},Object.defineProperty(e.prototype,"clientType",{set:function(e){this._clientType=e},enumerable:!0,configurable:!0}),e.prototype.listDocuments=function(t,n,r){return void 0===t&&(t=e.unlimited),void 0===n&&(n=e.OrderBy.Any),void 0===r&&(r=!1),this.searchDocument(o.DoxRequest.Search.all(),t,n,r)},e.prototype.openDocumentsWS=function(e){return s.RemoteDocumentsList.create(this._getWsUrl(),e,this._createWSInstance)},e.prototype.openDocumentById=function(e,t,n,r){return void 0===r&&(r=500),a.DoxRemoteDocument.create(this._getWsUrl(e),t,n,r,this._createWSInstance)},e.prototype.searchDocument=function(t,n,i,o){void 0===n&&(n=e.unlimited),void 0===i&&(i=e.OrderBy.Any),void 0===o&&(o=!1);var s=r.RequestBuilder.get(this._url,"/documents").queryParam("search",t.toSearchString()).queryParam("limit",String(n)).queryParam("firstCall",String(o));return this._ajax(s).then(function(e){return e.map(function(e){return new c.DoxDocument(e)})})},e.prototype.createDocument=function(e){var t=e._getHttpRequestBuilder().url(this._url,"/documents").method("post");return this._ajax(t).then(function(e){return new c.DoxDocument(e)})},e.prototype.downloadOriginal=function(e,t){void 0===t&&(t=!0);var n=r.RequestBuilder.join(this._url,"/documents",encodeURIComponent(e),"download")+(t?"":"?no_tracking");return this._ajax(r.RequestBuilder.get(n),r.Ajax.parseBlobResponse)},e.prototype.url=function(){return this._url},e.prototype.downloadProofread=function(e){var t=r.RequestBuilder.join(this._url,"/documents",encodeURIComponent(e),"proofread");return this._ajax(r.RequestBuilder.get(t),r.Ajax.parseBlobResponse)},e.prototype.deleteDocumentById=function(e){var t=r.RequestBuilder.del(this._url,"/documents").pathParam(e);return this._ajax(t,r.Ajax.toVoid)},e.prototype.restoreDocumentById=function(e){var t=r.RequestBuilder.post(this._url,"/documents",encodeURIComponent(e),"restore");return this._ajax(t,r.Ajax.toVoid)},e.prototype.generateReport=function(e,t,n){var i=n.headerTemplate,o=n.footerTemplate,s=n.format,a=n.width,c=n.height,u=n.marginTop,l=n.marginRight,d=n.marginBottom,p=n.marginLeft,h=r.RequestBuilder.join(this._url,"/documents",encodeURIComponent(e),"report");return this._ajax(r.RequestBuilder.post(h).json({html:t,header_template:i,footer_template:o,format:s,width:a,height:c,margin_top:u,margin_right:l,margin_bottom:d,margin_left:p}),r.Ajax.parseBlobResponse)},e.targetTag="dox",e.unlimited=0,e}();t.DoxClient=d,function(e){!function(e){e[e.Updated=0]="Updated",e[e.Created=1]="Created",e[e.Any=2]="Any"}(e.OrderBy||(e.OrderBy={}))}(d=t.DoxClient||(t.DoxClient={})),t.DoxClient=d},1338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);!function(e){var t=function(){function e(e){this.id=e}return e}();e.Base=t;var n=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.id=t,a.cl=n,a.rev=r,a.doc_len=i,a.deltas=o,a.revAfterApply=s,a.op="patch",a}return r.__extends(t,e),t}(t);e.PatchMessage=n;var i=function(e){function t(t,n){var r=e.call(this,t)||this;return r.id=t,r.vsn=n,r.op="vsn",r}return r.__extends(t,e),t}(t);e.VersionMessage=i;var o=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.id=t,o.title=n,o.errors=r,o.extra_params=i,o.op="update_document_metadata",o}return r.__extends(t,e),t}(t);e.UpdateDocumentMetadata=o;var s=function(e){function t(t){var n=e.call(this,t)||this;return n.id=t,n.op="proofit_turnaround_options",n}return r.__extends(t,e),t}(t);e.ProofitOptionsMessage=s;var a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.id=t,r.turnaround=n,r.op="proofit_create_job",r}return r.__extends(t,e),t}(t);e.ProofitPlaceOrderMessage=a}(t.Message||(t.Message={}))},1339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(2),o=n(89),s=n(264),a=n(505),c=n(90),u=n(4),l=function(e){function t(n,r,s,l,d){var p=e.call(this,n,d)||this;return p._failHandler=s,p._handler=new t.DefaultHandler(l,u.Monitoring.Logging.getLogger("dox.remote_list")),p._disconnectHandler=function(e,t,n){var r=c.Reconnect.getReconnectAction(e,{canGoIdle:!0,isInitialized:!0});return p._handler.disconnectHandler(e,t,n,"idle"===r?"backOffReconnect":r)},p._fsm.on(a.States.CLOSED,function(e){var t=e.args?e.args:o.DoxErrors.CLOSED_ERROR;p._failHandler&&p._failHandler(t)}),p._fsm.event(a.Events.CONNECT).then(function(){return r(p)}).catch(s),i.registerDebugHelper("closeDoxListSocket",function(e,t){void 0===e&&(e=1e3),p._conn._ws.close(e,t)}),p}return r.__extends(t,e),t.create=function(e,n,r){return new Promise(function(i,o){return new t(e,i,o,n,r)})},t.prototype.isInitialized=function(){return!0},t.prototype._handleMessage=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(this._log.trace("<<< ",{message:e}),e.op){case"document_metadata_changed":this._handleMetaChangeMessage(e);break;case"mongodb_change":break;default:t=e,this._log.warn("Never",{message:t})}return[2]})})},t.prototype._handleMetaChangeMessage=function(e){var t=s.DoxRemoteDocument.Meta.parse(e);this._handler.metadataChangeHandler(String(e.id),t)},t}(a.Remote);t.RemoteDocumentsList=l,function(e){var t=function(){function e(e,t){this._handler=e,this._logger=t,this.metadataChangeHandler=this._handler.metadataChangeHandler||i.noop,this.disconnectHandler=this._handler.disconnectHandler||c.Reconnect.getDefaultReconnect(this._logger,c.Reconnect.ClientType.dox)}return e}();e.DefaultHandler=t}(l=t.RemoteDocumentsList||(t.RemoteDocumentsList={})),t.RemoteDocumentsList=l},1340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(798);!function(e){function t(e){r.saveAs(e.data,e.title)}e.saveToFS=t}(t.RawFile||(t.RawFile={}))},1341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(152),o=n(101),s=n(41),a=n(57),c=n(57),u=function(){function e(e,t,n,i){var o=this;this._url=e,this._fetch=t,this._fingerprints=n,this._token=i,this._cookiesAppender=a.createCookiesAppender({grauth:function(){return o._token},"csrf-token":this._fingerprints.csrfToken}),this._headersAppender=c.createHeadersAppender({"X-CSRF-Token":this._fingerprints.csrfToken}),this._ajax=s.Ajax.factory(this._fetch,void 0,s.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender)),this._log=r.Monitoring.Logging.getLogger("coreclients.institution")}return e.prototype.getInfo=function(){var e=s.RequestBuilder.get(this._url,"api/institution");return this._ajax(e).then(this._parseInstitutionInfo)},e.prototype._parseInstitutionInfo=function(t){var n=this;return void 0===t?(this._log.warn("failed to parse institution info: empty payload"),e.emptyInfo):e.IOType.decode(t).mapLeft(i.failure).fold(function(t){return n._log.warn("failed to parse institution info: incorrect payload",t),e.emptyInfo},function(e){return e})},e.targetTag="institution",e.IOType=o.interface({id:o.number,name:o.string,plagiarismDisabled:o.boolean,scoreDisabled:o.boolean,licenseDiscountinued:o.boolean,quickReplacement:o.boolean,fullCards:o.boolean,proofit:o.boolean,domainValidation:o.boolean,admin:o.boolean,business:o.boolean}),e.emptyInfo={id:-1,name:"",plagiarismDisabled:!1,scoreDisabled:!1,licenseDiscountinued:!1,quickReplacement:!1,fullCards:!1,proofit:!1,domainValidation:!1,admin:!1,business:!1},e}();t.Institution=u},1342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=n(57),o=function(){function e(e,t,n,o){var s=this;this._url=e,this._fetch=t,this._fingerprints=n,this._token=o,this._headersAppender=i.createHeadersAppender({"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=i.createCookiesAppender({grauth:function(){return s._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=r.Ajax.factory(this._fetch,void 0,r.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender))}return e.prototype.deleteAccount=function(){var e=r.RequestBuilder.del(this._url,"/api/user");return this._ajax(e,r.Ajax.toVoid)},e.targetTag="irbis",e}();t.Irbis=o},1343:function(e,t,n){"use strict";function r(e,t){return t?new i(e,t):new i(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=WebSocket||window.MozWebSocket;i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(r,e,{get:function(){return i[e]}})}),t.BrowserWebSocket=i?r:null},1344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(41),o=n(62),s=n(57),a=function(){function e(e,t,n,r){var o=this;this._url=e,this._fetch=t,this._fingerprints=n,this._token=r,this._headersAppender=s.createHeadersAppender({"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=s.createCookiesAppender({grauth:function(){return o._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=i.Ajax.factory(this._fetch,void 0,i.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender))}return e.prototype.getStatus=function(){var e=i.RequestBuilder.get(this._url);return this._ajax(e)},e.prototype.cancelSubscription=function(){var e=i.RequestBuilder.post(this._url,"/cancel");return this._ajax(e,i.Ajax.toVoid)},e.prototype.renewSubscription=function(){var e=i.RequestBuilder.post(this._url,"/renew");return this._ajax(e,i.Ajax.toVoid)},e.prototype.ackPremiumConversion=function(){var e=i.RequestBuilder.post(this._url,"/ack-premium-conversion");return this._ajax(e,i.Ajax.toVoid)},e.prototype.generateTokenCreditCard=function(){var e=i.RequestBuilder.post(this._url,"/token/card");return this._ajax(e,i.Ajax.parseJSON)},e.prototype.getTokenRequest=function(e){var t=this;return o.retryWithDelay(function(){return r.__awaiter(t,void 0,void 0,function(){var t,n;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._tokenRequest(e)];case 1:if(!(t=r.sent()))throw new o.RetryError("empty response");if(n=JSON.parse(t),!n.token)throw new o.RetryError("empty token");return[2,n.token]}})})})},e.prototype.getPaypalRedirectPageRequest=function(e){var t=this;return o.retryWithDelay(function(){return r.__awaiter(t,void 0,void 0,function(){var t,n;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._tokenRequest(e)];case 1:if(!(t=r.sent()))throw new o.RetryError("empty response");if(n=JSON.parse(t),!n.paypalRedirectPage)throw new o.RetryError("empty paypalRedirectPage");return[2,n.paypalRedirectPage]}})})})},e.prototype._tokenRequest=function(e){var t=i.RequestBuilder.get(this._url,"/token/request").pathParam(e);return this._ajax(t,i.Ajax.parseText)},e.prototype.getAvailablePlans=function(){var e=i.RequestBuilder.get(this._url,"/pricing");return this._ajax(e)},e.prototype.changePlan=function(e){var t=i.RequestBuilder.post(this._url,"/set-plan").pathParam(e);return this._ajax(t,i.Ajax.toVoid)},e.prototype.subscribeCard=function(e,t){var n=i.RequestBuilder.post(this._url,"/subscribe-card").formParam("nonce",e);return t&&n.formParam("billingZip",t),this._ajax(n,i.Ajax.toVoid)},e.prototype.subscribeCardSandbox=function(e){void 0===e&&(e="1");var t=i.RequestBuilder.post(this._url,"/subscribe-card").formParam("planId",e).formParam("nonce","fake-valid-nonce").formParam("sessionId","test-session").formParam("billingZip","12345");return this._ajax(t,i.Ajax.toVoid)},e.prototype.updateCreditCard=function(e,t){var n=i.RequestBuilder.post(this._url,"/update-card").formParam("nonce",e);return t&&n.formParam("billingZip",t),this._ajax(n,i.Ajax.toVoid)},e.prototype.subscribePaypal=function(e){var t=i.RequestBuilder.post(this._url,"/token/paypal").formParam("nonce",e);return this._ajax(t,i.Ajax.toVoid)},e.prototype.generateTokenPaypal=function(e){var t=e.cancelUrl,n=e.returnUrl,r=i.RequestBuilder.post(this._url,"/token/paypal").formParam("cancelUrl",t).formParam("returnUrl",n);return this._ajax(r,i.Ajax.parseJSON)},e.prototype.updatePaypal=function(e){var t=i.RequestBuilder.post(this._url,"/update-paypal").formParam("payPalToken",e);return this._ajax(t,i.Ajax.toVoid)},e.prototype.downloadBillingReceipts=function(){var e=i.RequestBuilder.get(this._url,"/receipt");return this._ajax(e,i.Ajax.parseBlobResponse)},e.targetTag="subscription",e}();t.SubscriptionClient=a},1345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){function t(t){return{id:t.id,action:e.ActionType.create,range:t.range,classes:t.classes,order:t.order}}function n(t,n){return{id:t.id,action:e.ActionType.update,range:t.range,classes:n,order:t.order}}function r(t,n){return void 0===n&&(n=e.RemoveType.full),{id:t.id,action:e.ActionType.remove,range:t.range,removeType:n}}!function(e){e.create="create",e.update="update",e.remove="remove"}(e.ActionType||(e.ActionType={}));!function(e){e.full="full",e.byPartialMatch="byPartialMatch",e.partial="partial"}(e.RemoveType||(e.RemoveType={})),e.getCreateAction=t,e.getUpdateAction=n,e.getRemoveAction=r}(t.Mark||(t.Mark={}));!function(e){e[e.click=0]="click",e[e.dblclick=1]="dblclick"}(t.ClickType||(t.ClickType={}));!function(e){e.empty={top:0,bottom:0}}(t.ViewportPadding||(t.ViewportPadding={}))},1346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(955);t.Delta=i;var o;!function(e){function t(e,t){return void 0===t&&(t=0),new f(e,t)}function n(e,n,r){return void 0===r&&(r=0),t((new i).retain(e).insert(n),r)}function o(e,n,r){return void 0===r&&(r=0),t((new i).retain(e).delete(n),r)}function a(e,n,r){return void 0===n&&(n=0),t((new i).retain(e,r),n)}function c(e){return new m(e)}function u(e){return c((new i).insert(e))}function l(){return new g}function d(e){return"delta"===e.kind}function p(e){return"reset"===e.kind}function h(e){return"flush"===e.kind}var f=function(){function e(e,t){this.delta=e,this.prevLen=t,this.kind="delta",this._length=void 0,this._amount=void 0,this._text=void 0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length||(this._length=s.calcDiffLength(this.delta))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount||(this._amount=s.calcAmountLength(this.delta))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var e=this;return this._text||(this._text=r.Try.of(function(){return e.delta.ops.reduce(function(e,t){if(t.insert)return""+e+t.insert;throw t.delete?new Error("can not get text on delta with deletes"):new Error("can not get text on delta with retains")},"")}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.delta.ops.length},enumerable:!0,configurable:!0}),e.prototype.compose=function(t){return new e(this.delta.compose(t.delta),this.prevLen)},e.prototype.transform=function(t,n){return void 0===n&&(n=!0),new e(t.delta.transform(this.delta,n),this.prevLen+t.length)},e.prototype.toString=function(){return"Delta("+this.delta+", pl: "+this.prevLen+")"},e}(),g=function(){function e(){this.kind="flush"}return e.prototype.toString=function(){return"Flush()"},e}(),m=function(){function e(e){this.delta=e,this.kind="reset"}return Object.defineProperty(e.prototype,"text",{get:function(){var e=this;return this._text||(this._text=r.Try.of(function(){return e.delta.ops.reduce(function(e,t){if(t.insert)return""+e+t.insert;throw t.delete?new Error("can not get text on delta with deletes"):new Error("can not get text on delta with retains")},"")}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length||(this._length=s.calcDiffLength(this.delta))},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Reset("+this.delta+")"},e}();e.delta=t,e.ins=n,e.del=o,e.ret=a,e.res=c,e.resFromText=u,e.flush=l,e.isDelta=d,e.isReset=p,e.isFlush=h}(o=t.Change||(t.Change={}));var s;!function(e){function t(e){return e.ops.reduce(function(e,t){return t.insert?e+t.insert.length:t.delete?e-t.delete:e},0)}function n(e){return e.ops.reduce(function(e,t){return t.insert?e+t.insert.length:t.delete?e+t.delete:e},0)}function r(e){return e.reduce(function(e,t){return e.compose(new i(t))},new i)}function o(e){return e.reduce(function(e,t){if(t.insert)return e.insert(t.insert);if(t.delete)return e.delete(t.delete);if(t.retain)return e.retain(t.retain);throw new Error("Unknown operation")},new i)}e.calcDiffLength=t,e.calcAmountLength=n,e.squash=r,e.cleanAttrs=o}(s=t.DeltaUtils||(t.DeltaUtils={}));!function(e){function t(e,t){var n=(new i).insert(e),r=(new i).insert(t);return o.delta(n.diff(r),e.length)}e.diffAsChanges=t}(t.Diff||(t.Diff={}))},1347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16);!function(e){function t(t,i,o){return r.Observable.merge(n(t,i,o).takeUntil(e.hiddenObservable),e.hiddenObservable.mapTo(i).first())}function n(e,t,n){return r.Observable.create(function(r){function i(a){o||(o=a);var c=a-o;c<n?(r.next(Math.round(e+c/n*(t-e))),s=window.requestAnimationFrame(i)):(r.next(t),r.complete())}var o,s=window.requestAnimationFrame(i);return function(){return window.cancelAnimationFrame(s)}}).distinctUntilChanged()}function i(e){var t=new r.Subject;return{state:e.switchMap(function(e){return e?r.Observable.of("inProgress"):r.Observable.merge(r.Observable.of("fadeOut"),t.mapTo("end"))}),complete:function(){return t.next(!0)}}}function o(e,t){return void 0===t&&(t=!1),r.Observable.create(function(n){function r(){n.next(e.shift()),e.length&&(i=requestAnimationFrame(r))}var i;return t?r():i=requestAnimationFrame(r),function(){return cancelAnimationFrame(i)}})}e.hiddenObservable=r.Observable.fromEvent(document,"visibilitychange").map(function(){return document.hidden}).startWith(document.hidden).filter(Boolean).repeat(1),e.createAnimationObservable=t,e.fadeOutState=i,e.rafSequence=o}(t.Animation||(t.Animation={}))},1348:function(e,t,n){"use strict";function r(e,t){return e.reduce(function(e,n){return t(n)?e[0].push(n):e[1].push(n),e},[[],[]])}function i(e,t,n){if(n>=e.length||t>=e.length)return e;for(var r=new Set,i=Math.floor(t+n>t?Math.random()*(n-t)+1:0);r.size<i;){var o=Math.floor(Math.random()*e.length);r.add(o)}return Array.from(r).map(function(t){return e[t]})}function o(e){for(var t=e.slice(0),n=t.length;n>0;){var r=Math.floor(Math.random()*n);n--,i=[t[r],t[n]],t[n]=i[0],t[r]=i[1]}return t;var i}function s(e,t){for(var n=-1,r=e.length;n+1!==r;){var i=n+(r-n>>1);t(e[i])?n=i:r=i}return n+1}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.sort(function(e,n){return t.reduce(function(t,r){return 0!==t?t:r(e,n)},0)})}function c(e,t,n){for(var r=t;r<e.length;++r)if(n(e[r]))return g.Some({index:r,value:e[r]});return g.None}function u(e,t,n){for(var r=t;r>=0;--r)if(n(e[r]))return g.Some({index:r,value:e[r]});return g.None}function l(e,t,n){return t<0||e.length<=t?g.None:c(e,t+1,n).orElseL(function(){return u(e,t-1,n)})}function d(e,t){for(var n,r=0;r<e.length;++r)!function(r){var i=t.findIndex(function(t){return e[r].equals(t)});-1!==i&&(e.splice(r--,1),t.splice(i,1)),n=r}(r),r=n;return e}function p(e,t){return e.length===t.length&&e.every(function(e,n){return t[n].equals(e)})}function h(e){return e.reduce(function(e,t){return e.concat(t)},[])}function f(e,t){return new Array(e).fill(!0).map(function(e,n){return t(n)})}Object.defineProperty(t,"__esModule",{value:!0});var g=n(7);t.partition=r,t.pickRandom=i,t.shuffle=o,t.lowerBound=s,t.sort=a,t.findIndexFrom=c,t.findLastIndexFrom=u,t.lookAround=l,t.arraySubstract=d,t.equals=p,t.flatMap=h,t.mapNTimes=f},1349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(16),o=n(104),s=n(125);!function(e){function t(){return{status:S.idle}}function n(e){return{status:S.ok,value:e}}function a(e){return e.status===S.idle}function c(e){return e.status===S.inProgress}function u(e){return e.status===S.ok}function l(e){return e.status===S.error}function d(e){return e.status===S.fatal}function p(e){return u(e)||d(e)}function h(e){return p(e)||l(e)}function f(e,t){return u(e)?t(e.value):e}function g(e,t){return u(e)?n(t(e.value)):e}function m(e){return o.invariant(!c(e),"Can't enter begin state - unexpected status '"+S[e.status]+"'"),{status:S.inProgress}}function _(e,t){return function(n){o.invariant(!p(n),"Can't enter error state - unexpected status '"+S[n.status]+"'");var r=S.error;return t?{status:r,error:e,attempt:t}:{status:r,error:e}}}function y(e){return function(t){return o.invariant(l(t)||c(t),"Can't enter fatal state - unexpected status '"+S[t.status]+"'"),{status:S.fatal,error:e}}}function v(e){return function(t){return o.invariant(!u(t),"Can't enter ok state - unexpected status '"+S[t.status]+"'"),n(e)}}function b(t,n,r,o){return void 0===r&&(r=e.DEFAULT_TIMEOUT_MS),void 0===o&&(o=function(e){return e}),new Promise(function(e,s){n.modify(m);var a=!1;i.Observable.defer(t).last().timeout(r).subscribe(function(t){n.modify(v(o(t))),a=!0,e(t)},function(e){n.modify(_(e)),a=!0,s(e)},function(){if(!a){var e=void 0;n.modify(function(t){return t.status!==S.ok&&t.status!==S.error?_(e=new C)(t):t}),e&&s(e)}})})}function w(e,t,n){var r=e.get();return n().then(function(n){return new Promise(function(n){e.modify(t),n()})}).catch(function(t){return e.set(r),Promise.reject(t)})}function E(e,t,n,r){void 0===r&&(r=!0);var i=e.get();return e.modify(t),n().catch(function(t){return r&&e.set(i),Promise.reject(t)})}var S;!function(e){e[e.idle=0]="idle",e[e.inProgress=1]="inProgress",e[e.ok=2]="ok",e[e.error=3]="error",e[e.fatal=4]="fatal"}(S=e.Status||(e.Status={})),e.defaultValue=t,e.ok=n,e.isIdle=a,e.isInProgress=c,e.isOk=u,e.isError=l,e.isFatal=d,e.isTerminated=p,e.isSomething=h,e.flatMap=f,e.map=g,e.begin=m,e.error=_,e.fatal=y,e.success=v,e.DEFAULT_TIMEOUT_MS=1e4;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(o.CustomError);e.NoValueReturnedError=C,e.runWithTimeout=b,e.promiseWithTimeout=function(e,t){return i.Observable.from(e).timeout(t).toPromise()},e.modifyRemoteState=w,e.modifyRemoteStateOptimistic=E;!function(t){function n(t,n,a){void 0===a&&(a=r.noRetry);var c=0;n.modify(m);var u=i.Observable.defer(t).catch(function(e){throw n.modify(_(e,++c)),e}).retryWhen(a).catch(function(e){return n.modify(y(e)),i.Observable.never()}).map(v).do(n.modify.bind(n)).first().subscribe(s.noop);return{unsubscribe:function(){e.isTerminated(n.get())||(o.invariant(!u.closed,"cannot abort completed operation"),u.unsubscribe())}}}var r;!function(e){e.noRetry=function(e){return e.switchMap(function(e){return i.Observable.throw(e)}).first()},e.linear=function(e,t){return void 0===t&&(t=1e3),function(n){return n.switchMap(function(n,r){if(r>=e)throw n;return i.Observable.timer(r*t)})}},e.conditional=function(e,t){return function(n){return i.Observable.merge(t(n.takeWhile(e)),n.skipWhile(e).map(function(e){throw e}))}}}(r=t.RetryStrategy||(t.RetryStrategy={})),t.create=n}(e.OperationRetrier||(e.OperationRetrier={}))}(t.Async||(t.Async={}))},1350:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){var t=function(){function e(e){this._predicate=e,this._queueMap=new Set,this._queue=[]}return e.prototype.put=function(e){var t=this,n=new Set,r=e.reduce(function(e,r){return n.has(r.id)||t._queueMap.has(r.id)||!t._predicate(r)||(n.add(r.id),e.push(r)),e},[]);(i=this._queue).push.apply(i,r),r.forEach(function(e){var n=e.id;return t._queueMap.add(n)});var i},e.prototype.take=function(e){for(var t=0,n=[];t<this._queue.length&&n.length<e;){var r=this._queue[t];this._predicate(r)&&n.push(r),this._queueMap.delete(r.id),t++}return this._queue=this._queue.slice(t),n},Object.defineProperty(e.prototype,"nonEmpty",{get:function(){return this._queue.length>0},enumerable:!0,configurable:!0}),e}();e.LazyPredicateUniq=t}(t.Buffer||(t.Buffer={}))},1351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),i=n(6);r.Observable.fromEvent(window,"click").first().subscribe(function(){document.queryCommandSupported("copy")||o.copyApiAvailable.set(!1)});var o=function(){function e(){}return e.copy=function(e,t){this._clearSelection();var n=this._createHiddenSpan(e);return this.select(n),this._copy(e,t).then(function(){n.parentElement.removeChild(n)}).catch(function(e){throw n.parentElement.removeChild(n),e})},e.select=function(e){if(window.getSelection&&document.createRange){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else if("createTextRange"in document.body&&"selection"in document){var n=document.body.createTextRange();n.moveToElementText(this),n.select()}},e._clearSelection=function(){var e=window.getSelection?window.getSelection():document.selection;"removeAllRanges"in e?e.removeAllRanges():"empty"in e&&e.empty()},e._createHiddenSpan=function(e){var t=document.createElement("span");return t.setAttribute("style",["all: unset","position: fixed","top -999px","left -999px","opacity: 0","background transparent","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),t.textContent=e,document.body.appendChild(t),t},e._copy=function(e,t){return new Promise(function(n,r){try{(t?window.clipboardData.setData("text",e):document.execCommand("copy"))?n():r(new Error("Copy API doesn't work"))}catch(e){r(e)}})},e.copyApiAvailable=i.Atom.create(!0),e}();t.Clipboard=o},1352:function(e,t,n){"use strict";function r(e){return s.default(e)}function i(e,t,n){s.default(e,t,n)}function o(e){i("grInstallSource","editor",{domain:e,path:"/",expires:new Date(Date.now()+36e5)})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(278);t.getCookie=r,t.setCookie=i,t.setInstallSourceCookie=o},1353:function(e,t,n){"use strict";function r(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return{h:t,m:n,s:e-3600*t-60*n}}function i(e){return s.padStart(String(e),2,"0")}function o(e,t){var n=void 0===t?{}:t,o=n.short,a=void 0!==o&&o,c=n.withSec,u=void 0!==c&&c,l=r(e),d=l.h,p=l.m,h=l.s,f=[];return d>0&&f.push(i(d)+" "+(a?"h":s.pluralize(d,"hour","hours"))),(p>0||!u)&&f.push(i(p)+" "+(a?"min":s.pluralize(p,"minute","minutes"))),u&&f.push(i(h)+" "+(a?"sec":s.pluralize(h,"second","seconds"))),f.join(" ")}Object.defineProperty(t,"__esModule",{value:!0});var s=n(510);t.MS_IN_SEC=1e3,t.MS_IN_MIN=60*t.MS_IN_SEC,t.MS_IN_HOUR=60*t.MS_IN_MIN,t.MS_IN_DAY=24*t.MS_IN_HOUR,t.secondsToTime=r,t.formatTime=o,t.convertTimeToShortString=function(e){return e.h?e.h+" hr "+e.m+" min":e.m>0?e.m+" min "+e.s+" sec":e.s+" sec"}},1354:function(e,t,n){"use strict";function r(){return h||(h=m.Monitoring.Logging.getLogger("denaliutils.dom"))}function i(e,t){if(!e||!e.parentElement)return!1;var n=e.className;return"string"==typeof n&&n.indexOf(t)>-1||i(e.parentElement,t)}function o(e,t,n){if(!e||!e.parentElement)return!1;var r=e.attributes.getNamedItem(t);return!(!r||r.value!==n)||o(e.parentElement,t,n)}function s(e,t){if(!t)return!1;for(;t.parentNode;){if(e===t.parentNode)return!0;t=t.parentNode}return!1}function a(e,t){return{top:e.top-t.top,bottom:e.bottom-t.bottom,left:e.left-t.left,right:e.right-t.right,width:e.width,height:e.height}}function c(e,t){return{top:e.top-t.top,bottom:e.bottom-t.top,left:e.left-t.left,right:e.right-t.left,width:e.width,height:e.height}}function u(e){if(!e)throw new Error("elem should not be null or undefined");var t=e.getBoundingClientRect();if(t.width||t.height){var n=e.ownerDocument,r=window,i=n.documentElement;return{top:t.top+r.pageYOffset-i.clientTop,left:t.left+r.pageXOffset-i.clientLeft,width:t.width,height:t.height}}return t}function l(e){var t;return f.Observable.fromEventPattern(function(n){try{t=new _(function(e){e.length>0?n(e[0].contentRect):r().warn("ResizeObserver was fired but the callback didn't have any entries")}),t.observe(e)}catch(e){r().error("Failed to instantiate ResizeObserver.",e)}},function(){t&&t.disconnect()})}function d(e){return void 0!==e.dataset&&"true"===e.dataset.disabled}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}Object.defineProperty(t,"__esModule",{value:!0});var h,f=n(16),g=n(972),m=n(4),_=g.default||g;t.hasParentWithClassName=i,t.hasParentWithAttribute=o,t.isParent=s,t.absToRelativeBuggy=a,t.absToRelative=c,t.getOffset=u,t.getResizeObserable=l;!function(e){function t(e,t){var n=t.x,r=t.y;return Math.trunc(e.top)<=Math.trunc(r)&&Math.trunc(e.bottom)>=Math.trunc(r)&&Math.trunc(e.left)<=Math.trunc(n)&&Math.trunc(e.right)>=Math.trunc(n)}e.empty={top:0,bottom:0,left:0,right:0,height:0,width:0},e.hasPoint=t}(t.Rect||(t.Rect={})),t.isDisabled=d,t.classes=p,t.svgVerticalAlignment=function(e){return e?{dominantBaseline:"middle"}:{dy:".3125em"}}},1355:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){function t(e){return{kind:"left",value:e}}function n(e){return{kind:"right",value:e}}function r(e){return"left"===e.kind}function i(e){return"right"===e.kind}function o(e,t){return r(e)?e:t(e.value)}function s(t){return t.then(function(t){return e.right(t)}).catch(function(t){return e.left(t)})}e.left=t,e.right=n,e.isLeft=r,e.isRight=i,e.flatMap=o,e.fromPromise=s}(t.Either||(t.Either={}))},1356:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(104);!function(e){function t(){r.invariant(!n(),"FullStory snippet already loaded");var e=document.createElement("script");e.innerHTML=i,document.head.appendChild(e)}function n(){return void 0!==window.FS}var i="window['_fs_debug'] = true;\n  window['_fs_host'] = 'fullstory.com';\n  window['_fs_org'] = '76Y20';\n  window['_fs_namespace'] = 'FS';\n  (function(m,n,e,t,l,o,g,y){\n    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window[\"_fs_namespace\"].');} return;}\n    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];\n    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';\n    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);\n    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};\n    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};\n    g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[\";\"]*\"[\";\"]*\"[\";\"]*\"')){\n      d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+\n      ';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};\n    })(window,document,window['_fs_namespace'],'script','user');";e.enable=t,e.isEnabled=n,e.ignoreClass="fs-hide"}(t.Fullstory||(t.Fullstory={}))},1357:function(e,t,n){"use strict";function r(e,t){return t.reduce(function(t,n){var r=n[e],i=t.get(r);return i||(i=[],t.set(r,i)),i.push(n),t},new Map)}function i(e,t,n){var r=new Map(t);return r.set(e,n),r}function o(e,t){var n=new Map(t);return n.delete(e),n}function s(e,t,n){var r=new Map(e),i=[],o=[];return t.forEach(function(e,t){var s=a.Option.of(r.get(t));n(t,e,s).fold(function(){s.nonEmpty()&&(o.push(s.get()),r.delete(t))},function(e){r.set(t,e),s.isEmpty()&&i.push(e)})}),{newMap:r,addedItems:i,removedItems:o}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7);t.groupBy=r,t.update=i,t.remove=o,t.patch=s},1358:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.ESC_CODE=27}(t.Keys||(t.Keys={}))},1359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.capacity=e,this.size=0,this._keymap={}}return e.prototype.put=function(e,t){var n={key:e,value:t};if(this._keymap[e]=n,this._tail?(this._tail.newer=n,n.older=this._tail):this._head=n,this._tail=n,this.size===this.capacity)return this.shift().value;++this.size},e.prototype.get=function(e){var t=this._getImpl(e);return t&&t.value},e.prototype.peek=function(e){var t=this._keymap[e];return t&&t.value},e.prototype.set=function(e,t){var n=this._getImpl(e),r=t(n&&n.value);return r?n?n.value=r:this.put(e,r):n&&this.remove(e),r},e.prototype.getRef=function(e){return this._getImpl(e)},e.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[e],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this._head=t.newer):t.older?(t.older.newer=void 0,this._tail=t.older):this._head=this._tail=void 0,--this.size,t.value},e.prototype.forEach=function(e){for(var t in this._keymap)e(t,this._keymap[t].value)},e.prototype.shift=function(){var e=this._head;return this._head&&(this._head.newer?(this._head=this._head.newer,this._head.older=void 0):this._head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e},e.prototype._getImpl=function(e){var t=this._keymap[e];if(t)return t===this._tail?t:(t.newer&&(t===this._head&&(this._head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this._tail,this._tail&&(this._tail.newer=t),this._tail=t,t)},e}();t.LRUCache=r},1360:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(125);!function(e){function t(e){return r.Option.of(e).filter(i.notEmpty)}function n(e){return r.Option.of(e).map(function(e){return e.filter(Boolean)}).filter(i.notEmpty)}e.string=t,e.array=n}(t.NotEmpty||(t.NotEmpty={}))},1361:function(e,t,n){"use strict";function r(e){return function(t){return t.map(e)}}function i(e){return function(t){return t.flatMap(e)}}function o(e){return function(t){return t.exists(e)}}function s(e,t){return function(n){return n.map(e).getOrElse(t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.map=r,t.flatMap=i,t.exists=o,t.mapOrDefault=s},1362:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(104),i=function(){function e(e,t){if(this.messageCount=e,this.timeframe=t,e<1)throw new r.IllegalArgumentError("messagesCount should be > 1");if(t<=0)throw new r.IllegalArgumentError("timeframe should be > 0");this._allowance=e,this._lastChecked=Date.now()}return e.prototype.hit=function(){var e=Date.now(),t=e-this._lastChecked;return this._lastChecked=e,this._allowance+=t*(this.messageCount/this.timeframe),this._allowance>this.messageCount&&(this._allowance=this.messageCount),!(this._allowance<1)&&(this._allowance-=1,!0)},e.prototype.toString=function(){return"[ messageCount: "+this.messageCount+", timeframe: "+this.timeframe+", allowance: "+Math.trunc(1e3*this._allowance)/1e3+", _lastCheck: "+this._lastChecked+"]"},e}();t.RateLimiter=i,function(e){var t=function(){function e(e,t){if(this._limiter=e,this._cooldownTime=t,this._lastLimiting=0,this._aboveThreshold=!1,t<0)throw new r.IllegalArgumentError("cooldownTime should be non-negative")}return e.prototype.hit=function(){var e=this._limiter.hit(),t=!1;return e?this._aboveThreshold&&Date.now()-this._cooldownTime>this._lastLimiting&&(this._aboveThreshold=!1,t=!0):(this._lastLimiting=Date.now(),this._aboveThreshold||(this._aboveThreshold=!0,t=!0)),{allow:e,aboveThreshold:this._aboveThreshold,wasTriggered:t}},e}();e.RateLimitIndicator=t}(i=t.RateLimiter||(t.RateLimiter={})),t.RateLimiter=i},1363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),i=n(6),o=n(267),s=n(104),a=n(4),c=n(7);!function(e){e.everyTrue=function(e){return e.every(Boolean)};var t=function(){function t(t,n){void 0===n&&(n=e.everyTrue);var r=this;this._name=t,this._condition=n,this._log=a.Monitoring.Logging.getLogger("rxSemaphore"),this._idx=0,this._state=i.Atom.create({}),this.state=this._state.view(function(e){return r._condition(Object.values(e))})}return t.prototype.watch=function(e,t){var n=this,i=t+"_"+this._idx++,a=e.subscribe(function(e){n._log.debug("RxSemaphore '"+n._name+"' value changed - "+i+": "+e),n._state.modify(o.modify((t={},t[i]=e,t)));var t});return s.invariant(void 0!==this._state.get()[i],"source '"+t+"' should starts with an initial value"),new r.Subscription(function(){a.unsubscribe(),n._state.modify(o.immutableModifyOption(i,c.None))})},t}();e.Impl=t}(t.RxSemaphore||(t.RxSemaphore={}))},1364:function(e,t,n){"use strict";function r(e){return"view"in e?e.view(function(e){return!e}):e.map(function(e){return!e})}function i(e){return function(t){return e.set(t)}}function o(e){return e instanceof p.Observable?e:p.Observable.of(e)}function s(e,t){return e instanceof p.Observable?e.map(t):t(e)}function a(e){return p.Observable.fromPromise(e().then(function(e){return d.Some(d.Right(e))}).catch(function(e){return d.Some(d.Left(e))})).startWith(d.None)}function c(e){return function(t,n){return n.catch(e.handler(t+" exception").error).retry(3).subscribe()}}function u(e,t,n){return void 0===n&&(n=!0),p.Observable.merge(e.mapTo(n),e.debounceTime(t).mapTo(!n)).distinctUntilChanged()}function l(e,t){var n=t.get();g.invariant(e(n),"first value should satisfy predicate");var r=h.Atom.create(n),o=r.set.bind(r);r.set=function(n){e(n)?o(n):s.closed||t.set(n)};var s=t.takeWhile(e).skip(1).subscribe(i(r)).add(void 0!==t.set?r.subscribe(i(t)):p.Subscription.EMPTY);return r}Object.defineProperty(t,"__esModule",{value:!0});var d=n(7),p=n(16),h=n(6),f=n(125),g=n(104);t.voidValue=void 0,t.toVoid=function(){return t.voidValue},t.invert=r,t.toOptionValueOnly=function(e){return e.fold(function(){return p.Observable.empty()},function(e){return p.Observable.of(e)})},t.toAtom=i,t.orEmpty=function(e){return f.choose(e,p.Observable.empty())},t.orEmptyRight=function(e){return f.choose(p.Observable.empty(),e)},t.delay=function(e,t){return p.Observable.of(e).delay(t)},t.toObservable=o,t.mapMaybeObservable=s,t.promiseToStream=a,t.createRetrySubscriber=c,t.toBooleanWithDebounce=u;!function(e){function t(t){return"requestIdleCallback"in window?function(e){var n=window;return p.Observable.create(function(r){var i=n.requestIdleCallback(function(){return r.next(e)},{timeout:t});return function(){return n.cancelIdleCallback(i)}})}:e.rafScheduler}function n(e){return p.Observable.create(function(t){var n=requestAnimationFrame(function(){return t.next(e)});return function(){return cancelAnimationFrame(n)}})}function r(t){return t.switchMap(e.rafScheduler)}function i(t,n){return t.switchMap(e.ricScheduler(n))}e.ricScheduler=t,e.rafScheduler=n,e.inRaf=r,e.inRic=i}(t.Scheduler||(t.Scheduler={})),t.lensedAtomWhile=l},1365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){void 0===r&&(r=20),this._task=e,this._buffer=t,this._run=n,this._batchSize=r,this._sub=null}return e.prototype.put=function(e){this._buffer.put(e),null===this._sub&&this._buffer.nonEmpty&&this._scheduleWork()},e.prototype._scheduleWork=function(){var e=this;this._sub=this._run(function(){e._task(e._buffer.take(e._batchSize)),e._sub=null,e._buffer.nonEmpty&&e._scheduleWork()})},e.prototype.shutdown=function(){this._sub&&(this._sub.unsubscribe(),this._sub=null)},e}();t.Worker=r},1366:function(e,t,n){n(511),e.exports=n(512)},174:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(4),o=n(16),s=n(2),a=n(346),c=function(e){function t(t){var n=e.call(this,"Client fetch error: "+(t&&t.message||t))||this;return n.name="FetchError",n.cause=t,n}return r.__extends(t,e),t}(s.CustomError);t.FetchError=c;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="TimeoutWarnError",t}return r.__extends(t,e),t}(s.CustomError);t.TimeoutWarnError=u;var l,d=function(){function e(){}return Object.defineProperty(e,"_logger",{get:function(){return void 0===e.__logger&&(e.__logger=i.Monitoring.Logging.getLogger("RxFetch")),e.__logger},enumerable:!0,configurable:!0}),e.request=function(t){return e._withTargetTag(this._trackedRequest,t)},Object.defineProperty(e,"_trackedRequest",{get:function(){return l||(l=i.Monitoring.TimeSeries.root.getMetric("fetch")),e._request},enumerable:!0,configurable:!0}),e.withTimeout=function(t,n){return function(r,i){return void 0===i&&(i={}),s.Async.promiseWithTimeout(t(r,i),n).catch(function(t){if(t instanceof o.TimeoutError){var n=e._getMeta(r,i),s=n.method,a=n.target;throw e.requestResults.next({type:"timeoutError",url:r,target:a,method:s}),e._extendError(t,r,s,a)}throw t})}},e._withTargetTag=function(t,n){return function(r,i){return"string"==typeof r?(i=i||{},i[e.FETCH_TARGET_TAG_OPTION]=n):r[e.FETCH_TARGET_TAG_OPTION]=n,t(r,i)}},e._withTimeoutWarn=function(t,n){return function(r,i){return o.Observable.merge(t(r,i),o.Observable.interval(n).mapTo(new u)).do(function(t){if(t instanceof u){var n=e._getMeta(r,i),o=n.method,s=n.target;e.requestResults.next({type:"timeoutWarn",url:r,method:o,target:s})}}).filter(function(e){return!(e instanceof u)}).first().toPromise()}},e._extendError=function(e,t,n,r){var i="object"==typeof e?s.isClientFetchError(e)?new c(e):e:new Error(e);return Object.assign(i,{isRxFetch:!0,method:n,target:r,url:"string"==typeof t?t:t.url})},e._getMeta=function(t,n){return{method:e._getMethod(t,n),target:e._getTarget(t,n)}},e._getMethod=function(e,t){return(("string"==typeof e?t&&t.method:e.method)||"get").toLowerCase()},e._getTarget=function(t,n){var r=("string"==typeof t?n&&n[e.FETCH_TARGET_TAG_OPTION]:t[e.FETCH_TARGET_TAG_OPTION])||"unknown";return"logs"===r?void 0:r},e.FETCH_TIMEOUT=15e3,e.FETCH_TARGET_TAG_OPTION="grammarly_target",e.__logger=void 0,e.requestResults=new o.Subject,e.nativeFetch=a.bind(window),e._request=function(t,n){var r=e._getMeta(t,n),i=r.method,o=r.target,s=l.getTimer(i+"."+o+".time").start();return e._withTimeoutWarn(e.nativeFetch,e.FETCH_TIMEOUT)(t,n).then(function(n){return o&&s.stop(),e.requestResults.next(n.ok?{type:"success",method:i,target:o}:{type:"serverError",method:i,response:n,url:t,target:o}),n}).catch(function(n){var r="object"==typeof n?n:new Error(n||"Unknown fetch error");throw e.requestResults.next({type:"clientError",url:t,reason:r,method:i,target:o}),e._extendError(r,t,i,o)})},e}();t.RxFetch=d;var p=!1;d.requestResults.subscribe(function(e){if(e.target)try{l.getCounter(e.method+"."+e.target+"."+e.type).increment(),p||"unknown"!==e.target||(p=!0,d._logger.warn("got unknown fetch target",{result:e}))}catch(e){console.error("Error while reporting timeseries metrics",e)}})},175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(64),o=function(){function e(t,n,r){void 0===r&&(r=e.DEFAULT_TYPE),this.start=t,this.end=n,this.type=r}return e.prototype.widen=function(){return new e(this.start-1,this.end+1,this.type)},e.prototype.narrow=function(){return new e(this.start+1,this.end-1,this.type)},Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this.start,this.end,this.type)},e.prototype.toString=function(){return"R("+this.start+"; "+this.end+")"},e.empty=new e(0,0),e}();t.Range=o,function(e){e.DEFAULT_TYPE="*",e.AlertIdDelimiter="|"}(o=t.Range||(t.Range={})),t.Range=o;var s=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.value=r,i}return r.__extends(t,e),t.prototype.toString=function(){return"WR("+this.start+"; "+this.end+"; "+this.value+")"},t.prototype.equals=function(e){return this.start===e.start&&this.value===e.value},t.prototype.hashCode=function(){return 1e3*this.start+this.end},t}(o);t.WordRange=s;var a=function(){function e(e,t){void 0===t&&(t=1),this.range=e,this.type=t>1?i.ClickType.dblclick:i.ClickType.click}return e.prototype.equals=function(e){return this.range.equals(e.range)&&this.type===e.type},e.prototype.hashCode=function(){return 31*(31+this.range.hashCode())+this.type},e}();t.ClickedWord=a},176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(4),o=function(){function e(e,t,n,r){this.from=e,this.to=t,this.event=n,this.args=r}return e.prototype.toString=function(){return"Transition: From: "+this.from+" to: "+this.to+" (Args: "+this.args+")"},e}();t.EventInfo=o;var s=function(){function e(t,n){this._log=i.Monitoring.Logging.getLogger("coreclients.fsm"),this._parents={},this._transitions={},this._scheduled=[],this._listeners={},this._inTransition=!1,this._verbose=!1,this._id=++e._ids,this._current=t,this._final=n||null}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFinal",{get:function(){return this._final===this._current},enumerable:!0,configurable:!0}),e.prototype.transition=function(e,t,n){this._transitions[e<<11|n]=t},e.prototype.parent=function(e,t){this._parents[e]=t},e.prototype.is=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.findIndex(function(t){return t===e._current})>=0},e.prototype.from=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(c.bind.apply(c,[void 0,this].concat(e)))},e.prototype.with=function(e){return new a(this,e)},e.prototype.verbose=function(e,t){return this._verbose=!0,this._states=e,this._events=t,this},e.prototype.on=function(e,t){return this._addCallback(this._listeners,e,t),this},e.prototype.event=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n=this;return r.__generator(this,function(i){return[2,new Promise(function(i,s){return r.__awaiter(n,void 0,void 0,function(){var n,a,c,u,d;return r.__generator(this,function(p){switch(p.label){case 0:if(this._verbose&&this._trace("Handling event: "+this._eventName(e)),this._current===this._final)return this._trace("Cannot handle event "+e+": FSM is in it's final state"),[2,i(!1)];if(this._inTransition)return this._scheduled.push(new l(e,t,i,s)),[2];n=this._current,a=null,c=function(){var s,c,l,d,p,h,f;return r.__generator(this,function(g){switch(g.label){case 0:if(void 0===(s=u._transitions[n<<11|e]))return[3,10];u._inTransition=!0,c=u._listeners[s]||[],l=new o(u._current,s,e,t),g.label=1;case 1:g.trys.push([1,7,8,9]),u._verbose&&u._trace("Transition from "+u._stateName(l.from)+" to "+u._stateName(l.to)+" on "+u._eventName(e)+" Arguments: "+t),d=c.map(function(e){return Promise.resolve(e(l))}),u._current=s,u._inTransition=!1,p=function(e){return r.__generator(this,function(t){switch(t.label){case 0:return[4,u.event(e.event,e.args).then(function(t){return e.done(t)}).catch(function(t){return e.fail(t)})];case 1:return t.sent(),[2]}})},h=u._scheduled.shift(),g.label=2;case 2:return void 0===h?[3,5]:[5,p(h)];case 3:g.sent(),g.label=4;case 4:return h=u._scheduled.shift(),[3,2];case 5:return[4,Promise.all(d).then(function(e){return i(!0)})];case 6:return g.sent(),[3,9];case 7:return f=g.sent(),a=f,[3,9];case 8:return u._inTransition=!1,[7];case 9:return[2,"break"];case 10:return n=u._parents[n],[2]}})},u=this,p.label=1;case 1:return void 0===n?[3,3]:[5,c()];case 2:return d=p.sent(),"break"===d?[3,3]:[3,1];case 3:return a?s(a):i(!1),[2]}})})})]})})},e.prototype._addCallback=function(e,t,n){var r=e[t];return r||(r=[],e[t]=r),r.push(n),this},e.prototype._eventName=function(e){return void 0===this._events?e:this._events[e]},e.prototype._stateName=function(e){return void 0===this._states?e:this._states[e]},e.prototype._trace=function(e){this._log.trace("FSM#"+this._id+" [VERBOSE]: "+e)},e._ids=0,e}();t.StateMachine=s;var a=function(){function e(e,t){this.hsm=e,this.state=t}return e.prototype.childrenOf=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(t){return e.hsm.parent(e.state,t)}),this.hsm},e.prototype.parentOf=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(t){return e.hsm.parent(t,e.state)}),this.hsm},e}();t.WithBuilder=a;var c=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hsm=e,this._states=t}return e.prototype.to=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new u(this.hsm,this._states,e)},e}();t.TransitionBuilder=c;var u=function(){function e(e,t,n){this.hsm=e,this.from=t,this.to=n}return e.prototype.on=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(t){return e.from.forEach(function(n){return e.to.forEach(function(r){return e.hsm.transition(n,r,t)})})}),this.hsm},e}();t.EventBuilder=u;var l=function(){function e(e,t,n,r){this.event=e,this.args=t,this.done=n,this.fail=r}return e}()},177:function(e,t,n){"use strict";function r(e,t){if(1005===e&&t){var n=t.toLowerCase();return n.indexOf("user not found")>=0?l.Reconnect.WsCodes.UNAUTHORIZED:n.indexOf("cannot find document")>=0?l.Reconnect.WsCodes.NOT_FOUND:e}return e}Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(17),s=n(176),a=n(1343),c=n(62),u=n(4),l=n(90);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CLOSED=3]="CLOSED",e[e.ANY=4]="ANY"}(i=t.States||(t.States={}));var d;!function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.SEND=3]="SEND",e[e.CLOSE=4]="CLOSE"}(d=t.Events||(t.Events={})),t.errPrintln=function(e){u.Monitoring.Logging.getLogger("coreclients.errPrintln").error("WebSocket Error",e)},t.logPrintln=function(e){u.Monitoring.Logging.root.isEnabled(u.Logging.LogLevel.TRACE)&&u.Monitoring.Logging.getLogger("coreclients.errPrintln").trace("WebSocket:",{message:e})},t.ignore=function(e){};var p=function(){function e(e){var n=this;this._createWSInstance=e,this._log=u.Monitoring.Logging.getLogger("coreclients.ws"),this._maxDelay=6e4,this._delay=1e3,this._ondisconnect=t.logPrintln,this._onerror=t.errPrintln,this._onmessage=function(e,t){n._log.warn("Default message handler used <<< ",{message:t})},this._isInitialized=function(){return!0},this._read=function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t&&null!==t)return t}catch(e){}return e},this._write=function(e){return"string"==typeof e?e:JSON.stringify(e)}}return e.create=function(t){return void 0===t&&(t=function(e){return new a.BrowserWebSocket(e)}),new e(t)},e.prototype.setMaxReconnectDelay=function(e){return this._maxDelay=e,this},e.prototype.setInitialReconnectDelay=function(e){return this._delay=e,this},e.prototype.writer=function(e){return this._write=e,this},e.prototype.reader=function(e){return this._read=e,this},e.prototype.onDisconnect=function(e){return this._ondisconnect=e,this},e.prototype.onMessage=function(e){return this._onmessage=e,this},e.prototype.onError=function(e){return this._onerror=e,this},e.prototype.resetReconnectCounterWhen=function(e){return this._isInitialized=e,this},e.prototype.connect=function(e){var t=this,n=new s.StateMachine(i.DISCONNECTED,i.CLOSED).with(i.ANY).parentOf(i.CLOSED,i.CONNECTED,i.CONNECTING,i.DISCONNECTED).from(i.CONNECTING).to(i.CONNECTED).on(d.CONNECTED).from(i.CONNECTED,i.CONNECTING).to(i.DISCONNECTED).on(d.DISCONNECT).from(i.DISCONNECTED).to(i.CONNECTING).on(d.CONNECT).from(i.ANY).to(i.CLOSED).on(d.CLOSE).from(i.CONNECTED).to(i.CONNECTED).on(d.SEND).on(i.DISCONNECTED,function(e){return t._ondisconnect(e.args)}),r=new g(this._maxDelay,this._delay,this._reconnect);return this._reconnect=r,r.initReconnect(e,function(e){return t._createWebSocket(e,n,r)}),this._createWebSocket(e,n,r)},e.prototype._createWebSocket=function(e,t,n){var r=this;return t.event(d.CONNECT).then(function(s){return new Promise(function(a,c){if(!s){var u=new _({status:"Unknown",message:"Cannot connect",code:l.Reconnect.WsCodes.UNKNOWN_WS_ERROR,url:e});return t.event(d.DISCONNECT,new m(u,n)),void c(new Error("\n            WebSocket [ERROR] FSM provided cannot be switched to CONNECTING state from "+i[t.current]+"\n          "))}r._log.debug("Connecting to "+e);var p=r._createWSInstance(e);p.onopen=function(e){return o.__awaiter(r,void 0,void 0,function(){var e,r,s=this;return o.__generator(this,function(o){switch(o.label){case 0:return[4,t.event(d.CONNECTED)];case 1:return(e=o.sent())?(r=new h(p,t,this._write),p.onmessage=function(e){var t=s._read(e.data);s._onmessage(r,t),s._isInitialized(t)&&n.reset()},a(r),[2]):(c(new Error("WebSocket [ERROR] FSM cannot be switched to CONNECTED state from "+i[t.current])),p.close(l.Reconnect.WsCodes.BLOCKED_BY_CLIENT,"WebSocket lib initialized"),[2])}})})},p.onclose=function(o){r._log.debug("Connection to "+e+" closed",{code:o.code,reason:o.reason,fsmState:i[t.current]});var s=new _({status:o.reason,message:"Connection closed: "+o.reason,code:o.code,url:e});t.event(d.DISCONNECT,new m(s,n))},p.onerror=function(i){try{var o=new _({status:"ws_error",message:"WebSocket error",url:e});try{r._onerror(o)}catch(e){r._log.error("OnError handler thrown an error",e)}t.event(d.DISCONNECT,new m(o,n))}finally{c(i)}}})})},e}();t.WS=p;var h=function(){function e(e,t,n){this._ws=e,this._fsm=t,this.write=n}return e.prototype.send=function(e){var t=this;return this._fsm.event(d.SEND).then(function(n){if(!n)throw new Error("WebSocket [ERROR]: Trying to send on invalid connection state: "+i[t._fsm.current]);if(t.state!==f.State.OPEN)throw new Error("WebSocket [ERROR]: Trying to send on invalid websocket state: "+f.State[t.state]);t._ws.send(t.write(e))})},e.prototype.close=function(e){var t=this,n=void 0===e?{}:e,r=n.code,o=void 0===r?1e3:r,s=n.reason;return this._fsm.event(d.CLOSE).then(function(e){if(!e)throw new Error("WebSocket [ERROR]: Trying to close connection which already closed or had invalid state: "+i[t._fsm.current]);t._ws.close(o,s)})},Object.defineProperty(e.prototype,"url",{get:function(){return this._ws.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._ws.readyState},enumerable:!0,configurable:!0}),e}();t.WSConnectionImpl=h;var f;!function(e){!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(e.State||(e.State={}))}(f=t.WSConnection||(t.WSConnection={}));var g=function(){function e(e,t,n){this._maxDelay=e,this.initialDelay=t,this._log=u.Monitoring.Logging.getLogger("coreclients.wsreconnect"),this.prevDelay=n&&n.prevDelay||0,this._reconnectCounter=n&&n.reconnectCounter||0}return Object.defineProperty(e.prototype,"url",{set:function(e){this._log.info("WebSocket [INFO]: Url was overwritten "+this._url+" to "+e+" after disconnect"),this._url=e},enumerable:!0,configurable:!0}),e.prototype.initReconnect=function(e,t){this._reconnect=t,this._url=e},Object.defineProperty(e.prototype,"delay",{get:function(){return this.prevDelay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reconnectCounter",{get:function(){return this._reconnectCounter},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._reconnectCounter=0,this.prevDelay=0},Object.defineProperty(e.prototype,"nextDelay",{get:function(){return Math.min(this._maxDelay,Math.max(this.initialDelay,2*this.prevDelay))},enumerable:!0,configurable:!0}),e.prototype.scheduleReconnect=function(e){return void 0===e&&(e=this.nextDelay),o.__awaiter(this,void 0,void 0,function(){var t=this;return o.__generator(this,function(n){if(e<0)throw new Error("WebSocket [ERROR]: Negative delay is not allowed: "+e);return 0===e?[2,this.reconnectNow()]:[2,new Promise(function(n,r){var i=function(){return t.reconnectNow(t._url).then(function(e){n(e)}).catch(function(e){return r(e)})};t._log.debug("Reconnecting to "+t._url+" after timeout "+e),t.cancelReconnect(),t._timer=setTimeout(i,e),t.prevDelay=e})]})})},e.prototype.reconnectNow=function(e){return void 0===e&&(e=this._url),o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){if(!this._reconnect)throw new Error("WebSocket [ERROR]: Reconnect is not set, consider setting it before reconnect will be triggered");return this.cancelReconnect(),this._reconnectCounter++,[2,this._reconnect(e)]})})},e.prototype.cancelReconnect=function(){this._timer&&clearTimeout(this._timer)},e}();t.WSReconnectImpl=g;var m=function(){function e(e,t){this._error=e,this.reconnect=t}return e.prototype.toString=function(){return this._error.message},Object.defineProperty(e.prototype,"code",{get:function(){return this._error.code},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return"WebSocket [CLOSE]: statusCode="+this._error.code+" reason: "+this._error.status},enumerable:!0,configurable:!0}),e}();!function(e){function t(e){return void 0!==e&&null!==e&&(void 0!==e.code||void 0!==e.reason)}e.is=t}(t.CloseEventInfo||(t.CloseEventInfo={}));var _=function(e){function t(t){var n=t.code,i=void 0===n?-1:n,o=t.status,s=t.url,a=t.message,c=t.body,u=e.call(this,a)||this;return u.name="WSError",u.url=s,u.code=r(i,a),u.body=c,u.status=o,u}return o.__extends(t,e),t}(c.CustomError);t.WSError=_},178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(2);!function(e){function t(e){return e===c.Proofit||e===c.Closed||e===c.Success}function n(t){return function(n){switch(t){case e.Type.Critical:return n.critical;case e.Type.Advanced:return n.advanced;case e.Type.Originality:case e.Type.Other:throw new i.InvariantError("Don't use this function for Originality/Other type");default:return i.assertNever(t)}}}function o(t){return function(n){switch(t){case e.Type.Critical:return n.critical;case e.Type.Advanced:return n.advanced;case e.Type.Originality:return n.plagiarism;case e.Type.Other:throw new i.InvariantError("Don't use this function for Other type");default:return i.assertNever(t)}}}function s(e,t){return l[e.type]-l[t.type]||e.priority-t.priority}function a(e,t,n){void 0===t&&(t=u.empty);var r=i.ObjectUtils.update(h.base,e);return new d(r,t,n)}var c;!function(e){e.Plagiarism="Originality",e.Premium="Hidden",e.Proofit="Proofit",e.Closed="Closed",e.Success="Success",e.AllAlerts="All alerts",e.Readability="Readability mismatch"}(c=e.SpecialId||(e.SpecialId={})),e.isStaticId=t;!function(e){e.Critical="Critical",e.Advanced="Advanced",e.Originality="Originality",e.Other="Other"}(e.Type||(e.Type={}));!function(e){e.Accuracy="Accuracy",e.Clarity="Clarity",e.Effectiveness="Effectiveness",e.Originality="Originality",e.Hidden="Hidden"}(e.Category||(e.Category={}));var u;!function(e){e.empty={count:0,unreadCount:0,percentile:0,textLength:0},e.first=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=0),{count:1,unreadCount:e,percentile:0,textLength:t}},e.fromAlert=function(e){return{count:1,unreadCount:e.unread,textLength:e.textLength,percentile:0}},e.join=function(e,t){return{count:e.count+t.count,unreadCount:e.unreadCount+t.unreadCount,textLength:e.textLength+t.textLength,percentile:e.percentile+t.percentile}},e.reverse=function(e){return{count:-e.count,unreadCount:-e.unreadCount,textLength:-e.textLength,percentile:-e.percentile}}}(u=e.Meta||(e.Meta={})),e.typeMatch=n,e.fullTypeMatch=o;var l={Critical:0,Advanced:1,Originality:2,Other:3};e.getSortOrder=function(e){return l[e]},e.comparator=s;var d=function(){function e(e,t,n){void 0===n&&(n=function(t){return t.lensId===e.id}),this.info=e,this.meta=t,this.filter=n}return Object.defineProperty(e.prototype,"title",{get:function(){return this.info.title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.info.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this.info.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.info.description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this.info.priority},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this.meta.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unreadCount",{get:function(){return this.meta.unreadCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percentile",{get:function(){return this.meta.percentile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textLength",{get:function(){return this.meta.textLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.info.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exclusiveHighlights",{get:function(){return this.info.exclusiveHighlights},enumerable:!0,configurable:!0}),e.prototype.appendMeta=function(t){return new e(this.info,u.join(this.meta,t),this.filter)},e.prototype.equals=function(e){return this.id===e.id&&this.count===e.count&&this.unreadCount===e.unreadCount&&this.percentile===e.percentile&&this.priority===e.priority},e.prototype.toString=function(){return JSON.stringify(this,void 0,2)},e.prototype.toJSON=function(){return{id:this.id,type:this.type,count:this.count,unreadCount:this.unreadCount,priority:this.priority}},e}();e.StaticLensImpl=d;var p=function(e){function t(t,n,r,i){var o=e.call(this,t,n,i)||this;return o._ops=r,o}return r.__extends(t,e),t.prototype.dismissAll=function(){return this._ops._dismissAll(this)},t.prototype.appendMeta=function(e){return new t(this.info,u.join(this.meta,e),this._ops,this.filter)},t}(d);e.LensImpl=p;var h;!function(t){function n(e){return i.ObjectUtils.update(t.base,e)}t.base={id:"Base",type:e.Type.Other,category:e.Category.Hidden,title:"Base Lens",description:"",priority:0,exclusiveHighlights:!1},t.create=n,t.plagiarism=n({id:e.SpecialId.Plagiarism,type:e.Type.Originality,category:e.Category.Originality,title:"Plagiarism",exclusiveHighlights:!0}),t.premium=n({id:e.SpecialId.Premium,type:e.Type.Advanced,title:"Premium"}),t.allAlerts=n({id:e.SpecialId.AllAlerts,type:e.Type.Critical,title:"All Alerts"}),t.readability=n({id:e.SpecialId.Readability,type:e.Type.Advanced,category:e.Category.Clarity,title:"Readability",priority:400})}(h=e.Info||(e.Info={})),e.createStaticLens=a}(t.Lens||(t.Lens={}))},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(500);t.CAPI=i;var o=n(509);t.IO=o;var s=n(506);t.DOX=s;var a=n(176);t.FSM=a;var c=n(503);t.Dapi=c.Dapi,t.Properties=c.Properties;var u=n(1331);t.Auth=u.Auth,t.LoginType=u.LoginType;var l=n(1344);t.SubscriptionClient=l.SubscriptionClient;var d=n(1342);t.Irbis=d.Irbis;var p=n(41);t.Ajax=p.Ajax,t.Request=p.Request,t.RequestBuilder=p.RequestBuilder,t.HTTPError=p.HTTPError;var h=n(177);t.WSError=h.WSError;var f=n(90);t.Reconnect=f.Reconnect;var g=n(1335);t.Diagnostics=g.Diagnostics;var m=n(62);t.CustomError=m.CustomError,t.retryCountPredicate=m.retryCountPredicate,t.promiseRetrier=m.promiseRetrier,t.invariant=m.invariant,t.assert=m.assert;var _=n(266);t.Proofit=_.Proofit;var y=n(1340);t.RawFile=y.RawFile;var v=n(57);t.FingerprintsImpl=v.FingerprintsImpl;var b=n(64);t.Change=b.Change,t.Delta=b.Delta,t.DeltaUtils=b.DeltaUtils,t.Diff=b.Diff,r.__exportStar(n(262),t);var w=n(263);t.DocumentContext=w.DocumentContext,t.genreToDomain=w.genreToDomain,t.domainToGenre=w.domainToGenre;var E=n(506);t.DoxDocument=E.DoxDocument,t.DoxClient=E.DoxClient,t.DoxErrors=E.DoxErrors,t.DoxDocumentSettings=E.DoxDocumentSettings,t.DoxRemoteDocument=E.DoxRemoteDocument,t.DoxRequest=E.DoxRequest;var S=n(500);t.RawAlert=S.RawAlert;var C=n(1336);t.Dictionary=C.Dictionary;var k=n(1341);t.Institution=k.Institution},180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(107),o=n(259),s=n(271),a=n(271);t.FeaturesModel=a.FeaturesModel,t.DenaliFeatures=a.DenaliFeatures,t.CardFeatures=a.CardFeatures,t.Feature=a.Feature,t.FeatureAtom=a.FeatureAtom,t.NavigationBarFeatures=a.NavigationBarFeatures,t.ToolbarFeatures=a.ToolbarFeatures,t.DenaliPageVMFeatures=a.DenaliPageVMFeatures;var c=n(486);t.UserProfile=c.UserProfile,t.UserInstitution=c.UserInstitution,t.UserAccount=c.UserAccount,t.UserAccountOperationsModel=c.UserAccountOperationsModel,t.UserType=c.UserType,t.UserGroups={DESKTOP_EDITOR_INSTALLED:"desktop_editor_used",FREEBIE_USER:"freebie",PREMIUM_CONVERSION:"premium-conversion"};var u=function(){function e(e,t,n,a,c,u,l,d,p,h){this._state=e,this._authApi=t,this._subscriptionApi=n,this._irbisApi=a,this._dapi=c,this._telemetry=u,this._router=l,this._appConfig=d,this._environment=p,this._upgradeHook=h,this._log=r.Monitoring.Logging.getLogger("model.account"),this.profile=this._state.view("userProfile"),this.subscription=new o.SubscriptionModelImpl(this._state.lens("subscription"),this._subscriptionApi,this._telemetry,this._appConfig,this._environment,this._upgradeHook),this.settings=new i.SettingsModelImpl(this._state.lens("settings"),this._state.lens("customFields"),this._dapi,this._state.lens("userProfile").lens("id")),this.features=new s.FeaturesModel(this._state.view("experiments"),this.subscription.state,this.profile,this.settings,this._state.view("institution"),this._environment,this._router,this._appConfig)}return e.prototype.areValidCredentials=function(e,t){var n=this;return this._authApi.login(e,t).then(function(e){return e&&!e.err}).catch(function(e){if(401===e.code)return n._log.warn("authError: areValidCredentials",e),!1;throw n._log.error("authError: areValidCredentials",e),e})},e.prototype.changeName=function(e){var t=this;return this._authApi.changeName(e).then(function(){return t._state.lens("userProfile").lens("fullName").set(e)}).catch(this._log.handler("authError: changeName").error)},e.prototype.changeEmail=function(e,t){var n=this;return this._authApi.changeEmail(e,t).then(function(){return n._state.lens("userProfile").lens("newEmail").set(e)}).catch(this._log.handler("authError: changeEmail").warn)},e.prototype.changePassword=function(e,t,n){return this._authApi.changePassword(e,t,n).catch(this._log.handler("authError: changePassword").warn)},e.prototype.deleteAccount=function(){return this._irbisApi.deleteAccount().catch(this._log.handler("irbisError: deleteAccount failed").warn)},e}();t.UserAccountModelImpl=u},181:function(e,t,n){"use strict";function r(e,n){var r=n?t.DefaultAcademicGenresTitleMap[e]:t.GenresTitleMap[e];if(!r)throw new TypeError("Coudn't find title for "+e);return r}function i(e){return{contextualSpelling:e,grammar:e,sentenceStructure:e,punctuation:e,style:e,enhancement:e,plagiarism:e}}function o(e,t){return Object.assign({},e,{plagiarism:t})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(88);t.GenresTitleMap={general:"General (default)",academic:"Academic",academic_general:"General academic",academic_essay:"Essay",academic_report:"Report",academic_case:"Case study",academic_review:"Book/literature review",academic_proposal:"Research proposal",academic_results:"Research results",academic_disser:"Dissertation",academic_letter:"Admission letter",business:"Business",business_other:"General business",business_letter:"Business letter",business_email:"Business email",business_report:"Report",business_memo:"Memo",business_proposal:"Proposal",business_article:"Article/blog post",business_adv:"Ad/website copy",technical:"Technical",technical_other:"General technical",technical_manual:"End-user assistance document",technical_documentation:"Technical documentation",technical_marketing:"Marketing document",medical:"Medical",medical_other:"General medical",medical_regulatory:"Regulatory writing",medical_educational:"Educational writing",creative:"Creative",creative_other:"General creative",creative_nonfiction:"Creative non-fiction",creative_novel:"Novel",creative_script:"Script",creative_story:"Short story",casual:"Casual",casual_other:"General casual",casual_email:"Personal email",casual_blog:"Personal blog post"},t.DefaultAcademicGenresTitleMap=Object.assign({},t.GenresTitleMap,{general:"General",academic_general:"General academic (default)"}),t.getGenreMenuTitle=r,t.createChecksDefaultState=i,t.setPlagiarism=o,t.defaultState={contextualSpelling:!0,grammar:!0,sentenceStructure:!0,punctuation:!0,style:!0,enhancement:!0,plagiarism:!1};var a=function(){function e(e,t,n){this._genre=e,this._checks=t,this._telemetry=n,this.genre=this._genre,this.contextualSpellingEnabled=this._checks.lens("contextualSpelling"),this.grammarEnabled=this._checks.lens("grammar"),this.sentenceStructureEnabled=this._checks.lens("sentenceStructure"),this.punctuationEnabled=this._checks.lens("punctuation"),this.styleEnabled=this._checks.lens("style"),this.enhancementEnabled=this._checks.lens("enhancement"),this.plagiarismEnabled=this._checks.lens("plagiarism"),this.checksEnabled=this._checks}return e.prototype.setGenre=function(e){this._genre.set(e)},e.prototype.toggleFreemiumChecks=function(){var e=[this.contextualSpellingEnabled,this.grammarEnabled,this.punctuationEnabled,this.sentenceStructureEnabled,this.styleEnabled],t=e.some(function(e){return e.get()});e.forEach(function(e){return e.set(!t)}),this._telemetry.settingsToggled(!t,"all")},e.prototype.isAlertGroupEnabled=function(e){var t=this._checks.get();return e===s.AlertGroup.contextualSpelling&&t.contextualSpelling||e===s.AlertGroup.enhancement&&t.enhancement||e===s.AlertGroup.grammar&&t.grammar||e===s.AlertGroup.plagiarism&&t.plagiarism||e===s.AlertGroup.punctuation&&t.punctuation||e===s.AlertGroup.sentenceStructure&&t.sentenceStructure||e===s.AlertGroup.style&&t.style},e}();t.CheckingSettingsModelImpl=a},183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.updateBilling=0]="updateBilling",e[e.paymentError=1]="paymentError",e[e.subscriptionUpdated=2]="subscriptionUpdated",e[e.subscriptionCancelled=3]="subscriptionCancelled",e[e.cantUpgradeSubscription=4]="cantUpgradeSubscription",e[e.resumedSubscription=5]="resumedSubscription",e[e.cantResumeSubscription=6]="cantResumeSubscription",e[e.unknownError=7]="unknownError",e[e.unknownOrigin=8]="unknownOrigin",e[e.blobDownloadUnsupported=9]="blobDownloadUnsupported",e[e.mobileCancel=10]="mobileCancel",e[e.paypalSuccess=11]="paypalSuccess",e[e.paypalError=12]="paypalError"}(t.SubscriptionNotificationType||(t.SubscriptionNotificationType={}))},184:function(e,t,n){"use strict";function r(e,n){var r="function"==typeof e?e:n,i="function"!=typeof e?e:void 0;return r.contextTypes=t.baseComponentContextTypes,i&&(r.propTypes=i),r}function i(e){return r(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=n(8),a=n(49),c=n(16),u=n(6),l=n(126),d=n(32),p=n(495),h=n(186),f=n(2),g=n(124),m=n(272),_={appConfig:a.object},y={screen:a.object},v={visibleOverlays:a.object},b={pageSessionId:a.string},w={environment:a.object};t.baseComponentContextTypes=Object.assign({router:a.object},g.Router.ContextTypes,_,l.oldEditorTelemetryContextType,l.telemetryContextType,d.TextResources.ContextTypes,h.notificationsContextTypes,p.Tooltip.ContextTypes,y,m.documentLoaderContext,v,b,w);var E=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),n.contextTypes=t.baseComponentContextTypes,n}(s.Component);t.BaseComponent=E,t.component=r,t.withContext=i;var S=function(){function e(){var e=this;this.resize=c.Observable.fromEvent(window,"resize").share().mapTo(void 0),this.remSize=u.Atom.create(this._getRemSize()),this._subs=[this.resize.subscribe(function(){return e.remSize.set(e._getRemSize())})],f.registerDebugHelper("getRemSize",function(){return e.remSize.get()})}return e.prototype.dispose=function(){this._subs.forEach(function(e){return e.unsubscribe()})},e.prototype.update=function(){var e=this;requestAnimationFrame(function(){return e.remSize.set(e._getRemSize())})},e.prototype._getRemSize=function(){return parseFloat(getComputedStyle(document.documentElement).fontSize||"16")},e}();t.ScreenContextImpl=S},186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n(6),o=n(4),s=function(){function e(){}return e.prototype.error=function(e){return{type:"error",args:{errorMessage:e},dontRemoveOnAnyAction:!0,denaliShowTimeMs:1/0,denaliCloseOnClick:!0}},e.prototype.documentUploaded=function(e){return{type:"documentUploaded",args:{navigateToDocument:e},showTimeMs:1/0}},e.prototype.denaliDocumentUploaded=function(e){return{type:"denaliDocumentUploaded",args:{navigateToDocuments:e},severity:"info",showTimeMs:1/0}},e.prototype.newDocumentCreated=function(e){return{type:"newDocumentCreated",args:{navigateToDocument:e},showTimeMs:1/0}},e.prototype.documentDeleted=function(e,t,n,r){return void 0===r&&(r=!1),{type:"documentDeleted",args:{documentTitle:t,documentId:e,failedToRestore:r,restoreDocument:n}}},e.prototype.documentTypeUnsupported=function(){return{type:"documentTypeUnsupported"}},e.prototype.trackedChangesIsUnsupported=function(){return{type:"trackedChangesIsUnsupported",showTimeMs:3e4}},e.prototype.documentUploadGeneralError=function(){return{type:"documentUploadGeneralError"}},e.prototype.documentIsEmpty=function(){return{type:"documentIsEmpty"}},e.prototype.generic=function(e,t,n){return{type:"generic",args:{message:e,description:t},severity:n||"info",denaliShowTimeMs:5e3}},e.prototype.documentSizeExceeded=function(){return{type:"documentSizeExceeded"}},e.prototype.changeEmail=function(e){return{type:"changeEmail",args:{email:e}}},e.prototype.logoutError=function(e,t){return{type:"logoutError",args:{forceRetry:e,timeToRetry:t},showTimeMs:1/0,dontCloseOnClick:!0,important:!0,dontRemoveOnAnyAction:!0,severity:"error"}},e.prototype.selfUpdate=function(){return{type:"selfUpdateBlocker",showTimeMs:1/0,denaliShowTimeMs:1/0,dontCloseOnClick:!0,dontRemoveOnAnyAction:!0,severity:"error"}},e.prototype.unauthorizedError=function(){return{type:"unauthorizedError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,dontRemoveOnAnyAction:!0,severity:"error"}},e.prototype.offline=function(e,t){return{type:"offline",args:{resetClock:e,reconnectTime:t},showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.slowNetwork=function(){return{type:"slowNetwork",showTimeMs:1/0,dontCloseOnClick:!0,denaliShowTimeMs:5e3,denaliCloseOnClick:!0}},e.prototype.serverError=function(){return{type:"serverError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.unknownConnectionError=function(){return{type:"unknownConnectionError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.connectionWSError=function(){return{type:"connectionWSError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.clientConnectionError=function(){return{type:"clientConnectionError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.checkingIsDown=function(){return{type:"checkingIsDown",showTimeMs:1/0,denaliShowTimeMs:1/0,dontCloseOnClick:!0,denaliCloseOnClick:!0}},e.prototype.extensionInstallFailed=function(){return{type:"extensionInstallFailed"}},e.prototype.copyToClipboardFailed=function(){return{type:"copyToClipboardFailed",denaliShowTimeMs:5e3,denaliCloseOnClick:!0}},e.prototype.alertUndo=function(e,t){return{type:"alertUndo",args:{undoAction:e,action:t},showTimeMs:1/0,size:"flexible",severity:"info"}},e.prototype.denaliAlertUndo=function(e,t,n){return{type:"alertUndoDenali",undoHandler:e,dismissedHandler:t,args:n,denaliShowTimeMs:5e3,size:"flexible",severity:"info",exclusiveTag:"alertUndoDenali"}},e.prototype.proofitPaymentDeclinedError=function(e,t){return{type:"proofitPaymentDeclinedError",denaliCloseOnClick:!0,denaliShowTimeMs:1/0,args:{paymentMethod:e,creditCardSuffix:t}}},e.prototype.proofitEmptyDocumentError=function(){return{type:"proofitEmptyDocumentError",denaliCloseOnClick:!0,denaliShowTimeMs:1/0}},e.prototype.proofitDocumentProofreadError=function(e){return{type:"proofitDocumentProofreadError",denaliCloseOnClick:!0,denaliShowTimeMs:1/0,args:{navigateToDocuments:e}}},e.prototype.proofitCancelled=function(){return{type:"proofitCancelled",denaliCloseOnClick:!0,denaliShowTimeMs:1/0}},e.prototype.proofitCompleted=function(e,t,n){return{type:"proofitCompleted",severity:"info",denaliCloseOnClick:!0,denaliShowTimeMs:1/0,args:{email:e,documentTitle:t,documentDownloadUrl:n}}},e.prototype.proofitInProgress=function(e){return{type:"proofitInProgress",args:{email:e}}},e.prototype.alertsNothingFound=function(){return{type:"alertsNothingFound",severity:"info"}},e.prototype.isTemporaryDownloadError=function(){return{type:"isTemporaryDownloadError"}},e.prototype.downloadDocumentNotFoundError=function(){return{type:"downloadDocumentNotFoundError"}},e.prototype.documentNotFoundError=function(e){return{type:"documentNotFoundError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error",args:{navigateToDocuments:e}}},e.prototype.blobDownloadUnsupported=function(){return{type:"blobDownloadUnsupported",showTimeMs:1/0,denaliShowTimeMs:1/0,denaliCloseOnClick:!0}},e.prototype.downloadProofread=function(){return{type:"downloadProofread"}},e}();t.EditorNotificationFactory=s,t.defaultState={items:[],counterId:0};var a=function(){function e(e){this._getNotification=e}return e.prototype.show=function(e){return this._getNotification().show(e)},e.prototype.showMessage=function(e){return this._getNotification().showMessage(e)},e.prototype.showError=function(e,t){return this._getNotification().showError(e,t)},e.prototype.hide=function(e){return this._getNotification().hide(e)},Object.defineProperty(e.prototype,"create",{get:function(){return this._getNotification().create},enumerable:!0,configurable:!0}),e}();t.ProxyShowNotificationsModel=a;var c=function(){function e(e){this._state=e,this._items=this._state.lens("items"),this.items=this._items.view(),this.create=new s}return e.prototype.show=function(e){return o.Monitoring.Logging.getLogger("notifications").log("error"===e.type?o.Logging.LogLevel.WARN:o.Logging.LogLevel.INFO,"Notification shown: "+e.type,o.EventProps.fromAny(e)),this._addNotifications(this._state,e).id},e.prototype.showMessage=function(e,t){return this.show(this.create.generic(e,t))},e.prototype.showError=function(e){return this.show(this.create.error(e))},e.prototype.hide=function(e){this._hideNotification(this._state,e)},e.prototype.expire=function(e){this._hideNotification(this._state,e)},e.prototype.cleanup=function(){this._items.modify(this._cleanup)},e.prototype._addNotifications=function(e,t){var n=this,r=(e.get().counterId||0)+1,i=Object.assign({},t,{id:r});return e.modify(function(e){var t=n._cleanup(e&&e.items||[]),o=t.filter(function(e){return e.important}),s=t.filter(function(e){return!e.important});return{counterId:r,items:o.concat([i],s)}}),i},e.prototype._cleanup=function(e){return e.filter(function(e){return e&&!e.expired&&e.dontRemoveOnAnyAction})},e.prototype._hideNotification=function(e,t){e.lens("items").lens(i.Lens.find(function(e){return t===e.id})).lens(i.Lens.create(function(e){return e&&e.expired},function(e,t){return t?Object.assign({},t,{expired:e}):t})).set(!0)},e}();t.NotificationsModelImpl=c,t.notificationsContextTypes={notifications:r.object}},2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);r.__exportStar(n(104),t),r.__exportStar(n(125),t);var i=n(1349);t.Async=i.Async;var o=n(1347);t.Animation=o.Animation;var s=n(1351);t.Clipboard=s.Clipboard;var a=n(1355);t.Either=a.Either;var c=n(1365);t.Worker=c.Worker;var u=n(1350);t.Buffer=u.Buffer;var l=n(1359);t.LRUCache=l.LRUCache;var d=n(1362);t.RateLimiter=d.RateLimiter;var p=n(1358);t.Keys=p.Keys;var h=n(1363);t.RxSemaphore=h.RxSemaphore;var f=n(1354);t.DOM=f;var g=n(510);t.StringUtils=g;var m=n(1353);t.DateUtils=m;var _=n(1352);t.Cookie=_;var y=n(267);t.ObjectUtils=y;var v=n(1348);t.ArrayUtils=v;var b=n(1361);t.OptionUtils=b;var w=n(1364);t.RxUtils=w;var E=n(1357);t.ImmutableMap=E;var S=n(1360);t.NotEmpty=S.NotEmpty;var C=n(1356);t.Fullstory=C.Fullstory},255:function(e,t,n){"use strict";function r(e){var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.__extends(t,e),t}(g);return n.className=h.mark_underline+"_"+e,n.blotName=t.getBlotName(e),n.markId=e,n}function i(e){return m.blotName=t.getBlotName(e),m.className=h.mark_underline+"_"+e,m}function o(e){u.register("formats/"+e.blotName,e,!0)}function s(e){var n=u.imports[t.getFullBlotName(e)];if(t.isUnderline(n))return n;_.add(e);var i=r(e);return o(i),i}function a(e){u.imports[t.getFullBlotName(e)]&&o(i(e)),_.delete(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(3),u=n(69),l=n(1272),d=n(2),p=n(64),h=n(782),f=n(4);t.MarkerBlotName="mark_underline";var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isUnderline=function(e){return-1!==e.indexOf("underline")},t}return c.__extends(t,e),Object.defineProperty(t.prototype,"markId",{get:function(){return this.statics.markId},enumerable:!0,configurable:!0}),t.create=function(t){var n=e.create.call(this,t),r=t?t.id:"";return n.setAttribute("data-mark-id",r),n.__dataId=r,t.action===p.Mark.ActionType.remove?(n.__unwrapMe=!0,n.__dataOrder=0,n.className=d.DOM.classes(this.className)):(n.__dataOrder=t.order||0,void 0!==t.order&&n.setAttribute("data-order",""+t.order),n.className=d.DOM.classes.apply(d.DOM,[this.className].concat(t.classes||[]))),n},t.prototype.wrap=function(t,n){return this.domNode.classList.add(h.prevent_animation),e.prototype.wrap.call(this,t,n)},t.prototype.clone=function(){this.domNode.classList.add(h.prevent_animation);var t=e.prototype.clone.call(this),n=t.domNode;return n.__dataOrder=this.domNode.__dataOrder,n.__dataId=this.domNode.__dataId,n.__unwrapMe=this.domNode.__unwrapMe,t},t.prototype.formatAt=function(t,n,r,i){if(r===this.statics.blotName){if(!i)return;if(i.action===p.Mark.ActionType.remove)if(i.removeType===p.Mark.RemoveType.partial)e.prototype.formatAt.call(this,t,n,r,!1);else{var o=this.length();i.removeType!==p.Mark.RemoveType.byPartialMatch||0===t&&n===o||f.Monitoring.Logging.getLogger("marker").warn("Attempt to remove blot by corrupted position",{id:this.markId,got:{index:t,length:n},expected:{index:0,length:o}}),e.prototype.formatAt.call(this,0,o,r,!1)}else i.action!==p.Mark.ActionType.create&&i.action!==p.Mark.ActionType.update||(this.domNode.className=d.DOM.classes.apply(d.DOM,[this.statics.className,h.prevent_animation].concat(i.classes||[])),e.prototype.formatAt.call(this,t,n,r,i))}else this._isUnderline(r)&&i&&i.action===p.Mark.ActionType.create?this._formatOverlaps(t,n,r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype._formatOverlaps=function(t,n,r,i){d.invariant(void 0!==this.domNode.__dataOrder,"dataOrder should be defined");var o=this.domNode.__dataOrder;if(!(i.action===p.Mark.ActionType.remove||o>=i.order)){return void this.isolate(t,n).wrap(r,i)}e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.format=function(t,n){t!==this.statics.blotName||n?e.prototype.format.call(this,t,n):this.unwrap()},t.prototype.optimize=function(t){e.prototype.optimize.call(this,t),this.domNode.__unwrapMe&&this.unwrap(),_.has(this.domNode.__dataId)||(f.Monitoring.Logging.getLogger("marker").warn("Unwrap already removed mark",{id:this.markId}),this.unwrap())},t.formats=function(){return!0},t}(l.Inline);t.Marker=g,g.tagName="SPAN",t.isUnderline=function(e){return!!e&&Object.getPrototypeOf(e)===g},t.getBlotName=function(e){return t.MarkerBlotName+"_"+e},t.getFullBlotName=function(e){return"formats/"+t.getBlotName(e)},t.isFakeUnderline=function(e){return e===m};var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.__extends(t,e),t.prototype.allowUnwrap=function(){return Object.getPrototypeOf(this)===t.prototype&&"SPAN"===this.domNode.tagName},Object.defineProperty(t.prototype,"logName",{get:function(){return"fake_underline_blot"},enumerable:!0,configurable:!0}),t}(l.SelfUnwrappingInlineBlot);t.FakeUnderline=m;var _=new Set;t.registerMark=s,t.deregisterMark=a},256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(6),s=n(2),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=null,t}return r.__extends(t,e),t.prototype._setupTitle=function(){return s.RxUtils.toObservable(this.props.title).filter(function(e){return null!==e}).subscribe(function(e){return document.title=e})},t.prototype.componentWillMount=function(){this._subs=this._setupTitle()},t.prototype.componentWillUnmount=function(){this._subs&&this._subs.unsubscribe(),this._subs=null},t.prototype.render=function(){return i.Children.only(this.props.children)},t}(i.Component);t.BasePage=a,function(e){e.PageWrapper=function(e){var t=e.children;return i.createElement(o.F.div,{key:"page-wrapper"},t)}}(a=t.BasePage||(t.BasePage={})),t.BasePage=a},257:function(e,t,n){"use strict";function r(e,t,n,r){switch(t.kind){case"common":return new o.CommonCardModelImpl(e,t,n,r);case"plagiarism":return new o.PlagiarismCardModelImpl(e,t,n);case"enhancement":return new o.EnhancementCardModelImpl(e,t,n,r);case"synonym":return new o.SynonymsCardModelImpl(e,t,n);default:var i=t;throw new a.MatchingNotExhaustiveError(i)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(273),s=n(536),a=n(2);t.defaultState={cardHeights:{},cardStates:{}};var c=function(){function e(e,t,n){var r=this;this._state=e,this._editor=t,this._features=n,this._cardsHeights=this._state.lens("cardHeights"),this._cardsState=this._state.lens("cardStates"),this.positions=i.Atom.combine(this._editor.alerts,this._cardsHeights,function(e,t){return s.getCardsPositions(Object.keys(e).reduce(function(n,r){return n[r]={alert:e[r],cardHeight:t[r]||o.DEFAULT_CARD_HEIGHT},n},{}))}),this.focusedCardHeight=this._editor.focusedAlert.switchMap(function(e){return r._cardsHeights.view(function(t){return e.id?t[e.id]:null})}),this.guideId=i.Atom.combine(this._editor.highlightedAlert,this._editor.focusedAlert,function(e,t){if(!e)return null;var n=t.id&&r._cardsState.get()[t.id];return e===t.id&&!n||n&&n.transientVisualState!==o.VisualState.applied?null:e})}return e.prototype.setCardHeight=function(e,t){this._cardsHeights.modify(function(n){return Object.assign({},n,(r={},r[e]=t,r));var r})},e.prototype.getOrCreateCardModel=function(e){var t=this._editor.alerts.get()[e];a.invariant(null!==t,"expect alert #"+e+" to exist");var n="synonym"===t.alert.kind?o.defaultSynonymState:o.defaultState;return this._cardsState.modify(function(t){return t[e]?t:Object.assign({},t,(r={},r[e]=n,r));var r}),r(this._cardsState.lens(i.Lens.key(e).compose(i.Lens.withDefault(n))),t.alert,this._editor,this._features)},e.prototype.removeCardModelState=function(e){this._cardsState.modify(function(t){return a.ObjectUtils.objectWithoutProperties(t,[e])})},e}();t.CardsModelImpl=c},258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e[e.words=0]="words",e[e.characters=1]="characters",e[e.speakingTime=2]="speakingTime",e[e.readingTime=3]="readingTime"}(r=t.TextStatsView||(t.TextStatsView={})),t.defaultState={textStatsView:r.words};var i=[r.words,r.characters,r.readingTime,r.speakingTime],o=function(){function e(e){this._state=e,this.textStatsView=this._state.lens("textStatsView")}return e.prototype.toggleTextStatsView=function(){this.textStatsView.set(i[(i.indexOf(this.textStatsView.get())+1)%i.length])},e}();t.TextStatsModelImpl=o},259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(18),o=n(7),s=n(18);t.PaymentPlan=s.PaymentPlan,t.PaymentMethod=s.PaymentMethod;var a=n(6),c=n(496),u=n(4),l=n(2),d=n(183),p=n(1302),h=n(1303),f=n(32);t.defaultState=l.Async.defaultValue();var g=function(){function e(n,r,o,c,u,g){var m=this;this.state=n,this._subscriptionApi=r,this._telemetry=o,this._appConfig=c,this._environment=u,this._upgradeHook=g,this._notification=a.Atom.create(null),this._operation=null,this._getSubscription=function(){return m._subscriptionApi.getStatus().then(function(e){return e.plans||(e.plans=[]),e})},this._updateSubscriptionState=function(){return m._getSubscription().then(function(e){return m.state.set(l.Async.ok(e)),e})},this._diagnostics=new s.Diagnostics(""+this._appConfig.api.diagnosticsUrl,f.RxFetch.request(s.Diagnostics.targetTag)),this.notification=this._notification,this.braintreeApi=new p.BraintreeModelImpl(this,this._subscriptionApi,this._updateSubscriptionState),this.paypalApi=new h.PayPalModelImpl(this,this._subscriptionApi,this._updateSubscriptionState),this.ensureHasSubscription=function(){i.invariant(null!==m._operation,"operation must be created");var e=m.state.get();l.Async.isOk(e)||l.Async.isInProgress(e)||(l.Async.isError(e)&&m._operation.unsubscribe(),m._operation=null,m.state.set(t.defaultState),m._createOperation())},this.setNotification=function(e,t){requestAnimationFrame(function(){return m._notification.set({type:e,planName:t})})},this._createOperation(),this.state.subscribe(function(t){l.Async.isError(t)&&1===t.attempt?e._log.warn("cant get user subscription",t.error):l.Async.isFatal(t)&&(e._log.error("cant get user subscription",t.error),m.setNotification(d.SubscriptionNotificationType.unknownError))})}return e.prototype.clearNotification=function(){this._notification.set(null)},e.prototype.changePlan=function(t){var n=this;return this.clearNotification(),this._subscriptionApi.changePlan(t).then(this._updateSubscriptionState).then(function(e){n.setNotification(d.SubscriptionNotificationType.subscriptionUpdated,e.queuedPlan&&e.queuedPlan.title||e.currentPlan.title)}).catch(function(t){n.setNotification(d.SubscriptionNotificationType.cantUpgradeSubscription),e._log.error("changePlan: cantUpgradeSubscription",t)})},e.prototype.cancelSubscription=function(){var t=this;return this._telemetry.confirmSubscriptionCancelClicked(),this.clearNotification(),this._subscriptionApi.cancelSubscription().then(this._updateSubscriptionState).then(function(){return t.setNotification(d.SubscriptionNotificationType.subscriptionCancelled)}).catch(function(n){t.setNotification(d.SubscriptionNotificationType.unknownError),e._log.error("cancelSubscription: unknownError",n)})},e.prototype.renewSubscription=function(){var t=this;return this._telemetry.reactivateSubscriptionClicked(),this.clearNotification(),this._subscriptionApi.renewSubscription().then(this._updateSubscriptionState).then(function(){return t.setNotification(d.SubscriptionNotificationType.resumedSubscription)}).catch(function(n){t.setNotification(d.SubscriptionNotificationType.cantResumeSubscription),e._log.error("renewSubscription: cantResumeSubscription",n)})},e.prototype.navigateToSubscribeUrl=function(){document.location.href=this._appConfig.funnel.subscribe},e.prototype.navigateToUpgradeUrl=function(t,n,r){var i=this;o.Try.of(function(){return c.UpgradeHook.Place.isHome(t)?i._upgradeHook.fromHome(t):i._upgradeHook.fromEditorTsDocument(t,n,r)}).flatMap(function(e){return i._environment.actions.openUrl(e)}).recover(function(t){e._log.fatal("unexpected error on open upgrade page",t)})},e.prototype.downloadBillingReceipts=function(){return r.__awaiter(this,void 0,void 0,function(){var t,n=this;return r.__generator(this,function(r){switch(r.label){case 0:return this._notification&&this.clearNotification(),this._environment.has(f.Environment.Flag.canDownloadBlobs)?[4,this._diagnostics.checkOrigin().catch(function(t){return e._log.error("orginDiagnostics: cantCheck",t),{isOkay:!1,url:"unable to verify"}})]:[3,7];case 1:return t=r.sent(),t.isOkay?(this._telemetry.downloadReceiptButtonClicked(),[4,this._subscriptionApi.downloadBillingReceipts().then(s.RawFile.saveToFS).catch(function(t){n.setNotification(d.SubscriptionNotificationType.unknownError),e._log.error("originDiagnostics: unknownError",t),n._telemetry.downloadReceiptError(t)})]):[3,3];case 2:return r.sent(),[3,6];case 3:return[4,this.setNotification(d.SubscriptionNotificationType.unknownOrigin)];case 4:return r.sent(),[4,e._log.error("originDiagnostics: unknownOrigin",{origin:t.url})];case 5:r.sent(),r.label=6;case 6:return[3,8];case 7:this.setNotification(d.SubscriptionNotificationType.blobDownloadUnsupported),r.label=8;case 8:return[2]}})})},e.prototype._createOperation=function(){i.invariant(null===this._operation,"cant create another operation"),this._operation=l.Async.OperationRetrier.create(this._getSubscription,this.state,l.Async.OperationRetrier.RetryStrategy.conditional(function(e){return 401!==e.code},l.Async.OperationRetrier.RetryStrategy.linear(3,3e3)))},e._log=u.Monitoring.Logging.getLogger("model.subscription"),e}();t.SubscriptionModelImpl=g},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.nominal||(t.nominal={});!function(e){!function(e){!function(e){e.MAIN="main",e.IMPORTANT="important"}(e.Type||(e.Type={}))}(e.Edit||(e.Edit={}))}(t.RawTransform||(t.RawTransform={}));!function(e){function t(e,t){return Object.assign({},e,{begin:e.begin+t,end:e.end+t,highlightBegin:e.highlightBegin+t,highlightEnd:e.highlightEnd+t})}function n(e){return"Originality"===e.cardLayout.category}function r(e){return"Readability mismatch"===e.cardLayout.group}function i(e){return!0===e.hidden}function o(e){if(!e)return!1;var t=e;return Number.isInteger(t.rev)&&Number.isInteger(t.begin)&&Number.isInteger(t.end)&&Number.isInteger(t.highlightBegin)&&Number.isInteger(t.highlightEnd)}e.shift=t,e.isPlagiarism=n,e.isReadability=r,e.isHidden=i,e.isRawAlert=o,e.mock={id:"",rev:0,pname:"Spelling/BritishVsAmerican/BrInstOfAm/BrInstOfAm",group:"ContextualSpelling",category:"BritishVsAmerican",categoryHuman:"British vs American",hidden:!1,text:"centralise",todo:"correct",title:"Inconsistent spelling",transforms:["<span class='gr_grammar_del'>centralise</span>→<span class='gr_grammar_ins'>centralize</span>"],details:"<p>One of&nbsp;the most obvious differences between American and British English is&nbsp;the spelling of&nbsp;certain words such as&nbsp;<b>color/colour, learned/learnt,</b> and <b>toward/towards</b>. Typically, the spelling of&nbsp;words like these only varies by&nbsp;one or&nbsp;two letters. In&nbsp;the interest of&nbsp;consistency and clarity, you should use the spelling that will be&nbsp;more familiar to&nbsp;your intended audience.\n",explanation:"<p>The word <b>centralise</b> is&nbsp;a&nbsp;British English spelling. In&nbsp;the interest of&nbsp;consistency, consider replacing it&nbsp;with the American English spelling.\n",examples:'<p><span class="grey">British: I&nbsp;wish you success in&nbsp;all your endeavours.</span><br/><span class="grey">American: I&nbsp;wish you success in&nbsp;all your endeavors.</span><br/><p><span class="grey">British: Sweet yoghurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><span class="grey">American: Sweet yogurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><p><span class="grey">British: Serena moved towards the blinking light.</span><br/><span class="grey">American: Serena moved toward the blinking light.</span><br/>',free:!0,highlightBegin:5092,highlightEnd:5102,highlightText:"",begin:5092,end:5102,replacements:["centralize"],extra_properties:{priority:"2"},cardLayout:{category:"Accuracy",group:"Spelling",groupDescription:"Checks spelling, confused words, capitalization",rank:10}},e.mockPlagiarism={id:"",rev:0,transforms:[],title:"Citation audit",details:"",explanation:"",examples:"",free:!1,hidden:!1,todo:"",cardLayout:{category:"Originality",group:"Unoriginal content",groupDescription:"Unoriginal content from the web",rank:0},category:"Plagiarism",categoryHuman:"Unoriginal content",begin:156,end:697,text:"",group:"Plagiarism",pname:"Plagiarism/Plagiarism/UnoriginalContent",highlightBegin:156,highlightEnd:697,highlightText:"",replacements:[],extra_properties:{}}}(t.RawAlert||(t.RawAlert={}));!function(e){e.NOT_AUTHORIZED="not_authorized",e.SESSION_NOT_INITIALIZED="session_not_initialized",e.BAD_REQUEST="bad_request",e.BACKEND_ERROR="backend_error",e.AUTH_ERROR="auth_error",e.RUNTIME_ERROR="runtime_error",e.ILLEGAL_DICT_WORD="illegal_dict_word",e.TIMEOUT="timeout",e.CANNOT_FIND_SYNONYM="cannot_find_synonym",e.CANNOT_GET_TEXT_STATS="cannot_get_text_stats"}(t.ErrorCode||(t.ErrorCode={}));!function(e){e[e.INFO=0]="INFO",e[e.WARN=1]="WARN",e[e.ERROR=2]="ERROR"}(t.ErrorSeverity||(t.ErrorSeverity={}));!function(e){e.IGNORE="IGNORE",e.IGNORE_ALL="IGNORE_ALL",e.ADD_TO_DICTIONARY="ADD_TO_DICTIONARY",e.REPORT_SUGGESTION="REPORT_SUGGESTION",e.REMOVE_FROM_DICTIONARY="REMOVE_FROM_DICTIONARY",e.LOOKED="LOOKED",e.ACCEPTED="ACCEPTED",e.ACKNOWLEDGED="ACKNOWLEDGED",e.POPUP_OPEN="POPUP_OPEN",e.POPUP_CLOSE="POPUP_CLOSE",e.UNDOED="UNDOED",e.LIKE="LIKE",e.DISLIKE="DISLIKE",e.WRONG_SUGGESTION="WRONG_SUGGESTION",e.OFFENSIVE_CONTENT="OFFENSIVE_CONTENT",e.EXPANDED="EXPANDED",e.DISMISS_BY_LENS="DISMISS_BY_LENS",e.SYNONYM_ACCEPTED="SYNONYM_ACCEPTED"}(t.FeedbackType||(t.FeedbackType={})),t.BIG_TEXT_SIZE=300;!function(e){function t(e,t,n){var i=function(e,t){return Math.max(Math.trunc(e/t),r.rand(e))};return r.ArrayUtils.mapNTimes(i(e,2),function(e){return r.ArrayUtils.mapNTimes(i(t,3),function(t){return{value:Math.random()*n,alertIds:[],footprint:""+(100*e+t)}})})}e.generatePoints=t}(t.TextMaps||(t.TextMaps={}))},262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_FILE_SIZE=4194304},263:function(e,t,n){"use strict";function r(e){if(!e)return"general";switch(e.split("_")[0]){case"academic":return"academic";case"business":return"business";case"technical":case"medical":return"technical";case"creative":return"creative";case"casual":return"casual";default:return"general"}}function i(e){switch(e){case"general":return"general";case"academic":return"academic_general";case"business":return"business_other";case"technical":return"technical_other";case"creative":return"creative_other";case"casual":return"casual_other";default:return e}}function o(e){return s.fromDomain(r(e))}Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(101),c=n(152),u=n(340),l=n(4),d=n(7),p=n(2),h=n(509);!function(e){function t(e,t){return e.domain===t.domain&&p.isSetsEq(e.goals,t.goals)&&p.isOptionsEq(e.audience,t.audience)&&p.isOptionsEq(e.style,t.style)&&p.isOptionsEq(e.emotion,t.emotion)}function n(e){return{goals:new Set,domain:e,audience:d.None,style:d.None,emotion:d.None}}function r(e,t){return t.map(function(t){return"formal"===t?"creative"!==e&&"casual"!==e:"academic"!==e}).getOrElse(!0)}function i(t){var n=e.IOType.decode(t).mapLeft(c.failure).mapLeft(function(e){return l.Monitoring.Logging.getLogger("coreclients.dox.context").warn("failed to parse document context",e),e});return u.either.isLeft(n)?d.Left(n.value):d.Right(n.value)}function o(e){if(void 0!==e)return i(e).fold(function(){},function(e){return e})}function s(t){return e.IOType.encode(t)}e.isEquals=t,e.goals=h.literalArray(["inform","describe","convince","tellStory"]),e.goalsLabels=["Inform","Describe","Convince","Tell A Story"],e.audiences=h.literalArray(["general","knowledgeable","expert"]),e.styles=h.literalArray(["formal","informal"]),e.emotions=h.literalArray(["mild","strong"]),e.domains=h.literalArray(["general","academic","business","technical","creative","casual"]),e.fromDomain=n,e.empty=n("general"),e.isStyleValidWithDomain=r,e.goalsType=h.Type.literalUnion("goal",e.goals),e.goalsSetType=h.Type.set(e.goalsType),e.audienceType=h.Type.literalUnion("audience",e.audiences),e.styleType=h.Type.literalUnion("style",e.styles),e.emotionType=h.Type.literalUnion("emotion",e.emotions),e.domainType=h.Type.literalUnion("domain",e.domains),e.IOType=a.interface({goals:e.goalsSetType,domain:e.domainType,audience:h.Type.option(e.audienceType),style:h.Type.option(e.styleType),emotion:h.Type.option(e.emotionType)}),e.tryParse=i,e.parse=o,e.serialize=s}(s=t.DocumentContext||(t.DocumentContext={})),t.genreToDomain=r,t.domainToGenre=i,t.genreToDocumentContext=o},264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(7),o=n(4),s=n(2),a=n(266),c=n(64),u=n(62),l=n(89),d=n(1338),p=n(265),h=n(507),f=n(505),g=n(90),m=function(e){function t(n,o,a,d,p,h,m){void 0===p&&(p=t.Queue.create({})),void 0===h&&(h=500);var _=e.call(this,n,m)||this;return _._originalUrl=n,_._changesQueue=p,_._sendDelay=h,_._nextId=1,_._revision=-1,_._clientId=-1,_._idleRestore=i.None,_._forceSend=!1,_._proofitPlansRequester=new u.ValueRequester(function(e){return _._sendInbandCommand(e)},15e3,"ProofitPlans"),_._proofitCreateJobRequester=new u.ValueRequester(function(e){return _._sendInbandCommand(e)},15e3,"ProofitCreateJob"),_._disconnectHandler=function(e,t,n){return r.__awaiter(_,void 0,void 0,function(){var o,s;return r.__generator(this,function(r){switch(r.label){case 0:return e.reconnect.url=this._originalUrl+(-1===this._revision?"":"?sinceVersion="+this._revision),(o=this._changesQueue.isEmpty,"idle"!==(s=g.Reconnect.getReconnectAction(e,{canGoIdle:o,isInitialized:!0})))?[3,1]:(u.invariant(!this._changesQueue.isStaging,"queue should be not in staging state"),this._log.debug("Disconnected due to timeout. Waiting for changes to reconnect."),this._idleRestore=i.Some(function(){return n(0)}),[3,3]);case 1:return this._changesQueue.isStaging&&(this._log.debug("We got disconnect while trying send changed"),this._changesQueue.unstage()),[4,this._handler.disconnectHandler(e,t,n,s)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},_._resolvePendingFlushPromise=s.noop,_._handler=new t.DefaultHandler(d,_._log),_._initHandler=o,_._failHandler=a,_._fsm.from(f.States.READY).to(f.States.WAIT_ACK).on(f.Events.SEND).from(f.States.WAIT_ACK).to(f.States.READY).on(f.Events.ACK,f.Events.RESET).from(f.States.WAIT_ACK).to(f.States.DISCONNECTED).on(f.Events.DISCONNECT).from(f.States.WAIT_ACK).to(f.States.CLOSED).on(f.Events.CLOSE).on(f.States.READY,function(e){return _._trySendAfterTimeout()}).on(f.States.CLOSED,function(e){var t=e.args?e.args:l.DoxErrors.CLOSED_ERROR;_._failInit(t),_._changesQueue.drop("connection closed")}),_._fsm.event(f.Events.CONNECT).catch(s.noop),s.registerDebugHelper("doxReset",function(e){if(void 0===e)throw new Error("provide text!");_._handleResetMessage({op:"reset",id:_._nextId++,doc:(new c.Delta).insert(e),vsn:_._revision+10,clientId:_._clientId})}),s.registerDebugHelper("doxState",_),s.registerDebugHelper("closeDoxSocket",function(e,t){void 0===e&&(e=1e3),_._conn._ws.close(e,t)}),_}return r.__extends(t,e),t.getWsDocumentUrl=function(e,t){return e+(void 0===t?"/documents/ws":"/documents/"+t+"/ws")},t.create=function(e,n,r,i,o){return new Promise(function(s,a){return new t(e,s,a,n,r,i,o)})},Object.defineProperty(t.prototype,"isInitialRevision",{get:function(){return 1===this._revision},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inSync",{get:function(){return!this._changesQueue.isStaging&&this._changesQueue.isEmpty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fsmState",{get:function(){return f.States[this._fsm.current]},enumerable:!0,configurable:!0}),t.prototype.getProofitPlans=function(){return this._proofitPlansRequester.request(new d.Message.ProofitOptionsMessage(this._nextId++))},t.prototype.placeProofitOrder=function(e){return this._proofitCreateJobRequester.request(new d.Message.ProofitPlaceOrderMessage(this._nextId++,a.Proofit.PlanType[e]))},t.prototype.pushChanges=function(e){if(c.Change.isDelta(e))return this._checkIdle(),this._changesQueue.pushChanges(e);if(c.Change.isReset(e))throw new Error("Invalid change. Reset changes are not supported by dox");return-1},t.prototype.updateMetadata=function(e){return this._checkIdle(),this._changesQueue.pushMeta(e)},t.prototype._handleMessage=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._messageHandler(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),this._log.warn("fail on processing incoming message",t),this._failInit(t),this._conn._ws.close(g.Reconnect.WsCodes.CLIENT_MALFUNCTION,"Unexpected failure on: "+t.message),[3,3];case 3:return[2]}})})},t.prototype._messageHandler=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:switch(this._log.isEnabled(o.Logging.LogLevel.TRACE)&&this._log.trace("Message <<<",{message:JSON.stringify(e)}),t=e.op){case"init":return[3,1];case"patch":return[3,3];case"reset":return[3,9];case"vsn":return[3,11];case"mongodb_change":return[3,12];case"document_metadata_changed":return[3,13];case"proofit_turnaround_options":return[3,14];case"proofit_create_job":return[3,15]}return[3,16];case 1:return[4,this._handleInitMessage(e)];case 2:return n.sent(),[3,17];case 3:return this._fsm.is(f.States.READY)||this._fsm.is(f.States.WAIT_ACK)&&this._clientId===e.cl?[4,this._handlePatchMessage(e)]:[3,5];case 4:return n.sent(),[3,8];case 5:return this._fsm.is(f.States.WAIT_ACK)?(this._log.warn("got change while waiting ack for other change"),[4,this._handlePatchMessage(e)]):[3,7];case 6:return n.sent(),[3,8];case 7:this._log.warn("got unexpected patch message",{currentState:f.States[this._fsm.current]}),n.label=8;case 8:return[3,17];case 9:return[4,this._handleResetMessage(e)];case 10:return n.sent(),[3,17];case 11:case 12:return[3,17];case 13:return this._handleMetaChangeMessage(e),[3,17];case 14:return this._proofitPlansRequester.onValue(e.id,a.Proofit.processOptions(e)),[3,17];case 15:return this._proofitCreateJobRequester.onValue(e.id,a.Proofit.parseCreateJobResult(e)),[3,17];case 16:e.error||(this._log.warn("Unexpected message",{message:e}),this._failInit(e)),n.label=17;case 17:return[2]}})})},t.prototype._handleInitMessage=function(e){return r.__awaiter(this,void 0,void 0,function(){var n,i,o,a,u,l;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._fsm.event(f.Events.INITIALIZE)];case 1:return(n=r.sent())?(i=void 0!==e.deltas?e.deltas:[],i.length>0?(this._log.debug("Got changes on init. Skipping reset"),o=s.ArrayUtils.flatMap(i.map(function(e){return e.deltas})),a=i[0].doc_len,u=i[0].rev,[4,this._handlePatchMessage(new d.Message.PatchMessage(-1,-1,u,a,o,e.vsn),e.doc_len)]):[3,3]):[3,5];case 2:r.sent(),r.label=3;case 3:return l=new c.Delta(e.doc),this._initHandler?(this._initHandler({initialDelta:c.Change.res(l),remoteDocument:this,meta:t.Meta.parse(e)}),this._initHandler=null,this._failHandler=null,this._clear(e)):0===i.length&&e.vsn!==this._revision?(this._log.debug("Remote has unknown revision, goto reset"),this._handleResetMessage({id:-1,op:"reset",clientId:e.clientId,vsn:e.vsn,doc:l})):this._clear(e),[4,this._fsm.event(f.Events.INITIALIZED)];case 4:return r.sent(),[3,5];case 5:return[2]}})})},t.prototype.isInitialized=function(e){return void 0!==e&&void 0===e.error},t.prototype._handlePatchMessage=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,i,s,a,l;return r.__generator(this,function(r){switch(r.label){case 0:return(n=e.cl===this._clientId)?(this._log.trace("get patch from same client"),[4,this._fsm.event(f.Events.ACK)]):[3,2];case 1:return r.sent()?(this._log.trace("got ack for patch"),this._changesQueue.ack()):this._log.debug("got patch message from same client, but we are in unexpected state",{state:f.States[this._fsm.current]}),[3,3];case 2:this._log.trace("get patch from other client"),u.assert(this._revision,e.rev,"incoming patch should be on known revision"),this._handler.changeHandler(this,c.Change.flush()),i=c.DeltaUtils.squash(e.deltas),s=c.Change.delta(new c.Delta(i),e.doc_len),void 0!==t&&u.assert(t,s.length+s.prevLen,"validated doc_len should match"),this._log.isEnabled(o.Logging.LogLevel.TRACE)&&!this._changesQueue.isEmpty&&this._log.trace("received incoming change, while has outgoing changes",JSON.stringify(s)),a=this._changesQueue.transformChangeAgainstQueue(s),s.prevLen!==a.prevLen&&(this._log.debug("incoming delta changed prev_len after transform on queue",{was:s.prevLen,now:a.prevLen}),this._log.trace("incoming delta transformed to",a)),this._handler.changeHandler(this,a),r.label=3;case 3:this._revision=n?e.rev:void 0===e.revAfterApply?e.rev+1:e.revAfterApply,r.label=4;case 4:return r.trys.push([4,6,,7]),[4,this._conn.send(new d.Message.VersionMessage(this._nextId++,e.rev))];case 5:return r.sent(),[3,7];case 6:return l=r.sent(),this._log.debug("fail onsend vsn ack",l),[3,7];case 7:return[2]}})})},t.prototype._handleResetMessage=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return this._log.warn("Got RESET message."),t=this._fsm.is(f.States.READY),t?[3,2]:[4,this._fsm.event(f.Events.RESET)];case 1:t=n.sent(),n.label=2;case 2:return t?(this._changesQueue.isStaging&&(this._log.debug("We got reset while trying send changed"),this._changesQueue.unstage()),this._changesQueue.drop("got reset"),this._clear(e),this._handler.changeHandler(this,c.Change.res(new c.Delta(e.doc)))):this._log.warn("can not enter reset state, how it can happen?"),[2]}})})},t.prototype._handleMetaChangeMessage=function(e){this._changesQueue.drop("got incoming meta","meta");var n=t.Meta.parse(e);this._handler.metadataChangeHandler(this,n)},t.prototype._failInit=function(e){this._failHandler&&(this._failHandler(e),this._initHandler=null,this._failHandler=null)},t.prototype._checkIdle=function(){var e=this;this._idleRestore=this._idleRestore.flatMap(function(t){return e._log.debug("We are idle... reconnecting before push."),t(),i.None})},t.prototype._clear=function(e){var t=e.vsn,n=e.clientId;this._nextId=1,this._clientId=n,this._revision=t},t.prototype.flush=function(){var e=this;if(this._changesQueue.isEmpty)return this._resolvePendingFlushPromise(),Promise.resolve();if(!this._flushPromise){var t,n=function(){e._flushPromise=void 0,e._forceSend=!1,e._resolvePendingFlushPromise=s.noop,t&&clearTimeout(t)};this._flushPromise=new Promise(function(n,r){e._forceSend=!0,e._resolvePendingFlushPromise=n,t=window.setTimeout(function(){return r(new i.TimeoutError("flush takes too long"))},4e3)}).then(n,function(e){throw n(),e}),this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0,this._trySendAfterTimeout())}return this._flushPromise},t.prototype._trySendAfterTimeout=function(){var e=this;this._timeout||(this._timeout=setTimeout(function(){e._timeout=void 0,e._fsm.is(f.States.READY)&&(e._changesQueue.isEmpty||e._changesQueue.isStaging?(e._changesQueue.isEmpty&&e._resolvePendingFlushPromise(),e._trySendAfterTimeout()):e._send().catch(function(t){return e._log.warn("unexpected error onsend",t)}))},this._changesQueue.size>1||this._forceSend?this._changesQueue.isStaging?250:0:this._sendDelay))},t.prototype._send=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n=this;return r.__generator(this,function(i){switch(i.label){case 0:return[4,this._fsm.event(f.Events.SEND)];case 1:return(e=i.sent())?(t=this._changesQueue.poll(),[4,t.map(function(e){return r.__awaiter(n,void 0,void 0,function(){var t,n,i;return r.__generator(this,function(r){switch(r.label){case 0:t=h.ChangesQueue.isChange(e),n=this._createMessage(e),this._log.isEnabled(o.Logging.LogLevel.TRACE)&&this._log.trace("Message >>>",{message:JSON.stringify(n)}),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,this._conn.send(n)];case 2:return r.sent(),t?[3,4]:[4,this._fsm.event(f.Events.ACK)];case 3:r.sent()?this._changesQueue.ack():this._log.debug("can not do ack for non change msg because we are in unexpected state",{state:f.States[this._fsm.current]}),r.label=4;case 4:return[3,6];case 5:return i=r.sent(),this._log.debug("Got error on ws send",{error:i}),[3,6];case 6:return[2]}})})})]):[3,3];case 2:return i.sent(),[3,5];case 3:return this._log.debug("we are can not send, goto connect"),[4,this._fsm.event(f.Events.CONNECT)];case 4:i.sent(),i.label=5;case 5:return[2]}})})},t.prototype._sendInbandCommand=function(e){this._checkIdle();var t=this._changesQueue.isEmpty;return this._changesQueue.pushCommand(e),t&&this._fsm.is(f.States.READY)&&(this._log.trace("Q.isEmpty, sending command immidiately",e),this._send()),e.id},t.prototype._createMessage=function(e){switch(e.kind){case"change":return this._createPatchMessage(e.change);case"meta":return this._createUpdateMetaMessage(e.meta);case"cmd":return e.cmd;default:return s.assertNever(e)}},t.prototype._createPatchMessage=function(e){return new d.Message.PatchMessage(this._nextId++,this._clientId,this._revision,e.prevLen,[e.delta])},t.prototype._createUpdateMetaMessage=function(e){var t=e.title,n=e.errors,r=e.settings;return new d.Message.UpdateDocumentMetadata(this._nextId++,t,n,void 0!==r?r.toJSON():void 0)},t}(f.Remote);t.DoxRemoteDocument=m,function(e){!function(e){function t(e){var t=e.title,n=e.errors,r=e.extra_params,o=e.proofit;return{title:t,errors:n,settings:p.DoxDocumentSettings.Holder.fromJSON(r),proofit:i.Option.of(o).map(a.Proofit.parseResult)}}e.parse=t}(e.Meta||(e.Meta={}));var t=function(){function e(e,t){this._handler=e,this._logger=t,this.changeHandler=this._handler.changeHandler||s.noop,this.metadataChangeHandler=this._handler.metadataChangeHandler||s.noop,this.disconnectHandler=this._handler.disconnectHandler||g.Reconnect.getDefaultReconnect(this._logger,g.Reconnect.ClientType.dox)}return e}();e.DefaultHandler=t;!function(e){var t=function(){function e(e){this._handler=e,this.acceptedMsgHandler=this._handler.acceptedMsgHandler||function(){},this.droppedMsgsHandler=this._handler.droppedMsgsHandler||function(){}}return e}();e.DefaultHandler=t,e.create=function(e){var n=new t(e),r=n.acceptedMsgHandler,i=n.droppedMsgsHandler;return new h.DoxQueue(r,i)}}(e.Queue||(e.Queue={}))}(m=t.DoxRemoteDocument||(t.DoxRemoteDocument={})),t.DoxRemoteDocument=m},265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(17),o=n(7),s=n(263);!function(e){e.wordsCount="wordsCount",e.charsCount="charsCount",e.readingTime="readingTime",e.speakingTime="speakingTime",e.readabilityScore="readabilityScore"}(r=t.CounterType||(t.CounterType={}));!function(e){function t(e){var t=e.checks,n=e.genre,r=e.context,i=e.extraSettings;return{apps:t.map(l).getOrElse(void 0),genre:n.getOrElse(void 0),context:r.map(s.DocumentContext.serialize).getOrElse(void 0),extraSettings:i.getOrElse(void 0)}}function n(e){return e?o.Some({discoverabilityOnExitShown:e.discoverabilityOnExitShown||!1,checkedPlagiarism:e.checkedPlagiarism||!1,counterType:e.counterType&&e.counterType in r?e.counterType:r.wordsCount}):o.None}function a(t){return t?o.Try.of(function(){return{checks:o.Option.of(d(t.apps)),genre:o.Option.of(t.genre),context:o.Option.of(s.DocumentContext.parse(t.context)),extraSettings:n(t.extraSettings)}}).getOrElse(e.empty):e.empty}function c(e,t){return{checks:e.checks,extraSettings:f.merge(e.extraSettings,t.extraSettings),genre:o.Option.of(t.genre).orElse(e.genre),context:o.Option.of(t.context).orElse(e.context)}}function u(e){return e.context.orElse(e.genre.map(s.genreToDocumentContext)).getOrElse(s.DocumentContext.empty)}function l(e){return e?{ContextualSpelling:{active:e.contextualSpelling},Enhancement:{active:e.enhancement},Grammar:{active:e.grammar},Plagiarism:{active:e.plagiarism},Punctuation:{active:e.punctuation},SentenceStructure:{active:e.sentenceStructure},Style:{active:e.style}}:null}function d(e){return e&&p(e)?{contextualSpelling:e.ContextualSpelling.active,grammar:e.Grammar.active,sentenceStructure:e.SentenceStructure.active,punctuation:e.Punctuation.active,style:e.Style.active,enhancement:e.Enhancement.active,plagiarism:e.Plagiarism.active}:null}function p(e){return!!e&&![e.ContextualSpelling,e.Enhancement,e.Grammar,e.Plagiarism,e.Punctuation,e.SentenceStructure,e.Style].map(function(e){return e&&"object"==typeof e&&"boolean"==typeof e.active}).some(function(e){return!e})}e.update=c,e.contextOrGenre=u,e.empty={checks:o.None,genre:o.None,context:o.None,extraSettings:o.None};var h=function(){function e(e){this._settings=e}return e.fromJSON=function(t){return new e(a(t))},Object.defineProperty(e.prototype,"genre",{get:function(){var e=this;return this._settings.genre.orElseL(function(){return e._settings.context.map(function(e){return s.domainToGenre(e.domain)})})},enumerable:!0,configurable:!0}),e.prototype.changeGenre=function(e){var t={genre:o.Some(e)};return this._settings.context.forEach(function(){t.context=o.Some(s.DocumentContext.fromDomain(s.genreToDomain(e)))}),this._update(t)},Object.defineProperty(e.prototype,"checks",{get:function(){return this._settings.checks},enumerable:!0,configurable:!0}),e.prototype.changeChecks=function(e){var t={checks:o.Some(e)};return this._update(t)},Object.defineProperty(e.prototype,"context",{get:function(){var e=this;return this._settings.context.orElseL(function(){return e._settings.genre.map(s.genreToDocumentContext)})},enumerable:!0,configurable:!0}),e.prototype.changeContext=function(e){var t={context:o.Some(e)};return this._settings.genre.forEach(function(){t.genre=o.Some(s.domainToGenre(e.domain))}),this._update(t)},Object.defineProperty(e.prototype,"extraSettings",{get:function(){return this._settings.extraSettings},enumerable:!0,configurable:!0}),e.prototype.changeExtra=function(e){var t={extraSettings:o.Some(e)};return this._update(t)},e.prototype.toJSON=function(){return t(this._settings)},e.prototype._update=function(t){return new e(i.__assign({},this._settings,t))},e}();e.Holder=h;var f;!function(e){function t(e,t){return e.fold(function(){return o.Option.of(t)},function(e){return o.Option.of(Object.assign({},e,t))})}e.empty={discoverabilityOnExitShown:!1,checkedPlagiarism:!1,counterType:r.wordsCount},e.merge=t}(f=e.Extra||(e.Extra={})),e.fromCheckingSettings=l,e.toCheckingSettings=d}(t.DoxDocumentSettings||(t.DoxDocumentSettings={}))},266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(7),o=n(41),s=n(89),a=n(57),c="1",u=function(){function e(e,t,n,r,i){void 0===r&&(r="web");var u=this;this._doxUrl=e,this._fetch=t,this._fingerprints=n,this._clientType=r,this._token=i,this._headersAppender=a.createHeadersAppender({"X-API-Version":c,"X-Client-Type":function(){return u._clientType},"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=a.createCookiesAppender({grauth:function(){return u._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=o.Ajax.factory(this._fetch,void 0,o.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender),s.DoxErrors.doxErrorMapper)}return e.prototype._processOptions=function(t){var n=t.words,r=t.turnaroundOptions;return r&&r.length||(r=[]),{words:n,turnaroundOptions:r.map(function(t){return{enabled:t.enabled,label:t.label,minutesToProcess:t.minutesToProcess,perWord:t.perWord,price:t.price,turnaround:e.parsePlanOption(t.turnaround)}})}},e.prototype.getOptions=function(e){var t=o.RequestBuilder.get(this._doxUrl,"documents/"+e+"/proofit/turnaroundOptions");return this._ajax(t).then(this._processOptions)},e.prototype.createJob=function(t){var n=t.docId,r=t.turnaround,i=e.PlanType[r],s=o.RequestBuilder.post(this._doxUrl,"documents/"+n+"/proofit/job").queryParam("turnaround",i);return this._ajax(s).then(e.parseCreateJobResult)},e.targetTag="proofit",e}();t.Proofit=u,function(e){function t(e){switch(e){case"New":return l.newJob;case"Building":return l.building;case"paymentError":return l.paymentError;case"duplicate":return l.duplicate;case"emptyDocument":return l.emptyDocument;case"Completed":return l.completed;case"Cancelled":return l.cancelled;default:return l.unknown}}function n(e){switch(e){case"Instant":return d.Instant;case"ThreeHours":return d.ThreeHours;case"TwentyFourHours":return d.TwentyFourHours;default:throw new Error("Unknown plan option "+e)}}function o(e){if(!e)return null;try{e.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/)&&(e=e.replace(/\s/,"T"));return new Date(e).getTime()}catch(e){return null}}function s(e){return{submitted:o(String(e.submitted)),corrections:e.corrections,due:o(String(e.due)),price:e.price,name:e.name,completed:i.Option.of(o(String(e.completed))),id:e.id,status:t(e.status),is_dox_applied:e.is_dox_applied}}function a(e){var n=e.data;return{jobId:n.jobId,status:t(n.status),token:n.token}}function c(e,t){if(e||t){if(!e&&t||e&&!t)return!1;var n=e,r=t;return n.id===r.id&&n.status===r.status&&n.completed.equals(r.completed)}return!0}function u(e){return r.__assign({},p,e)}var l;!function(e){e.paymentError="paymentError",e.duplicate="duplicate",e.emptyDocument="emptyDocument",e.newJob="newJob",e.building="building",e.completed="completed",e.cancelled="cancelled",e.unknown="unknown"}(l=e.JobStatus||(e.JobStatus={}));var d;!function(e){e[e.Instant=0]="Instant",e[e.ThreeHours=1]="ThreeHours",e[e.TwentyFourHours=2]="TwentyFourHours"}(d=e.PlanType||(e.PlanType={})),e.processOptions=function(e){var t=e.data;return{words:t.words,turnaroundOptions:(t.turnaroundOptions||[]).map(function(e){return{enabled:e.enabled,label:e.label,minutesToProcess:e.minutesToProcess,perWord:e.perWord,price:e.price,turnaround:n(e.turnaround)}})}},e.parseStatus=t,e.parsePlanOption=n,e.parseResult=s,e.parseCreateJobResult=a,e.isProofitEqual=c;var p={corrections:null,price:null,submitted:null,due:null,name:"proofit-document-1474459282219.docx",completed:null,id:15696089,status:l.newJob,is_dox_applied:!0};e.mockResult=u}(u=t.Proofit||(t.Proofit={})),t.Proofit=u},267:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e){return e&&!Array.isArray(e)&&"object"==typeof e}function o(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function s(e){return Object.keys(e).map(function(t){return e[t]})}function a(e,t){return function(n){var r=e,i=n[r],o=m.__rest(n,["symbol"==typeof r?r:r+""]);return"function"==typeof t?m.__assign((s={},s[e]=t(_.Option.of(i)),s),o):m.__assign((a={},a[e]=t,a),o);var s,a}}function c(e,t,n){var r=t,i=e[r],o=m.__rest(e,["symbol"==typeof r?r:r+""]);return"function"==typeof n?m.__assign((s={},s[t]=n(_.Option.of(i)),s),o):m.__assign((a={},a[t]=n,a),o);var s,a}function u(e,t){return function(n){var r=e,i=n[r],o=m.__rest(n,["symbol"==typeof r?r:r+""]);return("function"==typeof t?t(_.Option.of(i)):t).fold(function(){return o},function(t){return m.__assign((n={},n[e]=t,n),o);var n})}}function l(e,t,n){var r=t,i=e[r],o=m.__rest(e,["symbol"==typeof r?r:r+""]);return("function"==typeof n?n(_.Option.of(i)):n).fold(function(){return o},function(e){return m.__assign((n={},n[t]=e,n),o);var n})}function d(e,t){return p(p({},e),t)}function p(e,t){for(var n in t){var r=e[n]||{},i=t[n];null!=i&&null!=r&&i.constructor===Object&&r.constructor===Object?e[n]=p(r,i):e[n]=i}return e}function h(e,t){return Object.assign({},e,t)}function f(e){return function(t){return h(t,e)}}function g(e){return Object.keys(e)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(17),_=n(7);t.objectWithoutProperties=r,t.isObject=i,t.isEmptyObject=o,t.toArray=s,t.immutableModify=a,t.immutableUpdate=c,t.immutableModifyOption=u,t.immutableUpdateOption=l,t.merge=d,t.update=h,t.modify=f,t.keys=g},268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(3),o=n(7),s=n(18),a=n(516),c=n(2),u=n(178),l=n(521),d=n(519);!function(e){e.api="api",e.sidebar="sidebar",e.text="text"}(r=t.AlertActionSource||(t.AlertActionSource={}));var p;!function(e){e.mock={action:s.CAPI.FeedbackType.LOOKED,commit:c.noop,undo:function(){return[]}},e.mockAction=function(){return e.mock}}(p=t.Undoable||(t.Undoable={}));!function(e){e.mock={_applyAlert:p.mockAction,_alertFeedback:p.mockAction,_dismissBatch:p.mockAction,_hideAlert:c.noop}}(t.InternalAlertOps||(t.InternalAlertOps={}));var h=function(){function e(e,t,n,r){var i=this;this._positionManager=e,this._alertId=t,this._rangesMap=new Map,this._ranges={highlight:new Set,replace:new Set,applied:new Set},this._pendingRanges=[],this._rangesIndex=0;var o=new Map;this._registerRanges(r.map(function(e){return 1===e.length?e.widen():e}),function(e){return i._ranges.highlight.add(e)},o,this._alertId),this._registerRanges(n,function(e){return i._ranges.replace.add(e)},o),this.highlightRange=this._getFirstRange(this._ranges.highlight),this.replaceRange=this._getFirstRange(this._ranges.replace)}return e.register=function(t,n,r,i){return new e(t,n,r,i)},e.prototype._getFirstRange=function(e){return this._rangesMap.get(e.values().next().value)},e.prototype.enqueueRanges=function(e,t){var n=this;this._cleanupPendingRanges();var r=new Map;this._registerRanges(t.map(function(e){return 1===e.length?e.widen():e}),function(e){return n._pendingRanges.push(["highlight",e])},r,this._alertId),this._registerRanges(e,function(e){return n._pendingRanges.push(["replace",e])},r)},Object.defineProperty(e.prototype,"pending",{get:function(){return this._pendingRanges.length>0},enumerable:!0,configurable:!0}),e.prototype._deregisterRange=function(e){this._rangesMap.delete(e)&&this._positionManager.deregisterRange(e)},e.prototype._cleanupPendingRanges=function(){var e=this;this._pendingRanges.forEach(function(t){var n=(t[0],t[1]);return e._deregisterRange(n)}),this._pendingRanges=[]},e.prototype._clearRanges=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(t){t.forEach(function(t){return e._deregisterRange(t)}),t.clear()})},e.prototype.applyPendingRangesUpdate=function(){var e=this;if(!this.pending)return o.None;var t=Array.from(this._ranges.highlight).map(function(t){return e._rangesMap.get(t)});this._clearRanges(this._ranges.highlight,this._ranges.replace);var n=this._pendingRanges.filter(function(e){return"highlight"===e[0]}).map(function(t){var n=(t[0],t[1]);return e._rangesMap.get(n)});return this._pendingRanges.forEach(function(t){var n=t[0],r=t[1];return e._ranges[n].add(r)}),this._pendingRanges=[],this.highlightRange=this._getFirstRange(this._ranges.highlight),this.replaceRange=this._getFirstRange(this._ranges.replace),o.Some({addedHighlightedRanges:n,removedHighlightedRanges:t})},e.prototype._registerRanges=function(e,t,n,r){var i=this;e.forEach(function(e){var o,s=e.start+","+e.end;n&&n.has(s)?o=n.get(s):(o=v.getRangeId(i._alertId,e.type,i._rangesIndex++),i._rangesMap.set(o,r?i._positionManager.registerRange(o,e,r):i._positionManager.registerRange(o,e)),n&&n.set(s,o)),t(o)})},Object.defineProperty(e.prototype,"appliedRange",{get:function(){return this._ranges.applied.size>0?o.Some(this._getFirstRange(this._ranges.applied).narrow()):o.None},enumerable:!0,configurable:!0}),e.prototype.registerAppliedRange=function(){var e=this;Array.from(this._ranges.highlight).concat(Array.from(this._ranges.replace)).map(function(t){return e._rangesMap.get(t)}).reduce(function(e,t){return e.map(function(e){return{s:Math.min(e.s,t.start),e:Math.max(e.e,t.end)}}).orElseL(function(){return o.Some({s:t.start,e:t.end})})},o.Option.empty()).forEach(function(t){var n=new a.Range(t.s,t.e,v.RangeType.APPLY).widen();e._registerRanges([n],function(t){return e._ranges.applied.add(t)})})},e.prototype.dispose=function(){var e=this;this._rangesMap.forEach(function(t,n){return e._positionManager.deregisterRange(n)}),this._rangesMap.clear()},e}(),f=function(){function e(e,t,n,r,i){void 0===r&&(r=new a.Range(e.begin,e.end,v.RangeType.REPLACE)),void 0===i&&(i=new a.Range(e.highlightBegin,e.highlightEnd,v.RangeType.HIGHLIGHT)),this._raw=e,this._ops=t,this._positionManager=n,this._replaceRange=r,this._highlightRange=i,this._disposed=!1,this.id=this._raw.id+"_"+(_.idCounter++).toString(),this.rawId=this._raw.id,this.priority=0,this.belongsToAllAlerts=!1,this.patternName=this._raw.pname,this.isFree=this._raw.free,this.lensPriority=this._raw.cardLayout&&this._raw.cardLayout.rank||0,this.isRead=this._raw.isRead||!1,this.highlightText=this._raw.highlightText,this.replaceText=this._raw.text,this._isValid=!0,void 0!==e.transforms&&c.invariant(e.transforms.length===e.replacements.length,"Every transform should have replacement, bro, tr: "+e.transforms+", rep: "+e.replacements+". AlertId: "+e.id),this.doRegisterRanges(this._replaceRange,this._highlightRange)}return e.prototype.invalidate=function(){return this._isValid=!1,this},Object.defineProperty(e.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),e.prototype.updateRawAlert=function(e){this._isValid=!0,this._raw=e},e.prototype.enqueueRawAlertForUpdate=function(e){this._raw=e,this._alertRangeManager.enqueueRanges([new a.Range(e.begin,e.end,this._replaceRange.type)],[new a.Range(e.highlightBegin,e.highlightEnd,this._highlightRange.type)])},Object.defineProperty(e.prototype,"hasNewRangeForUpdate",{get:function(){return this._alertRangeManager.pending},enumerable:!0,configurable:!0}),e.prototype.applyPendingRangesUpdate=function(){return this._alertRangeManager.applyPendingRangesUpdate()},Object.defineProperty(e.prototype,"highlightRange",{get:function(){return this._alertRangeManager.highlightRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"replaceRange",{get:function(){return this._alertRangeManager.replaceRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appliedRange",{get:function(){return this._alertRangeManager.appliedRange},enumerable:!0,configurable:!0}),e.prototype.registerAppliedRange=function(){return this._alertRangeManager.registerAppliedRange()},e.prototype.apply=function(e,t){return void 0===t&&(t=r.api),c.invariant(!this._disposed,"Cannot apply already disposed "+this.id),this._ops._applyAlert(this,this._raw.replacements[e],t)},e.prototype.sendFeedback=function(e,t){return c.invariant(!this._disposed,"Cannot send feedback for already disposed "+this.id),this._ops._alertFeedback(this,e,t)},e.prototype.dismissBatch=function(e){return e.forEach(function(e){return c.invariant(!e._disposed,"Cannot send feedback for already disposed "+e.id)}),this._ops._dismissBatch(e)},e.prototype.dispose=function(){c.invariant(!this._disposed,"Cannot dispose already disposed "+this.id),this._disposed=!0,this.deregisterRanges()},e.prototype.hideApplied=function(){this._ops._hideAlert(this.id)},e.prototype.equals=function(e){return this.id===e.id},e.prototype.isDuplicate=function(e){return this.highlightRange.start===e.highlightRange.start&&this.highlightRange.end===e.highlightRange.end&&this.highlightText===e.highlightText&&this.patternName===e.patternName&&this.title===e.title&&this.lensId===e.lensId},e.prototype.toString=function(){return"Alert: "+JSON.stringify(this,void 0,0)},e.prototype.toJSON=function(){return{id:this.id,hrange:this.highlightRange,rrange:this.replaceRange,arange:this.appliedRange.orNull(),lensId:this.lensId,alertType:this.alertType,category:this._raw.category,disposed:this._disposed}},e.prototype.toRawAlert=function(){return i.__assign({},this._raw,{isRead:this.isRead,begin:this.replaceRange.start,end:this.replaceRange.end,highlightBegin:this.highlightRange.start,highlightEnd:this.highlightRange.end})},e.prototype.toLiteAlert=function(){return{group:this._raw.group,category:this._raw.category,categoryHuman:this._raw.categoryHuman}},e.prototype.registerRanges=function(){return this.doRegisterRanges(this._replaceRange,this._highlightRange),this},e.prototype.deregisterRanges=function(){return this._alertRangeManager.dispose(),this},e.prototype.doRegisterRanges=function(e,t){this._alertRangeManager=h.register(this._positionManager,this.id,[e],[t])},e.idCounter=0,e}();t.BaseAlertImpl=f;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title="",t.alertType=u.Lens.Type.Advanced,t.lensId=u.Lens.SpecialId.Premium,t.group=t._raw.group,t.category=t._raw.category,t.categoryHuman=t._raw.categoryHuman,t.allowDuplicates=!0,t.hasLongHighlight=!0,t.allowUpdate=!1,t.isRead=!0,t.counters={critical:0,advanced:1,unread:0,textLength:0},t}return i.__extends(t,e),t.prototype.copy=function(){return this},t.prototype.sendFeedback=function(){return p.mock},t}(f);t.PremiumAlertImpl=g;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alertType=u.Lens.Type.Originality,t.lensId=u.Lens.SpecialId.Plagiarism,t.isFree=!1,t.allowDuplicates=!0,t.hasLongHighlight=!0,t.allowUpdate=!1,t.counters={critical:0,advanced:0,unread:0,textLength:t._raw.highlightText.length},t.plagiarismType=t._parseExtraProps(t._raw.extra_properties),t.percent=parseInt(t._raw.extra_properties.percent||"0",10),t.title=t._raw.extra_properties.title||"",t.cardId=JSON.stringify({title:t.title,source:t.plagiarismType.source}),t.isRead=!0,t}return i.__extends(t,e),t.prototype._parseExtraProps=function(e){return"PUBLICATION"===e.source?{source:"publication",authors:o.Option.of(e.authors),citationStyle:{apa:e.reference_apa||"",chicago:e.reference_chicago||"",mla:e.reference_mla||""}}:{source:"web",url:o.Option.of(e.url)}},t.prototype.copy=function(){c.invariant(!this._disposed,"Cannot copy disposed alert!");var e=new t(this._raw,this._ops,this._positionManager,this.replaceRange.copy(),this.highlightRange.copy());return this.isValid||e.invalidate(),e.isRead=this.isRead,e},t}(f);t.PlagiarismAlertImpl=m;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lensId=t._raw.cardLayout.group,t.alertType=t._raw.free?u.Lens.Type.Critical:u.Lens.Type.Advanced,t.allowDuplicates=!1,t.hasLongHighlight=v.isLongHighlight(t),t.allowUpdate=!1,t.title=t._raw.title,t.explanation=t._raw.explanation,t.details=c.NotEmpty.string(t._raw.details),t.examples=l.AlertExample.parse(t._raw.examples),t.replacementsLabels=d.ReplacementsLabels.parse(t._raw),t.extraProperties=t._parseExtraProps(t._raw.extra_properties),t.priority=t.extraProperties.priority,t.belongsToAllAlerts=!0,t}return i.__extends(t,e),Object.defineProperty(t.prototype,"counters",{get:function(){return{critical:Number(this.alertType===u.Lens.Type.Critical),advanced:Number(this.alertType===u.Lens.Type.Advanced),unread:Number(!this.isRead),textLength:0}},enumerable:!0,configurable:!0}),t.prototype.copy=function(){c.invariant(!this._disposed,"Cannot copy disposed alert!");var e=new t(this._raw,this._ops,this._positionManager,this.replaceRange.copy(),this.highlightRange.copy());return this.isValid||e.invalidate(),e.isRead=this.isRead,e},t.prototype._parseExtraProps=function(e){return{hasAddToDictionary:"true"===e.add_to_dict,didYouMean:"true"===e.did_you_mean,showTitle:"true"===e.show_title,isEnhancement:"true"===e.enhancement,priority:parseInt(e.priority||"0",10)}},t}(f);t.AlertImpl=_;var y=function(e){function t(t,n,r,i,o){void 0===i&&(i=new a.Range(t.begin,t.end,v.RangeType.REPLACE)),void 0===o&&(o=new a.Range(t.highlightBegin,t.highlightEnd,v.RangeType.HIGHLIGHT_IGNORE));var s=e.call(this,t,n,r,i,o)||this;return s.title="",s.lensId=u.Lens.SpecialId.Readability,s.alertType=u.Lens.Type.Advanced,s.allowDuplicates=!0,s.hasLongHighlight=!0,s.allowUpdate=!0,s}return i.__extends(t,e),t.prototype.copy=function(){c.invariant(!this._disposed,"Cannot copy disposed alert!");var e=new t(this._raw,this._ops,this._positionManager,this.replaceRange.copy(),this.highlightRange.copy());return this.isValid||e.invalidate(),e.isRead=this.isRead,e},t}(_);t.ReadabilityAlertImpl=y;var v;!function(e){function t(e,t){var n="alert#"+String(I++);return i.__assign({},s.RawAlert.mock,{id:n,cardLayout:{category:"Clarity",group:"Lens "+e,groupDescription:"Checks spelling, confused words, capitalization",rank:e}},t)}function n(e){return Math.trunc(Math.random()*e)}function r(e,n,r){O+=30;var i=r&&"number"==typeof r.start?r.start:O,o=r&&"number"==typeof r.end?r.end:i+1,s=t(e,n),a={begin:i,end:o,highlightBegin:i,highlightEnd:o};return Object.assign(s,a),s}function l(e,t,r){var o=r&&r.start||n(O+=1),a=i.__assign({},s.RawAlert.mockPlagiarism,t),c=r&&r.end||o+1+n(20),u={begin:o,end:c,highlightBegin:o,highlightEnd:c,highlightText:e};return Object.assign(a,u),a}function d(e){var t=e.patternName;return D.has(t)}function p(e){return e.alertType===u.Lens.Type.Originality}function h(e){return e.lensId===u.Lens.SpecialId.Readability}function f(e){return e.lensId===u.Lens.SpecialId.Premium}function v(e){return e instanceof _}function b(t){return!e.isPlagiarism(t)&&!e.isReadability(t)}function w(e,t){return e.source===t.source&&("web"===e.source&&t.url.equals(e.url)||"publication"===e.source&&t.authors.equals(e.authors))}function E(e,t){return e.title===t.title&&w(e.plagiarismType,t.plagiarismType)}function S(e,t){var n=c.ArrayUtils.lowerBound(e,function(e){return t>=e.highlightRange.end}),r=o.Option.of(e[n]),i=o.Option.of(e[n-1]);return r.map(function(e){return i.fold(function(){return e},function(n){return e.highlightRange.start-t<=t-n.highlightRange.end?e:n})}).orElse(i)}function C(e,t,n){return s.RawAlert.isHidden(e)?new g(e,t,n):s.RawAlert.isPlagiarism(e)?new m(e,t,n):s.RawAlert.isReadability(e)?new y(e,t,n):new _(e,t,n)}function k(t){return e.CRITICAL_GROUPS.has(t)}function T(t){if(e.isPremium(t))return u.Lens.Info.premium;if(e.isPlagiarism(t))return u.Lens.Info.plagiarism;if(e.isReadability(t))return u.Lens.Info.readability;var n=t._raw.cardLayout;return{id:t.lensId,title:t.lensId,description:n.groupDescription,type:k(n.group)?u.Lens.Type.Critical:u.Lens.Type.Advanced,category:n.category,priority:n.rank,exclusiveHighlights:!1}}function x(e,t,n){return""+e+a.Range.AlertIdDelimiter+t+n}function A(e){var t=e.indexOf(a.Range.AlertIdDelimiter);return t<0?e:e.substring(0,t)}!function(e){e.REPLACE="r",e.HIGHLIGHT="h",e.HIGHLIGHT_IGNORE="hi",e.APPLY="a"}(e.RangeType||(e.RangeType={})),e.comparator=function(e,t){return e.highlightRange.end<t.highlightRange.end?-1:e.highlightRange.end>t.highlightRange.end?1:e.highlightRange.start<t.highlightRange.start?-1:e.highlightRange.start>t.highlightRange.start?1:e.id===t.id?0:e.id<t.id?-1:1};var I=1,O=0;e.generate=r,e.generatePlagiarism=l;var D=new Set(["Grammar/Conjunctions/SoVsNeither/SoIONeitherNor","SentenceStructure/Fragment/Fragment/NounPhraseParagraph","SentenceStructure/Fragment/Fragment/NounPhrase","SentenceStructure/Fragment/Fragment/InfinitivePhrase","SentenceStructure/Fragment/Fragment/ThatInNP","SentenceStructure/Fragment/Fragment/SubordinateClause","SentenceStructure/Fragment/Fragment/ParticiplePhrase","SentenceStructure/Fragment/IncompleteComparison/Case1","SentenceStructure/Fragment/IncompleteComparison/Case2","SentenceStructure/Fragment/IncompleteComparison/Case3","SentenceStructure/Fragment/NoInfinitive/AskTo","SentenceStructure/Fragment/NoSubject/Case3","SentenceStructure/Fragment/NoSubject/Case2","SentenceStructure/Fragment/NoSubject/Case1","SentenceStructure/Fragment/NoSubject/InQuestion","SentenceStructure/Fragment/NoVerb/WhoFollowedByBe","SentenceStructure/Parallelism/ParallelSoDoI/WillAfterCC","Style/TooFormal/Subjunctive/General","Style/Clarity/LongSentence/General"]);e.isLongHighlight=d,e.isPlagiarism=p,e.isReadability=h,e.isPremium=f,e.isAlert=v,e.isCacheable=b,e.isPlagiarismSourceEqual=E,e.findClosest=S,e.create=C,e.CRITICAL_GROUPS=new Set(["Spelling","Grammar","Punctuation","Fluency","Conventions"]),e.isCriticalGroup=k,e.toLens=T,e.getRangeId=x,e.fromRangeIdToAlertId=A}(v=t.Alert||(t.Alert={}))},270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(6),s=n(780);t.Spinner=function(e){var t=e.className,n=void 0!==t&&t,a=e.size,c=void 0===a?18:a,u=e.color,l=void 0===u?"#666":u,d={width:c+"px",height:c+"px",backgroundColor:l};return i.createElement("div",r.__assign({},o.classes(s.spinner,n)),i.createElement("div",{style:d,className:s.item}),i.createElement("div",{style:d,className:s.item}),i.createElement("div",{style:d,className:s.item}))}},271:function(e,t,n){"use strict";function r(e){return e.view(function(e){return{enabled:!e.enabled}})}Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(6),s=n(529),a=n(260),c=n(7),u=n(486),l=n(107),d=n(105),p=n(2),h=n(32),f=new Date(15259968e5),g=new Date(15263316e5);!function(e){e.enabled="enabled",e.upgradeIsNeeded="upgradeIsNeeded",e.disabled="disabled"}(i=t.UpgradableFeatureState||(t.UpgradableFeatureState={}));var m;!function(e){function t(e){return e===n.migration||e===n.welcome}!function(e){e.AA="AA",e.BB="BB",e.CC="CC",e.UNKNOWN_TS="UNKNOWN_TS",e.UNKNOWN_DN="UNKNOWN_DN"}(e.WootricGroup||(e.WootricGroup={}));!function(e){e.small="small",e.large="large"}(e.CounterType||(e.CounterType={}));var n;!function(e){e.migration="migration",e.welcome="welcome"}(n=e.TourType||(e.TourType={})),e.isTourType=t}(m=t.DenaliFeatures||(t.DenaliFeatures={}));var _;!function(e){e[e.CRITICAL_ADVANCED=0]="CRITICAL_ADVANCED",e[e.FREE_PREMIUM=1]="FREE_PREMIUM"}(_=t.AlertGroupNames||(t.AlertGroupNames={}));var y;!function(e){e.Edu="edu",e.Business="business"}(y=t.InstitutionType||(t.InstitutionType={}));var v=function(){function e(e,t,n,r,i,s,a,c){var u=this;this._userProfile=e,this._settings=t,this._router=n,this._experiments=r,this._appConfig=i,this._environment=s,this._isFreeUser=a,this._instType=c,this._denaliPreLaunchGroup="denali_partial_test1",this._denali50="denali_50_denali",this._denali50Control="denali_50_denali_control",this._denali2={AAGroups:["denali_2_editor_control_1","denali_2_editor_control_2"],BBHalfSidebarGroups:["denali_2_denali_sidebar_1","denali_2_denali_sidebar_2"],CCTheGreenButtonGroups:["denali_2_denali_green_btn_1","denali_2_denali_green_btn_2"]},this._denali3={AGroups:p.ArrayUtils.mapNTimes(2,function(e){return"denali_3_a_control_"+(e+1)}),BGroupsTheGreenBtn:p.ArrayUtils.mapNTimes(8,function(e){return"denali_3_b_the_green_button_"+(e+1)}),CGroupsPrettyBtn:p.ArrayUtils.mapNTimes(8,function(e){return"denali_3_c_pretty_button_"+(e+1)}),DGroupsImprovedSidebar:p.ArrayUtils.mapNTimes(8,function(e){return"denali_3_d_improved_sidebar_"+(e+1)})},this._denali4={AGroupsAdvanced:["denali_4_advanced_1","denali_4_advanced_2"],BGroupsPremium:["denali_4_premium_1","denali_4_premium_2"]},this._denali5={AGroups:[],BGroupsAllAlerts:[]},this._forceEditorTs=this._router.query.get("denali").exists(function(e){return"false"===e}),this.appInitedFromDenaliPage=this._router.isActive(d.Router.routes.denali_editor.href({docId:"*"})).get(),this.wootricTest=this._router.query.get("wootric").exists(function(e){return"test"===e}),this.showSwitchToDenaliBtn={enabled:"prod"!==this._appConfig.env||this._userProfile.get().email.includes("@grammarly.com")},this.isDenaliDocument=function(e){return u.enabled?u._settings.getDocumentMode(e).view(function(e){return e===l.DocumentMode.Denali}):o.Atom.create(!1)}}return e.prototype._isExperiment=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.some(function(t){return e._experiments.get().has(t)})},e.prototype._isQueryExperiment=function(e){return this._router.query.get("exp").contains(e)},Object.defineProperty(e.prototype,"_isDenali4A_NormalWording",{get:function(){return this._isExperiment.apply(this,this._denali4.AGroupsAdvanced)||this._isQueryExperiment("4a")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isDenali4B_AlternativeWording",{get:function(){return this._isExperiment.apply(this,this._denali4.BGroupsPremium)||this._isQueryExperiment("4b")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isExperiment4",{get:function(){return this._isDenali4A_NormalWording||this._isDenali4B_AlternativeWording},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isDenali5A_ConcreteLenses",{get:function(){return this._isExperiment.apply(this,this._denali5.AGroups)||this._isQueryExperiment("5a")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isDenali5B_AllAlerts",{get:function(){return this._isExperiment.apply(this,this._denali5.BGroupsAllAlerts)||this._isQueryExperiment("5b")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isExperiment5",{get:function(){return this._isDenali5A_ConcreteLenses||this._isDenali5B_AllAlerts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wootric",{get:function(){return c.None},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fromPrereleaseDenaliExperiments",{get:function(){return this._isExperiment(this._denaliPreLaunchGroup,this._denali50,this._denali50Control)||this._isExperiment.apply(this,this._denali2.BBHalfSidebarGroups.concat(this._denali2.CCTheGreenButtonGroups))||this._isExperiment.apply(this,this._denali3.BGroupsTheGreenBtn.concat(this._denali3.CGroupsPrettyBtn,this._denali3.DGroupsImprovedSidebar))||this._isExperiment4},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fromDenaliExperiments",{get:function(){return this.fromPrereleaseDenaliExperiments||this._isExperiment5},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"migratedFromClassic",{get:function(){return this._userProfile.get().email.indexOf("@grammarly.com")>-1||!this.fromPrereleaseDenaliExperiments&&(!this._settings.forcedDenaliUI.get()&&(!this._userProfile.get().email.startsWith("editor_ts")&&(this._userProfile.get().email.indexOf("@bh.exacttarget.com")>-1||!!this._userProfile.get().registrationDate.fold(function(){return!1},function(e){return e<g}))))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instType",{get:function(){return this._instType.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){if(this._forceEditorTs)return!1;if("msie"===this._environment.info.browser)return!1;if(this._settings.forcedDenaliUI.get())return!0;if(this.instType.nonEmpty()){var e=this.instType.get();switch(e){case y.Edu:return!1;case y.Business:return!0;default:p.assertNever(e)}}var t=this._userProfile.get().email;return t.indexOf("@bh.exacttarget.com")>-1?!t.startsWith("editor_ts"):t.indexOf("@grammarly.com")>-1||(this.fromPrereleaseDenaliExperiments,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alertGroupNames",{get:function(){return this._isFreeUser?_.FREE_PREMIUM:_.CRITICAL_ADVANCED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"counterType",{get:function(){return c.Some(m.CounterType.small)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"denaliGroup",{get:function(){return this.enabled?Array.from(this._experiments.get()).find(function(e){return e.startsWith("denali_")&&!e.startsWith("denali_1")})||"forced_denali":null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withAllAlerts",{get:function(){return this._isDenali5B_AllAlerts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"revampedHeader",{get:function(){return this._isDenali5B_AllAlerts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tour",{get:function(){return this._router.query.get("tour").filter(m.isTourType).orElse(this._settings.seenDenaliWelcome.get()||(this.fromPrereleaseDenaliExperiments||this._settings.forcedDenaliUI.get())&&!this._userProfile.get().registrationDate.exists(function(e){return e>f})?c.None:c.Some(this._settings.seenWelcome.get()?m.TourType.migration:m.TourType.welcome))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showFooter",{get:function(){return this._router.query.get("footer").exists(function(e){return"show"===e})},enumerable:!0,configurable:!0}),e}();t.DenaliFeaturesImpl=v;var b=function(){function e(e,t,n,l,d,f,g,m){var _=this;this._experiments=e,this._subscription=t,this._userProfile=n,this._settings=l,this._institution=d,this._environment=f,this._router=g,this._appConfig=m,this._isPhoenixEduUser=this._institution.view(function(e){return{enabled:_._router.query.get("instType").fold(function(){return null!==e&&/Phoenix University/i.test(e.name)},function(e){return"phoenix"===e})}}),this._instUserFeature=this._institution.view(function(e){return{enabled:_._router.query.has("instType")||null!==e}}),this._nonInstUserFeature=r(this._instUserFeature),this._usertestingGroups=["usertesting_2_002_usertesting","usertesting_3_003_usertesting","usertesting_4_004_usertesting"],this.isUserTesting=this._isUserTesting(this._usertestingGroups),this.isUserTesting1=this._isUserTesting(["usertesting_2_002_usertesting"]),this.isUserTesting2=this._isUserTesting(["usertesting_3_003_usertesting"]),this.isUserTesting3=this._isUserTesting(["usertesting_4_004_usertesting"]),this.showOnboarding=this._router.query.get("onboarding").exists(function(e){return"show"===e}),this.hideOnboarding=this._userProfile.get().email.indexOf("@bh.exacttarget.com")>-1||this._router.query.get("onboarding").exists(function(e){return"hide"===e}),this.isFree=this._userProfile.view(function(e){return e.type===u.UserType.free&&!e.isFreebie}).get()||this._router.query.has("isFree"),this.isPremium=this._userProfile.view(function(e){return e.type===u.UserType.premium}).get()&&!this._router.query.has("isFree"),this.isDesktopEditor=this._environment.platform===h.Environment.Platform.DESKTOP,this.instUserFeature=this._instUserFeature,this._instType=this._institution.view(function(e){return _._router.query.get("instType").filter(function(e){return Object.values(y).indexOf(e)>=0}).orElse(null===e?c.None:c.Some(e.business?y.Business:y.Edu))}),this.denali=new v(this._userProfile,this._settings,this._router,this._experiments,this._appConfig,this._environment,this.isFree,this._instType),this.proofit=o.Atom.combine(this._subscription.view(function(e){return p.Async.isOk(e)&&!!e.value.paymentMethod}),this._institution,this._settings.disableProofit,function(e,t,n){return n||_.demoMode?i.disabled:t?t.proofit?i.enabled:i.disabled:e||_.isInternalUser?i.enabled:_.isFree?i.upgradeIsNeeded:i.disabled}),this.proofitTest=this._router.query.get("proofit"),this.plagiarism=this._institution.view(function(e){return{enabled:!(!1!==_.demoMode||e&&e.plagiarismDisabled)}}),this.banners=this.isDesktopEditor?o.Atom.create({enabled:!1}):this._nonInstUserFeature,this.navTutotial=this._instType.view(function(e){return{enabled:e.exists(function(e){return e===y.Edu})}}),this.tour=this._nonInstUserFeature,this.deleteAccount=r(this._isPhoenixEduUser),this.usernameUnderLogout=this._nonInstUserFeature,this.showChangeEmail=this._nonInstUserFeature,this.eduAdminPanelLink=this._institution.view(function(e){return{enabled:e&&e.admin}}),this.subscription=o.Atom.combine(this._userProfile,this._institution,function(e,t){return{enabled:null===t&&_.isPremium&&!e.isFreebie}}),this.goPremium={enabled:this.isFree},this.premiumBadge={enabled:this.isPremium},this.premiumCounter={enabled:!this.isFree},this.upgradeButton={enabled:this.isFree},this.appsSection=o.Atom.create({enabled:!this.isDesktopEditor}),this.desktopApps=r(this._isPhoenixEduUser),this.score=this._institution.view(function(e){return{enabled:!e||!e.scoreDisabled}}),this.copyPasteMenuItems={enabled:!this.isDesktopEditor},this.quickReplacementsInCard=this._institution.view(function(e){return{enabled:!e||e.quickReplacement}}),this.hideTitleInInstCard=this._institution.view(function(e){return{enabled:!e||!e.quickReplacement}}),this.showFullCards=this._institution.view(function(e){return{enabled:e&&e.fullCards}}),this.profileLink=r(this._isPhoenixEduUser),this.defaultAcademicGenre=o.Atom.create({enabled:!1}),this.enableTrackingOnDownload=o.Atom.create(!0),this.phoenixReportBtn=this._isPhoenixEduUser,this.phoenixSupportLink=this._isPhoenixEduUser,this.phoenixTutorial=this._isPhoenixEduUser,this.phoenixTerms=o.Atom.combine(this._isPhoenixEduUser,this._settings.acceptedTermsVersion,function(e,t){var n=s.TermsOfService.termsVersion,r=a.valid(t)&&a.valid(n)&&a.gt(n,t)||!a.valid(t)||_._router.query.has("terms");return e.enabled&&r}),this.phoenixTour=this._isPhoenixEduUser,this.showTour=o.Atom.combine(this.phoenixTour,this._settings.seenWelcome,function(e,t){return!t&&!e.enabled&&!_.denali.enabled})}return e.prototype._isUserTesting=function(e){var t=this;return this._experiments.view(function(t){return e.some(function(e){return t.has(e)})}).view(function(e){return t._router.query.has("hasUserTesting")||e&&!t._router.query.has("skipUserTesting")}).get()},Object.defineProperty(e.prototype,"isReadabilityPrototypeDemoUser",{get:function(){return"readability_proto@bh.exacttarget.com"===this._userProfile.get().email},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInternalUser",{get:function(){var e=this._userProfile.get().email;return e.indexOf("@grammarly.com")>-1||e.indexOf("@bh.exacttarget.com")>-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDiscoverabilityOnExit",{get:function(){return this._router.query.get("onexit").exists(function(e){return"show"===e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preventAnimation",{get:function(){return this._router.query.get("preventAnimation").exists(function(e){return"true"===e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSwitchToDenaliUI",{get:function(){return this.denali.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"demoMode",{get:function(){return this.isUserTesting||this.isReadabilityPrototypeDemoUser},enumerable:!0,configurable:!0}),e}();t.FeaturesModel=b,function(e){var t=function(){function e(e){this.counterType=e,this.withAllAlerts=!1,this.migratedFromClassic=!1,this.tour=c.None,this.enabled=!0,this.wootric=c.None,this.wootricTest=!1,this.denaliGroup=null,this.alertGroupNames=_.CRITICAL_ADVANCED,this.appInitedFromDenaliPage=!1,this.showFooter=!1,this.instType=c.None,this.revampedHeader=!1}return e.prototype.isDenaliDocument=function(){return o.Atom.create(!0)},e}();e.DenaliFeaturesMock=t;var n=function(){function e(e,t){this.isFree=e,this.denali=t,this.enableTrackingOnDownload=o.Atom.create(!1),this.plagiarism=o.Atom.create({enabled:!1}),this.proofit=o.Atom.create(i.disabled)}return e}();e.DenaliPageFeaturesMock=n}(b=t.FeaturesModel||(t.FeaturesModel={})),t.FeaturesModel=b},272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(3),o=n(7),s=n(6),a=n(49);!function(e){!function(e){e.checking="checking",e.checkingIn="checkingIn",e.checkingOut="checkingOut"}(e.Type||(e.Type={}));!function(e){e.loading="loading",e.processing="processing"}(e.TextType||(e.TextType={}));!function(t){function n(e){var t=e.lens.filter(function(e){return"checkingOut"!==e}).nonEmpty()?"on":"off",n=e.navigation.filter(function(e){return"checkingOut"!==e}).nonEmpty()?"on":"off";return"text: "+e.text.getOrElse("off")+"; lens: "+t+"; nav: "+n}t.idle={text:o.None,lens:o.None,navigation:o.None},t.text={text:o.Some(e.TextType.loading),lens:o.None,navigation:o.None},t.processing={text:o.Some(e.TextType.processing),lens:o.Some(e.Type.checking),navigation:o.Some(e.Type.checking)},t.lensAndNavigationProcessing=i.__assign({},t.processing,{text:o.None}),t.loading={text:o.Some(e.TextType.loading),lens:o.Some(e.Type.checking),navigation:o.Some(e.Type.checking)},t.toString=n}(e.State||(e.State={}));!function(e){function t(e,t,n){return void 0===n&&(n="hidden"),e.lens(s.Lens.create(function(e){return"hidden"!==e&&"forceHidden"!==e},function(e){return e?t:n}))}e.toVisible=t}(e.SetGoalsVisibilitySource||(e.SetGoalsVisibilitySource={}))}(r=t.DocumentLoader||(t.DocumentLoader={}));var c=function(){function e(){this.state=s.Atom.create(r.State.idle),this.setGoalsVisibilityState=s.Atom.create("hidden")}return e}();t.DocumentLoaderContextImpl=c,t.documentLoaderContext={documentLoader:a.object}},273:function(e,t,n){"use strict";function r(e){var t=e.category,n=e.extraProperties,r=e.todo;return"Unknown"===t?"Unknown word":"Misspelled"===t?"":n.isDidYouMean||n.isShowTitle?"Check word usage":r}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(6),s=n(4),a=n(88),c=n(527);t.CommonHeaderModel=c.CommonHeaderModel;var u=n(274),l=n(2);t.DEFAULT_CARD_HEIGHT=36;var d;!function(e){e[e.expanded=0]="expanded",e[e.expandedMore=1]="expandedMore",e[e.collapsed=2]="collapsed",e[e.applied=3]="applied",e[e.hidden=4]="hidden"}(d=t.VisualState||(t.VisualState={})),t.defaultState={hovered:!1,expandButtonHovered:!1,undoButtonHovered:!1,transientVisualState:d.collapsed},t.defaultSynonymState={hovered:!1,expandButtonHovered:!1,undoButtonHovered:!1,transientVisualState:d.expanded};var p=function(){function e(e,t){this._state=e,this._focused=t,this._transientVisualState=this._state.lens("transientVisualState"),this.visualState=o.Atom.combine(this._transientVisualState,this._focused,function(e,t){return t?e===d.collapsed?d.expanded:e:e===d.expanded||e===d.expandedMore?d.collapsed:e}),this.isExpanded=this._transientVisualState.view(function(e){return e===d.expanded}),this.isExpandedMore=this._transientVisualState.view(function(e){return e===d.expandedMore}),this.isApplied=this._transientVisualState.view(function(e){return e===d.applied}),this.isHidden=this._transientVisualState.view(function(e){return e===d.hidden}),this.isActive=this._transientVisualState.view(function(e){return e===d.expanded||e===d.expandedMore}),this.isExpandButtonHovered=this._state.lens("expandButtonHovered"),this.isUndoButtonHovered=this._state.lens("undoButtonHovered"),this.isCardHovered=this._state.lens("hovered")}return e.prototype._transitionState=function(e,t){var n,r,i=this;if(this._transientVisualState.modify(function(t){var o=i.visualState.get(),s=e.find(function(e){return void 0!==e.from.find(function(e){return o===e})});if(s)return n=o,r=s.to,s.to;throw new TypeError("Can't transition Card from "+d[o])}),void 0===n||void 0===r)throw new l.InvariantError("Expected modify to complete by this point");t&&t(n,r)},e}();t.CardModelStateImpl=p;var h=function(e){function t(t,n,r){var i=e.call(this,t,r.isFocused(n.id))||this;return i._editorEngine=r,i.replace=function(e){i._applyThisAlert({action:"replace",replacementText:e,isSynonym:!1})},i.id=n.id,i.title=n.title,i}return i.__extends(t,e),t.prototype.toggleExpand=function(){var e=this.visualState.get()===d.collapsed;e?this._editorEngine.setFocusedAlert(this.id,"click"):(this._editorEngine.setHighlightedAlert(null),this._editorEngine.setFocusedAlert(null,null)),this._transitionState([{from:[d.expanded,d.expandedMore],to:d.collapsed},{from:[d.collapsed],to:d.expanded}]),e&&t._cardExpandCounter.increment()},t.prototype.hoverExpandButton=function(){this.isExpandButtonHovered.set(!0)},t.prototype.unhoverExpandButton=function(){this.isExpandButtonHovered.set(!1)},t.prototype.hoverUndoButton=function(){this.isUndoButtonHovered.set(!0)},t.prototype.unhoverUndoButton=function(){this.isUndoButtonHovered.set(!1)},t.prototype.hoverCard=function(){this._editorEngine.setHighlightedAlert(this.id),this.isCardHovered.set(!0)},t.prototype.unhoverCard=function(){this._editorEngine.setHighlightedAlert(null),this.isCardHovered.set(!1)},t.prototype.toggleMore=function(){this._transitionState([{from:[d.expanded],to:d.expandedMore},{from:[d.expandedMore],to:d.expanded}])},t.prototype.expand=function(){this._transitionState([{from:[d.collapsed],to:d.expanded}])},t.prototype.collapse=function(){this._transitionState([{from:[d.expanded,d.expandedMore],to:d.collapsed}])},t.prototype.showMore=function(){this._transitionState([{from:[d.expanded],to:d.expandedMore}])},t.prototype.showLess=function(){this._transitionState([{from:[d.expandedMore],to:d.expanded}])},t.prototype.hide=function(){this._transitionState([{from:[d.applied],to:d.hidden}])},t.prototype._applyThisAlert=function(e){this._editorEngine.applyAlert(this.id,e),this._transitionState([{from:[d.expanded,d.expandedMore,d.collapsed],to:d.applied}]),t._cardApplyCounter.getCounter(e.action).increment()},t.prototype.ignore=function(){this._applyThisAlert({action:"ignore"})},t.prototype.acknowledge=function(){this._applyThisAlert({action:"acknowledge"})},t.prototype.addToDictionary=function(){this._applyThisAlert({action:"addToDictionary"})},t.prototype.undoInteraction=function(){this._editorEngine.undoLastAlertAction(),this.unhoverUndoButton(),this._transitionState([{from:[d.applied],to:d.collapsed}])},t._cardExpandCounter=s.Monitoring.TimeSeries.root.getCounter("cards.expand"),t._cardApplyCounter=s.Monitoring.TimeSeries.root.getCounter("cards.apply"),t}(p);t.CardModelBaseImpl=h;var f=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r)||this;return o._alert=n,o._features=i,o.kind="common",o.highlightText=o._alert.highlightText,o.isTextCard=u.isNoReplacement(o._alert.replacements),o.isUnknowWord="Unknown"===o._alert.category,o.details=o._alert.details,o.examples=o._alert.examples,o.explanation=o._alert.explanation,o.extraProperties=o._alert.extraProperties,o.hasReplacementsInContent=!u.isNoReplacement(o._alert.replacements)&&!!o.extraProperties.isShowTitle,o.hasAcknowledgeButton=0===o._alert.replacements.length&&o._alert.group!==a.AlertGroup.contextualSpelling,o.hasAddToDictionary=!!o._alert.extraProperties.hasAddToDictionary,o.showFullCard=o._features.showFullCards.get().enabled,o.isShowMore=Boolean(!o.showFullCard&&(o.details||o.examples&&o.examples.length)),o.hideTitleInInstCard=o._features.hideTitleInInstCard.get().enabled,o}return i.__extends(t,e),t.prototype.getHeader=function(e,t){return new c.CommonHeaderModelImpl(this.title,this._alert.todo,this._alert.replacements,e,t,this._alert.extraProperties,this._features.quickReplacementsInCard.get().enabled,this.replace)},t.prototype.getFooterProps=function(){return{hasAcknowledgeButton:this.hasAcknowledgeButton,hasAddToDictionary:this.hasAddToDictionary,isShowMore:this.isShowMore}},t.prototype.getReplacements=function(){var e=this._alert,t=e.category,n=e.extraProperties,i=e.todo;return u.getReplacementListModel({title:r({category:t,extraProperties:n,todo:i}),replacements:this._alert.replacements,onReplace:this.replace})},t}(h);t.CommonCardModelImpl=f;var g=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i._alert=n,i.kind="plagiarism",i.url=i._alert.url,i.description=i._alert.description,i.reference=i._alert.reference,i}return i.__extends(t,e),t.prototype.getHeader=function(e,t){return new c.PlagiarismHeaderModelImpl(this.title,e,t,this._alert.url)},t}(h);t.PlagiarismCardModelImpl=g;var m=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r)||this;return o._alert=n,o._features=i,o.kind="enhancement",o.details=o._alert.details,o.examples=o._alert.examples,o.explanation=o._alert.explanation,o.hasReplacements=!u.isNoReplacement(o._alert.replacements),o.hasAcknowledgeButton=!o.hasReplacements,o.hasAddToDictionary=!1,o.showFullCard=o._features.showFullCards.get().enabled,o.isShowMore=Boolean(!o.showFullCard&&(o.details||o.examples&&o.examples.length)),o.isVisibleQuickReplacement=o._features.quickReplacementsInCard.get().enabled,o}return i.__extends(t,e),t.prototype.getReplacements=function(){var e=this._alert,t=e.category,n=e.extraProperties,i=e.todo;return u.getReplacementListModel({title:r({category:t,extraProperties:n,todo:i}),replacements:this._alert.replacements,onReplace:this.replace})},t.prototype.getHeader=function(e,t){return new c.EnhancementHeaderModelImpl(this.title,e,t,this.isVisibleQuickReplacement)},t.prototype.getFooterProps=function(){return{hasAcknowledgeButton:this.hasAcknowledgeButton,hasAddToDictionary:this.hasAddToDictionary,isShowMore:this.isShowMore}},t}(h);t.EnhancementCardModelImpl=m;var _=function(e){function t(t,n,r){var i=e.call(this,t,r.isFocused(n.id))||this;return i._alert=n,i._editorEngine=r,i.kind="synonyms",i.visualState=i._transientVisualState,i.replace=function(e){i._applyThisAlert({action:"replace",replacementText:e,isSynonym:!0})},i.id=i._alert.id,i.title=i._alert.title,i.explanation="",i.details="",i.examples=[],i.meanings=i._alert.meanings.map(function(e){return{title:e.title,list:u.getReplacementFlatListModel({title:e.title,replacements:e.replacements,onReplace:function(e){return i.replace(e)}})}}),i.isAnyMeanings=Boolean(i.meanings.length),i}return i.__extends(t,e),t.prototype._applyThisAlert=function(e){this._editorEngine.applyAlert(this.id,e),this._transitionState([{from:[d.expanded,d.expandedMore,d.collapsed],to:d.applied}])},t.prototype.hide=function(){this._transitionState([{from:[d.applied],to:d.hidden}])},t.prototype.collapse=function(){this._transientVisualState.get()!==d.hidden&&this._transitionState([{from:[d.expanded],to:d.hidden}])},t.prototype.undoInteraction=function(){this._editorEngine.undoLastAlertAction(),this._transitionState([{from:[d.applied],to:d.expanded}])},t.prototype.select=function(){this._editorEngine.setHighlightedAlert(this.id)},t.prototype.deselect=function(){this._editorEngine.setHighlightedAlert(null)},t}(p);t.SynonymsCardModelImpl=_},274:function(e,t,n){"use strict";function r(e){return e.map(function(e){return e.transform}).every(function(e){return e.every(function(e){return"delete"!==e.type})})&&2===e.length}function i(e){return 1===e.length}function o(e){return e.reduce(function(e,t){return e+("arrow"!==t.type?t.text.length:0)},0)>35}function s(e){var t=e.filter(function(e){return"delete"===e.type});if(0===t.length)return!1;var n=t[0],r=n.text.replace(/,/g,"").split(" ").filter(Boolean)||[];return n.text.match(/^,(.*?),$/)&&n.text.length>2&&r.length>1}function a(e){return!e||0===e.length}function c(e){var t=e.isDidYouMean,n=e.isActive,c=e.replacements,u=e.todo,l=e.onReplace;if(a(c))return new h;var y="Click to "+u;return t?new m(y,c[0],l):r(c)?new d(y,c[0],c[1],l):o(c[0].transform)?new _(y,c,l):s(c[0].transform)?new g(y,c[0],l):i(c)?new f(y,c[0],l):new p(y,n,c,l)}Object.defineProperty(t,"__esModule",{value:!0});var u,l=n(3);!function(e){e[e.or=0]="or",e[e.single=1]="single",e[e.list=2]="list",e[e.flatList=3]="flatList",e[e.multi=4]="multi",e[e.multiExpanded=5]="multiExpanded",e[e.long=6]="long",e[e.didYouMean=7]="didYouMean",e[e.sideCommas=8]="sideCommas",e[e.empty=9]="empty"}(u=t.CardReplacementTemplate||(t.CardReplacementTemplate={})),t.isOrReplacement=r,t.isSingleReplacement=i,t.isLongReplacement=o,t.isSideCommasReplacement=s,t.isNoReplacement=a;var d=function(){function e(e,t,n,r){var i=this;this.tooltipText=e,this._replacement1=t,this._replacement2=n,this._onReplace=r,this.template=u.or,this.transform1=this._replacement1.transform,this.transform2=this._replacement2.transform,this.onReplace1=function(){return i._onReplace(i._replacement1.newText)},this.onReplace2=function(){return i._onReplace(i._replacement2.newText)}}return e}();t.CardReplacementOr=d;var p=function(){function e(e,t,n,r){var i=this;this.tooltipText=e,this.isExpanded=t,this.replacements=n,this._onReplace=r,this.getOnReplace=function(e){return function(){return i._onReplace(e.newText)}},this.template=this.isExpanded?u.multiExpanded:u.multi}return e.prototype.getTitleReplacement=function(){return new f(this.tooltipText,this.replacements[0],this._onReplace)},e}();t.CardReplacementMulti=p;var h=function(){function e(){this.template=u.empty,this.tooltipText=""}return e}();t.EmptyReplacement=h;var f=function(){function e(e,t,n){var r=this;this.tooltipText=e,this._replacement=t,this._onReplace=n,this.transform=this._replacement.transform,this.onReplace=function(){return r._onReplace(r._replacement.newText)},this.template=u.single}return e}();t.CardReplacementSingle=f;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.template=u.sideCommas,t}return l.__extends(t,e),t}(f);t.CardReplacementSideCommas=g;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.template=u.didYouMean,t}return l.__extends(t,e),t}(f);t.CardReplacementDidYouMean=m;var _=function(){function e(e,t,n){var r=this;this.tooltipText=e,this.replacements=t,this._onReplace=n,this.getOnReplace=function(e){return function(){return r._onReplace(e.newText)}},this.template=u.long}return e}();t.CardReplacementLong=_;var y=function(){function e(e,t,n){var r=this;this.headerText=e,this.replacements=t,this._onReplace=n,this.template=u.list,this.tooltipText="",this.getOnReplace=function(e){return function(){return r._onReplace(e.newText)}}}return e}();t.CardReplacementList=y;var v=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.headerText=t,i.template=u.flatList,i}return l.__extends(t,e),t}(y);t.CardReplacementFlatList=v,t.getReplacementModel=c,t.getReplacementListModel=function(e){var t=e.title,n=e.replacements,r=void 0===n?[]:n,i=e.onReplace;return new y(t,r,i)},t.getReplacementFlatListModel=function(e){var t=e.title,n=e.replacements,r=void 0===n?[]:n,i=e.onReplace;return new v(t,r,i)}},275:function(e,t,n){"use strict";function r(e){switch(e){case"red":return i.red;case"green":return i.green;case"yellow":return i.yellow;default:return i.grey}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(2);!function(e){e[e.red=0]="red",e[e.green=1]="green",e[e.yellow=2]="yellow",e[e.grey=3]="grey"}(i=t.AlertExampleColor||(t.AlertExampleColor={}));!function(e){e[e.italic=0]="italic",e[e.plain=1]="plain"}(t.AlertExampleTextType||(t.AlertExampleTextType={})),t.getColor=r;var s=/<span.*?<\/span><br\/>/g,a=/^<span.*?class="(.+?)".*?>/,c=/^<span.*?>(.+?): /,u=/^<span.*?>(?:.+?: )?(.+?)<\/span><br\/>/;t.parseExamples=function(e){return e?e.replace(/^<p>/,"").split("<p>").map(function(e){var t=e.match(s);return t&&t.length?t.map(function(e){var t=r(o.StringUtils.getFirstWord(o.StringUtils.getFirstMatch(e,a)||"")),n=o.StringUtils.getFirstMatch(e,c)||"Comment",i=o.StringUtils.getFirstMatch(e,u);return i?{color:t,type:n,text:i}:null}).filter(function(e){return!!e}):[]}).filter(function(e){return e.length}):[]}},276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardBaseClassName="cardBaseClassName";!function(e){function t(e,t){return{kind:"single",alertId:e,action:t}}function n(e){return{kind:"batchIgnore",alertIds:e}}function r(e){return"single"===e.kind}function i(e){return"batchIgnore"===e.kind}e.createSingle=t,e.createBatchIgnore=n,e.isSingle=r,e.isBatchIgnore=i}(t.AppliedAlertAction||(t.AppliedAlertAction={}));!function(e){e[e.idle=0]="idle",e[e.inProgress=1]="inProgress",e[e.finished=2]="finished"}(t.CheckingStatus||(t.CheckingStatus={}))},32:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(174);t.RxFetch=i.RxFetch,t.FetchType=i.FetchType;var o=n(1267);t.Lifecycle=o.Lifecycle,t.Subscription=o.Subscription;var s=n(482);t.TextResources=s.TextResources,t.getTextResources=s.getTextResources;var a=n(128);t.Environment=a.Environment,r.__exportStar(n(1263),t)},330:function(e,t){e.exports={spinner:"_51ca9a4d-editor-core-spinner",desktopEditorPreventSelection:"_a3ef96c1-editor-core-desktopEditorPreventSelection"}},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(575),o=n(62),s="application/json",a="application/x-www-form-urlencoded";t.HTTPMethods=["get","post","put","options","head","trace","delete","connect"];var c=function(){function e(){}return e.factory=function(t,n,i,o){return void 0===n&&(n="include"),void 0===i&&(i=d.Extender.identity),void 0===o&&(o=e.mapToHTTPError),function(s,a,c){return void 0===a&&(a=e.parseJSON),void 0===c&&(c=o),i(s).then(function(e){return e.build()}).then(function(e){return{url:e.url,body:e.body,method:e.method,headers:e.headers,mode:"cors",credentials:n}}).then(function(e){var n=e.url,i=r.__rest(e,["url"]);return t(n,i)}).then(e._checkStatus(c)).then(a)}},e._checkStatus=function(e){return function(t){return t.ok?Promise.resolve(t):t.text().then(function(n){throw e(n,t)})}},e.mapToHTTPError=function(e,t){return new u({code:t.status,status:t.statusText,url:t.url,body:e})},e.assertMimeType=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=t.headers.get("Content-Type")||t.headers.get("content-type");if(!n)throw new Error("get empty Content-Type, but expected: "+e);if(e.every(function(e){return-1===n.indexOf(e)}))throw new o.AssertionError(e.join(),n,"Unexpected Content-Type")}},e.parseJSON=function(t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(n){return e.assertMimeType("application/json")(t),[2,t.json()]})})},e.parseBlobResponse=function(t){return r.__awaiter(this,void 0,void 0,function(){var n;return r.__generator(this,function(r){switch(r.label){case 0:return e.assertMimeType("text/plain","application/octet-stream","application/vnd","application/pdf")(t),n={title:i.parse(t.headers.get("Content-Disposition")||"downloadedDocument").parameters.filename},[4,t.blob()];case 1:return[2,(n.data=r.sent(),n)]}})})},e.parseText=function(e){return e.text()},e.toVoid=function(){},e}();t.Ajax=c;var u=function(e){function t(t){var n=t.code,r=t.status,i=t.url,o=t.message,s=t.body,a=e.call(this,o||r||s||"HTTPError")||this;return a.name="HTTPError",a.url=i,a.code=n,a.body=s,a.status=r,a}return r.__extends(t,e),t.prototype.toString=function(){return"Message: "+this.message+"\nStatus: "+this.status+"\nCode: "+this.code+"\nUrl: "+this.url},t}(o.CustomError);t.HTTPError=u;var l=function(){function e(e,t,n,r,i){this._url=e,this._method=t,this._headers=n,this._mime=r,this._body=i}return e.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.get.apply(d,e).build()},e.post=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.post.apply(d,e).build()},e.put=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.put.apply(d,e).build()},e.del=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.del.apply(d,e).build()},e.head=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.head.apply(d,e).build()},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this._method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this._headers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mime",{get:function(){return this._mime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),e}();t.Request=l;var d=function(){function e(e,t,n,r,i,o,s,a){void 0===e&&(e=""),void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i={}),this._url=e,this._queryParams=t,this._formParams=n,this._cookies=r,this._headers=i,this._method=o,this._mime=s,this._body=a}return e.join=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=[].slice.call(t.filter(function(e){return e.length>0}),0).join("/");return e._normalize(r)},e._normalize=function(e){return e=e.replace(/:\//g,"://"),e=e.replace(/([^:\s])\/+/g,"$1/"),e=e.replace(/\/(\?|#)/g,"$1")},e.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("get")},e.post=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("post")},e.put=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("put")},e.del=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("delete")},e.head=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("head")},e.url=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(e.join.apply(e,t))},e.prototype.url=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(""!==this._url)throw new Error("URL already set to "+this._url+", use join(string) to add additional parts to it");return this.join(e.join.apply(e,t))},e.create=function(){return new e},e.prototype.method=function(e){if(-1===t.HTTPMethods.indexOf(e.toLowerCase()))throw new Error("unknown method was passed as an argument: "+e);if(this._method&&this._method!==e)throw new Error("Method already set to "+this._method+", but was overwritten by "+e);return this._method=e,this},e.prototype.join=function(t){return this._url=e.join(this._url,t),this},e.prototype.pathParam=function(t){return this._url=e.join(this._url,encodeURIComponent(t)),this},e.prototype.body=function(e){if(this._body)throw new Error("Body already set to "+this._body+", but was overwritten by "+e);return this._body=e,this},e.prototype.isBodyPresent=function(){return this._body},e.prototype.formParam=function(e,t){return this._formParams.push(this._encodeParam(e,t)),this},e.prototype.header=function(e,t){return this._headers[e]=t,this},e.prototype.queryParam=function(e,t){return this._queryParams.push(this._encodeParam(e,t)),this},e.prototype.cookie=function(e,t){return this._cookies.push(e+"="+t),this},e.prototype.mime=function(e){if(this._mime&&this._mime!==e)throw new Error("MIME already set to "+this._mime+", but was overwritten by "+e);return this._mime=e,this},e.prototype.json=function(e){return e?this.body(e).mime(s):this.mime(s)},e.prototype.build=function(){if(!this._url||0===this._url.length)throw new Error("URL cannot be empty");if(this._url=this._url.replace(/\/$/,""),this._queryParams.length>0&&(this._url+="?"+this._queryParams.join("&")),this._body&&this._formParams.length>0)throw new Error("User formParam() OR body() methods to specify request content, not both");if(this._formParams.length>0){if(this._mime&&this._mime!==a)throw new Error("Only application/x-www-form-urlencoded can be used for form requests, don't specify it mandatory in mime() method");this._mime=a,this._body=this._formParams.join("&")}if(this._mime===s&&this._body&&(this._body=JSON.stringify(this._body)),!this._method)throw new Error("HTTP method was not set");if(this._method=this._method.toLocaleLowerCase(),("get"===this._method||"delete"===this._method)&&this._body)throw new Error("Body is not supported for GET, DELETE requests");if(this._mime&&(this._headers["Content-Type"]=this._mime),this._cookies.length>0){this._headers.Cookie=this._cookies.join("; ")}return new l(this._url,this._method,this._headers,this._mime||null,this._body)},e.prototype._encodeParam=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)},e}();t.RequestBuilder=d,function(e){!function(e){e.identity=function(e){return Promise.resolve(e)},e.compose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){return t.reduce(function(e,t){return e.then(t)},e.identity(n))}}}(e.Extender||(e.Extender={}))}(d=t.RequestBuilder||(t.RequestBuilder={})),t.RequestBuilder=d},480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(279),o=n(1266);!function(e){function t(e){if(e){var t=e.match(/^Grammarly\s+Desktop\s+Editor\s(.*\s)?(\d+\.\d+\.\d+).*-(osx|windows)$/);if(t){var n=t[2];return{browser:"desktop-editor",version:n,parsedVersion:o.parseVersion(n),os:"osx"===t[3]?"mac":"windows",type:"desktop",supported:function(){return!1}}}}}function n(){var e=t(navigator.userAgent);if(void 0!==e)return e;var n=i();return r.__assign({},n,{parsedVersion:o.parseVersion(n.version)})}e.parse=n,e.base={browser:"chrome",version:"66",parsedVersion:o.parseVersion("66"),os:"windows",type:"desktop",supported:function(){return!0}},e.create=function(t){return r.__assign({},e.base,t)}}(t.EnvironmentInfo||(t.EnvironmentInfo={}))},481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(182),i=n(4),o=n(576),s=function(){function e(e,t){var n=this;this._gnarClient=e,this._appConfig=t,this._cookieStorage=new r.CookieStorage(this._appConfig.domains.cookie),this._log=i.Monitoring.Logging.root.getLogger("base.fingerprints"),this.csrfToken=function(){return n._cookieStorage.safeGetValue("csrf-token").then(function(e){return e||n._log.warn("Missing CSRF token: token is empty"),n._checkCsrfToken(e),e}).catch(function(e){throw n._log.warn("Missing CSRF token: error",e),e})},this.containerId=this._gnarClient.getContainerId(),this._checkCsrfToken=function(e){try{var t=(o.parse(document.cookie)||{})["csrf-token"];t||e?t?e?t!==e&&n._log.warn("Check CSRF token: tokens are not equal"):n._log.warn("Check CSRF token: token from CookieStorage is empty"):n._log.warn("Check CSRF token: independent token is empty"):n._log.warn("Check CSRF token: both are empty")}catch(e){n._log.warn("Check CSRF token: error",e)}}}return e.checkCsrfTokenExist=function(){try{(o.parse(document.cookie)||{})["csrf-token"]?i.Monitoring.Logging.root.getLogger("base.fingerprints").warn("CSRF token on start: token exists"):i.Monitoring.Logging.root.getLogger("base.fingerprints").warn("CSRF token on start: token is empty")}catch(e){i.Monitoring.Logging.root.getLogger("base.fingerprints").warn("CSRF token on start: error",e)}},e}();t.DenaliFingerprintsImpl=s},482:function(e,t,n){"use strict";function r(e){switch(e.platform){case s.Environment.Platform.WEB:case s.Environment.Platform.POPUP:return n(483).textResources(e);case s.Environment.Platform.DESKTOP:return n(1269).textResources(e);default:return o.assertNever(e.platform)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1268);t.TextResources=i.TextResources;var o=n(2),s=n(129);t.getTextResources=r},483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(2);t.textResources=function(e){var t=function(t){return("mac"===e.info.os||"ios"===e.info.os?"⌘+":"Ctrl+")+t};return{hotkeyLabel:t,base:{tooltipDownloadProofreadVersion:"Download proofread version",tooltipDownloadOriginalVersion:"Download original version",tooltipDownload:"Download",uploadText:"Upload",tooltipUploadElementInput:"Click here to upload document",menuDownloadText:"Download",documentPlaceholderText:"Upload a document to save original formatting.",modalUploadingDocumentText:"Uploading document",notificationUploadFileText:"Upload a file in one of the following formats",copyToClipboardIsNotAvailable:"Click and copy with "+t("C"),error500page:{title:"Sorry, we’re down for maintenance",description:"Grammarly is temporarily unavailable while we make upgrades\n      to improve the service for you. Please try again in a minute."}},denali:{notEnoughTextToGetScore:r.createElement("p",null,"Write away! Grammarly needs at least 30",r.createElement("br",null),"words to score your text."),noIssuesFound:"No issues found",rankTooltip:function(e){return r.createElement("p",null,"Your text scores higher than ",e,"% ",r.createElement("br",null),"of all texts checked by Grammarly ",r.createElement("br",null),"where comparable goals were set")},rank:"Rank",hideAssistant:"Hide Assistant",backToWriting:"Back to writing",tour:{welcomeNewUserTitle:"Ready to write something brilliant?",welcomeNewUserContent:"The Grammarly Editor helps you turn your\nideas into clear, compelling writing.",welcomeOldUserTitle:"Welcome to the new Grammarly Editor",welcomeOldUserContent:"All the features you love, plus a few new ones, wrapped up in a fresh new look.",startTour:"Start a quick tour",skipTour:"Skip the tour",fastApplyHeader:"Editing made easy",fastApplyDescription:"Get detailed feedback on your\nwriting and apply suggestions\nwith just one click.",assistantHeader:"Become a better writer",assistantDescription:"See your feedback organized into categories that help you identify where your writing is strong and where you can make it stronger.",checkTypesHeader:"Go beyond grammar",checkTypesDescription:"Make your writing clear, compelling, and concise with suggestions customized to your writing goals.",goalsHeader:"Set your goals",goalsDescription:"Adjust Grammarly’s feedback based on your objectives, your target audience, your writing style, and more.",finalTitle:"Enjoy\nthe Grammarly Editor",finalContent:"You’re ready to start writing! You can also copy and paste or upload some existing text to the Grammarly Editor.",startWriting:"Start writing",notReady:function(e){return r.createElement("span",null,"Not ready? You can return to Grammarly Classic anytime via the ",e," icon")}},documentStats:{notEnoughTextToCalculateStats:"Write away! Grammarly needs at least 30 words to calculate document statistics.",uniqueWords:"Measures vocabulary diversity by calculating\nthe number of unique words.",rareWords:"Measures depth of vocabulary by identifying words that are\nnot among the 5,000 most common English words.",readability:"In the Flesch reading-ease test, higher scores\nindicate material that is easier to read.",uniqueWordsTitle:"Unique words",rareWordsTitle:"Rare words",wordLengthTitle:"Word length",sentenceLengthTitle:"Sentence length",notEnoughTextToGenerateReport:"We need at least 30 words to calculate document statistics and generate your report.",intentTooltip:"Setting your intent helps train our\nartificial intelligence to provide\nmore targeted feedback.",emotionTooltip:"Setting your intended emotion helps\ntrain our artificial intelligence\nto provide more targeted feedback.",report:{plagiarismDescription:function(e,t){return e+"% of your text matches "+t+" sources on the web\nor in archives of academic publications"},downloadPdfReport:"Download PDF report",preparingPdfReport:"Preparing PDF report...",readingEase:"reading ease",readingEaseDescription:"Rates the text by the number of years of\neducation needed to understand it",readingEaseMeasure:"grade level",uniqueWordsDescription:"Measures vocabulary diversity by calculating\nthe percentage of words used only once in your\ndocument",wordLengthDescription:"Measures average word length",wordLengthMeasure:"characters per word",sentenceLengthDescription:"Measures average sentence length",sentenceLengthMeasure:"words per sentence"}},sidebar:{openLabel:"start assistant",fixErrorsLabel:"Correct with Assistant",checkingLabel:"checking …",criticalIssue:"Critical issue",criticalIssues:"Critical issues",critical:"Critical",advanced:"Advanced",advancedIssue:"Advanced issue",advancedIssues:"Advanced\nissues",premium:"Premium",free:"Alerts",premiumAlerts:"Premium\nalerts"},successLens:{emptyText:{title:"Nothing to check yet",firstLine:"Start writing or upload a document\nto see Grammarly’s feedback."},smallText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues.",secondLine:"Check back in when you’re ready to write some more."},largeText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues."},fixedText:{titles:["You made that look easy!","That’s quite an improvement!","Nothing can stop you now!","You must have been practicing!","Looking good!","Give yourself a pat on the back!","Great job!","Everything’s clear and polished.","To err is human; to edit, divine."]}},uploadMenuItem:"Upload document",uploadDropZone:"Drag a text file here to upload",uploadDropZoneTypes:"Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF are welcome",downloadMenuItem:"Download",uploadNotificationTitle:"The document was uploaded successfully",goals:{header:r.createElement("span",null,"The more Grammarly knows about the context",r.createElement("br",null)," of your writing, the more customized and",r.createElement("br",null)," helpful suggestions it will propose."),upgradeHookTitle:r.createElement("span",null,"Get the most accurate and relevant corrections",r.createElement("br",null),"for your specific writing situation")},plagiarism:{lensDescription:function(e,t,n,o){return r.createElement("span",null,r.createElement("em",null,e,"%")," of your text matches"," ",r.createElement("em",null,t," ",i.StringUtils.pluralize(t,"fragment","fragments"))," ","from"," ",r.createElement("em",null,n," ",i.StringUtils.pluralize(n,"source","sources"))," ","on the web or in academic databases. Cite them in ",r.createElement(o,{type:"MLA"}),","," ",r.createElement(o,{type:"APA"}),", or ",r.createElement(o,{type:"Chicago"})," format, or in another style you prefer.")},title:"Plagiarism",description:"Finds unoriginal text by checking against academic databases and over 16 billion web pages.",originalText:r.createElement("span",null,"Looks like your text is 100% original. ",r.createElement("br",null),"We found no matching text in our databases or on the Internet.")},documentPerformanceRankText:function(e){return r.createElement("span",null,"Great job! Your text is expected to ",r.createElement("br",null),"perform ",r.createElement("b",null,"better than ",e,"%")," of comparable ",r.createElement("br",null),"texts written by other Grammarly users.")},proofitTitle:"Human Proofreading",proofitDescription:"Our professional proofreaders are ready to check your document right now.",card:{less:"Less",more:"More",dismiss:"Dismiss",addToDict:"Add to dictionary",like:"I'll address this",dislike:"Not helpful",wrong:"Incorrect suggestion",offensive:"Offensive content"},placeholder:{typeOrPasteText:"Type or paste ("+t("V")+") your text here.",upload:"Upload a document to save original formatting."},toolbar:{loading:"Loading...",processing:"Processing your document..."}}}}},484:function(e,t,n){"use strict";function r(e,t){return i(i({},e),t)}function i(e,t){for(var n in t){var r=e[n]||{},o=t[n];null!=o&&null!=r&&o.constructor===Object&&r.constructor===Object?e[n]=i(r,o):e[n]=o}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.sec=1e3,t.min=60*t.sec,t.hr=60*t.min,t.merge=r},485:function(e,t,n){"use strict";function r(e,t){return e.filter(function(e){var t=e.range(e.id);return t.start!==t.end&&"number"==typeof t.start&&"number"==typeof t.end&&!(-1===t.start&&-1===t.end)}).reduce(function(e,n){var r=n.range(n.id),i=r.start<0?0:r.start;return e.compose((new S.Delta).retain(i).retain(r.end-i,t(n)))},new S.Delta)}function i(e){for(var n=e;n;){if(n instanceof k.Marker&&t.getMarkId(n.domNode))return n;n=n.parent}return null}function o(e){for(var t=e,n=[];t;)t instanceof k.Marker&&n.push(t),t=t.parent;return n}function s(e){var t=e.children;return t&&t.head||null}function a(e){var t=e.children;return t&&t.tail||null}function c(e,t,n){for(var r=e,i=[];r;){r instanceof k.Marker&&n(r)&&i.push(r);var o="leftLeaf"===t?s(r):a(r);if(!o)break;r=o}return i}function u(e,t){var n=o(e).reverse();return n.reduce(function(e,n){if(n.next){var r=c(n.next,"prefix"===t?"rightLeaf":"leftLeaf",function(t){return e.some(function(e){return e.markId===t.markId})}),i=r.map(function(e){return e.markId});return e.filter(function(e){return-1===i.indexOf(e.markId)})}return e},n)}function l(e){return o(e).map(function(e){return e.markId})}function d(e,t){var n=t.index,r=t.length,i=e.slice(0,n).search(/[\w-]+$/),o=e.slice(n).search(/[^-_a-z0-9]/i),s=o+n;if(0===r&&(-1===i||0===o))return b.None;if(-1===o){var a=e.slice(i);return b.Some(new E.WordRange(i,i+a.length,a))}return e.slice(s,n+r).match(/[-_a-z0-9]/i)?b.None:b.Some(-1===i?new E.WordRange(n,s,e.slice(n,s)):new E.WordRange(i,s,e.slice(i,s)))}function p(e){if(e.insert)return e.insert.length;if(e.retain)return e.retain;if(e.delete)return-e.delete;throw new T.InvariantError("Unknown operation: "+e)}function h(e){var t=e.attributes;return!!t&&Object.keys(t).some(function(e){return-1!==e.indexOf(k.MarkerBlotName)&&-1===e.indexOf(x)})}function f(e,t){return void 0===t&&(t="suffix"),!(!e.insert||"string"!=typeof e.insert)&&("suffix"===t?T.StringUtils.isBreakWordChar(e.insert.charCodeAt(0)):T.StringUtils.isBreakWordChar(e.insert.charCodeAt(e.insert.length-1)))}function g(e){return w.Observable.fromEvent(e,"editor-change",function(e,t,n,r){return"text-change"===e?{name:"text-change",delta:t,oldDelta:n,source:r}:{name:"selection-change",range:t,oldRange:n,source:r}})}function m(e){return"selection-change"===e.name}function _(e){return"text-change"===e.name&&e.delta.ops.some(function(e){return!e.retain})}function y(){if(window.MutationObserver||n(949),!document.getSelection){document.getSelection=function(){return null}}}function v(e){for(var t=e.text.get(),n=new S.Delta,r=0,i=0;i<t.length-1;i++)if("\r"===t[i]){var o=i-r;r=i,"\n"!==t[i+1]?(n.retain(o).delete(1).insert("\n"),r++):(n.retain(o).delete(1),r++)}var s=t.length-1,a=s-r;return"\r"===t[s]?n.retain(a).delete(1).insert("\n"):"\n"!==t[s]&&n.retain(a+1).insert("\n"),C.Change.delta(n,t.length)}Object.defineProperty(t,"__esModule",{value:!0});var b=n(7),w=n(16),E=n(175),S=n(64),C=n(18),k=n(255),T=n(2);t.marksToDelta=r,t.getMarkId=function(e){return e.getAttribute("data-mark-id")},t.findMarkerUp=i,t.lookupMarkersUp=o,t.lookupMarkersDown=c,t.findCornerBlotsUp=u,t.getMarksIdsByBlot=l,t.getWordAt=d,t.changeDiff=p;var x="64656E616E69";t.isMarkChangeOperation=h,t.isBreakWordInsert=f,t.toQuillObservable=g,t.filterSelectionChange=m,t.filterTextChange=_,t.setupQuillEnv=y,t.normalizeCRLF=v},486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.free=0]="free",e[e.premium=1]="premium"}(t.UserType||(t.UserType={}))},487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONLINE="online"},488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(16),o=n(6),s=n(4),a=n(32),c=n(2),u=n(18),l=n(18);t.ACCEPTED_UPLOAD_EXTENSIONS=["doc","docx","odt","rtf","htm","html","txt"].map(function(e){return"."+e}),t.ACCEPTED_UPLOAD_MIME_TYPES=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.oasis.opendocument.text","text/rtf","text/html","text/plain"],t.defaultState={searchText:"",wsConnection:c.Async.defaultValue(),proofitResults:{},deletedDocumentIds:[],first100:c.Async.defaultValue(),remoteSearch:c.Async.defaultValue()};var d=100,p=function(){function e(e,t){this._doxApi=e,this._state=t,this._log=s.Monitoring.Logging.getLogger("model.documents.proofit"),this._operation=null,this.results=this._state.lens("proofitResults"),this.cancelled=new i.Subject,this.wsConnection=this._state.lens("wsConnection")}return e.prototype.init=function(){var e=this;c.invariant(null===this._operation,"Expect operation to be not established"),this._operation=c.Async.OperationRetrier.create(function(){return e._connect()},this.wsConnection)},e.prototype.reset=function(){var e=this.wsConnection.get();c.Async.isOk(e)?this._terminate(e.value):this._operation&&this._operation.unsubscribe(),this._operation=null,this.wsConnection.set(t.defaultState.wsConnection)},e.prototype._connect=function(){var e=this;return this._doxApi.openDocumentsWS({metadataChangeHandler:function(t,n){n.proofit.forEach(function(n){e.results.modify(function(e){return Object.assign({},e,(r={},r[t]=n,r));var r}),n.status===u.Proofit.JobStatus.cancelled&&e.cancelled.next({id:t})})}}).then(function(e){return{unsubscribe:e.close.bind(e)}})},e.prototype._terminate=function(e){return r.__awaiter(this,void 0,void 0,function(){var n;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.results.set(t.defaultState.proofitResults),this.cancelled.next({id:null}),[4,e.unsubscribe()];case 1:return r.sent(),[3,3];case 2:throw n=r.sent(),this._log.error("Failed to close dox session",n),n;case 3:return[2]}})})},e}();t.DocumentListProofitModelImpl=p;var h=function(){function e(e,t,n,r,i){var a=this;this._state=e,this._doxApi=t,this._settings=n,this._connectivity=r,this._handleHttpDoxError=i,this._log=s.Monitoring.Logging.getLogger("model.documents.list"),this._isLocalSearch=o.Atom.create(!1),this._first100=this._state.lens("first100"),this._remoteSearch=this._state.lens("remoteSearch"),this._deletedDocumentIds=this._state.lens("deletedDocumentIds"),this.searchText=this._state.lens("searchText"),this._trimmedSearchText=this.searchText.view(function(e){return e.trim()}),this.isFirstTimeLoaded=this._first100.view(c.Async.isOk),this.isSearching=this._remoteSearch.view(function(e){return c.Async.isInProgress(e)||c.Async.isError(e)}),this.searchResults=o.Atom.combine(this._first100,this._remoteSearch,this._deletedDocumentIds,this._trimmedSearchText,function(e,t,n,r){return c.Async.flatMap(e,function(e){return c.Async.isTerminated(t)?c.Async.flatMap(t,function(t){return c.Async.ok(a._localSearch(e,t||[],n,r))}):c.Async.ok(a._localSearch(e,[],n,r))})}),this._retryWhen=function(e){return!(e instanceof u.HTTPError)||c.isServerErrorCode(e.code)},this._documentSubs=[],this._settings.firstCall.get()||this._first100.filter(c.Async.isOk).first().subscribe(function(){return a._settings.firstCallDone()}),this._first100.filter(function(e){return c.Async.isOk(e)}).subscribe(function(e){return a._isLocalSearch.set(e.value.length<d)}),this.searchResults.filter(function(e){return c.Async.isError(e)||c.Async.isFatal(e)}).switchMap(c.RxUtils.Scheduler.rafScheduler).subscribe(function(e){c.Async.isFatal(e)?(e.error instanceof u.HTTPError?a._handleHttpDoxError(e.error,"DOX: Cannot load document list"):a._connectivity.setState({type:"dox",state:{type:c.isServerErrorCode(e.error.code)?"serverError":"unknownConnectionError"}}),a._log.error("DOX: Cannot load document list",e.error)):c.Async.isError(e)&&a._log.warn("DOX: Attempt to load document list failed",e.error,{attempt:e.attempt})})}return e.prototype.load=function(){this._reset(),this._loadDocuments()},e.prototype.reset=function(){this._documentSubs.forEach(function(e){return e.unsubscribe()}),this._documentSubs=[],this._reset()},e.prototype._reset=function(){this.searchText.set(t.defaultState.searchText),this._isLocalSearch.set(!1),this._remoteSearch.set(c.Async.defaultValue()),this._first100.set(c.Async.defaultValue())},e.prototype._loadDocuments=function(){var e=this,t=o.Atom.create(!1);this._documentSubs=[c.Async.OperationRetrier.create(function(){return e._doxApi.listDocuments(d,l.DoxClient.OrderBy.Updated,!e._settings.firstCall.get())},this._first100,c.Async.OperationRetrier.RetryStrategy.conditional(this._retryWhen,c.Async.OperationRetrier.RetryStrategy.linear(3,3e3))),this._trimmedSearchText.withLatestFrom(this._first100,t).filter(function(e){return!e[0]}).throttleTime(1e3).filter(function(e){var t=(e[0],e[1]),n=e[2];return c.Async.isTerminated(t)&&!n}).subscribe(function(){t.set(!0),e._doxApi.listDocuments(d,l.DoxClient.OrderBy.Updated,!1).then(function(t){return e._first100.set(c.Async.ok(t))}).catch(function(t){t instanceof u.HTTPError&&e._handleHttpDoxError(t,"Failed to refresh document list"),e._log.info("Failed to refresh document list",t)}).then(function(){t.set(!1)})}),this._isLocalSearch.switchMap(function(t){return t?i.Observable.empty():i.Observable.merge(e._trimmedSearchText.map(function(e){return c.Either.left(e)}),e._trimmedSearchText.debounceTime(500).map(function(e){return c.Either.right(e)})).switchMap(function(t){return e._remoteSearch.set(c.Async.defaultValue()),c.Either.isLeft(t)||!t.value?i.Observable.empty():i.Observable.using(function(){return c.Async.OperationRetrier.create(function(){return e._doxApi.searchDocument(l.DoxRequest.Search.contains(t.value),d)},e._remoteSearch,c.Async.OperationRetrier.RetryStrategy.conditional(e._retryWhen,c.Async.OperationRetrier.RetryStrategy.linear(3,3e3)))},function(){return e._remoteSearch.filter(c.Async.isTerminated).first()})})}).subscribe()]},e.prototype._localSearch=function(e,t,n,r){var i=new RegExp(r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i");return t.concat(e.filter(function(e){return!r||i.test(e.firstContent)||i.test(e.title)}).filter(function(e){return-1===t.findIndex(function(t){return t.id===e.id})})).filter(function(e){return n.indexOf(e.id)<0})},e}();t.DocumentListModelImpl=h;var f=function(){function e(e,t,n,r,i,a,c){this._state=e,this._doxApi=t,this._alertCache=n,this._navigateToDocument=r,this._notifications=i,this._handleHttpDoxError=a,this._environment=c,this._log=s.Monitoring.Logging.getLogger("model.documents.actions"),this._deletedDocumentIds=this._state.lens("deletedDocumentIds"),this.documentUploadProgress=o.Atom.create(null)}return e.prototype.createDocument=function(e,t){return this._doxApi.createDocument(l.DoxRequest.Create.text(e,t))},e.prototype.createDocumentAndNavigate=function(e){var t=this;return this.createDocument().then(function(n){e.get()?t.navigateToDocument(n.id):t._notifications.show(t._notifications.create.newDocumentCreated(function(){return t.navigateToDocument(n.id)}))}).catch(function(e){return t.handleCreateDocumentError(e)})},e.prototype.deleteDocument=function(e){var t=this;return this._deletedDocumentIds.modify(function(t){return t.concat([e])}),this._doxApi.deleteDocumentById(e).catch(function(n){throw t._deletedDocumentIds.modify(function(t){return t.filter(function(t){return t!==e})}),n}).then(function(n){try{t._alertCache.remove(e.toString())}catch(e){t._log.debug("could not remove alert cache for deleted doc",e)}})},e.prototype.restoreDocument=function(e){var t=this;return this._deletedDocumentIds.modify(function(t){return t.filter(function(t){return t!==e})}),this._doxApi.restoreDocumentById(e).catch(function(n){throw t._deletedDocumentIds.modify(function(t){return t.concat([e])}),n instanceof u.HTTPError&&t._handleHttpDoxError(n,"Failed to restore document"),n})},e.prototype.downloadOriginal=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:if(this._log.info("downloadOriginal.initiated"),!this._environment.has(a.Environment.Flag.canDownloadBlobs))return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._doxApi.downloadOriginal(e).then(u.RawFile.saveToFS)];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),this.handleDownloadDocumentError(t),[3,4];case 4:return[3,6];case 5:this._notifications.show(this._notifications.create.blobDownloadUnsupported()),n.label=6;case 6:return[2]}})})},e.prototype.downloadProofread=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,i=this;return r.__generator(this,function(r){switch(r.label){case 0:if(this._log.info("downloadProofread.initiated"),!this._environment.has(a.Environment.Flag.canDownloadBlobs))return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._doxApi.downloadProofread(e).then(u.RawFile.saveToFS).then(function(){t&&i._notifications.show(t)})];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),this.handleDownloadDocumentError(n),[3,4];case 4:return[3,6];case 5:this._notifications.show(this._notifications.create.blobDownloadUnsupported()),r.label=6;case 6:return[2]}})})},e.prototype.uploadDocument=function(e){return r.__awaiter(this,void 0,void 0,function(){var t=this;return r.__generator(this,function(n){switch(n.label){case 0:return[4,this._doxApi.createDocument(l.DoxRequest.Create.file(e)).then(function(e){return t._state.lens("first100").modify(function(t){return c.Async.isOk(t)?c.Async.ok(new Array(e).concat(t.value)):t}),e})];case 1:return[2,n.sent()]}})})},e.prototype.navigateToDocument=function(e){this._navigateToDocument(""+e)},e.prototype.handleDownloadDocumentError=function(e){this._log.error("downloadDocument failed",e);var t={unauthorized:e instanceof l.DoxErrors.UnauthorizedError,notFound:e instanceof l.DoxErrors.DocumentNotFoundError,temporary:e instanceof l.DoxErrors.TooManyRequestsError||e instanceof l.DoxErrors.ConnectionError};t.unauthorized?this._notifications.show(this._notifications.create.unauthorizedError()):t.notFound?this._notifications.show(this._notifications.create.downloadDocumentNotFoundError()):t.temporary?this._notifications.show(this._notifications.create.isTemporaryDownloadError()):this._notifications.show(this._notifications.create.error())},e.prototype.handleCreateDocumentError=function(e){e instanceof u.HTTPError?(this._handleHttpDoxError(e,"Failed to create new document"),this._log.warn("Failed to create new document",e)):c.isClientFetchError(e)?(this._log.warn("Failed to create new document",e),this._notifications.showError("Failed to create new document: "+(e&&e.message))):(this._log.error("Failed to create new document",e),this._notifications.showError("Failed to create new document: "+(e&&e.message)))},e.prototype.handleDeleteDocumentError=function(e){e instanceof u.HTTPError&&(this._handleHttpDoxError(e,"Failed to remove document"),this._log.error("Failed to remove document",e))},e}();t.DocumentListActionsImpl=f;var g=function(){function e(e,t,n,r,i,o,s,a){this._state=e,this._doxApi=t,this._settings=n,this._alertCache=r,this._connectivity=i,this._notifications=o,this._navigateToDocument=s,this._environment=a,this.proofit=new p(this._doxApi,this._state),this.list=new h(this._state,this._doxApi,this._settings,this._connectivity,this._doxHttpErrorHandler),this.actions=new f(this._state,this._doxApi,this._alertCache,this._navigateToDocument,this._notifications,this._doxHttpErrorHandler,this._environment)}return e.prototype._doxHttpErrorHandler=function(e){switch(e.code){case l.DoxErrors.HttpCodes.UNAUTHORIZED:this._connectivity.setState({type:"dox",state:{type:"unauthorized"}});break;case l.DoxErrors.HttpCodes.TOO_MANY_REQUESTS:this._notifications.show(this._notifications.create.error());break;default:this._notifications.showError(e.message)}},e}();t.DocumentsPageModelImpl=g},489:function(e,t,n){"use strict";function r(e,t){if(e<=0)return null;var n=t.filter(function(e){return e.group===s.AlertGroup.plagiarism}).reduce(function(e,t){return e+t.range.end-t.range.start},0);return Math.round(Math.min(100,n/e*100))}function i(e,t){var n=e>0?t.reduce(function(e,t){return e+(a[t.group]||0)},0)/e:null;return null!==n?Math.floor(100*(1-Math.min(1,11*n))):null}function o(e,t,n,o){var s=n.filter(function(e){return"synonym"!==e.kind}),a=n.filter(function(e){return"plagiarism"===e.kind}).length,c=s.filter(function(e){return e.isFree}).length;return{criticalAlerts:c,premiumAlerts:o-a,visiblePremiumAlerts:s.length-c-a,plagiarismPercentage:r(e,s),score:i(t,s)}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(88),a=(c={},c[s.AlertGroup.contextualSpelling]=1.2,c[s.AlertGroup.grammar]=1,c[s.AlertGroup.sentenceStructure]=.9,c[s.AlertGroup.punctuation]=.7,c[s.AlertGroup.style]=.3,c[s.AlertGroup.enhancement]=0,c[s.AlertGroup.plagiarism]=0,c[s.AlertGroup.synonym]=0,c);t.calculateScores=o;var c},490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(16),o=n(491),s=n(2),a=n(4),c=n(18),u=n(18),l=n(18),d=n(520);!function(e){e[e.documentNotFound=0]="documentNotFound",e[e.unauthorized=1]="unauthorized",e[e.changed=2]="changed",e[e.disconnected=3]="disconnected",e[e.cannotReconnect=4]="cannotReconnect"}(t.DocEventType||(t.DocEventType={})),t.defaultState={session:null};var p=function(){function e(e,t,n,r,o){this._docId=e,this._state=t,this._doxApi=n,this._doxConnectivity=r,this._preventSyncWithDox=o,this._sessionState=this._state.lens("session"),this._session=null,this._incomingChangeSubject=new i.Subject,this._changeAcceptedSubject=new i.Subject,this._changeDroppedSubject=new i.Subject}return e.prototype.startSession=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,i,s;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._connectToDox()];case 1:return e=r.sent(),t=e.initialDelta,n=e.meta,i=t.text.get(),s=i.endsWith("\n")?i.slice(0,-1):i,this._sessionState.set(o.createInitialState(this._docId,n.title,s,{source:"init",proofit:n.proofit.orNull(),showBanner:!1})),this._session=new o.DocumentSessionImpl(this._sessionState,e,this._incomingChangeSubject,this._changeAcceptedSubject,this._changeDroppedSubject,function(){}),[2,{documentSession:this._session,initialGenre:n.settings.genre.orNull(),initialChecks:n.settings.checks.orNull()}]}})})},e.prototype._connectToDox=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,i=this;return r.__generator(this,function(o){switch(o.label){case 0:return e=c.DoxRemoteDocument.Queue.create({acceptedMsgHandler:function(e){return i._changeAcceptedSubject.next(e)},droppedMsgsHandler:function(e){return i._changeDroppedSubject.next(e)}}),t=l.Reconnect.getDefaultReconnect(a.Monitoring.Logging.getLogger("editor.document_model"),l.Reconnect.ClientType.dox),[4,this._doxApi.openDocumentById(this._docId,{changeHandler:function(e,t){if(!i._session)throw new s.InvariantError("Expect remote session to be established");i._preventSyncWithDox||i._incomingChangeSubject.next(t)},metadataChangeHandler:function(e,t){if(!i._session)throw new s.InvariantError("Expect remote session to be established");i._session.proofitState.modify(function(e){return t.proofit.fold(function(){return{source:"websocket",proofit:e.proofit,showBanner:!1}},function(t){var n=u.Proofit.isProofitEqual(e.proofit,t);return{source:"websocket",proofit:n?e.proofit:t,showBanner:!n&&d.isProofitCompleted(t.status)}})})},disconnectHandler:function(n,o,s){return r.__awaiter(i,void 0,void 0,function(){var i,a,c;return r.__generator(this,function(r){switch(r.label){case 0:if(n.code!==l.Reconnect.WsCodes.NOT_FOUND&&n.code!==l.Reconnect.WsCodes.UNAUTHORIZED||this._doxConnectivity.set({type:"error",reason:n.reason,error:new u.WSError({code:n.code,message:n.reason,status:n.reason})}),i=e.isEmpty,"idle"===(a=l.Reconnect.getReconnectAction(n,{canGoIdle:i,isInitialized:!0})))return[2,Promise.resolve()];n.reconnect.reconnectCounter>=2&&n.code!==l.Reconnect.WsCodes.GOING_AWAY&&n.code!==l.Reconnect.WsCodes.PRECONDITION_FAILED&&this._doxConnectivity.set({type:"error",reason:"Disconnected: "+n.code,error:n.error}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t(n,o,s,a)];case 2:return r.sent(),this._doxConnectivity.set({type:"success"}),[3,4];case 3:if(c=r.sent(),"error"===a)throw c;return[3,4];case 4:return[2]}})})}},c.DoxRemoteDocument.Queue.create({acceptedMsgHandler:function(e){return i._changeAcceptedSubject.next(e)},droppedMsgsHandler:function(e){return i._changeDroppedSubject.next(e)}}),5e3)];case 1:return n=o.sent(),this._doxConnectivity.set({type:"success"}),[2,n]}})})},e}();t.DocumentModelImpl=p},491:function(e,t,n){"use strict";function r(e,t,n,r){return{id:e,title:t,localText:n,proofitState:r}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),o=n(6),s=n(4),a=n(2),c=n(18);t.createInitialState=r;var u=function(){function e(e,t,n,r,a,u){var l=this;this._state=e,this._doxInit=t,this._incomingChange=n,this._acceptedMessage=r,this._droppedMessages=a,this._onClose=u,this._log=s.Monitoring.Logging.getLogger("model.DocumentSessionImpl"),this._counter=s.Monitoring.TimeSeries.root.getCounter("dox_editor_ts"),this._sessionActive=!0,this.localTitle=this._state.lens("title"),this.localText=this._state.lens("localText"),this.proofitState=this._state.lens("proofitState"),this.proofitCompleted=this.proofitState.skip(1).map(function(e){var t=e.proofit,n=e.showBanner;return t&&n?t:null}).distinctUntilChanged(),this.id=this._state.view("id"),this.isNew=this._state.view(function(e){return!(!e.title&&!e.localText)}).scan(function(e,t){return e||t},!1),this.localChangesSaved=o.Atom.create(!0),this.textChangedByServer=new i.Subject,this._remoteText=t.initialDelta.text.get(),this._settingsHolder=t.meta.settings,this._subs=[this._incomingChange.subscribe(function(e){if(l._log.trace("incoming change",e),c.Change.isFlush(e));else{c.Change.isDelta(e)&&c.assert(l._remoteText.length,e.prevLen,"delta should have prevlen equal to current text len");var t=c.Change.isReset(e)?e.text.get():c.Change.ins(0,l._remoteText).compose(e).text.getOrElse(l._remoteText),n=t.endsWith("\n")?t.slice(0,-1):t;l._remoteText=t,l.localText.set(n),l.textChangedByServer.next(n),l.localChangesSaved.set(l._doxInit.remoteDocument.inSync)}},function(e){l._log.error("incoming change fail",e)}),this._acceptedMessage.subscribe(function(e){l._log.trace("accepted message",e),c.DOX.ChangesQueue.isCmd(e)||l._incCounter(e.kind,"accepted"),l.localChangesSaved.set(l._doxInit.remoteDocument.inSync)},function(e){l._log.error("accepted message fail",e)}),this._droppedMessages.subscribe(function(e){var t=l._groupMessages(e.messages);void 0!==t.change&&l._incCounter("change","dropped",t.change),void 0!==t.meta&&l._incCounter("meta","dropped",t.meta),t.change&&l._log.warn("got dropped messages",{counts:t,reason:e.reason}),l.localChangesSaved.set(l._doxInit.remoteDocument.inSync)},function(e){l._log.error("accepted message fail",e)})]}return e.prototype._expectActiveSession=function(){a.invariant(this._sessionActive,"Expect remote session to be established")},e.prototype.setDocumentContent=function(e){this._expectActiveSession();var t=e+"\n",n=c.Diff.diffAsChanges(this._remoteText,t);this._log.trace("push delta",n),this._remoteText=t,n.isEmpty?this._log.trace("drop empty delta",n):(this.localChangesSaved.set(!1),this._doxInit.remoteDocument.pushChanges(n)),this.localText.set(e)},e.prototype.setDocumentTitle=function(e){this._expectActiveSession(),this.localTitle.set(e),this.localChangesSaved.set(!1),this._doxInit.remoteDocument.updateMetadata({title:e})},e.prototype.setDocumentGenre=function(e){this._expectActiveSession();var t=this._settingsHolder.changeGenre(e);this._updateSettings(t)},e.prototype.setDocumentAlertCount=function(e){this._expectActiveSession(),this._doxInit.remoteDocument.updateMetadata({errors:e})},e.prototype.setDocumentChecks=function(e){this._expectActiveSession();var t=this._settingsHolder.changeChecks(e);this._updateSettings(t)},e.prototype.end=function(){var e=this;return new Promise(function(t){e._onClose(),e._doxInit.remoteDocument.pushChanges(c.Change.flush()),e._subs.forEach(function(e){return e.unsubscribe()}),e._subs=[],e._expectActiveSession(),e._sessionActive=!1,e._doxInit.remoteDocument.close().then(function(){return t()})})},Object.defineProperty(e.prototype,"context",{get:function(){return this._doxInit.meta.settings.context.getOrElse(c.DocumentContext.empty)},enumerable:!0,configurable:!0}),e.prototype.setDocumentContext=function(e){this._expectActiveSession();var t=this._settingsHolder.changeContext(e);this._updateSettings(t)},e.prototype._updateSettings=function(e){this._incCounter("meta","sent"),this.localChangesSaved.set(!1),this._settingsHolder=e,this._doxInit.remoteDocument.updateMetadata({settings:e})},e.prototype._incCounter=function(e,t,n){void 0===n&&(n=1),this._counter.getCounter("message."+e+"."+t).increment(n)},e.prototype._groupMessages=function(e){return e.reduce(function(e,t){return void 0===e[t.kind]&&(e[t.kind]=0),e[t.kind]++,e},{})},e}();t.DocumentSessionImpl=u},492:function(e,t,n){"use strict";function r(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=!1);var r=p.Cookie.getCookie(h),i=c.setPlagiarism(t||c.defaultState,"true"===r),o=e||(n?"academic_general":"general");return{textStats:u.defaultState,checkingSettings:i,checkingGenre:o,editor:l.defaultState,cards:d.defaultState}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(18),s=n(6),a=n(4),c=n(181),u=n(258),l=n(493),d=n(257),p=n(2),h="isPlagiarismFunnel";t.defaultState=r(),t.createDefaultState=r;var f=function(){function e(e,t,n,r,i,o,a,c,u,l){this._state=e,this.documentSession=t,this.textStats=n,this._capiWsUrl=r,this._dialectSettingsModel=i,this._features=o,this._telemetry=a,this._alertCache=c,this._capiConnectivity=u,this._environment=l,this.editorEngine=s.Atom.create(null),this.cardsModel=null,this.contextState=s.Atom.create(this.documentSession.context),this._documentSyncSubs=null}return e.prototype.startEditor=function(e,t,n){var r=this;p.invariant(null===this.editorEngine.get()&&null===this._documentSyncSubs,"editor should not be started");var i=new c.CheckingSettingsModelImpl(this._state.lens("checkingGenre"),this._state.lens("checkingSettings"),this._telemetry),s=this._dialectSettingsModel.dialectOrDefault.get(),a=new l.GrammarlyEditorEngine(this._state.lens("editor"),e,"textarea",t,this.documentSession.id.get(),this.documentSession.localText.get(),this._capiWsUrl,i,this._dialectSettingsModel,function(){return r._alertCache.load(r.documentSession.id.get().toString(),s,r._features.isFree)},function(e){return r._alertCache.save(r.documentSession.id.get().toString(),s,r._features.isFree,e)},this._telemetry,this._capiConnectivity,this._environment,n,this._features.demoMode);return this.cardsModel=new d.CardsModelImpl(this._state.lens("cards"),a,this._features),a.mount(),this._documentSyncSubs=[this.documentSession.textChangedByServer.subscribe(function(e){a.setDocumentContent(e)}),a.textChangedByUser.subscribe(function(e){r.documentSession.setDocumentContent(e)}),a.scores.view(function(e){return[e.visiblePremiumAlerts,e.criticalAlerts]}).skip(1).subscribe(function(e){var t=e[0],n=e[1];r.documentSession.setDocumentAlertCount(n+(r._features.isFree?0:t))}),i.checksEnabled.skip(1).subscribe(function(e){return r.documentSession.setDocumentChecks(e)}),i.genre.skip(1).subscribe(function(e){return r.documentSession.setDocumentGenre(e)})],n&&this._documentSyncSubs.push(this.contextState.skip(1).subscribe(function(e){r.documentSession.setDocumentContext(e),i.genre.set(o.domainToGenre(e.domain))})),this.editorEngine.set(a),a},e.prototype.stopEditor=function(){var e=this.editorEngine.get();if(!e||!this._documentSyncSubs)throw new p.InvariantError("editor should be started");this._documentSyncSubs.forEach(function(e){return e.unsubscribe()}),this._documentSyncSubs=null,this.editorEngine.set(null),e.unmount()},Object.defineProperty(e.prototype,"isActive",{get:function(){return null!==this.editorEngine.get()},enumerable:!0,configurable:!0}),e.prototype.end=function(){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.isActive&&this.stopEditor(),[4,this.documentSession.end()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),a.Monitoring.Logging.getLogger("model.editor.editor_sesion").error("DOX editor session end failed",e),[3,3];case 3:return[2]}})})},e}();t.EditorSessionImpl=f},493:function(e,t,n){"use strict";function r(e){function t(e){var t=typeof e;return null!=e&&("object"===t||"function"===t)}function n(e){var n={};for(var r in e)"ts"!==r&&"renderTs"!==r&&"tracked"!==r&&("r"!==r&&"origReplacements"!==r&&"rHtml"!==r&&"examples"!==r&&"references"!==r&&"rawMatch"!==r&&(t(e[r])||"selected"===r&&!Array.isArray(e[r]))||(n[r]=e[r]));return n}return e.filter(function(e){return!e.replaced}).map(n)}function i(e,t,n,r,i,o,s,a,c,l,d,p,h,g){u.Capi.CLIENT_NAME=h.names.capi.classic.type;var _=u({silentLogs:!0,el:e,docid:parseInt(r,10),value:i,sid:0,capiUrl:o,matches:d,apps:{plagiarismActive:s},editorType:"textarea"===t?{textarea:!0,value:"textarea"}:{contenteditable:!0,value:"contenteditable"},asPlainText:!0,textareaWrapSelector:"#"+n,plagiarismCheckDelay:1e4,dialect:a.orNull(),filter:function(e){return e?e.filter(function(e){return(g||!e.rawMatch.hidden)&&("synonyms"===e.rawMatch.action||c(m.alertGroupFromString(e.rawMatch.group)))}):[]},canRemoveSynonym:function(e){return!!f.DOM.hasParentWithClassName(e,"closeSyn")||!f.DOM.hasParentWithClassName(e,"cardSyn")},extendParams:function(e){e.genre=l()},exposeRawMatch:!0,exposeSynApi:!0,getContainerId:p.getContainerId,capiIdleTimeout:24e4,textareaBottomPadding:36,removeByPIDOnIgnore:!g,synAutofix:!0,skipMousedownWhen:function(e){return f.DOM.hasParentWithClassName(e.target,y.CardBaseClassName)}}),v=_.getMatchClass;return _.getMatchClass=function(e,t){var n=v(e,t);return e.rawMatch?((e.rawMatch.renderedOnce||"safari"===h.info.browser)&&(n+=" gr_disable_anim_appear"),"synonyms"===e.rawMatch.action&&(n+=" gr_syn_replaced"),e.rawMatch.renderedOnce=!0,n):n},_}function o(e){return e.rawMatch.group||"synonyms"===e.rawMatch.action}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),a=n(16),c=n(7),u=n(543),l=n(18),d=n(6),p=n(4),h=n(107),f=n(2),g=n(181),m=n(88),_=n(522),y=n(276),v=n(489),b=n(1296),w=n(494);t.defaultState={pendingAlertAction:null,alertHighlights:{focused:{id:null,source:null},highlighted:null},alerts:{},premiumMatches:[],checkingStatus:y.CheckingStatus.idle};var E=function(){function e(e,t,n,r,i,o,u,l,h,_,y,E,S,C,k,T){var x=this;this._state=e,this._domElement=t,this._textAreaType=n,this._textAreaWrapperElementId=r,this._docId=i,this._initialText=o,this._capiWsUrl=u,this._checkingSettings=l,this._dialectSetting=h,this._getCachedMatches=_,this._cacheSerializableMatches=y,this._telemetry=E,this._capiConnectivity=S,this._environment=C,this._isDenali=k,this._demoMode=T,this.synonymsViewModel=new b.SynonymsViewModelImpl(new w.SynonymsModelImpl(function(e,t){return s.__awaiter(x,void 0,void 0,function(){var n,r,i;return s.__generator(this,function(o){switch(o.label){case 0:if(!this._editor)throw new f.InvariantError("editor should be mounted");return this._editor.synonyms.requestSynonyms(e,t),[4,this._synonymAlerts.first().toPromise()];case 1:if(n=o.sent(),n.title===t){if(0!==n.meanings.length)return r=function(e){return{word:e.newText,definition:""}},i=1===n.meanings.length?c.Either.left(n.meanings[0].replacements.map(r)):c.Either.right(n.meanings.map(function(e){return{meaning:e.title,words:e.replacements.map(r)}})),[2,{originalWord:t,synonymsOrGroups:i,alert:n}];throw new Error("Wrong synonym alert for "+t+": expecting meanings to exists")}throw new Error("Wrong synonym alert: expecting "+t+", got "+n.title)}})})}),function(){if(!x._editor)throw new f.InvariantError("editor should be mounted");return x._editor.synonyms},function(e,t,n){var r=e.match;r.replaced=!0,r.replace(n,!1)}),this.pendingAlertAction=this._state.lens("pendingAlertAction"),this._undoedAction=d.Atom.create(null),this.undoedAlert=this._undoedAction.skip(1).switchMap(function(e){return e?x._visibleAlerts.view(function(t){return t[e.id]}).filter(function(e){return!!e}).take(1):a.Observable.of(null)}),this._log=p.Monitoring.Logging.getLogger("model.editor.ge_engine"),this._tsCheckingStatus=p.Monitoring.TimeSeries.root.getCounter("model.editor.ge_engine.checking_status_inprogress"),this.appliedAlertIds=new Set,this._highlights=this._state.lens("alertHighlights"),this._focusedAlert=this._highlights.lens("focused"),this._highlightedAlert=this._highlights.lens("highlighted"),this._visibleAlerts=this._state.lens("alerts"),this._synonymAlerts=new a.Subject,this._premiumMatches=this._state.lens("premiumMatches"),this._checkingStatus=this._state.lens("checkingStatus"),this._textChangedByUser=new a.Subject,this._editor=null,this._editorEventSubs=null,this._editorRendered=this._unsafeEditorEvent("rendered"),this._editorAlertRemovedOnServer=this._unsafeEditorEvent("serverRemove"),this._editorAlertSelected=this._unsafeEditorEvent("selectedMatch"),this._editorAlertDeselected=this._unsafeEditorEvent("deselectedMatch"),this._editorSending=this._unsafeEditorEvent("sending"),this._capiSocketConnect=this._unsafeEditorEvent("socketConnect"),this._capiSocketStart=this._unsafeEditorEvent("socketStart"),this._capiSocketError=this._unsafeEditorEvent("socketError"),this._capiSocketDisconnect=this._unsafeEditorEvent("disconnect"),this._editorFinishedChecking=this._unsafeEditorEvent("finish"),this._pastedTextSize=new a.Subject,this.recheckingState=d.Atom.create(this._initialText.length>0),this._editorPlagiarismChecked=this._unsafeEditorEvent("plagiarismChecked"),this._editorFix=this._unsafeEditorEvent("fix"),this.alerts=this._visibleAlerts,this.checkingStatus=this._checkingStatus,this.appliedAlertsCount=d.Atom.create(0),this.settings=this._checkingSettings,this.localText=d.Atom.create(this._initialText),this.approximateWordCount=d.Atom.create(f.StringUtils.wordCount(this._initialText)),this.approximateCharCount=d.Atom.create(f.StringUtils.charCount(this._initialText)),this.scores=d.Atom.combine(this.localText.view(function(e){return null!=e?e:""}),this.approximateWordCount,this._visibleAlerts,this._premiumMatches,function(e,t,n,r){return v.calculateScores(e.length,t||0,Object.keys(n).filter(function(e){return!x.appliedAlertIds.has(e)}).map(function(e){return n[e].alert}),r.length)}),this.alertsCount=this._visibleAlerts.view(function(e){var t=g.createChecksDefaultState(0);return Object.keys(e).map(function(t){return e[t].alert}).forEach(function(e){switch(e.group){case m.AlertGroup.contextualSpelling:t.contextualSpelling++;break;case m.AlertGroup.enhancement:t.enhancement++;break;case m.AlertGroup.grammar:t.grammar++;break;case m.AlertGroup.plagiarism:t.plagiarism++;break;case m.AlertGroup.punctuation:t.punctuation++;break;case m.AlertGroup.sentenceStructure:t.sentenceStructure++;break;case m.AlertGroup.style:t.style++;break;case m.AlertGroup.synonym:break;default:throw new TypeError("Unknown alert group: "+e.group)}}),t}),this.premiumAlertsCount=this.scores.view("premiumAlerts"),this.textChangedByUser=this._textChangedByUser.distinctUntilChanged().skipWhile(function(e){return e===x._initialText}),this.focusedAlert=d.Atom.combine(this._visibleAlerts,this._focusedAlert,function(e,t){return x._getSynonymAlert(e)||t}),this.highlightedAlert=this._highlightedAlert}return e.prototype._unsafeEditorEvent=function(e){var t=this;return a.Observable.fromEventPattern(function(n){if(!t._editor)throw new f.InvariantError("editor should be mounted");t._editor.on(e,n)},function(n){if(!t._editor)throw new f.InvariantError("editor should be mounted");t._editor.off(e,n)},function(e){return e})},e.prototype.updatePastedTextSize=function(e){this._pastedTextSize.next(e)},e.prototype._mergeUndoedAlert=function(e){var t=this._undoedAction.get();if(t){var n=e.find(function(e){return e.value===t.value&&e.rawMatch.pname===t.rawMatch.pname&&e.rawMatch.begin===t.rawMatch.begin});n&&n.id!==t.id&&(this._visibleAlerts.modify(function(e){var r=e[t.id];return Object.assign({},e,(i={},i[t.id]=null,i),(o={},o[n.id]={alert:_.createAlert(n),highlightPosition:r.highlightPosition},o));var i,o}),this._focusedAlert.modify(function(e){return e.id===t.id?{id:n.id,source:"undo"}:e}),this._highlightedAlert.modify(function(e){return e&&e===t.id?n.id:e}))}},e.prototype._updateRemovedAlerts=function(e){var t=this;this._focusedAlert.modify(function(e){return e.id&&!t._unsafeGetMatchById(e.id)?{id:null,source:null}:e}),this._highlightedAlert.modify(function(e){return e&&!t._unsafeGetMatchById(e)?null:e}),this._visibleAlerts.modify(function(t){var n=e.filter(function(e){return o(e)&&void 0!==t[e.id]}),r={};return n.forEach(function(e){return r[e.id]=t[e.id]}),r}),this.pendingAlertAction.modify(function(e){return e&&y.AppliedAlertAction.isSingle(e)&&!t._unsafeGetMatchById(e.alertId)?null:e})},e.prototype._updateAddedAlerts=function(e){var t=this,n=function(){return t._domElement.getBoundingClientRect()};this._visibleAlerts.modify(function(r){var i=e.filter(o),s={};return i.map(function(e){try{return{match:e,highlightPosition:f.DOM.absToRelativeBuggy(e.getEl()&&e.getEl().getClientRects()[0],n())}}catch(e){return t._log.error(e),null}}).forEach(function(e){if(e)try{var n=_.createAlert(e.match);"synonym"===n.kind&&t._isDenali?t._synonymAlerts.next(n):s[e.match.id]={alert:r[e.match.id]?r[e.match.id].alert:n,highlightPosition:e.highlightPosition}}catch(e){t._log.error("Failed to create alert, skip it",e)}}),s})},e.prototype._updatePremiumAlertCount=function(e){this._premiumMatches.set(e.getMatches().filter(function(e){return!e.rawMatch.free&&"synonyms"!==e.rawMatch.action}))},e.prototype._getCurrentVisibleMatches=function(e){return e.getFiltered().filter(function(e){return e.getEl()})},e.prototype._subscribeToUpdateCheckingStatus=function(){var e=this;return a.Observable.merge(this._editorSending.mapTo(1),this._editorFinishedChecking.mapTo(-1),this._editorPlagiarismChecked.mapTo(-1),this._capiSocketDisconnect.mapTo(NaN)).scan(function(e,t){return Number.isNaN(t)?0:Math.max(0,e+t)},0).map(function(e){return 0===e?y.CheckingStatus.finished:y.CheckingStatus.inProgress}).subscribe(function(t){return e._checkingStatus.set(t)})},e.prototype._checkPlagiarism=function(e){var t=this;void 0===e&&(e=100),setTimeout(function(){t._editor&&t._checkingSettings.plagiarismEnabled.get()&&t._editor.checkPlagiarism()},e)},e.prototype.mount=function(){var e=this;f.invariant(null==this._editorEventSubs&&null==this._editor,"editor should not be mounted");var t,n=this._dialectSetting.dialect.get();try{t=this._getCachedMatches()}catch(e){this._log.error("could not load cached alerts",e)}this._editor=i(this._domElement,this._textAreaType,this._textAreaWrapperElementId,this._docId,this._initialText,this._capiWsUrl,function(){return e._checkingSettings.plagiarismEnabled.get()},n,function(t){return e._checkingSettings.isAlertGroupEnabled(t)},function(){return e._checkingSettings.genre.get()},t||[],this._telemetry,this._environment,this._isDenali),this._editorEventSubs=[this._editorRendered.subscribe(function(){e._editor&&(e._undoedAction.get()&&e._mergeUndoedAlert(e._getCurrentVisibleMatches(e._editor)),e._updateRemovedAlerts(e._getCurrentVisibleMatches(e._editor)),e._updatePremiumAlertCount(e._editor))}),a.Observable.merge(this._editorRendered,a.Observable.fromEvent(window,"resize")).auditTime(50).subscribe(function(){e._editor&&(e._updateAddedAlerts(e._getCurrentVisibleMatches(e._editor)),e._updatePremiumAlertCount(e._editor))}),a.Observable.merge(this._editorRendered,this._checkingStatus.skip(1).filter(function(e){return e===y.CheckingStatus.finished})).auditTime(1e3).subscribe(function(){e._editor&&e._tryCacheCurrentAlerts()}),this._editorRendered.subscribe(function(){if(e._editor){var t=e._editor.getText();e.localText.set(t),e._textChangedByUser.next(e._editor.getText())}}),this.localText.audit(function(e){return a.Observable.timer(e&&e.length>1e3?1e3:100)}).startWith(this.localText.get()).subscribe(function(t){e.approximateWordCount.set(f.StringUtils.wordCount(t)),e.approximateCharCount.set(f.StringUtils.charCount(t))}),this._editorAlertRemovedOnServer.subscribe(function(t){e.appliedAlertIds.has(t.id)&&(t.cancelServerRemove=!0);var n=e._undoedAction.get();n&&n.id===t.id&&(t.cancelServerRemove=!0,e._undoedAction.set(null))}),this._editorAlertSelected.subscribe(function(t){f.invariant(null===e._focusedAlert.get().id,"alert selected without prior deselect:\n            had "+e._focusedAlert.get()+" selected,\n            selecting "+t.id),e._focusedAlert.set({id:t.id,source:"text"})}),this._editorAlertDeselected.subscribe(function(t){f.invariant(e._focusedAlert.get().id===t.id||e._highlightedAlert.get()===t.id,"other alert deselected:\n            had "+e._focusedAlert.get()+" selected,\n            deselecting "+t.id),e._focusedAlert.modify(function(e){return e.id===t.id?{id:null,source:null}:e}),e._highlightedAlert.modify(function(e){return e===t.id?null:e})}),this._subscribeToUpdateCheckingStatus(),this._checkingSettings.genre.skip(1).subscribe(function(t){e._editor&&(e.pendingAlertAction.get()&&e.commitLastAlertAction(),e._editor.hardReset(),e._checkPlagiarism(1e3))}),this._checkingSettings.checksEnabled.skip(1).subscribe(function(t){e._editor&&(e.pendingAlertAction.get()&&e.commitLastAlertAction(),e._editor.render(),e._checkPlagiarism())}),n.nonEmpty()?a.Subscription.EMPTY:this._editorFinishedChecking.map(function(e){return e&&e.dialect}).filter(function(e){return h.isDialectString(e)}).first().subscribe(function(t){return e._dialectSetting.setDialectWeak(t)}),a.Observable.merge(this._capiSocketDisconnect.filter(function(e){return 4095!==e.code&&1001!==e.code}).map(function(e){var t=e.code,n=e.reason;return{type:"disconnected",error:new l.WSError({status:n,code:t,message:"Cannot connect to CAPI"})}}),this._capiSocketStart.mapTo({type:"connected"})).distinctUntilChanged(function(e,t){return e.type===t.type}).switchMap(function(e){return"connected"===e.type?a.Observable.of(e):a.Observable.of(e).delay(5e3)}).subscribe(function(t){return e._capiConnectivity.set(t)}),this._capiSocketConnect.subscribe(function(t){var n=e.pendingAlertAction.get();if(e._editor&&n)if(e._log.debug("Pending alert action on CAPI connect: kind = "+n.kind+";\naction = "+(y.AppliedAlertAction.isSingle(n)&&n.action)),y.AppliedAlertAction.isSingle(n)){var r=e._unsafeGetMatchById(n.alertId),i=r&&!r.undoed;i||e._log.error("Alerts not in sync: pending undone alert action")}else y.AppliedAlertAction.isBatchIgnore(n)&&!n.alertIds.some(function(t){var n=e._unsafeGetMatchById(t);return n&&!n.undoed||!1})&&e._log.error("Alerts not in sync: pending undone alert action")}),this._capiSocketError.map(function(e){var t=e.code,n=e.reason;return new l.WSError({status:n,code:t,message:"CAPI socket error"})}).distinctUntilChanged(function(e,t){return e.code===t.code}).subscribe(function(t){return e._log.warn("CAPI socket error",t)}),this._editorFix.subscribe(function(){return e._environment.actions.incFixedErrors().recover(function(t){return e._log.error("env error during increase fixed error count",t)})}),this._undoedAction.subscribe(function(t){t&&t.id&&(e.setFocusedAlert(t.id,"undo"),e.setHighlightedAlert(t.id))}),a.Observable.merge(this.textChangedByUser.debounceTime(1e3).mapTo(!0),this.textChangedByUser.mapTo(!1),this._checkingSettings.genre.mapTo(!0)).distinctUntilChanged().switchMap(function(t){return t?e._checkingStatus.switchMap(function(e){return e===y.CheckingStatus.inProgress?a.Observable.timer(12e3):a.Observable.empty()}):a.Observable.empty()}).subscribe(function(){return e._tsCheckingStatus.increment()})],this._editor.run(),this._checkPlagiarism()},e.prototype._unsafeGetMatchById=function(e){if(!this._editor)throw new Error("editor should be mounted");return this._editor.matches.byId(e)},e.prototype._getMatchById=function(e){var t=this._unsafeGetMatchById(e);if(!t)throw new f.InvariantError("expected non-null match #"+e);return t},e.prototype._updateHighlights=function(e,t){var n=this;[e.focused.id,e.highlighted].forEach(function(e){var t=null!==e&&n._unsafeGetMatchById(e);t&&t.deselect(!0)}),[t.focused.id,t.highlighted].forEach(function(e){try{null!==e&&n._getMatchById(e).select(!0)}catch(e){n._log.warn("Update highlights failed",e)}})},e.prototype._tryCacheCurrentAlerts=function(){if(!this._editor)throw new f.InvariantError("editor should be mounted");try{this._cacheSerializableMatches(r(this._editor.getMatches().filter(function(e){return"synonyms"!==e.rawMatch.action})))}catch(e){this._log.error("could not cache alerts",e)}},e.prototype.unmount=function(){if(!this._editor||!this._editorEventSubs)throw new f.InvariantError("editor should be mounted");this.pendingAlertAction.get()&&this.commitLastAlertAction(),this._tryCacheCurrentAlerts(),this._editorEventSubs.forEach(function(e){return e.unsubscribe()}),this._editorEventSubs=null,this._editor.exit(),this._editor=null},e.prototype.setDocumentContent=function(e){if(!this._editor)throw new f.InvariantError("editor should be mounted");this.pendingAlertAction.get()&&this.commitLastAlertAction(),this._editor.setText(e)},e.prototype.skipInputEvents=function(e){var t=(void 0===e?{turnBack:!1}:e).turnBack;if(!this._editor)throw new f.InvariantError("editor should be mounted");this._editor.inputListener.skipInputEvents(!1!==t||void 0)},e.prototype._applyAlert=function(e,t){if(!this._editor)throw new f.InvariantError("editor should be mounted");var n=this._getMatchById(e);switch(t.action){case"replace":n.replaced=!0,n.replace(t.replacementText,!1),t.isSynonym&&n.removeUnderline(),this.appliedAlertsCount.modify(function(e){return e+1});break;case"ignore":case"addToDictionary":case"acknowledge":this._isDenali?(n.replaced=!0,n.getEl().className=this._editor.getMatchClass(n,"")):n.getEl().classList.add("gr_replaced");break;default:return f.assertNever(t)}this.pendingAlertAction.set(y.AppliedAlertAction.createSingle(e,t)),this.appliedAlertIds.add(e)},e.prototype.batchIgnore=function(e){var t=this;if(!this._editor)throw new f.InvariantError("editor should be mounted");var n=this.pendingAlertAction.get();if(n&&(this.commitLastAlertAction(),y.AppliedAlertAction.isBatchIgnore(n)&&n.alertIds.length>0&&JSON.stringify(n.alertIds)===JSON.stringify(e)))throw new f.InvariantError("alert was already applied");try{e.forEach(function(e){return requestAnimationFrame(function(){t._getMatchById(e).replaced=!0,t.appliedAlertIds.add(e)})}),this.pendingAlertAction.set(y.AppliedAlertAction.createBatchIgnore(e))}catch(e){this._log.warn("Apply alert failed, action: batchIgnore",e)}this._focusedAlert.set({id:null,source:null}),this.setHighlightedAlert(null)},e.prototype.applyAlert=function(e,t){if(!this._editor)throw new f.InvariantError("editor should be mounted");var n=this.pendingAlertAction.get();if(n&&(this.commitLastAlertAction(),y.AppliedAlertAction.isSingle(n)&&n.alertId===e))throw new f.InvariantError("alert was already applied");try{this._applyAlert(e,t)}catch(e){this._log.warn("Apply alert failed, action: "+t.action,e)}this._focusedAlert.set({id:null,source:null}),this.setHighlightedAlert(null),this._undoedAction.set(null)},e.prototype.commitLastAlertAction=function(){var e=this;if(!this._editor)throw new f.InvariantError("editor should be mounted");var t=this.pendingAlertAction.get();if(!t)throw new f.InvariantError("can not commit when no action was applied");if(y.AppliedAlertAction.isBatchIgnore(t))return t.alertIds.forEach(function(t){e._getMatchById(t).ignore()}),this.appliedAlertIds.clear(),void this.pendingAlertAction.set(null);if("replace"===t.action.action&&t.action.isSynonym)return void this.pendingAlertAction.set(null);try{var n=this._getMatchById(t.alertId);switch(t.action.action){case"replace":n.remove();break;case"ignore":n.ignore();break;case"addToDictionary":this._demoMode?n.remove():n.addToDict();break;case"acknowledge":n.acknowledged();break;default:return f.assertNever(t.action)}}catch(e){this._log.warn("commitLastAlertAction failed",e)}this.appliedAlertIds.clear(),this.pendingAlertAction.set(null)},e.prototype._removeUndoStyles=function(e){this._isDenali?(e.replaced=!1,e.getEl().className=this._editor.getMatchClass(e,"")):e.getEl().classList.remove("gr_replaced")},e.prototype.undoLastAlertAction=function(){var e=this;if(!this._editor)throw new f.InvariantError("editor should be mounted");var t=this.pendingAlertAction.get();if(!t)throw new f.InvariantError("can not undo when no action was applied");if(y.AppliedAlertAction.isBatchIgnore(t))return void t.alertIds.forEach(function(t){e._removeUndoStyles(e._getMatchById(t))});var n=this._getMatchById(t.alertId);"replace"===t.action.action&&(n.undo(),this.appliedAlertIds.delete(t.alertId)),this._removeUndoStyles(n),this._undoedAction.set(this._unsafeGetMatchById(t.alertId)),this.pendingAlertAction.set(null)},e.prototype.setFocusedAlert=function(e,t){f.invariant(null!==this._editor,"editor should be mounted");var n=this._highlights.get();this._focusedAlert.set({id:e,source:t}),this._updateHighlights(n,this._highlights.get())},e.prototype.setHighlightedAlert=function(e){f.invariant(null!==this._editor,"editor should be mounted");var t=this._highlights.get();this._highlightedAlert.set(e),this._updateHighlights(t,this._highlights.get())},e.prototype.getAllAlerts=function(){return this._editor?this._editor.getMatches().filter(function(e){return m.alertGroupFromString(e.rawMatch.group)!==m.AlertGroup.plagiarism&&"synonyms"!==e.rawMatch.action}).map(_.createAlert):[]},e.prototype._getSynonymAlert=function(e){var t=Object.keys(e).find(function(t){return e[t].alert.group===m.AlertGroup.synonym});return t?{id:t}:null},e.prototype.isFocused=function(e){return this.focusedAlert.view(function(t){return t.id===e})},e.prototype.getCurrentSelection=function(){if(!this._editor)throw new f.InvariantError("editor should be mounted");var e=this._editor.getSelection();return e?{start:e.s,end:e.e}:null},e.prototype.setSelection=function(e){if(!this._editor)throw new f.InvariantError("editor should be mounted");this._editor.setCursor({s:e.start,e:e.end})},e.prototype.getUnderlinedHtml=function(){if(!this._editor)throw new f.InvariantError("editor should be mounted");return this._editor.dom.cloneVal.innerHTML},e}();t.GrammarlyEditorEngine=E},494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(2),o=n(4),s=n(6);!function(e){e[e.Querying=0]="Querying",e[e.Ready=1]="Ready"}(r=t.SynonymsStateKind||(t.SynonymsStateKind={}));var a;!function(e){function t(e){return null!==e&&e.kind===r.Ready}function n(e){return null!==e&&e.kind===r.Querying}e.isReady=t,e.isQuerying=n}(a=t.SynonymsModel||(t.SynonymsModel={}));var c=function(){function e(e){this._query=e,this.state=s.Atom.create({kind:r.Ready}),this._log=o.Monitoring.Logging.getLogger("editor.SynonymsModelImpl"),this._cache=new i.LRUCache(20)}return e.prototype.query=function(e){var t=this;this._log.trace("SynonymsQuery: "+e.word),this.state.set({kind:r.Querying,query:e});var n=this._getKey(e),i=this._cache.get(n);if(void 0!==i){this._log.trace("Cache hit for "+n);var o={kind:r.Ready,query:e,synonyms:i};this._onResponse(o)}else this._query(e.start,e.word).then(function(i){var o={kind:r.Ready,query:e,synonyms:i};t._cache.put(n,i),t._onResponse(o)}).catch(function(){t.abortQuery()})},e.prototype.abortQuery=function(){a.isQuerying(this.state.get())&&this.state.set({kind:r.Ready})},e.prototype._getKey=function(e){return e.word+"#"+e.start},e.prototype._onResponse=function(e){this._log.trace("_onResponse() newState: "+e);var t=this.state.get();a.isQuerying(t)&&t.query.word===e.query.word?this.state.set(e):this._log.trace("Discarding result for "+e.query.word)},e}();t.SynonymsModelImpl=c},495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n(7),o=n(2);!function(e){e.nominal||(e.nominal={}),e.genUuid=function(){return o.StringUtils.alphanumeric(12)},e.defaultState={visible:!1,content:i.None},e.ContextTypes={tooltip:r.object};var t=function(){function t(t){var n=this;this._state=t,this.visible=this._state.lens("visible"),this.content=this._state.lens("content"),this.hasContent=this._state.view(function(e){return e.content.nonEmpty()}),this.state=this._state.view(function(e){return e.content.filter(function(){return e.visible})}),this.show=function(){n.visible.set(!0)},this.hide=function(){n._state.set(e.defaultState)}}return t.prototype.setContent=function(e){this.content.set(i.Some(e))},t.prototype.cleanContent=function(t){this._state.modify(function(n){return n.content.exists(function(e){return e.uuid===t})?e.defaultState:n})},t}();e.Impl=t}(t.Tooltip||(t.Tooltip={}))},496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(535),i=n(858),o=n(2),s=n(91),a=n(32);!function(e){!function(e){function t(t){return Object.values(e.Home).some(function(e){return e===t})}!function(e){e.editorMenu="editorMenu",e.editorReferrals="editorReferrals"}(e.Home||(e.Home={})),e.isHome=t;!function(e){e.editorGenre="editorGenre",e.editorEnhancement="editorEnhancement",e.editorChecks="editorChecks",e.editorStatusbar="editorStatusbar",e.editorPlagiarism="editorPlagiarism",e.editorProofit="editorProofit"}(e.EditorTsDocument||(e.EditorTsDocument={}));!function(e){e.editorDenaliAdvanced="editorDenaliAdvanced",e.editorDenaliPlagiarism="editorDenaliPlagiarism",e.editorDenaliProofit="editorDenaliProofit",e.editorDenaliOverview="editorDenaliOverview",e.editorDenaliGoals="editorDenaliGoals"}(e.DenaliDocument||(e.DenaliDocument={}))}(e.Place||(e.Place={}));var t=function(){function e(e,t,n){this._appConfig=e,this._env=t,this._userId=n}return e.prototype.fromHome=function(e){return this._from(e)},e.prototype.fromEditorTsDocument=function(e,t,n){return this._fromDocument(e,t,n)},e.prototype.fromDenaliDocument=function(e,t,n){return this._fromDocument(e,t,n)},e.prototype._from=function(t){return new s.URLWithParams(this._appConfig.api.redirect).addParams({upgrade:"1",page:"free",hash:i(this._userId.get()),app_type:e._getAppType(this._env.platform)}).addParams(e._encodePlace(t,this._env.platform))},e.prototype._fromDocument=function(t,n,r){return this._from(t).addParams({doc_id:n}).addParams(e._encodeAlerts(r))},e._getAppType=function(e){switch(e){case a.Environment.Platform.WEB:case a.Environment.Platform.DESKTOP:return"app";case a.Environment.Platform.POPUP:return"popup";default:return o.assertNever(e)}},e._preparePlace=function(e,t){switch(t){case a.Environment.Platform.WEB:case a.Environment.Platform.POPUP:return e;case a.Environment.Platform.DESKTOP:return"Desktop"+o.StringUtils.camelize(e);default:return o.assertNever(t)}},e._encodePlace=function(t,n){return{utm_medium:"internal",utm_source:"upHook",utm_campaign:e._preparePlace(t,n)}},e._encodeAlerts=function(e){return{alerts:r.compressToEncodedURIComponent(JSON.stringify(e))}},e}();e.Impl=t;var n=function(){function e(){}return e.prototype.fromHome=function(e){throw new Error("Method not implemented.")},e.prototype.fromEditorTsDocument=function(e,t,n){throw new Error("Method not implemented.")},e.prototype.fromDenaliDocument=function(e,t,n){throw new Error("Method not implemented.")},e}();e.Mock=n}(t.UpgradeHook||(t.UpgradeHook={}))},497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(4),o=n(32),s=n(128),a=n(538);t.Error500Page=function(){var e=o.getTextResources(new s.EnvironmentMock).base.error500page;return i.Monitoring.TimeSeries.root.getMetric("error").getCounter("500").increment(),r.createElement(a.ErrorPage,{title:e.title,description:e.description})}},500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(1333);t.CAPIClientImpl=i.CAPIClientImpl,r.__exportStar(n(261),t);var o=n(502);t.DocumentStatistics=o.DocumentStatistics;var s=n(501);t.DroppedFromQueueError=s.DroppedFromQueueError},501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(7),o=n(62),s=n(261),a=n(2);t.nominal||(t.nominal={});var c;!function(e){function t(e){return"change"===e.kind}function n(e){return"cmd"===e.kind}function r(e){return"cmdIncRevision"===e.kind}e.isChange=t,e.isCmd=n,e.isCmdIncRevision=r}(c=t.ChangesQueue||(t.ChangesQueue={}));var u=function(e){function t(t){var n=e.call(this,"The message was dropped from the queue")||this;return n.reason=t,n}return r.__extends(t,e),t.prototype.toString=function(){return"The message was dropped from the queue due to: "+this.reason},t.isDroppedFromQueueError=function(e){return e instanceof t},t}(a.CustomError);t.DroppedFromQueueError=u;var l=function(){function e(e,t,n){var r=this;this._shouldIncreaseRevision=e,this._acceptHandler=t,this._dropHandler=n,this._changes=[],this._staged=[],this._stagedAmount=0,this._acceptMessage=function(e){r._updateCheckedTextSize(e),r._acceptHandler(e)},this._dropMessages=function(e,t){e.forEach(r._updateCheckedTextSize),r._dropHandler(e,t)},this._updateCheckedTextSize=function(e){c.isChange(e)?r._changeStagedAmount(-e.change.amount):r._shouldIncreaseRevision(e.cmd)&&r._changeStagedAmount(-s.BIG_TEXT_SIZE)},this.clear("init")}return e.prototype.pushChanges=function(e){var t=this;return(this.isEmpty?i.None:this._tail().filter(c.isChange)).fold(function(){var n=++t._queuedId,r=++t._revision;return t._changeStagedAmount(e.amount),t._changes.push({kind:"change",change:e,id:n,rev:r}),n},function(n){var r=n.change.compose(e);if(t._replaceChange(t._changes.length-1,r),n.change.isEmpty){var i=t._changes.pop();setTimeout(function(){return t._acceptMessage(i)},0)}return n.id})},e.prototype.pushCommand=function(e){var t=++this._queuedId;return this._shouldIncreaseRevision(e)?(this._changeStagedAmount(s.BIG_TEXT_SIZE),this._changes.push({kind:"cmdIncRevision",cmd:e,id:t,rev:++this._revision})):this._changes.push({kind:"cmd",cmd:e,id:t,rev:this._revision}),t},Object.defineProperty(e.prototype,"isStaging",{get:function(){return this._staged.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._changes.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localRevision",{get:function(){return this._revision},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stagedAmount",{get:function(){return this._stagedAmount},enumerable:!0,configurable:!0}),e.prototype.pollAll=function(){var e=this._changes;this._changes=[];var t=a.ArrayUtils.partition(e,c.isCmd),n=t[0],r=t[1];return n.forEach(this._acceptMessage),(i=this._staged).push.apply(i,r),e;var i},e.prototype.ack=function(e){this._ackedRevisions.add(e),this._cleanStaged()},e.prototype.transformAlertAgainstQueue=function(e){for(var t=this._staged.filter(function(t){return t.rev>e.rev}).concat(this._changes).filter(c.isChange).map(function(e){return e.change.delta}),n=0,r=t;n<r.length;n++){var o=r[n],s={begin:o.transformPosition(e.begin,!0),end:o.transformPosition(e.end,!0),highlightBegin:o.transformPosition(e.highlightBegin,!0),highlightEnd:o.transformPosition(e.highlightEnd,!0)};if(s.end-s.begin!=e.end-e.begin||s.highlightEnd-s.highlightBegin!=e.highlightEnd-e.highlightBegin)return i.None;e=a.ObjectUtils.update(e,s)}return i.Some(e)},e.prototype.clear=function(e){var t=this._changes.concat(this._staged);this._changes=[],this._staged=[],this._ackedRevisions=new Set,this._queuedId=-1,this._revision=-1,t.length>0&&this._dropMessages(t,e)},e.prototype._tail=function(){return i.Option.of(this._changes[this._changes.length-1])},e.prototype._replaceChange=function(e,t){var n=this._changes[e];o.invariant(c.isChange(n),"queued change should exist"),this._changeStagedAmount(-n.change.amount+t.amount),n.change=t},e.prototype._cleanStaged=function(){for(;void 0!==this._staged[0]&&this._ackedRevisions.has(this._staged[0].rev);){var e=this._staged.shift();this._ackedRevisions.delete(e.rev),this._acceptMessage(e)}},e.prototype._changeStagedAmount=function(e){this._stagedAmount+=e},e}();t.CapiQueue=l},502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);!function(e){function t(e,t){var n=t/60,i=r.DateUtils.secondsToTime(e/n);return i.s=i.h>0&&i.m>10?0:Math.floor(i.s),i}function n(e){return t(e,250)}function i(e){return t(e,130)}function o(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}e.calculateReadingTime=n,e.calculateSpeakingTime=i,e.generateStats=o}(t.DocumentStatistics||(t.DocumentStatistics={}))},503:function(e,t,n){"use strict";function r(e){return"null"===e||"undefined"===e||null===e||void 0===e}function i(e){if(null===e||"null"===e||"boolean"==typeof e)return null;var t=Number(e);return Number.isNaN(t)?null:t}function o(e){return r(e)?null:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}function s(e,t){return r(e)?t:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}function a(e){try{return JSON.parse(decodeURI(e))}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(41),u=n(57);t.emptyValue=r;var l=function(){function e(e){this._value=e}return e.prototype.getStr=function(){return r(this._value)?null:String(this._value)},e.prototype.getNum=function(){return i(this._value)},e.prototype.getBool=function(){return o(this._value)},e.prototype.getBoolOrDefault=function(e){return s(this._value,e)},e.prototype.getObject=function(){return a(this._value)},e.prototype.getArray=function(){return a(this._value)},e.prototype.getObjProp=function(e){return this._value.hasOwnProperty(e)?this._value[e]:null},e}();t.PropertyImpl=l;var d;!function(e){function t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.find(function(t){return t.has(e)});return new l(r&&r[e])}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new p,r=0,i=e;r<i.length;r++){var o=i[r];for(var s in o){var a=o[s];n[s]="object"==typeof a?encodeURI(JSON.stringify(a)):a}}return n}function r(e){return e instanceof p}e.find=t,e.of=n,e.is=r}(d=t.Properties||(t.Properties={}));var p=function(){function e(){}return e.prototype.getStr=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.getNum=function(e){return this.hasOwnProperty(e)?i(this[e]):null},e.prototype.getBool=function(e){return this.hasOwnProperty(e)?o(this[e]):null},e.prototype.getObject=function(e){return this.hasOwnProperty(e)?a(this[e]):null},e.prototype.has=function(e){return this.hasOwnProperty(e)},e.prototype.ifPresent=function(e,t){this[e]&&t&&t.apply(this[e])},e.prototype.entries=function(){var e=this;return Object.keys(this).map(function(t){return[t,new l(e[t])]})},e.find=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.find(function(t){return t.has(e)});return new l(r&&r[e])},e}(),h=function(){function e(e,t,n){var r=this;this._token=n,this._endpoints={props:"props/v2",mimic:"mimic"},this._cookiesAppender=u.createCookiesAppender({grauth:function(){return r._token}}),this._url=c.RequestBuilder.join(e,"api"),this._ajax=c.Ajax.factory(t,void 0,this._cookiesAppender)}return e.prototype.load=function(){return this._execute(c.RequestBuilder.get(this._url,this._endpoints.props)).then(d.of)},e.prototype.get=function(e){return this._execute(c.RequestBuilder.get(this._url,this._endpoints.props,e),c.Ajax.parseText).then(function(t){return d.of((n={},n[e]=t||null,n));var n})},e.prototype.save=function(e){return this._execute(c.RequestBuilder.post(this._url,this._endpoints.props).json(e),c.Ajax.toVoid)},e.prototype.getMimic=function(e){return this._execute(c.RequestBuilder.get(this._url,this._endpoints.mimic).cookie("gnar_containerId",e))},e.prototype.getMimicWithProps=function(e){return this._execute(c.RequestBuilder.get(this._url,this._endpoints.mimic,"withProps").cookie("gnar_containerId",e)).then(function(e){var t=e.groups,n=e.properties;return{experiments:new Set(t),properties:d.of(n)}})},e.prototype._execute=function(e,t){return this._ajax(e,t)},e.targetTag="dapi",e}();t.Dapi=h},504:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(265),o=n(62),s=n(266),a=n(2),c=function(){function e(e){if(this._delta={},!e||!e.id)throw new Error("document is undefined or doesn't have ID");this._original=Object.assign({},e,{id:String(e.id)}),this._settings=i.DoxDocumentSettings.Holder.fromJSON(e.extra_params),this._proofit=r.Option.of(e.proofit).map(s.Proofit.parseResult)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._original.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._delta.title||this._original.title||""},set:function(e){this._delta.title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstContent",{get:function(){return this._original.first_content||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._original.content||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"revision",{get:function(){return this._original.vsn||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalFileName",{get:function(){return this._original.orig_filename||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createdAt",{get:function(){return this._original.created_at?o.stringToDate(this._original.created_at):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updatedAt",{get:function(){return this._original.updated_at?o.stringToDate(this._original.updated_at):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this._delta.errors||this._original.errors||0},set:function(e){this._delta.errors=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._original.size||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this._getSettingsHolder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"genre",{get:function(){return this.settings.genre.orNull()},enumerable:!0,configurable:!0}),e.prototype.setGenre=function(e){this._deltaSettings=this._getSettingsHolder.changeGenre(e)},Object.defineProperty(e.prototype,"checks",{get:function(){return this.settings.checks.orNull()},enumerable:!0,configurable:!0}),e.prototype.setChecks=function(e){this._deltaSettings=this._getSettingsHolder.changeChecks(e)},Object.defineProperty(e.prototype,"context",{get:function(){return this.settings.context},enumerable:!0,configurable:!0}),e.prototype.setContext=function(e){this._deltaSettings=this._getSettingsHolder.changeContext(e)},Object.defineProperty(e.prototype,"proofit",{get:function(){return this._proofit.orNull()},enumerable:!0,configurable:!0}),e.prototype.resetProofit=function(){this._proofit=r.None},e.prototype._isDirty=function(){return Object.getOwnPropertyNames(this._delta||{}).length>0||void 0!==this._deltaSettings},e.prototype._popChanges=function(){var e=this._getDeltaRawDocument(this._delta,this._deltaSettings);return e.id=Number(this._original.id),e},e.prototype._getDeltaRawDocument=function(e,t){if(t){var n=t.toJSON();return a.ObjectUtils.update(e,{extra_params:n})}return Object.assign({},e)},e.prototype._applyChanges=function(e){this._original=Object.assign({},e,{id:String(e.id)}),e.extra_params&&(this._settings=i.DoxDocumentSettings.Holder.fromJSON(e.extra_params)),e.proofit&&(this._proofit=r.Option.of(e.proofit).map(s.Proofit.parseResult)),this._deltaSettings=void 0,this._delta={}},Object.defineProperty(e.prototype,"_getSettingsHolder",{get:function(){return void 0!==this._deltaSettings?this._deltaSettings:this._settings},enumerable:!0,configurable:!0}),e}();t.DoxDocument=c},505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(17),o=n(2),s=n(177),a=n(4),c=n(176),u=n(89);!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.INITIALIZING=2]="INITIALIZING",e[e.RECONNECT_SCHEDULED=3]="RECONNECT_SCHEDULED",e[e.CONNECTED=4]="CONNECTED",e[e.READY=5]="READY",e[e.WAIT_ACK=6]="WAIT_ACK",e[e.CLOSED=7]="CLOSED"}(r=t.States||(t.States={}));var l;!function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.SCHEDULE_RECONNECT=2]="SCHEDULE_RECONNECT",e[e.DISCONNECT=3]="DISCONNECT",e[e.CLOSE=4]="CLOSE",e[e.INITIALIZE=5]="INITIALIZE",e[e.INITIALIZED=6]="INITIALIZED",e[e.SEND=7]="SEND",e[e.ACK=8]="ACK",e[e.RESET=9]="RESET"}(l=t.Events||(t.Events={}));var d=function(){function e(e,t){var n=this;this._url=e,this._log=a.Monitoring.Logging.getLogger("coreclients.remote",a.Logging.LogLevel.DEBUG),this._ws=s.WS.create(t).onDisconnect(function(e){return n._handleDisconnect(e)}).onMessage(function(e,t){return n._handleMessage(t)}).resetReconnectCounterWhen(function(e){return n.isInitialized(e)}).onError(s.errPrintln),this._fsm=new c.StateMachine(r.DISCONNECTED,r.CLOSED).from(r.DISCONNECTED).to(r.CONNECTING).on(l.CONNECT).from(r.DISCONNECTED).to(r.RECONNECT_SCHEDULED).on(l.SCHEDULE_RECONNECT).from(r.CONNECTING,r.RECONNECT_SCHEDULED).to(r.CONNECTED).on(l.CONNECTED).from(r.CONNECTED).to(r.INITIALIZING).on(l.INITIALIZE).from(r.INITIALIZING).to(r.READY).on(l.INITIALIZED).from(r.CONNECTED,r.CONNECTING,r.RECONNECT_SCHEDULED,r.INITIALIZING,r.READY).to(r.DISCONNECTED).on(l.DISCONNECT).from(r.CONNECTED,r.CONNECTING,r.RECONNECT_SCHEDULED,r.INITIALIZING,r.READY,r.DISCONNECTED).to(r.CLOSED).on(l.CLOSE).on(r.CLOSED,function(e){n._conn&&n._conn.close(),e.args&&e.args instanceof s.WSError&&(n._error=e.args,n._log.warn("Remote connection to dox ws closed",n._error))}).on(r.CONNECTING,function(e){return n._connect()})}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),e.prototype._handleDisconnect=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n=this;return i.__generator(this,function(s){switch(s.label){case 0:return[4,this._fsm.event(l.DISCONNECT,e.reason)];case 1:if(!s.sent())return[3,7];this._log.info("Disconnected",e.reason),s.label=2;case 2:return s.trys.push([2,4,,6]),[4,this._disconnectHandler(e,e.reconnect.nextDelay,function(t){return i.__awaiter(n,void 0,void 0,function(){var n,o,s=this;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this._fsm.event(l.SCHEDULE_RECONNECT)];case 1:return i.sent()?[4,e.reconnect.scheduleReconnect(t)]:[3,6];case 2:return n=i.sent(),[4,this._fsm.event(l.CONNECTED,n).catch(function(e){return s._log.warn("Reconnect failed due to error",e),n.close()})];case 3:return(o=i.sent())?(this._log.info("Reconnected to DOX WS successful",{url:this._url,canFinalize:o}),this._conn=n,[3,6]):[3,4];case 4:return this._log.info("Immediate disconnect after reconnect to DOX WS",{url:this._url,state:r[this._fsm.current]}),[4,n.close()];case 5:i.sent(),i.label=6;case 6:return[2]}})})})];case 3:return s.sent(),[3,6];case 4:return t=s.sent(),this._log.warn("DisconnectHandler failed due to error",t),[4,this._fsm.event(l.CLOSE,t).catch(o.noop)];case 5:return s.sent(),[3,6];case 6:return[3,8];case 7:this._log.error("Can not enter Disconnected state",e.reason),s.label=8;case 8:return[2]}})})},e.prototype.close=function(e){var t=this;return void 0===e&&(e={}),this._fsm.event(l.CLOSE,e).then(function(e){e&&clearTimeout(t._timeout)})},e.prototype._connect=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t;return i.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),[4,this._ws.connect(this.url)];case 1:return e=n.sent(),[4,this._fsm.event(l.CONNECTED,e)];case 2:return n.sent()?[2,this._conn=e]:[3,3];case 3:return[4,e.close()];case 4:return n.sent(),[2,void 0];case 5:return[3,7];case 6:throw t=n.sent(),new u.DoxErrors.ConnectionError(this.url);case 7:return[2]}})})},e}();t.Remote=d},506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(89);t.DoxErrors=r.DoxErrors;var i=n(504);t.DoxDocument=i.DoxDocument;var o=n(508);t.DoxRequest=o.DoxRequest;var s=n(264);t.DoxRemoteDocument=s.DoxRemoteDocument;var a=n(265);t.DoxDocumentSettings=a.DoxDocumentSettings,t.CounterType=a.CounterType;var c=n(1337);t.DoxClient=c.DoxClient;var u=n(507);t.ChangesQueue=u.ChangesQueue},507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(62),o=n(2);t.nominal||(t.nominal={});var s;!function(e){function t(e){return"change"===e.kind}function n(e){return"cmd"===e.kind}function r(e){return"meta"===e.kind}e.isChange=t,e.isCmd=n,e.isMeta=r}(s=t.ChangesQueue||(t.ChangesQueue={}));var a=function(){function e(e,t,n){void 0===n&&(n=[]),this._acceptHandler=e,this._dropHandler=t,this._changes=n,this._staging=!1,this._queuedId=0}return e.prototype.pushChanges=function(e){var t=this;return(this.isEmpty||this._staging&&1===this._changes.length?r.None:this._tail().filter(s.isChange)).fold(function(){var n=t._queuedId++;return t._changes.push({kind:"change",change:e,id:n}),n},function(n){var r=n.change.compose(e);if(t._replaceChange(t._changes.length-1,r),n.change.isEmpty){var i=t._changes.pop();setTimeout(function(){return t._acceptHandler(i)},0)}return n.id})},e.prototype.pushMeta=function(e){var t=this;return(this.isEmpty||this._staging&&1===this._changes.length?r.None:this._tail().filter(s.isMeta)).fold(function(){var n=t._queuedId++;return t._changes.push({kind:"meta",meta:e,id:n}),n},function(t){return Object.assign(t.meta,e),t.id})},e.prototype.pushCommand=function(e){var t=this._queuedId++;return this._changes.push({kind:"cmd",cmd:e,id:t}),t},Object.defineProperty(e.prototype,"isStaging",{get:function(){return this._staging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._changes.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._changes.length},enumerable:!0,configurable:!0}),e.prototype.poll=function(){var e=this;i.invariant(!this._staging,"Should not be in staging mode");var t=r.Option.of(this._changes[0]);return t.forEach(function(){e._staging=!0}),t},e.prototype.pop=function(){i.invariant(!this._staging,"Should not be in staging mode");var e=r.Option.of(this._changes.shift());return e.forEach(this._acceptHandler),e},e.prototype.unstage=function(){i.invariant(this._staging,"Should be in staging mode"),i.invariant(void 0!==this._changes[0],"Staging change should exist"),this._staging=!1},e.prototype.ack=function(){this.unstage(),this.pop()},e.prototype.transformChangeAgainstQueue=function(e){var t=this;return this._changes.reduce(function(e,n,r){if(s.isChange(n)){var i=n.change,o=i.transform(e,!1);return t._replaceChange(r,o),e.transform(i)}return e},e)},e.prototype.drop=function(e,t){if(!this.isEmpty){var n=void 0===t?[this._changes,[]]:o.ArrayUtils.partition(this._changes,function(e){return e.kind===t}),r=n[0],i=n[1];this._changes=i,r.length>0&&this._dropHandler({messages:r,reason:e})}},e.prototype.toJSON=function(){return{changes:this._changes}},e.prototype._tail=function(){return r.Option.of(this._changes[this._changes.length-1])},e.prototype._replaceChange=function(e,t){var n=this._changes[e];i.invariant(s.isChange(n),"queued change should exist"),n.change=t},e}();t.DoxQueue=a},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=n(262),o=n(89);!function(e){var t=function(){function e(e){this._httpRequest=e}return e.text=function(t,n){var i=r.RequestBuilder.create().json();return(t||n)&&i.body({content:t,title:n}),new e(i)},e.file=function(t){var n=r.RequestBuilder.create();if(!t)throw new TypeError("File was not provided");if(!t.name)throw new TypeError("Empty filename passed to file() function");if(!t.size)throw new TypeError("File size wasn't provided");if(t.size>i.MAX_FILE_SIZE)throw new o.DoxErrors.FileSizeOutOfRangeError(i.MAX_FILE_SIZE);var s=(t.name.split("\\").pop()||"").split("/").pop();if(!s)throw new o.DoxErrors.UnsupportedFileTypeError(t.name);if(!s.match(e.supportedExtensionsRE))throw new o.DoxErrors.UnsupportedFileTypeError(s);var a=new FormData;return a.append("source_file",t),n.body(a),new e(n)},e.prototype._getHttpRequestBuilder=function(){return this._httpRequest.isBodyPresent()?this._httpRequest:this._httpRequest.body({})},e.supportedExtensions=["doc","docx","odt","rtf","txt","htm","html"],e.supportedExtensionsRE=new RegExp("\\.("+e.supportedExtensions.join("|")+")$","i"),e}();e.Create=t;var n=function(){function e(e){this._str=e}return e.contains=function(t){return new e(t)},e.all=function(){return new e("")},e.prototype.toSearchString=function(){return this._str},e}();e.Search=n}(t.DoxRequest||(t.DoxRequest={}))},509:function(e,t,n){"use strict";function r(e){return e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(101),o=n(340),s=n(7),a=n(503),c=n(2);t.literalArray=r;!function(e){function t(e){return new i.Type("Set<"+e.name+">",function(e){return e instanceof Set},function(t,n){return i.array(e).validate(t,n).map(function(e){return new Set(e)})},function(e){return Array.from(e)})}function n(e){return new i.Type("option:"+e.name,function(e){return e instanceof s.Option},function(t,n){return void 0===t||null===t?o.either.right(s.None):e.validate(t,n).map(s.Some)},function(e){return e.getOrElse(void 0)})}function u(e,t){return i.union(t.map(function(e){return i.literal(e)}),e+":string")}function l(e,t){return new i.Type("withDefault("+JSON.stringify(t)+"):"+e.name,e.is,function(n,r){return e.validate(a.emptyValue(n)?t:n,r)},e.encode)}function d(e,t){return new i.Type("fallback("+JSON.stringify(t)+"):"+e.name,e.is,function(n,r){var i=e.validate(n,r);return i.isLeft()?o.either.right(t):i},e.encode)}function p(e){var t=e.replace(/\w+\(.*?\):/,"");if("{"===t[0]&&"}"===t[t.length-1])return"object";var n=t.split(":").pop();return 0===n.indexOf("Array<")?"Array":0===n.indexOf("Set<")?"Set":0===n.indexOf("StringEnum<")?"StringEnum":(c.invariant(y.indexOf(n)>-1,"unsupported prop type "+e),n)}function h(e,t){var n=p(e);switch(n){case"boolean":return t.getBool();case"string":case"StringEnum":return t.getStr();case"number":return t.getNum();case"Array":case"Set":return t.getArray();case"object":case"Dictionary":return t.getObject();default:return c.assertNever(n)}}function f(e,t){void 0===t&&(t="("+e.map(function(e){return e.name}).join(" & ")+")");var n=e.length;return new i.IntersectionType(t,function(t){return e.every(function(e){return e.is(t)})},function(t,r){for(var o={},s=[],a=0;a<n;a++){e[a].validate(t,r).fold(function(e){return _(s,e)},function(e){return Object.assign(o,e)})}return s.length?i.failures(s):i.success(o)},function(t){return a.Properties.of.apply(a.Properties,e.map(function(e){return e.encode(t)}))},e)}function g(e,t){return i.keyof(Object.values(e).reduce(function(e,t){return e[t]=null,e},{}),"StringEnum<"+t+">")}e.set=t,e.option=n,e.literalUnion=u,e.withDefault=l,e.fallback=d;var m=function(e){return"{ "+Object.keys(e).map(function(t){return t+": "+e[t].name}).join(", ")+" }"},_=function(e,t){return Array.prototype.push.apply(e,t)},y=r(["boolean","string","number","Array","Set","object","Dictionary","StringEnum"]);e.propetries=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=m(e)),new i.InterfaceType(n,function(t){if(!a.Properties.is(t))return!1;for(var n in e)if(!e[n].is(t[n]))return!1;return!0},function(n,r){if(!Array.isArray(n)||n.some(function(e){return!a.Properties.is(e)}))return i.failure(n,r);var o={},s=[];for(var c in e)!function(c){var u=""!==t?t+":"+c:c,l=a.Properties.find.apply(a.Properties,[u].concat(n)),d=e[c],p=h(d.name,l);d.validate(p,i.appendContext(r,c,d)).fold(function(e){return _(s,e)},function(e){o[c]=e})}(c);return s.length?i.failures(s):i.success(o)},function(n){var r={};for(var i in e){var o=""!==t?t+":"+i:i,s=e[i],c=n[i];s.is(c)&&(r[o]=e[i].encode(c))}return a.Properties.of(r)},e)},e.combineProperties=f,e.createStringEnum=g}(t.Type||(t.Type={}))},510:function(e,t,n){"use strict";function r(e){return e?e[0].toUpperCase()+e.slice(1):""}function i(e){return e?e.replace(/(?:^|[-_\s])(\w)/g,function(e,t){return t?t.toUpperCase():""}):""}function o(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function s(e,t){if(void 0===e&&(e=""),!e||"undefined"==typeof window)return"";if(!t)return b.sanitize(e);var n=Object.assign({},t.allowedTags?{ALLOWED_TAGS:t.allowedTags}:{},t.sanitizeDom?{SANITIZE_DOM:t.sanitizeDom}:{});return b.sanitize(e,n)}function a(e,t){var n=e.match(t);return n&&n[1]}function c(e){return e.split(/\s+/)[0]}function u(e){if(!e)return 0;var t=e.replace(/[\W\d]/gi," ").replace(/\s+/gi," ").trim().split(" ");return 1===t.length&&""===t[0]?0:t.length}function l(e){return w.decode(e).length}function d(e){return e.replace(/\t/g,"    ")}function p(e,t,n){return 1===e?t:n}function h(e,t){return void 0===t&&(t="en-US"),e.toLocaleString(t,{minimumFractionDigits:2,maximumFractionDigits:2})}function f(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function g(e,t,n){return t>>=0,n=String(n||" "),e.length>t?String(e):(t-=e.length,t>n.length&&(n+=n.repeat(t/n.length)),n.slice(0,t)+String(e))}function m(e){var t=document.createElement("div");return t.innerHTML=s(e),t.textContent||t.innerText||""}function _(e){if(!e)return"";var t=document.createElement("a");return t.href=e,t.hostname}function y(e){return e&&(e<48||58===e||59===e||63===e)||!1}function v(e){if(e<0)throw new TypeError("Length should not be negative: "+e);return Array.from({length:e},function(){return E.charAt(Math.random()*E.length)}).join("")}Object.defineProperty(t,"__esModule",{value:!0});var b=n(779),w=n(125);t.nbsp=String.fromCharCode(160),t.capitalize=r,t.camelize=i,t.toTitleCase=o,t.sanitize=s,t.getFirstMatch=a,t.getFirstWord=c,t.wordCount=u,t.charCount=l,t.replaceTabsWithSpaces=d,t.pluralize=p,t.formatPrice=h,t.escapeRegExp=f,t.padStart=g,t.decodeHTMLCodes=m,t.urlToDomain=_,t.isBreakWordChar=y;var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.alphanumeric=v},511:function(e,t,n){n(785),e.exports=n(1326)},512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1306);var r=n(1310),i=n(128),o=new i.EnvironmentImpl(i.EnvironmentInfo.parse());r.initializeMonitoring(o);var s=n(8),a=n(518),c=n(1282);a.render(s.createElement(c.Main,{environment:o}),document.getElementById("page"))},513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(6),s=n(32),a=n(781);t.DefaultSVGLinearGradient=function(){return i.createElement("svg",null,i.createElement("defs",null,i.createElement("linearGradient",{id:"iconGradient",x1:"0",x2:"1",y1:"0",y2:"1"},i.createElement("stop",{offset:"0%",stopColor:"#cdd1e1"}),i.createElement("stop",{offset:"100%",stopColor:"#9299b5"}))))};var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.createElement(o.F.i,r.__assign({},o.classes(a.icon,this.props.className),{"data-disabled":this.context.disabled,"data-hovered":this.context.hovered,"data-active":this.context.active}),i.createElement("svg",{width:this.props.width,viewBox:this.props.viewBox,className:this.props.dontScale?"":a.holder},this.props.children))},t.contextTypes=s.ElementState.contextTypes,t}(i.Component);t.IconWrapper=c;!function(e){e.Library=function(e){var t=e.className,n=e.width,r=void 0===n?24:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 24 16"},i.createElement("path",{d:"M22.16 8.5L18.44 2c-.36-.62-1.02-1-1.74-1H7.28c-.7 0-1.37.38-1.73 1L1.72 8.5h5.96c.27 0 .5.22.5.5 0 1.74 1.85 3.5 3.82 3.5 1.92 0 3.53-1.7 3.53-3.5 0-.28.22-.5.5-.5h6.13zm.34 1h-6c-.27 2.15-2.2 4-4.5 4-2.33 0-4.5-1.9-4.8-4H1.5V13c0 1.1.9 2 2 2h17c1.1 0 2-.9 2-2V9.5zM7.28 0h9.42c1.08 0 2.07.58 2.6 1.5l4.13 7.2c.05.1.07.17.07.26V13c0 1.66-1.34 3-3 3h-17c-1.66 0-3-1.34-3-3V8.74c0-.08.02-.17.07-.25L4.7 1.47C5.22.56 6.2 0 7.27 0z",stroke:"none"}))},e.Plagiarism=function(e){var t=e.className,n=e.width,r=void 0===n?19:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 20 16"},i.createElement("path",{d:"M11.1 7.38c-.27 0-.48-.2-.48-.48V.48c0-.27.2-.48.47-.48h6.57c.27 0 .48.2.48.48V6.9c0 4.5-1.65 7.37-5.57 9.06-.23.1-.5 0-.6-.2l-1.4-2.6c-.15-.23-.04-.54.2-.65 2.35-1.05 3.1-2.3 3.17-5.12H11.1zm6.1-.48V.96h-5.63v5.46h2.87c.26 0 .47.22.47.48 0 3.32-.78 5-3.25 6.26l.94 1.74c3.26-1.54 4.6-4 4.6-8zm-13.75.48H.6c-.28 0-.5-.2-.5-.48V.48C.1.2.33 0 .6 0h6.56c.27 0 .48.2.48.48V6.9c0 4.5-1.65 7.37-5.57 9.06-.23.1-.5 0-.6-.2l-1.4-2.6c-.14-.23-.04-.54.2-.65 2.35-1.05 3.1-2.3 3.18-5.12zM6.7 6.9V.96H1.05v5.46h2.87c.26 0 .48.22.48.48 0 3.32-.8 5-3.26 6.26l.95 1.74c3.25-1.54 4.6-4 4.6-8z",stroke:"none"}))},e.PlagiarismPublication=function(e){var t=e.className,n=e.width,r=void 0===n?16:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 16 16"},i.createElement("path",{d:"M16 5.528V16H2c-1.105 0-2-.895-2-2V3.5l.05.048C.017 3.37 0 3.188 0 3c0-1.657 1.343-3 3-3h12.5c.412 0 .647.47.4.8-.563.75-.838 1.482-.838 2.2 0 .718.275 1.45.838 2.2.076.102.107.217.1.328zM14.588 1H3c-1.105 0-2 .895-2 2s.895 2 2 2h11.588c-.348-.658-.525-1.326-.525-2 0-.674.177-1.342.525-2z",fillRule:"nonzero",fill:"#A6ADC9",stroke:"none"}))},e.Proofread=function(e){var t=e.className,n=e.width,r=void 0===n?24:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 24 21"},i.createElement("path",{d:"M13.97 15.08c2.5 0 4.56-2.03 4.56-4.55 0-2.5-2.06-4.53-4.56-4.53-2.5 0-4.55 2.03-4.55 4.55 0 2.5 2.06 4.53 4.55 4.53zm-.62 7.9L14.3 24H7.58C6.17 24 5 22.84 5 21.43v-.7c0-2.82 2.2-5.2 5-5.4.14 0 .3.06.4.16.98.9 2.24 1.43 3.57 1.43 1.34 0 2.63-.52 3.58-1.44.1-.1.23-.17.38-.17 2.05.15 3.78 1.45 4.56 3.24l-.8.83c-.5-1.6-1.9-2.8-3.6-3-1.14 1-2.58 1.56-4.13 1.56-1.54 0-2.98-.54-4.1-1.57-2.17.27-3.84 2.12-3.84 4.33v.7c0 .85.7 1.54 1.54 1.54h5.78zm.62-15.95c1.93 0 3.53 1.57 3.53 3.52 0 1.93-1.57 3.52-3.53 3.52-1.92 0-3.52-1.56-3.52-3.52 0-1.95 1.6-3.52 3.52-3.52zm3.4 14.66l3.45 3.78 6.8-7.5c.2-.2.5-.2.72-.02.2.18.22.5.03.7l-7.18 7.9c-.2.22-.55.22-.75 0l-3.82-4.2c-.2-.2-.17-.52.03-.7.2-.2.52-.18.7.03z",transform:"translate(-5 -6)",stroke:"none"}))},e.Exit=function(e){var t=e.className,n=e.width,s=void 0===n?14:n;return i.createElement(c,r.__assign({},o.classes(a.exitIcon,t),{width:s,viewBox:"0 0 14 10"}),i.createElement("path",{d:"M8.08 0l4.96 4.96L8 10M1.08 0l4.96 4.96L1 10"}))},e.More=function(e){var t=e.className,n=e.width,r=void 0===n?10:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 10 6"},i.createElement("path",{d:"M5 4.3L.85.14c-.2-.2-.5-.2-.7 0-.2.2-.2.5 0 .7L5 5.7 9.85.87c.2-.2.2-.5 0-.7-.2-.2-.5-.2-.7 0L5 4.28z",stroke:"none"}))},e.Download=function(e){var t=e.className,n=e.width,r=void 0===n?16:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 16 18"},i.createElement("path",{d:"M7.5 11.06V1c0-.27.22-.5.5-.5s.5.23.5.5v10.04l3.15-3.14c.2-.2.5-.2.7 0 .2.2.2.5 0 .7L8 12.97 3.64 8.62c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l3.15 3.14zm-7 2c0-.26.22-.5.5-.5s.5.24.5.5v2.95c0 .28.22.5.5.5h12c.28 0 .5-.22.5-.5v-3c0-.28.22-.5.5-.5s.5.22.5.5v3c0 .84-.67 1.5-1.5 1.5H2C1.2 17.5.5 16.84.5 16v-2.93z",stroke:"none"}))},e.Print=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 18 18"},i.createElement("path",{d:"M2.5 3.5V1c0-.28.22-.5.5-.5h12c.28 0 .5.22.5.5v2.5H17c.28 0 .5.22.5.5v8c0 .28-.22.5-.5.5h-1.5V17c0 .28-.22.5-.5.5H3c-.28 0-.5-.22-.5-.5v-4.5H1c-.28 0-.5-.22-.5-.5V4c0-.28.22-.5.5-.5h1.5zm0 8V8c0-.28.22-.5.5-.5h12c.28 0 .5.22.5.5v3.5h1v-7h-15v7h1zm1-3v8h11v-8h-11zm0-7v2h11v-2h-11zm2.5 10c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h6c.28 0 .5.22.5.5s-.22.5-.5.5H6zm0 3c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4c.28 0 .5.22.5.5s-.22.5-.5.5H6z",stroke:"none"}))},e.Copy=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 18 18"},i.createElement("path",{d:"M13.5 7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h2.38c.9 0 1.62.73 1.62 1.62v7.76c0 .9-.73 1.62-1.62 1.62H8.12c-.9 0-1.62-.73-1.62-1.62V13.5c0-.28.22-.5.5-.5s.5.22.5.5v2.38c0 .34.28.62.62.62h7.76c.34 0 .62-.28.62-.62V8.12c0-.34-.28-.62-.62-.62H13.5zM.5 2C.5 1.17 1.18.5 2 .5h8c.83 0 1.5.68 1.5 1.5v8c0 .83-.68 1.5-1.5 1.5H2c-.83 0-1.5-.68-1.5-1.5V2zm1 0v8c0 .27.23.5.5.5h8c.27 0 .5-.23.5-.5V2c0-.27-.23-.5-.5-.5H2c-.27 0-.5.23-.5.5z",stroke:"none"}))},e.Share=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 18 18"},i.createElement("path",{d:"M15.7 5.45h-1.77c-4.33 0-7.85 3.5-7.85 7.83 0 .28-.22.5-.5.5-.27 0-.5-.22-.5-.5 0-4.88 3.97-8.83 8.85-8.83h1.84L12.6 1.28c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l4.35 4.34-4.36 4.36c-.2.2-.52.2-.7 0-.2-.2-.2-.5 0-.7l3.1-3.13zM.5 13.08c0-.28.22-.5.5-.5s.5.22.5.5v2.94c0 .27.22.5.5.5h12c.28 0 .5-.23.5-.5v-3c0-.3.22-.5.5-.5s.5.2.5.5v3c0 .82-.67 1.5-1.5 1.5H2C1.2 17.5.5 16.83.5 16v-2.94z",stroke:"none"}))},e.Stats=function(e){var t=e.className,n=e.width,r=void 0===n?16:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 16 16"},i.createElement("path",{d:"M2.5 12h-1V5h1v7zm-1 0V5c0-.67 1-.67 1 0v7c0 .67-1 .67-1 0zm4 0V6c0-.67 1-.67 1 0v6c0 .67-1 .67-1 0zm4 0V4c0-.67 1-.67 1 0v8c0 .67-1 .67-1 0zm4 0V1.14c0-.67 1-.67 1 0V12c0 .67-1 .67-1 0zm-13 3.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h15c.28 0 .5.22.5.5s-.22.5-.5.5H.5z",stroke:"none"}))},e.Star=function(e){var t=e.className,n=e.width,s=void 0===n?16:n;return i.createElement(c,r.__assign({},o.classes(t,a.starIcon),{width:s,viewBox:"0 0 16 16"}),i.createElement("path",{d:"M6.65 10.8l-4.02 2.72L4.03 9c.08-.24 0-.5-.2-.65L-.03 5.5l4.86-.1c.24 0 .45-.16.53-.38l1.6-4.5 1.62 4.5c.08.22.3.38.54.38l4.85.1-3.85 2.85c-.2.15-.28.4-.2.64l1.4 4.52-4.02-2.7c-.2-.14-.46-.14-.65 0z",transform:"translate(1 1)",strokeLinejoin:"round"}))},e.New=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 18 18"},i.createElement("path",{d:"M9.5 8.5H14c.28 0 .5.22.5.5s-.22.5-.5.5H9.5V14c0 .28-.22.5-.5.5s-.5-.22-.5-.5V9.5H4c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4.5V4c0-.28.22-.5.5-.5s.5.22.5.5v4.5zm-.5 9C4.3 17.5.5 13.7.5 9S4.3.5 9 .5s8.5 3.8 8.5 8.5-3.8 8.5-8.5 8.5zm0-1c4.14 0 7.5-3.36 7.5-7.5 0-4.14-3.36-7.5-7.5-7.5-4.14 0-7.5 3.36-7.5 7.5 0 4.14 3.36 7.5 7.5 7.5z",stroke:"none"}))},e.Dict=function(e){var t=e.className,n=e.width,r=void 0===n?17:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 17 21"},i.createElement("path",{d:"M1.5 15.26c.53-.47 1.23-.76 2-.76h9V10c0-.28.22-.5.5-.5s.5.22.5.5v5c0 .28-.22.5-.5.5H3.5c-1.1 0-2 .9-2 2s.9 2 2 2H13c.28 0 .5.22.5.5s-.22.5-.5.5H3.5c-1.66 0-3-1.34-3-3V5.14c0-.9.66-1.64 1.5-1.64h5c.28 0 .5.22.5.5s-.22.5-.5.5H2c-.26 0-.5.27-.5.64v10.12zm11-11.76V1c0-.28.22-.5.5-.5s.5.22.5.5v2.5H16c.28 0 .5.22.5.5s-.22.5-.5.5h-2.5V7c0 .28-.22.5-.5.5s-.5-.22-.5-.5V4.5H10c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h2.5zM3.5 18c-.28 0-.5-.22-.5-.5s.22-.5.5-.5H12c.28 0 .5.22.5.5s-.22.5-.5.5H3.5z",stroke:"none"}))},e.Ignore=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 18 19"},i.createElement("path",{d:"M5 3.5v-1c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2v1h4c.28 0 .5.22.5.5s-.22.5-.5.5h-1.53l-.8 11.2c-.12 1.58-1.42 2.8-3 2.8H6.33c-1.58 0-2.88-1.22-3-2.8l-.8-11.2H1C.72 4.5.5 4.28.5 4s.22-.5.5-.5h4zm-1.46 1l.8 11.14c.07 1.05.94 1.86 2 1.86h5.33c1.05 0 1.92-.8 2-1.86l.8-11.14H3.53zM6 2.5v1h6v-1c0-.55-.45-1-1-1H7c-.55 0-1 .45-1 1zM6.75 7c0-.28.22-.5.5-.5s.5.22.5.5v7.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5V7zm3.5 0c0-.28.22-.5.5-.5s.5.22.5.5v7.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5V7z",stroke:"none"}))},e.Report=function(e){var t=e.className,n=e.width,r=void 0===n?15:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 15 17"},i.createElement("path",{d:"M1.03 2.57V9.8h12.19l-2.96-3c-.2-.2-.2-.5-.02-.7l3.08-3.53H1.06h-.03zm0-1.04h13.43c.43 0 .67.53.38.86l-3.5 4 3.48 3.56c.32.33.1.88-.37.88H1.05h-.02v5.65c0 .27-.23.5-.5.5-.3 0-.53-.23-.53-.5V.5C0 .24.23 0 .52 0c.28 0 .5.23.5.5v1.03z",stroke:"none"}))},e.Expand=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 18 5"},i.createElement("path",{d:"M2.5 4.5c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-1c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm6.5 1c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-1c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm6.5 1c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-1c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1z",stroke:"none"}))},e.Reference=function(e){var t=e.className,n=e.width,r=void 0===n?13:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 13 19"},i.createElement("path",{d:"M3 2v1h7V2h1.5c.83 0 1.5.67 1.5 1.5v14c0 .83-.68 1.5-1.5 1.5h-10C.67 19 0 18.33 0 17.5v-14C0 2.67.68 2 1.5 2H3zm8.5 1h-10c-.27 0-.5.23-.5.5v14c0 .28.22.5.5.5h10c.27 0 .5-.23.5-.5v-14c0-.28-.22-.5-.5-.5zm-7.65 7.6l1.68 1.7 3.62-3.65c.2-.2.5-.2.7 0 .2.2.2.5 0 .7L5.53 13.7l-2.38-2.4c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0zM9 3.5v-1c0-.56-.45-1-1-1H5c-.56 0-1 .44-1 1v1h5zm-6-1c0-1.1.9-2 2-2h3c1.1 0 2 .9 2 2V4c0 .28-.23.5-.5.5h-6c-.27 0-.5-.22-.5-.5V2.5z",transform:"translate(0 -.5)",stroke:"none"}))},e.Yes=function(e){var t=e.className,n=e.width,s=void 0===n?12:n;return i.createElement(c,r.__assign({},o.classes(t,a.yesIcon),{width:s,viewBox:"0 0 12 10"}),i.createElement("path",{d:"M.54 4.35l2.98 3.12L9.46.53",fill:"none",fillRule:"evenodd",strokeLinecap:"round",transform:"translate(1 1)"}))},e.Checkmark=function(e){var t=e.className,n=e.width,r=void 0===n?32:n;return i.createElement(c,{width:r,className:t,viewBox:"0 0 33 32"},i.createElement("defs",{key:"defs"},i.createElement("polyline",{id:"path-1",points:"7.35 14.35 11.9839764 19.5363636 27.65 3.5"})),i.createElement("g",{key:"g",id:"Zero-states",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"After-fixing-last-issue",transform:"translate(-1296.000000, -17.000000)"},i.createElement("g",{id:"Group",transform:"translate(1298.000000, 19.000000)"},i.createElement("circle",{id:"Oval",stroke:"#F1F2FA",strokeWidth:"3",cx:"14",cy:"14",r:"14"}),i.createElement("g",{id:"Path",strokeLinecap:"round"},i.createElement("use",{stroke:"#FFFFFF",strokeWidth:"6",xlinkHref:"#path-1"}),i.createElement("use",{stroke:"#15C39A",strokeWidth:"3",xlinkHref:"#path-1"}))))))},e.Helpfull=function(e){var t=e.className,n=e.width,r=void 0===n?12:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 10 12"},i.createElement("path",{d:"M1.54 5.346L4.522 8.47l5.938-6.938",strokeWidth:"1.5",stroke:"#4C7AF1",fill:"none",fillRule:"evenodd",strokeLinecap:"round"}))},e.Close=function(e){var t=e.className,n=e.width,s=void 0===n?11:n;return i.createElement(c,r.__assign({},o.classes(t,a.closeIcon),{width:s,viewBox:"0 0 11 10"}),i.createElement("path",{d:"M1.1.5l7.06 7.07M8.16.5L1.1 7.57",fill:"none",fillRule:"evenodd",strokeLinecap:"round",transform:"translate(1 1)"}))},e.QuestionMark=function(e){var t=e.className,n=e.width,s=void 0===n?24:n;return i.createElement(c,r.__assign({},o.classes(t),{width:s,viewBox:"0 0 24 24"}),i.createElement("g",{transform:"translate(1 1)",fillRule:"evenodd"},i.createElement("circle",{cx:"11",cy:"11",r:"11",fillOpacity:"0"}),i.createElement("text",{strokeWidth:"0",fontSize:"15px",fontStyle:"normal",transform:"translate(7, 16.7)"},"?")))},e.Info=function(e){var t=e.className,n=e.width,r=void 0===n?13:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 13 13"},i.createElement("path",{d:"M6.5 12.5c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-1c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm0-7c-.4 0-.75-.34-.75-.75 0-.4.34-.75.75-.75.4 0 .75.34.75.75 0 .4-.34.75-.75.75zM6 6c0-.28.22-.5.5-.5s.5.22.5.5v3.5c0 .28-.22.5-.5.5S6 9.78 6 9.5V6z",stroke:"none"}))},e.All=function(e){var t=e.className,n=e.width,r=void 0===n?25:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 25 13"},i.createElement("path",{d:"M1.35 6.37l4.82 4.82L16.44.92c.2-.2.5-.2.7 0 .2.2.2.5 0 .7L6.54 12.25c-.2.2-.52.2-.72 0L.65 7.08c-.2-.2-.2-.52 0-.7.2-.2.5-.2.7 0zM20 4.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4.5c.28 0 .5.22.5.5s-.22.5-.5.5H20zm-3 3c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4.5c.28 0 .5.22.5.5s-.22.5-.5.5H17zm-3 3c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4.5c.28 0 .5.22.5.5s-.22.5-.5.5H14z",stroke:"none"}))},e.SynonymLoader=function(e){var t=e.className,n=e.width,r=void 0===n?14:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 14 14"},i.createElement("circle",{cx:"7",cy:"7",r:"6",stroke:"#A6ADC9",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeDasharray:"25,300",strokeLinejoin:"round"}))},e.Undo=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 18 12"},i.createElement("g",{fill:"none",stroke:"#E4E6F2",strokeLinecap:"round"},i.createElement("path",{d:"M4.85498.551514l-3.5 3.49659 3.49435 3.50341"}),i.createElement("path",{d:"M2.00033 4h11.07438c2.03911 0 3.692136 1.534823 3.692136 3.41954 0 1.888558-1.65961 3.419538-3.692137 3.419538h-2.921497"})))},e.NotificationError=function(e){var t=e.className,n=e.width,r=void 0===n?26:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 26 26"},i.createElement("g",{stroke:"none"},i.createElement("path",{fill:"#FF6C83",d:"M18.943355.651473l6.405172 6.405173c.375073.375072.585786.88378.585786 1.414213v9.05828c0 .530432-.210713 1.03914-.585786 1.414213l-6.405172 6.405172c-.375073.375073-.88378.585786-1.414214.585786H8.47086c-.530434 0-1.039142-.210712-1.414215-.585785l-6.405172-6.40517C.2764 18.56828.065687 18.059575.065687 17.52914V8.47086c0-.530434.210713-1.039142.585786-1.414215L7.056646.651473C7.431718.2764 7.940426.065687 8.47086.065687h9.05828c.530434 0 1.039142.210713 1.414215.585786z"}),i.createElement("g",{fill:"#FFF",transform:"translate(12 7)"},i.createElement("rect",{width:"2",height:"7",rx:"1"}),i.createElement("circle",{cx:"1",cy:"10.5",r:"1"}))))},e.NotificationWarning=function(e){var t=e.className,n=e.width,r=void 0===n?28:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 28 25"},i.createElement("g",{stroke:"none"},i.createElement("path",{fill:"#F6BC41",d:"M15.738773 1.693563l11.3456 19.98132c.5454.96053.20887 2.181324-.75166 2.726722-.301054.170942-.641327.26081-.98753.26081h-22.6912c-1.10457 0-2-.89543-2-2 0-.346203.089867-.686476.26081-.98753l11.3456-19.981323c.545397-.96053 1.766192-1.29706 2.72672-.75166.31377.17816.5735.43789.75166.75166z"}),i.createElement("g",{fill:"#FFF",transform:"translate(13 8)"},i.createElement("rect",{width:"2",height:"7",rx:"1"}),i.createElement("circle",{cx:"1",cy:"10.5",r:"1"}))))},e.NotificationInfo=function(e){var t=e.className,n=e.width,r=void 0===n?24:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 24 24"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none"},i.createElement("circle",{cx:"12",cy:"12",r:"11.5",fill:"#00CDA3"}),i.createElement("path",{stroke:"#FFF",strokeWidth:"2",d:"M7.54 12.81l3.343 3.5 6.657-7.78",strokeLinecap:"round"})))},e.OnboardingTriangle=function(e){var t=e.className,n=e.width,r=void 0===n?12:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 12 14"},i.createElement("path",{d:"M6 4l10 12H-4",fill:"#5A5F76",fillRule:"evenodd",fillOpacity:".97",stroke:"none"}))},e.Grammarly=function(e){var n=e.className,s=e.width,u=void 0===s?"100%":s;return i.createElement(c,r.__assign({},o.classes(n,a.gIcon),{width:u,viewBox:"0 0 24 24",dontScale:!0}),i.createElement("circle",{stroke:"none",fill:"#15C39A",cx:"12",cy:"12",r:"11"}),i.createElement(t,{transform:"scale(.8) translate(6.75 6.5)"}))},e.GrammarlyInverse=function(e){var t=e.className,n=e.width,r=void 0===n?"100%":n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 64 64",dontScale:!0},i.createElement("path",{d:"M32 64a32 32 0 1 1 0-64 32 32 0 0 1 0 64zm6.3-27.66c-1.33 0-2.4 1.2-2.14 2.58.18 1.04 1.17 1.77 2.24 1.77h3.36l1.95-.26c-3.12 4.55-8.51 6.66-14.42 5.75-4.8-.76-8.95-4-10.69-8.56-3.95-10.33 3.6-20.19 13.4-20.19 5.13 0 9.6 3 12.18 6.6v.09a2.15 2.15 0 0 0 3.64-2.3h.02A18.84 18.84 0 0 0 30.7 13.2a18.95 18.95 0 0 0-17.46 17.7 18.7 18.7 0 0 0 18.79 19.79c5.64 0 10.69-2.47 14.15-6.45l-.42 2.29v2.05c0 1.07.73 2.06 1.77 2.24 1.38.26 2.58-.8 2.58-2.13V36.32H38.3v.02z",fill:"#FFF",stroke:"none"}))};var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.createElement("path",r.__assign({d:"M11.18 10.273c-.593 0-1.068.53-.952 1.14.08.46.522.784.997.784h1.496l.87-.115c-1.39 2.016-3.79 2.95-6.423 2.546-2.144-.334-3.988-1.774-4.765-3.79-1.762-4.575 1.6-8.942 5.97-8.942 2.285 0 4.28 1.325 5.427 2.927v.034c.3.438.903.565 1.344.254.417-.287.533-.83.278-1.266h.01C13.846 1.39 11.006-.19 7.793.018 3.633.318.247 3.705.015 7.853c-.278 4.828 3.57 8.768 8.37 8.768 2.516 0 4.766-1.093 6.307-2.856l-.184 1.014v.91c0 .472.325.91.788.99.615.116 1.148-.356 1.148-.944V10.26H11.18v.013z",fill:"#FFF",stroke:"none",fillRule:"evenodd"},this.props))},t.size=16.5,t}(i.PureComponent);e.GPath=t,e.Rank=function(e){var t=e.className,n=e.width,r=void 0===n?29:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 29 28"},i.createElement("g",{transform:"translate(1 -1)",fill:"none",fillRule:"evenodd"},i.createElement("path",{stroke:"#B0B9DB",strokeLinecap:"round",strokeLinejoin:"round",d:"M1.73 21.53l8.02-9.18 7.65 4.6 8.02-8.42"}),i.createElement("path",{d:"M24.73 13.35c0-.2.17-.38.38-.38.22 0 .4.17.4.38v14.42c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38V13.35zm-8 8c0-.2.17-.38.38-.38.22 0 .4.17.4.38v7.1c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38v-7.1zm-7-4c0-.2.17-.38.38-.38.22 0 .4.17.4.38v10.92c0 .22-.18.4-.4.4-.2 0-.37-.18-.37-.4V17.35zm-8 7.85c0-.2.17-.38.38-.38.22 0 .4.17.4.38v2.9c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38v-2.9zm0-23.85c0-.2.17-.38.38-.38.22 0 .4.17.4.38v14.42c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38V1.35zm8 0c0-.2.17-.38.38-.38.22 0 .4.17.4.38v7.1c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38v-7.1zm7 0c0-.2.17-.38.38-.38.22 0 .4.17.4.38v10.92c0 .22-.18.4-.4.4-.2 0-.37-.18-.37-.4V1.35zm8 0c0-.2.17-.38.38-.38.22 0 .4.17.4.38v2.9c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38v-2.9z",fill:"#E4E6F2",fillRule:"nonzero"}),i.createElement("circle",{stroke:"#BAC1DD",fill:"#FFF",cx:"2.11",cy:"21.14",r:"1.91"}),i.createElement("circle",{stroke:"#BAC1DD",fill:"#FFF",cx:"9.75",cy:"12.73",r:"1.91"}),i.createElement("circle",{stroke:"#BAC1DD",fill:"#FFF",cx:"17.4",cy:"16.56",r:"1.91"}),i.createElement("circle",{stroke:"#BAC1DD",fill:"#FFF",cx:"24.85",cy:"8.91",r:"1.91"})))},e.Paid=function(e){var t=e.className,n=e.width,r=void 0===n?22:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 22 17"},i.createElement("path",{d:"M10.28 8h-.05c-.12 0-.23.07-.3.16l-4.8 5.28c-.18.18-.17.5 0 .66l10.1 10.1c.17.16.5.16.67 0L26 14.1c.16-.17.17-.48 0-.66l-4.8-5.28c-.1-.1-.22-.16-.36-.16H10.28zm.2.96H13l-2.05 4.32H6.55l3.94-4.32zm3.57 0h3.02l2.06 4.32H12l2.05-4.32zm4.08 0h2.5l3.94 4.32H20.2l-2.07-4.32zm-11.5 5.28h4.3l3.2 7.5-7.5-7.5zm5.33 0h7.2l-3.6 8.38-3.6-8.38zm8.24 0h4.3l-7.5 7.5 3.2-7.5z",transform:"translate(-5 -8)",fillRule:"nonzero",stroke:"none"}))},e.PaidGraident=function(e){var t=e.className,n=e.width,s=void 0===n?19:n;return i.createElement(c,r.__assign({},o.classes(t,a.clearColors),{width:s,viewBox:"0 0 19 14"}),i.createElement("linearGradient",{x1:"101.836%",y1:"141.029%",x2:"-16.028%",y2:"-53.372%",id:"gradientColor"},i.createElement("stop",{stopColor:"#fbcc3e",offset:"0%"}),i.createElement("stop",{stopColor:"#fa903b",offset:"100%"})),i.createElement("path",{d:"M5.025 5.91h-.038c-.1.01-.197.06-.264.136L.6 10.578c-.14.155-.133.42.014.567l8.655 8.652c.15.15.426.15.58 0l8.654-8.652c.146-.148.152-.412.013-.567l-4.122-4.532c-.076-.084-.19-.135-.303-.135H5.025zm.18.825H7.35l-1.765 3.708H1.83l3.376-3.708zm3.06 0h2.588l1.765 3.708H6.5l1.764-3.708zm3.503 0h2.144l3.375 3.708h-3.755l-1.764-3.708zm-9.866 4.532H5.58l2.755 6.43-6.433-6.43zm4.572 0h6.17l-3.085 7.185-3.086-7.185zm7.065 0h3.676l-6.434 6.43 2.757-6.43z",transform:"translate(-.5 -5.91)",fillRule:"nonzero",fill:"url(#gradientColor)"}))},e.CitationStyle=function(e){var t=e.className,n=e.width,r=void 0===n?8:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 8 3"},i.createElement("path",{d:"M1 0l3 3 3-3",fill:"none",fillRule:"evenodd",strokeLinecap:"round"}))},e.Insights=function(e){var t=e.className,n=e.width,r=void 0===n?32:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 32 32"},i.createElement("g",{stroke:"#A6ADC9",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},i.createElement("path",{d:"M7 22l5-8.5 7 5.5 6-11"}),i.createElement("circle",{fill:"#FFF",cx:"7",cy:"22",r:"2"}),i.createElement("circle",{fill:"#FFF",cx:"12",cy:"13.5",r:"2"}),i.createElement("circle",{fill:"#FFF",cx:"19",cy:"19",r:"2"}),i.createElement("circle",{fill:"#FFF",cx:"25",cy:"8",r:"2"})))},e.GoalsEmpty=function(e){var t=e.className,n=e.width,r=void 0===n?32:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 32 32"},i.createElement("g",{stroke:"#A6ADC9",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},i.createElement("circle",{cx:"16",cy:"16",r:"8"}),i.createElement("path",{d:"M9 27l2-4m12 4l-2-4m-5-7l9-9V4m0 3h3"}),i.createElement("circle",{cx:"16",cy:"16",r:"4"})))},e.GoalsPartial=function(e){var t=e.className,n=e.width,r=void 0===n?32:n,o=e.percentage;return i.createElement(c,{className:t,width:r,viewBox:"0 0 32 32"},i.createElement("circle",{stroke:"#F1F2FA",fill:"none",strokeWidth:"4",cx:"16",cy:"16",r:"7"}),i.createElement("circle",{stroke:"#A6ADC9",fill:"none",transform:"rotate(-90 16 16)",strokeDashoffset:2*Math.PI*7*(100-o)/100,strokeDasharray:"43.98 43.98",strokeWidth:"4",cx:"16",cy:"16",r:"7"}))},e.GoalsComplete=function(e){var t=e.className,n=e.width,r=void 0===n?32:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 32 32"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("circle",{stroke:"#F1F2FA",strokeWidth:"4",cx:"16",cy:"16",r:"7"}),i.createElement("circle",{stroke:"#A6ADC9",strokeWidth:"4",transform:"matrix(1 0 0 -1 0 32)",cx:"16",cy:"16",r:"7"}),i.createElement("path",{d:"M9 27l2-4m12 4l-2-4m-5-7l9-9V4m0 3h3",stroke:"#A6ADC9",strokeLinecap:"round",strokeLinejoin:"round"})))},e.Align=function(e){var t=e.className,n=e.width,r=void 0===n?11:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 11 15"},i.createElement("path",{transform:"translate(-11.000000, -9.000000)",strokeWidth:"1",stroke:"none",fillRule:"nonzero",d:"M16,13.7426407 L13.3535534,16.3890873 C13.1582912,16.5843494 12.8417088,16.5843494 12.6464466,16.3890873 C12.4511845,16.1938252 12.4511845,15.8772427 12.6464466,15.6819805 L16.0533009,12.2751263 C16.1356181,12.1119288 16.3047379,12 16.5,12 C16.5059664,12 16.5119084,12.0001045 16.5178242,12.0003118 C16.6516221,11.9955992 16.7869515,12.0443108 16.8890873,12.1464466 L20.4802536,15.7376129 C20.6755158,15.9328751 20.6755158,16.2494576 20.4802536,16.4447197 C20.2849915,16.6399819 19.968409,16.6399819 19.7731468,16.4447197 L17,13.6715729 L17,23.5 C17,23.7761424 16.7761424,24 16.5,24 C16.2238576,24 16,23.7761424 16,23.5 L16,13.7426407 Z M11.5,10 C11.2238576,10 11,9.77614237 11,9.5 C11,9.22385763 11.2238576,9 11.5,9 L21.5,9 C21.7761424,9 22,9.22385763 22,9.5 C22,9.77614237 21.7761424,10 21.5,10 L11.5,10 Z"}))},e.ToolbarCreate=function(e){var t=e.className,n=e.width,s=void 0===n?20:n;return i.createElement(c,r.__assign({},o.classes(t,a.toolbarIcon),{width:s,viewBox:"0 0 20 20"}),i.createElement("g",{transform:"translate(1 1)",strokeWidth:"1"},i.createElement("circle",{cx:"9",cy:"9",r:"9"}),i.createElement("path",{d:"M9 3.375v11.25M3.375 9h11.25"})))},e.ToolbarDownload=function(e){var t=e.className,n=e.width,s=void 0===n?20:n;return i.createElement(c,r.__assign({},o.classes(t,a.toolbarIcon),{width:s,viewBox:"0 0 20 19"}),i.createElement("path",{strokeWidth:"1",d:"M10 .4886514v12.02026821M5 8.06180972l4.99384055 4.98770004 5.00615945-5M1 14.0773926v1.9329052c0 1.1045695.8954305 2 2 2h14c1.1045695 0 2-.8954305 2-2V14.006229"}))},e.SearchQuestion=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return i.createElement(c,{className:t,width:r,viewBox:"0 0 18 17"},i.createElement("g",{transform:"translate(1 1)",stroke:"#A6ADC9",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},i.createElement("path",{d:"M10.9 10.9l4.972 4.972"}),i.createElement("circle",{cx:"6",cy:"6",r:"6"})))}}(t.Icon||(t.Icon={}))},514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(178),o=n(2),s=n(532);t.Card=s.Card;var a;!function(e){e.forceText="forceText",e.forceSidebar="forceSidebar"}(a=t.ForceAlertActionSource||(t.ForceAlertActionSource={}));!function(e){e.toAllAlerts="toAllAlerts"}(t.SpecialAlertActionSource||(t.SpecialAlertActionSource={}));var c;!function(e){e.lensview="lensview",e.advanced="advanced",e.plagiarism="plagiarism",e.proofit="proofit",e.success="success",e.closed="closed"}(c=t.LensViewType||(t.LensViewType={}));var u;!function(e){e.active="active",e.persistent="persistent",e.abstract="abstract"}(u=t.LensViewKind||(t.LensViewKind={}));!function(e){function t(e,t,n){return function(r){switch(r.currentLens.kind){case u.active:return e(r);case u.persistent:return t(r);case u.abstract:return n(r);default:return o.assertNever(r.currentLens)}}}function n(e){return t(e,e,function(){return r.None})}function s(e){return function(t){return t.currentLens.id===e}}function l(e){return e.currentLens.type===c.lensview}function d(e){return e.currentLens.kind===u.active||e.currentLens.kind===u.persistent}e.genericMapper=t,e.mapper=n,e.getActiveAlert=function(t){return e.getActiveCard(t).map(function(e){return e.activeAlert})},e.getActiveCard=n(function(e){return e.currentLens.card}),e.is=s,e.isLensview=l,e.hasCards=d,e.isForceSidebar=function(t){return(e.isLensview(t)||t.currentLens.type===c.plagiarism)&&t.alertSource===a.forceSidebar},e.isSidebarOpened=function(t){return!e.is(i.Lens.SpecialId.Closed)(t)}}(t.LensState||(t.LensState={}));!function(e){var t;!function(e){function t(e){return{state:e,cardsToAdd:[],cardsToRemove:[]}}e.fromState=t}(t=e.Event||(e.Event={}));!function(e){e.identity=function(e){return t.fromState(e)},e.override=function(e){return function(){return t.fromState(e)}}}(e.Applicator||(e.Applicator={}));!function(e){e[e.WITH_ALL_ALERTS=0]="WITH_ALL_ALERTS",e[e.WITHOUT_ALL_ALERTS=1]="WITHOUT_ALL_ALERTS"}(e.Mode||(e.Mode={}))}(t.LensStateProvider||(t.LensStateProvider={})),t.idFinder=function(e){return function(t){return t.id===e.id}}},515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(105),i=n(186);t.Notifications=i;var o=n(533),s=n(259);t.Subscription=s;var a=n(107);t.Settings=a;var c=n(180);t.Account=c;var u=n(1285),l=n(1299);t.NavigationBar=l;var d=n(1291);t.Dictionary=d;var p=n(495);t.Tooltip=p.Tooltip;var h=n(1298);t.Modal=h;var f=n(537);t.NewEditor=f;var g=n(273);t.Card=g;var m=n(88);t.Alert=m;var _=n(275);t.AlertExamples=_;var y=n(488);t.Documents=y;var v=n(1284);t.Apps=v;var b=n(525);t.Banners=b;var w=n(1300);t.ProofitBanners=w;var E=n(1297);t.Extension=E;var S=n(1287);t.Connectivity=S;var C=n(1289);t.WsConnectivity=C;var k=n(1301),T=n(1288),x=n(1292);t.DocumentUpload=x;var A=n(496);t.UpgradeHook=A.UpgradeHook;var I=n(1286),O=n(1290),D=n(126),P=n(2),N=n(127);t.defaultState={authentication:u.defaultState,userAccount:null,notifications:i.defaultState,denaliNotifications:o.defaultState,dictionary:d.defaultState,tooltip:p.Tooltip.defaultState,modal:h.defaultState,overlay:h.defaultState,newEditorPage:f.editorPageDefaultState,banner:b.defaultState,documentsPage:y.defaultState,online:!0};var M=function(){function e(e,t,n,s,a,l,g,m,_,y,v,b,w,x,A,N){var M=this;this._state=e,this._authApi=t,this._institutionApi=n,this._dapi=s,this._dictionaryApi=a,this._subscriptionApi=l,this._irbisApi=g,this._doxApi=m,this.telemetry=_,this.gnarSpec=y,this._gaClient=v,this._appConfig=b,this._router=w,this.userActivity=x,this.environment=A,this.fingerprints=N,this._nullableUserAccount=this._state.lens("userAccount"),this._userAccount=this._nullableUserAccount.filter(function(e){return null!==e}).map(function(e){return e}),this.editorTsNotifications=new i.NotificationsModelImpl(this._state.lens("notifications")),this.denaliNotifications=new o.DenaliNotificationsModelImpl(this._state.lens("denaliNotifications"),this._appConfig,this._router.location),this._navigateToDocument=function(e,t){M._router.navigate(r.Router.routes.editor.href({docId:e}),t)},this.notifications=new i.ProxyShowNotificationsModel(function(){return M._router.isActive(r.Router.routes.denali_editor.href({docId:"*"})).get()?M.denaliNotifications:M.editorTsNotifications}),this.unsafeUserAccount=null,this.modal=new h.ModalDialogModelImpl(this._state.lens("modal"),this.notifications),this.overlay=new h.ModalOverlayModelImpl(this._state.lens("overlay")),this.authentication=new u.AuthenticationModelImpl(this._state.lens("authentication"),this._authApi,this._institutionApi,this._dapi,function(e){M._nullableUserAccount.set(e),M.unsafeUserAccount=new c.UserAccountModelImpl(M._nullableUserAccount,M._authApi,M._subscriptionApi,M._irbisApi,M._dapi,M.telemetry,M._router,M._appConfig,M.environment,M.upgradeHook)},this._appConfig,this.telemetry,function(){return M._router.navigate(r.Router.routes.free.href({}))},this.modal,this.overlay,this.environment),this.dictionary=new d.DictionaryModelImpl(this._state.lens("dictionary"),this._dictionaryApi),this.tooltip=new p.Tooltip.Impl(this._state.lens("tooltip")),this._navigationBar=null,this._alertCache=new f.AlertCacheImpl(function(e){return e},function(e){return e},this._appConfig.alertCachePrefix,this._appConfig.alertCacheVersion),this._newEditorPage=null,this.connectivity=new S.ConnectivityModelImpl({network:new I.NetworkErrorHandler(this.notifications,this.overlay),wsProtocol:new I.WsProtocolErrorHandler(this.notifications,this.overlay),dox:new I.DoxErrorHandler(this.notifications,this.overlay,this.authentication,function(){return M._router.navigate(r.Router.routes.documents.href({}))}),wsDox:new I.DoxErrorHandler(this.notifications,this.overlay,this.authentication,function(){return M._router.navigate(r.Router.routes.documents.href({}))}),wsCapi:new I.CapiErrorHandler(this.notifications,this.overlay)}),this.networkState=new T.NetworkConnectivityModelImpl(this.connectivity,this._appConfig.api.onlineTestUrl),this.wsConnectivity=new C.WsConnectivityModelImpl(this.connectivity,{wsDox:new O.WsDoxErrorHandler(this.networkState,this.connectivity),wsCapi:new O.WsCapiErrorHandler(this.networkState,this.connectivity)}),this.selfUpdate=new k.SelfUpdateImpl(this._router,this._appConfig.selfUpdate,this.overlay,this.modal,this.connectivity.onlineState,this.userActivity),this.extension=new E.ExtensionInstallModelImpl(this.environment,this._appConfig.extension.chrome.installURL,this._appConfig.extension.firefox.installURL,this._appConfig.extension.firefox.iconURL,this.notifications),this.apis={dox:this._doxApi},this._upgradeHook=null,this._userAccount.distinctUntilChanged(function(e,t){return e.userProfile.id===t.userProfile.id}).subscribe(function(e){var t=e.userProfile,n=t.id,r=t.isTest;_.setUser(n,r),M._gaClient.setUserId(n)}),this._userAccount.filter(function(e){return!0!==e.userProfile.isTest&&P.Async.isOk(e.subscription)&&e.userProfile.groups.has(c.UserGroups.PREMIUM_CONVERSION)}).distinctUntilChanged(function(e,t){return e.userProfile.id===t.userProfile.id}).subscribe(function(e){return D.PixelTracking.doTracking(e.userProfile,e.subscription.value,M._subscriptionApi,M._gaClient)})}return Object.defineProperty(e.prototype,"userAccount",{get:function(){if(!this.unsafeUserAccount)throw new P.InvariantError("User should be already authenticated");return this.unsafeUserAccount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"navigationBar",{get:function(){if(!this.unsafeUserAccount)throw new P.InvariantError("User should be already authenticated");return this._navigationBar=this._navigationBar||new l.NavigationBarModelImpl(this.unsafeUserAccount.features,this.clientsState)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newEditorPage",{get:function(){if(!this.unsafeUserAccount)throw new P.InvariantError("User should be already authenticated");var e=this.unsafeUserAccount,t=e.settings,n=e.features;return this._newEditorPage=this._newEditorPage||new f.EditorPageModelImpl(this._state.lens("newEditorPage"),t,this._doxApi,this._appConfig.api.capiWsUrl,n,this.telemetry,this.modal,this._alertCache,this.wsConnectivity,this.connectivity,this.notifications,this.environment)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentsPage",{get:function(){if(!this.unsafeUserAccount)throw new P.InvariantError("User should be already authenticated");return this._documentsPage=this._documentsPage||new y.DocumentsPageModelImpl(this._state.lens("documentsPage"),this._doxApi,this.unsafeUserAccount.settings,this._alertCache,this.connectivity,this.notifications,this._navigateToDocument,this.environment)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentUpload",{get:function(){var e=this;if(!this.unsafeUserAccount)throw new P.InvariantError("User should be already authenticated");return this._documentUpload=this._documentUpload||new x.UploadModel(function(t){return e.documentsPage.actions.uploadDocument(t)},this._navigateToDocument,this.notifications,this.telemetry)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientsState",{get:function(){if(!this.unsafeUserAccount)throw new P.InvariantError("User should be already authenticated");return new N.GrammarlyClients.Impl(this.environment,this.unsafeUserAccount)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apps",{get:function(){if(!this.unsafeUserAccount)throw new P.InvariantError("User should be already authenticated");return new v.AppsModelImpl(this.clientsState,this.extension,this.telemetry)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"banners",{get:function(){if(!this.unsafeUserAccount)throw new P.InvariantError("User should be already authenticated");return new b.BannersModelImpl(this._state.lens("banner"),this.clientsState,this.extension,this.telemetry)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"upgradeHook",{get:function(){var e=this._nullableUserAccount;if(void 0===e.get())throw new P.InvariantError("User should be already authenticated");return this._upgradeHook=this._upgradeHook||new A.UpgradeHook.Impl(this._appConfig,this.environment,e.view("userProfile","id"))},enumerable:!0,configurable:!0}),e}();t.AppModelImpl=M},516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(175);t.Range=r.Range;var i=n(524);t.DEd=i.DEd;var o=n(1278);t.DedComponent=o.DedComponent},517:function(e,t,n){"use strict";function r(e,t,n){e.modify(function(e){var r=e.slice(0);return r[t]=n,r})}function i(){return m.Observable.of(!0)}function o(e,t){return e.sidebarOpen.switchMap(h.choose(m.Observable.of(!1),t.lenses.map(function(e){return h.ObjectUtils.toArray(e).some(function(e){return e.type===g.Lens.Type.Critical})})))}function s(e,t){return e.sidebarOpen.switchMap(h.choose(m.Observable.of(!1),t.lenses.map(function(e){return h.ObjectUtils.toArray(e).some(function(e){return e.type!==g.Lens.Type.Critical})}).distinctUntilChanged()))}function a(e){return e.state.view(function(e){return v.LensState.isLensview(e)&&e.currentLens.kind===v.LensViewKind.active&&v.LensState.getActiveAlert(e).exists(function(e){return _.Alert.isAlert(e)&&e.replacementsLabels.nonEmpty()})})}function c(e){return e.lenses.view(function(e){return e.length>1})}function u(){return m.Observable.of(!0)}function l(e,t){return m.Observable.from(t.filter(function(e){return"idle"===e}).first().mapTo(!0)).merge(e.first().mapTo(!1))}Object.defineProperty(t,"__esModule",{value:!0});var d,p=n(6),h=n(2),f=n(7),g=n(178),m=n(16),_=n(268),y=n(4),v=n(514);!function(e){function t(e){return!(e===n.Step5||e===n.Step6)}var n;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9"}(n=e.Id||(e.Id={})),e.isValid=t;!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(e.State||(e.State={}))}(d=t.OnboardingStep||(t.OnboardingStep={}));var b=function(){function e(e,t,n,i,o,s,a){var c=this;this._stateHolder=t,this._dedModel=n,this._documentModel=i,this._alertsList=o,this._sidebarVM=s,this._features=a,this._log=y.Monitoring.Logging.getLogger("OnboardingViewModelImpl",y.Logging.LogLevel.TRACE),this._steps={},this._switches=p.Atom.create([]),this._states=p.Atom.create([]),this._subs=[],this._stepsSubscriptions=[],this._enableState=p.Atom.create(!0),this._addStep=function(e,t,n,i){h.invariant(d.isValid(e),"Deprecated onboarding steps are not allowed: "+e),r(c._switches,t,!1);var o=c._states.lens(p.Lens.index(t).compose(p.Lens.withDefault("dummy")));r(c._states,t,i.has(e)?d.State.Passed:d.State.Hidden),c._steps[e]={state:o,idx:t},c._stepsSubscriptions.push(n().combineLatest(c._enableState,function(e,t){return e&&t}).subscribe(function(e){return r(c._switches,t,e)},function(e){c._log.error("onboarding malfunction",e),r(c._states,t,d.State.Passed)}))};var u=this._features.showOnboarding?new Set:new Set(e.onboardingPassed.get());this._initSteps(u),this._subs.push(this._switches.subscribe(function(e){return c._updateStates(e)})),this._subs.push(this._states.skip(1).subscribe(function(t){return e.updateOnboardingPassed(Object.keys(c._steps).filter(function(e){return t[c._steps[e].idx]===d.State.Passed}))})),this._log.isEnabled(y.Logging.LogLevel.TRACE)&&this._subs.push(this._states.subscribe(function(e){return c._log.debug("Onboarding states updated: "+e.join(", "))})),h.registerDebugHelper("fireOnboardingStep",function(e,t){return f.Option.of(c._steps[e]).fold(function(){return console.info("No such step "+e)},function(e){return e.state.set(t)})}),h.registerDebugHelper("onboardingState",this)}return e._getAvailableSteps=function(e,t,n,r,p,h){return e.hideOnboarding&&!e.showOnboarding?[]:[[d.Id.Step2,function(){return o(r,p)}],[d.Id.Step3,function(){return s(r,p)}],[d.Id.Step7,function(){return c(h)}],[d.Id.Step1,function(){return i()}],[d.Id.Step8,function(){return u()}],[d.Id.Step4,function(){return a(r)}],[d.Id.Step9,function(){return l(t.contentUpdated,n.checkingState)}]]},e.prototype._initSteps=function(t){var n=this;void 0===t&&(t=new Set),this._stepsSubscriptions.forEach(function(e){return e.unsubscribe()}),this._stepsSubscriptions=[],e._getAvailableSteps(this._features,this._dedModel,this._documentModel,this._stateHolder,this._alertsList,this._sidebarVM).forEach(function(e,r){return n._addStep(e[0],r,e[1],t)})},e.prototype.isStepEnabled=function(e){return void 0!==this._steps[e]},e.prototype.subscribeForStep=function(e){var t=this,n=this._steps[e].state;if(void 0===n)throw new Error("Illegal onboarding step id "+e);return{id:e,state:n,dotClicked:function(){h.invariant(n.get()===d.State.Dot,"Should be in dot state"),t._log.info("Dot clicked for: "+e),n.set(d.State.Popup)},popupIgnored:function(){h.invariant(n.get()===d.State.Popup,"Should be in popup state"),t._log.info("Popup ignored for: "+e),n.set(d.State.Hidden),t._updateStates(t._switches.get())},popupClosed:function(){h.invariant(n.get()===d.State.Popup,"Should be in popup state"),t._log.info("Popup closed for: "+e),n.set(d.State.Passed),t._updateStates(t._switches.get())},actionTaken:function(){h.invariant(n.get()===d.State.Popup||n.get()===d.State.Dot,"Should be in popup or dot state"),t._log.info("Action taken for: "+e),n.set(d.State.Passed),t._updateStates(t._switches.get())}}},e.prototype.unsubscribe=function(){this._subs.forEach(function(e){return e.unsubscribe()}),this._stepsSubscriptions.forEach(function(e){return e.unsubscribe()})},e.prototype.step2Taken=function(){if(this.isStepEnabled(d.Id.Step2)){var e=this.subscribeForStep(d.Id.Step2),t=e.state.get();t!==d.State.Dot&&t!==d.State.Popup||e.actionTaken()}},e.prototype.step9Taken=function(){if(this.isStepEnabled(d.Id.Step9)){var e=this.subscribeForStep(d.Id.Step9),t=e.state.get();t!==d.State.Dot&&t!==d.State.Popup||e.actionTaken()}},e.prototype.changeState=function(e){this._enableState.set(e)},e.prototype.relaunchAllSteps=function(){this._initSteps()},e.prototype._updateStates=function(e){this._log.debug("Onboarding switches updated "+e);var t=this._states.get().slice();e.forEach(function(e,n){e||t[n]===d.State.Hidden||t[n]===d.State.Passed||(t[n]=d.State.Hidden)});var n=t.filter(function(e){return e===d.State.Dot}).length,r=t.filter(function(e){return e===d.State.Popup}).length;h.invariant(r<=1,"Should be only one popup visible, now "+r);for(var i=r>0?2:1,o=Math.max(0,i-n),s=0;s<t.length&&o>0;++s)if(t[s]===d.State.Hidden){if(!e[s])break;o--,t[s]=d.State.Dot}this._states.set(t)},e}();t.OnboardingViewModelImpl=b;var w=function(){function e(){this._steps={}}return e.prototype.isStepEnabled=function(e){return void 0!==this._steps[e]},e.prototype.relaunchAllSteps=function(){y.Monitoring.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")},e.prototype.setState=function(e,t){this.subscribeForStep(e).state.set(t)},e.prototype.subscribeForStep=function(e){var t=p.Atom.create(d.State.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotClicked:function(){return t.set(d.State.Popup)},popupClosed:function(){return t.set(d.State.Passed)},popupIgnored:function(){return t.set(d.State.Hidden)},actionTaken:function(){return t.set(d.State.Passed)}})},e.prototype.step2Taken=function(){},e.prototype.step9Taken=function(){},e.prototype.changeState=function(e){},e}();t.OnboardingViewModelMock=w},519:function(e,t,n){"use strict";function r(e,t){return{re:new RegExp("^("+e+")([\\s\\S]*)$"),createResult:t}}function i(e){for(var t=[],n=e,r=!1,i=0,o=void 0;a.notEmpty(n);){var c=function(e){for(var t=0,n=p;t<n.length;t++){var r=n[t],i=e.match(r.re);if(null!==i)return[r.createResult(i),i[i.length-1]]}}(n);void 0===c&&(r=!0);var u=c||function(t){var n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map(function(e){return t.indexOf(e)});if(n.findIndex(function(e){return 0===e})>0)throw new Error("Couldn't parse transform: "+e);if(n=n.filter(function(e){return e>0}),a.notEmpty(n)){var r=Math.min.apply(Math,n);return[{type:"text",text:t.substring(0,r)},t.substring(r)]}return[{type:"text",text:t},""]}(n),l=u[0],d=u[1];o&&"text"===o.type&&"text"===l.type?o.text+=l.text:(o&&"delete"===o.type&&"insert"===l.type&&(t.push({type:"arrow"}),i++),t.push(l)),"arrow"===l.type&&i++,o=t[t.length-1],n=d}return(r||!a.notEmpty(t)||i>1)&&s.Monitoring.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:t.length,arrowCount:i}),t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),s=n(4),a=n(2),c=function(){function e(e,t){this.labels=e,this.tooltipText=t}return e}();t.InsertListLabel=c;var u=function(){function e(e,t){this.labels=e,this.tooltipText=t}return e}();t.DeleteListLabel=u;var l=function(){function e(e,t,n){this.tooltipText=n,this.labels=[e,t]}return e}();t.OrReplacementsLabel=l;var d=function(){function e(e,t,n,r){this.original=e,this.labels=t,this.tooltipText=n,this.onlyReplacements=r||this._isLong(e,t[0])}return e.prototype._isLong=function(e,t){return e.concat(t).map(function(e){return e.text.length}).reduce(a.sum,0)>30},e}();t.ArrowReplacementsLabel=d;!function(e){function t(e){return e.findIndex(function(e){return"arrow"===e.type})}function n(e){return e.slice(0,t(e))}function r(e){return e.slice(t(e)+1)}function s(e){return e.every(function(e){return"delete"!==e.type})}function p(e){return e.every(s)}function h(e){return 2===e.length&&p(e)}function f(e,i){a.invariant(a.notEmpty(e),"transforms should have at least one element");var o=e[0];return t(o)>-1?new d(n(o),e.map(r),i):h(e)?new l(e[0],e[1],i):p(e)?new c(e,i):new u(e,i)}function g(e,i){a.invariant(a.notEmpty(e),"transforms should have at least one element");var o=e[0];return t(o)>-1?new d(n(o),e.map(r),i,!0):new c(e,i)}function m(e){var t=e.replacements,n=e.transforms,r=e.todo,s="Click to "+r;return o.Option.of(t).filter(a.notEmpty).map(function(){return o.Option.of(n).map(function(e){return f(e.map(i),s)}).getOrElseL(function(){return g(t.map(function(e){return[{type:"insert",text:e}]}),s)})})}e.create=f,e.createOnlyInserts=g,e.parse=m}(t.ReplacementsLabels||(t.ReplacementsLabels={}));var p=[r("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",function(e){return{type:"delete",text:e[2]}}),r("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",function(e){return{type:"insert",text:e[2]}}),r("(→)",function(e){return{type:"arrow"}}),r("([^<>→]+)",function(e){return{type:"text",text:e[1]}})];t.parseTransformHtml=i},520:function(e,t,n){"use strict";function r(e){return e===u.Proofit.JobStatus.building||e===u.Proofit.JobStatus.newJob}function i(e){return e===u.Proofit.JobStatus.completed}function o(e,t){var n=(new Date).getTime(),r={seconds:0,percentage:100};return t&&e&&t>n&&e<n?{seconds:Math.ceil((t-n)/1e3),percentage:Math.round((n-e)/(t-e)*100)}:r}Object.defineProperty(t,"__esModule",{value:!0});var s=n(8),a=n(16),c=n(6),u=n(18),l=n(32),d=n(530),p=n(946);t.isProofitInProgress=r,t.isProofitCompleted=i,t.getProofitUrl=function(e,t){return e.replace(/_docId_/,""+t)},t.DocumentProofitBadge=function(e){var t=e.proofit;if(!t)return null;switch(t.status){case u.Proofit.JobStatus.completed:return s.createElement("div",{"data-name":"proofit-completed-icon",className:p.proofitCompleted});case u.Proofit.JobStatus.cancelled:return s.createElement("div",{"data-name":"proofit-cancelled-icon",className:p.proofitCancelled});default:return null}},t.getRemainedTime=o,t.ProofitProgressBar=function(e){var t=e.remained;return s.createElement("div",{className:p.proofreading},s.createElement(c.F.div,{className:p.pgs},t.map(function(e){return s.createElement(d.ProgressBar,{key:"proofit-progressbar",remaining:e.seconds,percentage:e.percentage,countdown:"short",style:{gutter:p.gutter}})})),s.createElement("div",{className:p.pgsPlaceholder},"Proofreading..."))},t.ProofitProgress=function(e){function n(){u.set(o(r,i));var e=a.Observable.interval(1e3).subscribe(function(){u.set(o(r,i))});return{unsubscribe:function(){e.unsubscribe()}}}var r=e.submitted,i=e.due,u=c.Atom.create({seconds:0,percentage:0});return s.createElement(l.Lifecycle,{onMount:n,remountOnUpdate:!0},s.createElement(t.ProofitProgressBar,{remained:u}))}},521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(2);!function(e){function t(e){switch(e){case"red":return o.red;case"green":return o.green;case"yellow":return o.yellow;default:return o.grey}}function n(e){return function(t){switch(e){case o.red:return t.red;case o.green:return t.green;case o.yellow:return t.yellow;default:return t.fallback}}}var o;!function(e){e[e.red=0]="red",e[e.green=1]="green",e[e.yellow=2]="yellow",e[e.grey=3]="grey"}(o=e.Color||(e.Color={}));var s=/<span.*?<\/span><br\/>/g,a=/^<span.*?class="(.+?)".*?>/,c=/^<span.*?>(.+?): /,u=/^<span.*?>(?:.+?: )?(.+?)<\/span><br\/>/;e.parse=function(e){return r.Option.of(e).map(function(e){return e.replace(/^<p>/,"").split("<p>").map(function(e){var n=e.match(s);return n&&i.notEmpty(n)?n.map(function(e){var n=t(i.StringUtils.getFirstWord(i.StringUtils.getFirstMatch(e,a)||"")),o=r.Option.of(i.StringUtils.getFirstMatch(e,c)),s=i.StringUtils.getFirstMatch(e,u);return s?{color:n,title:o,text:s}:null}).filter(Boolean):[]}).filter(i.notEmpty)}).flatMap(i.NotEmpty.array)},e.colorMatch=n}(t.AlertExample||(t.AlertExample={}))},522:function(e,t,n){"use strict";function r(e){var t=e.rawMatch;return p.invariant("synonym"!==t.action,"Do not use `getBasicAlertFields` for synonyms."),{id:t.id.toString(),title:t.title,hidden:t.hidden,category:t.category,categoryHuman:t.categoryHuman,pid:t.pid,pname:t.pname,isFree:t.free,highlightText:t.highlightText,range:{start:t.begin,end:t.end},group:h.alertGroupFromString(t.group)}}function i(e){var t=e.rawMatch,n=t.synonyms.token,r=e.value;return{id:e.id,title:n||r,hidden:!1,category:t.category,categoryHuman:t.categoryHuman,pid:t.pid,pname:t.pname,isFree:!0,highlightText:"",range:{start:e.begin,end:e.end},group:h.AlertGroup.synonym}}function o(e){var t=e.rawMatch,n=t.extra_properties||{},i=r(e);t.replacements&&t.transforms&&p.invariant(t.replacements.length===t.transforms.length,"every transform should have replacement");var o={kind:"common",details:t.details,explanation:t.explanation,examples:h.parseExamples(t.examples),todo:t.todo,replacements:(t.transforms||[]).map(function(e,n){return h.createReplacement(e,t.replacements[n])}),extraProperties:{hasAddToDictionary:!!n.add_to_dict,isDidYouMean:!!n.did_you_mean,isShowTitle:!!n.show_title,isEnhancement:!!n.enhancement,plagiarismUrl:n.url,sentence:n.sentence,priority:n.priority?parseInt(n.priority,10):0}};return Object.assign(i,o)}function s(e){var t=h.parsePlagiarism(e),n=r(e),i={kind:"plagiarism",title:t.title,description:t.description,url:t.url,reference:t.reference};return Object.assign(n,i)}function a(e){var t=e.rawMatch,n=r(e),i={details:t.details,explanation:t.explanation,examples:h.parseExamples(t.examples),todo:t.todo,kind:"enhancement",replacements:(t.replacements||[]).map(h.createSimpleReplacement),extraProperties:{isEnhancement:!0}};return Object.assign(n,i)}function c(e,t){return void 0===t&&(t=""),e&&""!==e&&""!==t&&(e.includes(t)||t.includes(e))}function u(e){var t=d.Monitoring.Logging.getLogger("grammarly_editor_alert.synonyms"),n=d.Monitoring.TimeSeries.root.getMetric("grammarly_editor_alert"),r=e.rawMatch,o=r.synonyms,s=o.token,a=o.meanings,u=e.value,l=e.badSyn,p=i(e);return l?(t.warn("Synonym error: cannot_find_synonym",{expected:e.value}),n.getCounter("synonyms.error.cannot_find_synonym").increment()):s&&s!==u?n.getCounter("synonyms.error.syn_for_wrong_token").increment():s?n.getCounter("synonyms.success").increment():n.getCounter("synonyms.error.token_missing").increment(),s&&s!==u?(t.warn(c(s,u)?"Got synonym for similar word":"Got synonym for wrong token",{expected:u,got:s}),Object.assign(p,{kind:"synonym",title:u,meanings:[],replacements:[]})):Object.assign(p,{kind:"synonym",match:e,meanings:a.map(function(e){return{title:e.meaning,replacements:e.synonyms.map(function(e){return h.createSimpleReplacement(e.derived)})}}),replacements:(r.replacements||[]).map(h.createSimpleReplacement)})}function l(e){var t=e.rawMatch;if(!t.group&&"synonyms"===t.action)return u(e);switch(h.alertGroupFromString(e.rawMatch.group)){case h.AlertGroup.plagiarism:return s(e);case h.AlertGroup.enhancement:return a(e);default:return o(e)}}Object.defineProperty(t,"__esModule",{value:!0});var d=n(4),p=n(2),h=n(88);t.getBasicAlertFields=r,t.getSynonymBasicAlertFields=i,t.isTokensSimilar=c,t.createAlert=l},523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),i=function(){function e(){this.generalActivity=r.Observable.merge(r.Observable.fromEvent(window.document,"mousemove",{capture:!0,passive:!0},function(){}),r.Observable.fromEvent(window.document,"wheel",{capture:!0,passive:!0},function(){}),r.Observable.fromEvent(window.document,"keydown",{capture:!0,passive:!0},function(){}))}return e}();t.UserActivityImpl=i;!function(e){var t=function(){function e(){this.generalActivity=r.Observable.empty()}return e}();e.Mock=t}(t.UserActivity||(t.UserActivity={}))},524:function(e,t,n){"use strict";function r(e){void 0===e&&(e="");var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept",e),t}function i(e,t,n){void 0===t&&(t=""),void 0===n&&(n={typeOrPasteText:"",upload:""});var r=document.createElement("div"),i=document.createElement("label"),o=n.upload.split(" "),s=o[0],a=o.slice(1);return i.textContent=s,i.appendChild(e),r.className=t,r.textContent=n.typeOrPasteText+" ",r.appendChild(i),r.appendChild(document.createTextNode(" "+a.join(" "))),r}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=n(69),a=n(16),c=n(7),u=n(6),l=n(4),d=n(2),p=n(485),h=n(1273),f=n(1277),g=n(1275),m=n(1274),_=n(1276),y=n(175),v=n(18),b=n(64),w=n(783),E=/[\t ,:"”\(\)\[\]\{\}]?((\w[\w\-’']*[\t ,:"”\(\)\[\]\{\}]+)?\w[\w\-’']*[\t ,:"”\(\)\[\]\{\}]*)$/,S=/^[\t ,:"”\(\)\[\]\{\}]*\w[\w\-’']*([\t ,:"”\(\)\[\]\{\}]+[\w\-’']+)?/,C=60,k=30;s.register("themes/denali",f.DenaliTheme,!0),s.register("modules/clipboard",h.DenaliClipboard,!0),s.register("modules/keyboard",g.DenaliKeyboard,!0),s.register("modules/history",m.DenaliHistory,!0),s.register("modules/marks",_.MarksManager,!0);var T=function(){function e(e){void 0===e&&(e={});var t=this;this._options=e,this._log=l.Monitoring.Logging.getLogger("DEd"),this._freezeFocus=new d.RxSemaphore.Impl("freezeFocus",this._options.freezeFocusFeature?d.RxSemaphore.everyTrue:function(){return!1}),this._editorEl=document.createElement("div"),this._scrollEl=new a.BehaviorSubject(c.None),this._scrollTo=new a.Subject,this._textLength=0,this._outgoingChanges=void 0,this.flushChanges=function(){if(void 0!==t._outgoingChanges){t._log.trace("flushChanges");var e=t._outgoingChanges;t._outgoingChanges=void 0,void 0!==t._changesSyncTimer&&(clearTimeout(t._changesSyncTimer),t._changesSyncTimer=void 0),e.isEmpty||t.changes.next(e)}},this._flush=function(){t.flushChanges(),t.changes.next(v.Change.flush())},this.changes=new a.Subject,this.contentUpdated=new a.Subject,this.activeWord=new a.BehaviorSubject(c.Option.none()),this.cursorPosition=new a.BehaviorSubject(c.Option.none()),this.clickedWord=new a.Subject,this.scrollPosition=new a.BehaviorSubject(0),this.ongoingSelection=u.Atom.create(!1),this.viewport=u.Atom.create({text:d.DOM.Rect.empty,wrapper:d.DOM.Rect.empty}),this._viewportPadding=c.None,this._text=null,this.getText=function(){return null===t._text&&(t._text=t.quill.getText()),t._text},this.getTextLength=function(){return t._textLength},this.getContents=function(){return v.Change.res(v.DeltaUtils.cleanAttrs(t.quill.getContents()))},this.getContext=function(e,n){var r=t.getText(),i=r.slice(Math.max(0,e-C),e).match(E),o=r.slice(n,Math.min(n+k,r.length)).match(S);return{prev:c.Option.of(i&&t._normalizePrevContext(i[1])),next:c.Option.of(o&&o[0])}},this.setCursor=function(e,n,r){void 0===n&&(n=0),void 0===r&&(r={}),t._ensureScrollPosition(function(){t.quill.setSelection(Math.max(e,0),n,r.source||s.sources.API)}),r.focus&&t.quill.focus()},this._focusTitle=function(){return t._ensureScrollPosition(function(){return t._title.focus()})},this.scrollToTitle=function(){t._focusTitle(),t._scrollTo.next({offset:0,animate:"initial"})},this._getScroll=function(){return d.invariant(t._scrollEl.getValue().nonEmpty(),"DEd should be attached"),t._scrollEl.getValue().get().scrollTop},this._setScroll=function(e){return d.invariant(t._scrollEl.getValue().nonEmpty(),"DEd should be attached"),t._scrollEl.getValue().get().scrollTop=e},this._ensureScrollPosition=function(e){var n=t.scrollPosition.getValue();e(),t._setScroll(n)},this.extendSelectionTo=function(e,n){return t._getNativeCursorByPosition(e,n).map(function(e){var t=e.node,n=e.offset,r=window.getSelection();r.focusNode===t&&r.focusOffset===n||(r.anchorNode===t?r.setBaseAndExtent(r.anchorNode,r.anchorOffset,t,n):r.extend(t,n))}).recover(function(e){throw t._log.error("Cannot get possible cursor position",e),e})},this._getNativeCursorByPosition=function(e,n){var r=function(e){return e.lastChild?r(e.lastChild):e},i=function(e){return e.firstChild?i(e.firstChild):e},o=t.viewport.get().text,s=e>=o.right?o.right-1:e<=o.left?o.left+1:e,a=n<=o.top?o.top+1:n>=o.bottom?o.bottom-1:n;return t._log.isEnabled(l.Logging.LogLevel.TRACE)&&function(e,t,n){var r=document.querySelector("[data-name="+n+"]");r||(r=document.createElement("span"),r.setAttribute("data-name",n),document.body.appendChild(r)),r.style.width="5px",r.style.height="5px",r.style.background="red",r.style.position="fixed",r.style.left=e+"px",r.style.top=t-5+"px",r.style.zIndex="100000"}(s,a,"top"),function(e,t){return c.Try.of(function(){if("caretPositionFromPoint"in document){var n=document.caretPositionFromPoint(e,t);return{node:n.offsetNode,offset:n.offset}}if(document.caretRangeFromPoint){var n=document.caretRangeFromPoint(e,t);return n?{node:n.startContainer,offset:n.startOffset}:{node:document.elementFromPoint(e,t),offset:0}}throw new Error("Browser doesn't support range API")})}(s,a).map(function(e){var n=e.node,s=e.offset;if(d.DOM.isParent(t.quill.root,n))return{node:n,offset:s};if(a<=o.top+1){return{node:i(t.quill.root),offset:0}}var c=r(t.quill.root);return{node:c,offset:c.textContent?c.textContent.length:0}})},this.containsElement=function(e){return d.DOM.isParent(t.quill.root,e)};var n=e.classes||{},o=e.placeholder,h=r(o&&o.uploadInputAccept);this._allowNavigationTo=e.allowNavigationTo||function(){return!1},this._shouldFocusEditor=e.shouldFocusEditor||function(){return!1},this._withPlaceholderClass=n.withPlaceholder||"",this.quill=new s(this._editorEl,{modules:{toolbar:!1,clipboard:{className:w.editorClipboard,maxAllowedTextLength:1e5,lengthExceededCallback:function(){return alert("Oops, Document size exceeded!")},flush:this._flush},history:{userOnly:!0,flush:this._flush},marks:{scrollPositionChanged:this.scrollPosition.distinctUntilChanged().mapTo(d.RxUtils.voidValue).skip(1),contentUpdated:this.contentUpdated,scrollContainer:this._scrollEl,ongoingSelection:this.ongoingSelection}},theme:"denali",classes:{editor:d.DOM.classes(w.editor,n.editor),editorContainer:n.editorContainer,scrollWrap:n.scrollWrap}}),this.quill.addContainer(i(h,n.placeholder,o&&o.strings)),this._marker=this.quill.getModule("marks"),this._history=this.quill.getModule("history"),this._clipboard=this.quill.getModule("clipboard"),this.textChangedAfterPaste=this._clipboard.textChangedAfterPaste,this.activeMarks=this._marker.activeMarks,this.hoveredMarks=this._marker.hoveredMarks,this.changeMarks=function(e){return t.flushChanges(),t._marker.changeMarks(e)},this._ensurePlaceholder(),this._quillEditorChange=p.toQuillObservable(this.quill).share(),this.scrollPercentage=this.scrollPosition.combineLatest(this._scrollEl.combineLatest(a.Observable.merge(a.Observable.fromEvent(window,"resize"),this._quillEditorChange.filter(p.filterTextChange)).debounceTime(500).startWith(d.RxUtils.voidValue),function(e){return e}).map(function(e){return e.flatMap(function(e){var t=e.scrollHeight-e.clientHeight;return t>0?c.Some(t):c.None})}).distinctUntilChanged(function(e,t){return e.equals(t)})).map(function(e){var t=e[0];return e[1].map(function(e){return t/e})}).distinctUntilChanged(function(e,t){return e.equals(t)}).shareReplay(1);var f=this._quillEditorChange.filter(p.filterSelectionChange).map(function(e){return e.range});this._subs=[this._quillEditorChange.filter(p.filterTextChange).subscribe(function(e){var n=e.delta,r=e.source;void 0!==n.ops&&(t._text=null,r===s.sources.USER&&t._pushDelta(n),t._setTextLength(t._textLength+v.DeltaUtils.calcDiffLength(n)))}),this._quillEditorChange.filter(p.filterTextChange).filter(function(e){return e.delta.ops.some(function(e){return!e.retain})}).mapTo(void 0).subscribe(this.contentUpdated),f.map(function(e){return c.Option.of(e).map(function(e){return{index:e.index,length:e.length}})}).subscribe(this.cursorPosition),f.map(c.Option.of).map(function(e){return e.filter(function(e){return 0===e.length})}).map(function(e){return e.flatMap(function(e){return p.getWordAt(t.quill.getText(),e)}).filter(function(e){return""!==e.value})}).distinctUntilChanged(function(e,t){return e.equals(t)}).subscribe(this.activeWord),a.Observable.merge(a.Observable.fromEvent(this.quill.root,"mousedown",{passive:!0}).mapTo(!0),a.Observable.fromEvent(document,"mouseup",{passive:!0}).mapTo(!1),a.Observable.fromEvent(document,"dragend",{passive:!0}).mapTo(!1),a.Observable.fromEvent(document,"click",{passive:!0}).mapTo(!1)).switchMap(d.choose(a.Observable.fromEvent(document,"mousemove",{passive:!0}).auditTime(50).filter(function(){return!window.getSelection().isCollapsed}).first().mapTo(!0),a.Observable.of(!1))).subscribe(d.RxUtils.toAtom(this.ongoingSelection))],o&&this._subs.push(a.Observable.fromEvent(h,"change").subscribe(function(e){var t=e.target;return t.files&&o.upload(t.files)})),this.viewportRange=this.viewport.combineLatest(this.scrollPosition).debounceTime(150).map(function(e){var n=e[0].text;return c.Try.of(function(){var e=t._getNativeCursorByPosition(n.left,n.top).get(),r=t._getNativeCursorByPosition(n.right,n.bottom).get(),i=s.find(e.node),o=s.find(r.node);return new y.Range(i.offset(t.quill.root)+e.offset,o.offset(t.quill.root)+r.offset)}).recover(function(e){throw t._log.error("Cannot calculate viewportRange",e),e}).getOrElse(y.Range.empty)}).shareReplay(1)}return e.prototype._pushDelta=function(e){void 0===this._outgoingChanges?this._outgoingChanges=v.Change.delta(v.DeltaUtils.cleanAttrs(e),this._textLength):this._outgoingChanges.delta=this._outgoingChanges.delta.compose(v.DeltaUtils.cleanAttrs(e));var t=v.DeltaUtils.calcAmountLength(e);!this._outgoingChanges.isEmpty&&(t>100||this._textLength-t<=1||void 0!==e.ops.find(function(e){return p.isBreakWordInsert(e)||p.isMarkChangeOperation(e)})||this.activeMarks.getValue().nonEmpty())?this.flushChanges():(void 0!==this._changesSyncTimer&&clearTimeout(this._changesSyncTimer),this._changesSyncTimer=setTimeout(this.flushChanges,1500))},e.prototype._setTextLength=function(e){this._textLength=e,this._ensurePlaceholder()},e.prototype.attach=function(e,t,n,r){var i=this;if(this._wrapper)throw new Error("Editor already attached");this._wrapper=e,this._scrollEl.next(c.Some(t)),this._title=n,e.appendChild(this._editorEl),this._textLength?this.setCursor(0,0,{focus:!0}):this._title.focus(),d.registerDebugHelper("dedGetText",this.getText),d.registerDebugHelper("dedSetCursor",this.setCursor),d.registerDebugHelper("dedType",function(e){i.flushChanges(),i.pushChanges(v.Change.ins(i.getCursor().fold(function(){return 0},function(e){return e.index}),e,i.getText().length),"user")}),d.registerDebugHelper("dedQuill",this.quill),d.registerDebugHelper("ded",this);var o=function(e){void 0===e&&(e=!1),i._ensureScrollPosition(function(){var t=i.cursorPosition.getValue().getOrElse({index:0}).index;i._clearSelection(),i.setCursor(t,0,{source:s.sources.SILENT,focus:e})})},u=a.Observable.fromEvent(this.quill.root,"blur").filter(function(e){return e.relatedTarget!==i._title&&!i._allowNavigationTo(e.relatedTarget)}).observeOn(a.Scheduler.asap).do(function(){return o()}),l=a.Observable.fromEvent(this._title,"blur").filter(function(e){return e.relatedTarget!==i.quill.root&&!i._allowNavigationTo(e.relatedTarget)}).observeOn(a.Scheduler.asap).do(function(e){return i._shouldFocusEditor(e.relatedTarget)?o(!0):i._focusTitle()});this._subs.push(this._freezeFocus.state.switchMap(d.RxUtils.Scheduler.rafScheduler).do(function(e){return e?o():i.quill.blur()}).switchMap(function(e){return e?a.Observable.merge(u,l):a.Observable.empty()}).catch(function(e){return i._log.warn("unexpected exception in freezeFocus",e),a.Observable.empty()}).subscribe(),a.Observable.fromEvent(this.quill.root,"mouseup").map(function(e){return{clicks:e.detail,range:c.Option.of(i.quill.getSelection())}}).map(function(e){var t=e.clicks;return e.range.flatMap(function(e){return p.getWordAt(i.quill.getText(),e)}).filter(function(e){return""!==e.value}).map(function(e){return new y.ClickedWord(e,t)})}).merge(a.Observable.fromEvent(this.quill.root,"blur").delay(200).mapTo(c.None)).subscribe(this.clickedWord),this._scrollTo.switchMap(function(e){switch(e.animate){case"none":return a.Observable.of(e.offset);case"fast":return d.Animation.createAnimationObservable(i._getScroll(),e.offset,100);case"initial":return d.Animation.createAnimationObservable(i._getScroll(),e.offset,200);default:return d.assertNever(e.animate)}}).subscribe(function(e){return i._setScroll(e)}),a.Observable.fromEvent(this._title,"keydown").filter(function(e){var t=e.target;return 13===e.which||40===e.which||39===e.which&&t.selectionStart===t.selectionEnd&&t.selectionEnd===t.value.length}).subscribe(function(e){i.setCursor(0,0,{source:s.sources.USER}),e.preventDefault()}),this._scrollEl.switchMap(d.RxUtils.toOptionValueOnly).switchMap(function(e){return a.Observable.fromEvent(e,"scroll",function(){return i._getScroll()})}).subscribe(this.scrollPosition),a.Observable.combineLatest(this._quillEditorChange.filter(p.filterTextChange).filter(function(e){return e.source===s.sources.USER}),this._scrollEl.switchMap(d.RxUtils.toOptionValueOnly)).subscribe(function(e){var t=e[1];requestAnimationFrame(function(){var e=i._getCursorRect();if(e){var n=e.top+e.height,r=t.getBoundingClientRect(),o=.7*Math.max(r.top+r.height);n>o&&i._scrollTo.next({offset:i._getScroll()+Math.round(n-o),animate:"initial"})}})}),a.Observable.combineLatest(this._scrollEl.switchMap(d.RxUtils.toOptionValueOnly),this._history.changed).subscribe(function(e){var t=e[0];return requestAnimationFrame(function(){var e=i._getCursorRect();if(e){var n=t.getBoundingClientRect();(e.top<n.top||e.top>n.bottom)&&i._scrollTo.next({offset:i._getScroll()+Math.round(e.top-n.top-n.height/2),animate:"none"})}})}),r?r.subscribe(function(e){return i._viewportPadding=c.Some(e)}):a.Subscription.EMPTY,d.DOM.getResizeObserable(t).startWith(d.RxUtils.voidValue).combineLatest(a.Observable.fromEvent(t,"transitionend").filter(function(e){return e.target===t}).startWith(d.RxUtils.voidValue)).map(function(){return t.getBoundingClientRect()}).combineLatest(this.scrollPosition).debounceTime(150).subscribe(function(e){var t=e[0];i.viewport.set(i._calculateViewport(t))}))},e.prototype.dispose=function(){this._subs.forEach(function(e){return e.unsubscribe()}),this._subs=[],this._marker.dispose(),this.quill.emitter.removeAllListeners()},e.prototype.pushChanges=function(e,t){var n=this;this._log.trace("pushChanges"),v.Change.isFlush(e)?this.flushChanges():v.Change.isReset(e)?(this._outgoingChanges=void 0,this.setContents(e)):(d.invariant(void 0===this._outgoingChanges,"There should be no outgoing changes in the editor when pushChanges() is called. Use flush()"),e.prevLen!==this._textLength&&this._log.error("Incoming change for a wrong text len, expected "+this._textLength+", incoming "+e.prevLen),this._ensureSelection(function(){return n.quill.updateContents(e.delta,t)}))},e.prototype._normalizePrevContext=function(e){var t=e.replace(/\s+/g," ");if(t.length>20){for(var n=t.length-20,r=n,i=n+3;r<i;r++)if(!t[r].match(/[\w\-’']/))return t.slice(r+1);return"…"+t.slice(n+1)}return t},e.prototype.setContents=function(e){var t=p.normalizeCRLF(e);t.isEmpty||this.changes.next(t);var n=e.delta.compose(t.delta),r=v.DeltaUtils.calcDiffLength(n);this.quill.setContents(v.DeltaUtils.cleanAttrs(n),"api"),this._setTextLength(r)},e.prototype.getCursor=function(e){return c.Option.of(this.quill.getSelection(e))},e.prototype.scrollToMark=function(e,t){void 0===t&&(t={animate:"none",paddingTop:0});var n=t.animate||"none",r=this._getScrollTop(),i=this._getMarkRect(e);this._scrollTo.next({offset:this._getScroll()+i.top-(t.paddingTop?t.paddingTop:r),animate:n})},e.prototype.undo=function(){this._history.undo()},e.prototype.redo=function(){this._history.redo()},e.prototype.dontFreezeWhen=function(e,t){return this._options.freezeFocusFeature?this._freezeFocus.watch(d.RxUtils.invert(e),t):a.Subscription.EMPTY},e.prototype._getScrollTop=function(){return this._scrollEl.getValue().fold(function(){return 0},function(e){return e.getBoundingClientRect().top})},e.prototype._getMarkRect=function(e){var t=e.viewportRect,n=t[0],r=t[1],i=n!==r?[Math.min(n.top,r.top),Math.max(n.top+n.height,r.top+r.height)]:[n.top,n.top+n.height],o=i[0],s=i[1];return{top:Math.round(o),bottom:Math.round(s)}},e.prototype._getCursorRect=function(){var e=this.quill.getSelection();if(e&&0===e.length){var t=this.quill.container.getBoundingClientRect(),n=this.quill.getBounds(e.index,1);return{bottom:n.bottom+t.top,height:n.height,left:n.left+t.left,right:n.right+t.left,top:n.top+t.top,width:n.width}}return null},e.prototype._ensurePlaceholder=function(){this._withPlaceholderClass&&(this._textLength>1?this.quill.container.classList.remove(this._withPlaceholderClass):this.quill.container.classList.add(this._withPlaceholderClass))},e.prototype._ensureSelection=function(e){var t=this,n=this.quill.getSelection();e(),n&&n.length>0&&this._clearSelection(function(){t.quill.setSelection(n.index,n.length,s.sources.API)})},e.prototype._clearSelection=function(e){var t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty()),e&&requestAnimationFrame(e)},e.prototype._calculateViewport=function(e){var t=this.quill.root.getBoundingClientRect(),n=t.top,r=t.left,i=t.right,o=t.width,s=this._viewportPadding.getOrElse(b.ViewportPadding.empty),a=s.top,c=s.bottom,u=e.top+a,l=e.bottom-c,d=n<u?u:n;return{text:{left:r,right:i,width:o,top:d,bottom:l,height:l-d},wrapper:{left:e.left,right:e.right,width:o,top:d,bottom:l,height:l-d}}},e}();t.DEd=T,function(e){var t=function(e){function t(t){void 0===t&&(t={});var n=this;return p.setupQuillEnv(),n=e.call(this,t)||this,n.markChangeApplied=n._marker.markChangeApplied,Object.assign(n.quill,{setSelection:function(e,t){d.invariant(e>=0,"range selection can not accept negative values")}}),n}return o.__extends(t,e),Object.defineProperty(t.prototype,"mutationObserverPeriod",{get:function(){return MutationObserver._period},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.quill.root},enumerable:!0,configurable:!0}),t.prototype.getCursor=function(){return c.Some({index:0,length:0})},t}(e);e.Mock=t}(T=t.DEd||(t.DEd={})),t.DEd=T},525:function(e,t,n){"use strict";function r(e){switch(e){case s.GrammarlyClients.App.officeAddin:return"office-addin";case s.GrammarlyClients.App.desktopMac:return"desktop-mac";case s.GrammarlyClients.App.desktopWindows:return"desktop-windows";case s.GrammarlyClients.App.extensionChrome:return"chrome-extension";case s.GrammarlyClients.App.extensionFirefox:return"firefox-extension";case s.GrammarlyClients.App.extensionSafari:return"safari-extension";case s.GrammarlyClients.App.extensionEdge:return"edge-extension";default:return o.assertNever(e)}}function i(e){switch(e){case"office-addin":return"officeAddin";case"desktop-mac":return"macApp";case"desktop-windows":return"winApp";case"chrome-extension":return"chromeExt";case"firefox-extension":return"firefoxExt";case"safari-extension":return"safariExt";case"edge-extension":return"edgeExt";case"referral":return"referral";case"no-referral":return"no-referral";case"campaign-end":return"campaignEnd";case"proofit-cancelled":return"proofitCancel";case"proofit-completed":return"proofitComplete";default:return o.assertNever(e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=n(127);t.defaultState={active:null},t.bannerToTracking=i;var a=function(){function e(e,t,n,r){this._state=e,this._clientsState=t,this._extension=n,this._telemetry=r,this.state=this._state.view()}return e.prototype.initialize=function(e,t){this._settings=t,this._banners=e;var n=e.later,r=n.filter(function(e){return Date.now()<=e.expire});r.length!==n.length&&this._updateBanners({later:r});var i=this._getActiveBanner();this._state.set({active:i}),i&&this._shown(i)},e.prototype._notHidden=function(e){return this._banners.dismiss.concat(this._banners.later.map(function(e){return e.type})).indexOf(e)<0},e.prototype._getExtensionBanner=function(){return this._getClientBanner(this._clientsState.extension)},e.prototype._getDesktopBanner=function(){return this._getClientBanner(this._clientsState.desktopApp)},e.prototype._getOfficeAddinBanner=function(){var e=this._getClientBanner(this._clientsState.officeAddin);return null!==e&&-1===this._banners.shown.indexOf(e)?e:null},e.prototype._getClientBanner=function(e){if(s.GrammarlyClients.isNotInstalled(e)){var t=r(e.name);return this._notHidden(t)?t:null}return null},e.prototype._getActiveBanner=function(){var e=this._getExtensionBanner(),t=this._getDesktopBanner(),n=this._getOfficeAddinBanner();return e||t||n||null},e.prototype._updateBanners=function(e){this._banners=Object.assign({},this._banners,e),this._settings&&this._settings.updateBanners(this._banners)},e.prototype._shown=function(e){var t=this._banners.shown;t.indexOf(e)>-1||(t.push(e),this._updateBanners({shown:t}))},e.prototype.remind=function(e){var t=this._banners.later;t.push({type:e,expire:Date.now()+864e5}),this._updateBanners({later:t}),this._state.set({active:null})},e.prototype.dismiss=function(e){var t=this._banners.dismiss;t.push(e),this._updateBanners({dismiss:t}),this._state.set({active:null})},e.prototype.cancel=function(e){this._state.set({active:null})},e.prototype._isExtension=function(e){return["chrome-extension","firefox-extension","safari-extension","edge-extension"].indexOf(e)>-1},e.prototype.install=function(e,t){var n=this;this._isExtension(e)?(this._telemetry.bannerActionClicked(i(e),t),this._extension.install().then(function(e){return e&&n._state.set({active:null})})):this._state.set({active:null})},e}();t.BannersModelImpl=a},526:function(e,t,n){"use strict";function r(e,t){return{re:new RegExp("^("+e+")([\\s\\S]*)$"),createResult:t}}function i(e){for(var t=[],n=e,r=!1,i=0,o=void 0;n.length>0;){var s=function(e){for(var t=0,n=c;t<n.length;t++){var r=n[t],i=e.match(r.re);if(null!==i)return[r.createResult(i),i[i.length-1]]}}(n);void 0===s&&(r=!0);var u=s||function(t){var n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map(function(e){return t.indexOf(e)});if(n.findIndex(function(e){return 0===e})>0)throw new Error("Couldn't parse transform: "+e);if(n=n.filter(function(e){return e>0}),n.length>0){var r=Math.min.apply(Math,n);return[{type:"text",text:t.substring(0,r)},t.substring(r)]}return[{type:"text",text:t},""]}(n),l=u[0],d=u[1];o&&"text"===o.type&&"text"===l.type?o.text+=l.text:(o&&"delete"===o.type&&"insert"===l.type&&(t.push({type:"arrow"}),i++),t.push(l)),"arrow"===l.type&&i++,o=t[t.length-1],n=d}return(r||0===t.length||i>1)&&a.Monitoring.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:t.length,arrowCount:i}),t}function o(e,t){return{newText:t,transform:i(e)}}function s(e){return{newText:e,transform:[{type:"insert",text:e}]}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),c=[r("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",function(e){return{type:"delete",text:e[2]}}),r("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",function(e){return{type:"insert",text:e[2]}}),r("(→)",function(e){return{type:"arrow"}}),r("([^<>→]+)",function(e){return{type:"text",text:e[1]}})];t.parseTransformHtml=i,t.createReplacement=o,t.createSimpleReplacement=s},527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(274),i=function(){function e(e,t,n,i,o,s,a,c){this.title=e,this.todo=t,this.replacements=n,this.isActive=i,this.isApplied=o,this.extraProperties=s,this.isVisibleQuickReplacement=a,this.onReplace=c,this.isDidYouMean=!!this.extraProperties.isDidYouMean,this.hasAddToDictionary=!!this.extraProperties.hasAddToDictionary,this.isEmptyReplacement=r.isNoReplacement(this.replacements),this.replacement=r.getReplacementModel({isDidYouMean:this.isDidYouMean,isActive:this.isActive,replacements:this.replacements,todo:this.todo,onReplace:this.onReplace}),this.isLongReplacement=this.replacement.template===r.CardReplacementTemplate.long,this.isReplacementUnderTitle=this.isLongReplacement||this.replacement.template===r.CardReplacementTemplate.didYouMean,this.isHighlightTextLabel=!this.isVisibleQuickReplacement,this.isShowTextTitle=this.isEmptyReplacement||this.extraProperties.isShowTitle||this.isReplacementUnderTitle||!this.isVisibleQuickReplacement}return e}();t.CommonHeaderModelImpl=i;var o=function(){function e(e,t,n,r){this.title=e,this.isActive=t,this.isApplied=n,this._url=r,this.plagiarism={url:this._url,urlTitle:this._url.map(function(e){return e.replace(/https?:\/\//,"")}),title:this.title}}return e}();t.PlagiarismHeaderModelImpl=o;var s=function(){function e(e,t,n,r){this.title=e,this.isActive=t,this.isApplied=n,this.isVisibleQuickReplacement=r,this.isHighlightTextLabel=!this.isVisibleQuickReplacement}return e}();t.EnhancementHeaderModelImpl=s},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),i=n(182),o=n(2),s=n(18),a=n(481),c=n(63);t.testTagAuth="diagnostic_test_auth",t.testTagIrbis="diagnostic_test_irbis",t.TIMEOUT=1e4,t.successResult=function(e,t){return{status:"success",result:e,time:t?Date.now()-t:void 0}},t.failedResult=function(e,t){return{status:"failed",result:e,time:t?Date.now()-t:void 0}},t.timeoutMessage="Failed by timeout",t.timeoutLimit=function(e){return o.delay(e).then(function(){throw new r.TimeoutError})},t.CLIENT_TYPE=s.Auth.ClientType.webTest,t.CLIENT_VERSION="1",t.getFingerprints=function(){return new a.DenaliFingerprintsImpl(new i.LocalStorageGnarClient,c.appConfig)}},530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(6),s=n(2),a=n(945);t.ProgressBar=function(e){var t=e.remaining,n=e.percentage,c=e.countdown,u=e.style,l=n>=100||null===t?"Coming momentarily...":s.DateUtils.formatTime(t,{short:"short"===c});return i.createElement("div",r.__assign({},o.classes(a.wrapper,u.wrapper||!1)),i.createElement("div",r.__assign({},o.classes(a.countdown,u.countdown||!1)),l),i.createElement("div",r.__assign({},o.classes(a.gutter,u.gutter||!1)),i.createElement("div",r.__assign({},o.classes(a.bar,u.bar||!1),{style:{width:n+"%"}}))))}},531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(484);t.appConfig={env:"prod",logLevel:"INFO",crashLogLevel:"DEBUG",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,enableTracking:!0,alertCachePrefix:"editorTsAlertCache",alertCacheVersion:"2",userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:"american",notificationShowTimeMs:0,selfUpdate:{versionCheckInterval:59*r.min,selfUpdateDelay:12*r.hr,canReloadCheckInterval:5*r.sec,blockingModalAutoReloadDelay:1*r.min,retryFailedVersionCheckInterval:5*r.min,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*r.hr,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",institutionUrl:"https://institution.grammarly.com",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",capiWsUrl:"wss://capi.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com"},felogUrl:"https://f-log-editor.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",diagnosticsUrl:"https://diagnostics.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect"},app:{nameWeb:"editor",nameDesktop:"desktopEditor"},urls:{free:"/free"},funnel:{resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",signin:"https://www.grammarly.com/signin",socialSignin:"https://www.grammarly.com/share/signin",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account"},officeAddin:{installURL:"http://download-office.grammarly.com/latest/GrammarlyAddInSetup.exe",infoURL:"http://www.grammarly.com/office-addin/windows"},desktop:{windows:{installURL:"http://download-editor.grammarly.com/windows/GrammarlySetup.exe",infoURL:"https://www.grammarly.com/native/windows"},mac:{installURL:"http://download-editor.grammarly.com/osx/Grammarly.dmg",infoURL:"https://www.grammarly.com/native/mac"}},extension:{chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",iconURL:"https://addons.cdn.mozilla.net/user-media/addon_icons/566/566314-32.png",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://safari-extensions.apple.com/details/?id=com.grammarly.spellchecker.extension-W8F64X92K3"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"}},edu:{adminPanelURL:"https://admin-panel.grammarly.com"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",phoenixSupportUrl:"https://ecampus.phoenix.edu/common/contactus/reportProblem.jsp",phoenixWritingHelpUrl:"https://portal.phoenix.edu/social/community/support/writing",diagnosticTestPath:"/diagnostic-test?origin=editor",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc"},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfServise:"https://www.grammarly.com/terms",gaTrackingId:"UA-6331378-16"},t.buildInfo={version:"1.0.0-dev"}},532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(268),o=n(2),s=function(){function e(t,n,r,i,o,s,a){this.cardId=t,this.alerts=n,this.activeAlertIndex=r,this.position=i,this._order=o,this._initialAlertId=s,this._removedAlertsIds=a,this.activeAlert=e._getAlertByIndex(this.activeAlertIndex,this.alerts)}return e.createFromAlert=function(t){return e.create(t.id,[t],0)},e.create=function(t,n,r){var s=n.slice().sort(i.Alert.comparator),a=s[0];return o.invariant(!!a,"The card must contain at least 1 alert"),new e(t,s,e._getIndexByAlert(e._getAlertByIndex(r,n).id,s),e.PositionState.empty,a.highlightRange.end,a.id,new Set)},e._getIndexByAlert=function(e,t){var n=t.findIndex(function(t){return t.id===e});return o.invariant(-1!==n,"Alert must exist"),n},e._getAlertByIndex=function(e,t){var n=t[e];return o.invariant(!!n,"Active alert index should point to an alert"),n},Object.defineProperty(e.prototype,"activeAlertRemoved",{get:function(){return this._removedAlertsIds.has(this.activeAlert.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduledToDispose",{get:function(){return this.activeAlertRemoved&&1===this.alerts.length},enumerable:!0,configurable:!0}),e.prototype.compare=function(e){return this._order<e._order?-1:this._order>e._order?1:this._initialAlertId===e._initialAlertId?0:this._initialAlertId<e._initialAlertId?-1:1},e.prototype.add=function(t){var n=this.alerts.concat(t).sort(i.Alert.comparator);return new e(this.cardId,n,e._getIndexByAlert(this.activeAlert.id,n),this.position,this._order,this._initialAlertId,this._removedAlertsIds)},e.prototype.select=function(t){var n=this;o.invariant(!this._removedAlertsIds.has(t.id),"Cannot select removed alert");var r=this.alerts.filter(function(e){return!n._removedAlertsIds.has(e.id)});return new e(this.cardId,r,e._getIndexByAlert(t.id,r),this.position,this._order,this._initialAlertId,new Set)},e.prototype.remove=function(t){var n=this,r=new Set(t.map(function(e){return e.id})),i=new Set(this._removedAlertsIds),o=this.alerts.reduce(function(e,t,i){return r.has(t.id)&&t.id!==n.activeAlert.id?{remainingAlerts:e.remainingAlerts,activeAlertIndex:e.activeAlertIndex+(i<n.activeAlertIndex?-1:0)}:{remainingAlerts:e.remainingAlerts.concat([t]),activeAlertIndex:e.activeAlertIndex}},{remainingAlerts:[],activeAlertIndex:this.activeAlertIndex}),s=o.remainingAlerts,a=o.activeAlertIndex;return r.has(this.activeAlert.id)&&i.add(this.activeAlert.id),new e(this.cardId,s,a,this.position,this._order,this._initialAlertId,i)},e.prototype.nextAlert=function(){var e=this;return r.Option.of(this.alerts.slice(this.activeAlertIndex+1).find(function(t){return!e._removedAlertsIds.has(t.id)}))},e.prototype.prevAlert=function(){var e=this;return r.Option.of(this.alerts.slice(0,this.activeAlertIndex).reverse().find(function(t){return!e._removedAlertsIds.has(t.id)}))},e.prototype.hashCode=function(){var e=7;return e=31*e+r.hashCodeOfString(this.cardId),31*(e=31*e+r.hashCodeOfString(this.activeAlert.id))+this.alerts.length+this._removedAlertsIds.size},e.prototype.equals=function(e){return this.hashCode()===e.hashCode()&&this.position.equals(e.position)&&o.ArrayUtils.equals(this.alerts,e.alerts)&&o.isSetsEq(this._removedAlertsIds,e._removedAlertsIds)},e.prototype.changePosition=function(t){return new e(this.cardId,this.alerts,this.activeAlertIndex,t,this._order,this._initialAlertId,this._removedAlertsIds)},e}();t.Card=s,function(e){function t(e,t){return e.compare(t)}e.comparator=t;!function(e){e.nominal||(e.nominal={})}(e.Transition||(e.Transition={}));!function(e){e.initial=function(e,n){return void 0===n&&(n=!0),new t(r.None,0,e,n)};var t=function(){function e(e,t,n,r){this.from=e,this.transitionId=t,this.transition=n,this.incomplete=r}return e.prototype.to=function(t){return new e(r.Some(this.transition.type),this.transitionId+1,t,!0)},e.prototype.complete=function(t){return o.invariant(t===this.transitionId,"unexpected transitionId"),new e(this.from,this.transitionId,this.transition,!1)},e.prototype.hashCode=function(){return this.transitionId},e.prototype.equals=function(e){return this.hashCode()===e.hashCode()&&this.from.equals(e.from)&&this.transition.type===e.transition.type&&this.incomplete===e.incomplete},e}()}(e.VisualState||(e.VisualState={}));!function(e){var t=function(){function e(e,t,n,r){void 0===r&&(r=!0),this.absTop=e,this.height=t,this.animate=n,this.visible=r}return e.prototype.hashCode=function(){var e=7;return e=31*e+this.absTop,e=31*e+this.height},e.prototype.dimensionEquals=function(e){return this.absTop===e.absTop&&this.height===e.height},e.prototype.equals=function(e){return this.hashCode()===e.hashCode()&&this.animate===e.animate&&this.visible===e.visible},e}();e.Impl=t,e.empty=new t(0,0,!1,!1)}(e.PositionState||(e.PositionState={}))}(s=t.Card||(t.Card={})),t.Card=s},533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(16),o=n(6),s=n(4),a=n(186),c=n(7);t.defaultState={items:[],importantItems:[]};var u=function(){function e(e,t,n){var r=this;this._state=e,this._appConfig=t,this.create=new a.EditorNotificationFactory,this._queue=this._state.lens("items"),this._importantQueue=this._state.lens("importantItems"),this.items=o.Atom.combine(this._queue,this._importantQueue,function(e,t){return t.length?[t[0]]:e.slice(0,3)}),this._notificationsSubs=new Map,this._nextId=function(){var e=1;return function(){return e++}}(),this.items.pairwise().subscribe(function(e){var t=e[0],n=e[1];t.filter(function(e){return-1===n.indexOf(e)}).forEach(function(e){return r._extract(e.id)}),n.filter(function(e){return-1===t.indexOf(e)}).forEach(function(e){return r._put(e)})}),n.subscribe(function(e){return r.cleanup()})}return e.prototype.show=function(e){var t=this,n=this._nextId(),i=r.__assign({},e,{id:n}),o=i.important||"error"===i.severity?this._importantQueue:this._queue;return i.exclusiveTag&&c.Option.of(o.get().find(function(e){return e.exclusiveTag===i.exclusiveTag})).forEach(function(e){return t.hide(e.id)}),o.modify(function(e){return e.concat([i])}),n},e.prototype.showMessage=function(e){return this.show(this.create.generic(e))},e.prototype.showError=function(e){return this.show(this.create.error(e))},e.prototype.hide=function(e){var t=[],n=function(n){return n.id!==e||(t.push(n),!1)};this._queue.modify(function(e){return e.filter(n)}),this._importantQueue.modify(function(e){return e.filter(n)}),t.forEach(function(e){e.dismissedHandler&&e.dismissedHandler()})},e.prototype.expire=function(e){this.hide(e)},e.prototype.cleanup=function(){this._queue.modify(this._cleanup),this._importantQueue.modify(this._cleanup)},e.prototype._cleanup=function(e){return e.filter(function(e){return e.dontRemoveOnAnyAction})},e.prototype._put=function(e){var t=this;if(s.Monitoring.Logging.getLogger("notifications").log("error"===e.type?s.Logging.LogLevel.WARN:s.Logging.LogLevel.INFO,"Notification shown: "+e.type,s.EventProps.fromAny(e)),e.denaliShowTimeMs!==1/0&&!e.important){var n=this._appConfig.notificationShowTimeMs||e.denaliShowTimeMs||7e3;this._notificationsSubs.set(e.id,i.Observable.interval(n).take(1).subscribe(function(){return t.hide(e.id)}))}},e.prototype._extract=function(e){this._notificationsSubs.has(e)&&(this._notificationsSubs.get(e).unsubscribe(),this._notificationsSubs.delete(e))},e}();t.DenaliNotificationsModelImpl=u},534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(947),o=n(797);t.Logo=function(e){return r.createElement("div",{"data-name":"gr-logo",className:i.logoWrapper},r.createElement("a",{href:e.mainPageUrl},r.createElement("img",{className:i.logo,src:o})))}},536:function(e,t,n){"use strict";function r(e,t){return t?Math.max(e,t+u):e}function i(e){return Object.keys(e).map(function(t){return e[t]}).sort(function(e,t){return e.alert.highlightPosition.top-t.alert.highlightPosition.top||e.alert.highlightPosition.left-t.alert.highlightPosition.left||e.alert.highlightPosition.bottom-t.alert.highlightPosition.bottom||e.alert.highlightPosition.right-t.alert.highlightPosition.right||(e.alert.alert.id<t.alert.alert.id?-1:1)}).reduce(function(t,n,i,o){var s=o[i-1]&&o[i-1].alert.alert.id,a=i>0?t[s].top:0,c=i>0?e[s].cardHeight:0;return t[n.alert.alert.id]={top:r(n.alert.highlightPosition.top,a+c),height:n.cardHeight,alert:n.alert},t},{})}function o(e,t){var n={top:e.top+1,height:e.height,left:e.left-60,width:e.width};return{left:{top:t.top,left:t.left,width:t.width,height:t.height-4},right:n}}function s(e,t){return e-t+p}function a(e,t,n,r){var i=e+t+l-(n+r),o=e-d-r;return i<=0&&o>=0?0+r:o<0?o+r:(i>o?o:i)+r}function c(e,n,r,i,o){if(!n.id)return t.emptyLayout;var c=e[n.id];if(!c)return t.emptyLayout;var u="click"===n.source,l=u?a(c.top+r,c.height,i,o):void 0,d=s(c.top,c.alert.highlightPosition.top),p=u?[d,0]:[0,-d];return{scroll:l,textShift:p[0],cardsShift:p[1]}}Object.defineProperty(t,"__esModule",{value:!0});var u=8;t.getCardsPositions=i,t.calculateGuideLayout=o;var l=35,d=20,p=18;t.emptyLayout={scroll:0,textShift:0,cardsShift:0},t.getScrollToFitCard=a,t.calculateEditorLayout=c},537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1295);t.EditorPageModel=r.EditorPageModel,t.EditorPageModelImpl=r.EditorPageModelImpl,t.editorPageDefaultState=r.defaultState;var i=n(276);t.EditorEngine=i.EditorEngine,t.EditorEngineCheckResults=i.EditorEngineCheckResults,t.EditorEngineCheckingSettings=i.EditorEngineCheckingSettings,t.CheckingStatus=i.CheckingStatus,t.AppliedAlertAction=i.AppliedAlertAction;var o=n(493);t.GrammarlyEditorEngine=o.GrammarlyEditorEngine;var s=n(492);t.EditorSession=s.EditorSession,t.EditorSessionImpl=s.EditorSessionImpl,t.EditorSessionState=s.EditorSessionState,t.editorSessionDefaultState=s.defaultState;var a=n(489);t.CheckingScores=a.CheckingScores;var c=n(257);t.GuideLayout=c.GuideLayout;var u=n(181);t.CheckingSettingsModel=u.CheckingSettingsModel,t.CheckingSettingsState=u.CheckingSettingsState,t.ChecksType=u.ChecksType,t.GenreId=u.GenreId;var l=n(257);t.CardsModel=l.CardsModel;var d=n(490);t.DocumentModel=d.DocumentModel,t.DocumentModelState=d.DocumentModelState;var p=n(491);t.DocumentContent=p.DocumentContent,t.DocumentSession=p.DocumentSession,t.DocumentSessionState=p.DocumentSessionState,t.DocumentSessionImpl=p.DocumentSessionImpl,t.ProofitState=p.ProofitState;var h=n(258);t.TextStatsModel=h.TextStatsModel,t.TextStatsModelState=h.TextStatsModelState,t.TextStatsModelImpl=h.TextStatsModelImpl,t.textStatsModelDefaultState=h.defaultState,t.TextStatsView=h.TextStatsView;var f=n(88);t.Alert=f.Alert,t.AlertExamples=f.AlertExamples,t.AlertGroup=f.AlertGroup,t.AlertId=f.AlertId,t.AlertReplacement=f.AlertReplacement,t.AlertRange=f.AlertRange,t.AlertTransform=f.AlertTransform,t.AlertTransformPart=f.AlertTransformPart,t.AlertPlagiarism=f.AlertPlagiarism;var g=n(1293);t.AlertCache=g.AlertCache,t.AlertCacheImpl=g.AlertCacheImpl},538:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(8),o=n(105),s=n(1304),a=n(784),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.createElement(o.BasePage,{title:"Grammarly"},i.createElement("div",null,i.createElement("div",{className:a.pageWrapper},i.createElement("a",{className:a.link,href:this.context.appConfig.funnel.mainPage},i.createElement(s.Logo,{className:a.logoWrapper})),i.createElement("div",{className:a.contentWrapper},i.createElement("a",{className:a.link,href:this.context.appConfig.funnel.mainPage},i.createElement(s.Robot,{className:a.robot})),i.createElement("div",{className:a.text},i.createElement("div",{className:a.headOne},this.props.title),i.createElement("p",{className:a.description},this.props.description)))),i.createElement("div",{className:a.footer},i.createElement("div",{className:a.line}),i.createElement("div",{className:a.smallText},"We apologize for the inconvenience and appreciate your patience.",i.createElement("br",null),"For more information, please"," ",i.createElement("a",{className:a.contact,href:this.context.appConfig.support.newRequest},"contact support"),i.createElement(s.ArrowIcon,{className:a.contactIcon})))))},t}(o.BaseComponent);t.ErrorPage=c},539:function(e,t,n){"use strict";function r(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?o.Properties.of(t.ls):o.Properties.of.apply(o.Properties,e.map(function(e){return n={},n[e]=t.ls.getItem(e),n;var n}))}function i(e){for(var n=0,r=e.entries();n<r.length;n++){var i=r[n],o=i[0],a=i[1];try{var c=a.getStr();c&&t.ls.setItem(o,c)}catch(e){return void s.Monitoring.Logging.getLogger("model.settings.localStorage").warn("Cannot save data to local storage",e)}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),s=n(4),a=n(7),c=n(2);t.ls=window.localStorage||Object.create({getItem:function(e){return null},setItem:function(e,t){return c.noop},removeItem:function(e){return null}}),t.readProperties=r,t.writeProperties=i;!function(e){function t(e){return{getItem:function(t){return a.Option.of(e.getItem(t))},setItem:function(t,n){return e.setItem(t,n)},safeRemoveItem:function(t){try{e.removeItem(t)}catch(e){}},getKeys:function(){return Object.keys(e)},removeItem:function(t){return e.removeItem(t)}}}e.fromLocalStorage=t}(t.DenaliStorage||(t.DenaliStorage={}))},57:function(e,t,n){"use strict";function r(e){var t=this;return function(n){return o.__awaiter(t,void 0,void 0,function(){var t,r,i,s,a,c,u,l;return o.__generator(this,function(o){switch(o.label){case 0:t=[];for(r in e)t.push(r);i=0,o.label=1;case 1:return i<t.length?(s=t[i],a=e[s],u=(c=n).header,l=[s],[4,"function"==typeof a?a():a]):[3,4];case 2:u.apply(c,l.concat([o.sent()])),o.label=3;case 3:return i++,[3,1];case 4:return[2,n]}})})}}function i(e){var t=this;return function(n){return o.__awaiter(t,void 0,void 0,function(){var t,r,i,s,a,c,u,l;return o.__generator(this,function(o){switch(o.label){case 0:t=[];for(r in e)t.push(r);i=0,o.label=1;case 1:return i<t.length?(s=t[i],a=e[s],u=(c=n).cookie,l=[s],[4,"function"==typeof a?a():a]):[3,4];case 2:u.apply(c,l.concat([o.sent()])),o.label=3;case 3:return i++,[3,1];case 4:return[2,n]}})})}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),s=function(){function e(e,t){void 0===e&&(e=function(){return o.__awaiter(n,void 0,void 0,function(){return o.__generator(this,function(e){return[2,""]})})}),void 0===t&&(t=Promise.resolve("dummy_container_id"));var n=this;this.csrfToken=e,this.containerId=t}return e}();t.FingerprintsImpl=s,t.createHeadersAppender=r,t.createCookiesAppender=i},62:function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("Invariant condition failed: "+(t?"string"==typeof t?t:t():"(unnamed)"))}function i(e,t,n){if(e!==t)throw new g(e,t,n)}function o(e){var t=new Date(e);return isNaN(t.getTime())?null:t}function s(e){return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})}function a(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=1e3),l.__awaiter(this,void 0,void 0,function(){var r;return l.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,4]),[4,e()];case 1:return[2,i.sent()];case 2:if(r=i.sent(),t<=1||!(r instanceof m))throw r;return d.Monitoring.Logging.root.isEnabled(d.Logging.LogLevel.TRACE)&&d.Monitoring.Logging.root.getLogger("coreclients.utils").trace("retryWithDelay: count "+t+", timeout: "+n,r),[4,s(n)];case 3:return i.sent(),[2,a(e,t-1,1.3*n)];case 4:return[2]}})})}function c(e){var t=0;return function(){return t++<e}}function u(e,t){return new Promise(function(n,r){e().catch(function(n){if(t(n))return e();throw n}).then(n).catch(r)})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(17),d=n(4),p=n(7),h=n(950);t.invariant=r;var f=function(){function e(e){var t=new Error(e);this.message=t.message,this.stack=t.stack}return e}();t.CustomError=f;var g=function(e){function t(t,n,r){var i=e.call(this,"AssertionError: "+r)||this;return i.expected=t,i.actual=n,i.name="AssertionError",i}return l.__extends(t,e),t.prototype.toString=function(){return this.message+"\nExpected: "+this.expected+"\nActual: "+this.actual},t}(f);t.AssertionError=g,t.assert=i;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="RetryError",t}return l.__extends(t,e),t}(f);t.RetryError=m,t.stringToDate=o,t.delay=s,t.retryWithDelay=a,t.retryCountPredicate=c,t.promiseRetrier=u;var _=function(){function e(e,t,n,r){void 0===t&&(t=5e3),void 0===n&&(n=""),void 0===r&&(r=new Error("Timeout")),this._doRequest=e,this._timeout=t,this._timeoutError=r,this._requests=new Map,this._log=d.Monitoring.Logging.getLogger("ValueRequester"+(n.length>0?"."+n:""))}return e.prototype.request=function(e){return this._startRequest(e).promise},e.prototype.onValue=function(e,t){this._stopRequest(e,p.Right(t))},e.prototype.onError=function(e,t){this._stopRequest(e,p.Left(t))},e.prototype._startRequest=function(e){var t=this,n=this._doRequest(e),r={};return r.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),r.timer=setTimeout(function(){return t._stopRequest(n,p.Left(t._timeoutError))},this._timeout),this._requests.set(n,r),r},e.prototype._stopRequest=function(e,t){var n=this._requests.get(e);void 0===n?this._log.error("Got unrequested result or request has already expired."):(clearTimeout(n.timer),t.fold(n.reject,n.resolve),this._requests.delete(e))},e}();t.ValueRequester=_,t.fetchWithOrigin=function(e,t,n){void 0===n&&(n="https://app.grammarly.com");var r=l.__assign({},t.headers||{},{Origin:n});return h(e,l.__assign({},t,{headers:r}))}},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1271);t.AppConfig=r.AppConfig,t.BuildInfo=r.BuildInfo,t.DialectString=r.DialectString;var i=window.Grammarly,o=i&&i.denali,s=o&&o.appConfig||n(531).appConfig,a=o&&o.buildInfo;t.appConfig=s||{},t.buildInfo=a||{}},64:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);r.__exportStar(n(1346),t),r.__exportStar(n(1345),t)},780:function(e,t){e.exports={spinner:"_052b8d00-spinner-spinner",item:"_6f2b1cc8-spinner-item",spinner_bouncedelay:"_7de85e44-spinner-spinner_bouncedelay"}},781:function(e,t){e.exports={icon:"_becf156c-icon-icon",gIcon:"_81130db3-icon-gIcon",holder:"_bb12a8a6-icon-holder",yesIcon:"_d3bf9caf-icon-yesIcon",closeIcon:"_48f08f02-icon-closeIcon",starIcon:"_e6bfe649-icon-starIcon",clearColors:"_8ecd0cb1-icon-clearColors",toolbarIcon:"_f6b973a1-icon-toolbarIcon",exitIcon:"_5fa9b4de-icon-exitIcon"}},782:function(e,t){e.exports={mark_underline:"_5280dc59-components-mark_underline",markUndelineBorder:"_f8413685-components-markUndelineBorder",prevent_animation:"_12bb2f07-components-prevent_animation"}},783:function(e,t){e.exports={editor:"_360a492d-denali-editor-editor",editorClipboard:"_02bfd642-denali-editor-editorClipboard"}},784:function(e,t){e.exports={pageWrapper:"_8dc192be-base-pageWrapper",logoWrapper:"_3cc5d872-base-logoWrapper",contentWrapper:"_778d2dd4-base-contentWrapper",link:"_9492b413-base-link",robot:"_e931ad67-base-robot",contact:"_5351a05d-base-contact",contactIcon:"_faa197ed-base-contactIcon",text:"_94d6d025-base-text",description:"_b8ae4199-base-description",headOne:"_72e4fd32-base-headOne",footer:"_f477f71b-base-footer",line:"_8c7c9e50-base-line",smallText:"_adac1837-base-smallText"}},785:function(e,t){},786:function(e,t){},787:function(e,t){},788:function(e,t){},789:function(e,t){},797:function(e,t,n){e.exports=n.p+"files/997ea3a3690bda688b2a6d7407bb5eb9/logo.svg"},88:function(e,t,n){"use strict";function r(e){var t=c[e];if(void 0===t)throw new TypeError("Unknown alert group "+e);return t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(526);t.AlertReplacement=i.AlertReplacement,t.AlertTransform=i.AlertTransform,t.AlertTransformPart=i.AlertTransformPart,t.createReplacement=i.createReplacement,t.createSimpleReplacement=i.createSimpleReplacement;var o=n(275);t.AlertExamples=o.AlertExamples,t.parseExamples=o.parseExamples;var s=n(1294);t.AlertPlagiarism=s.AlertPlagiarism,t.AlertPlagiarismReferenceWeb=s.AlertPlagiarismReferenceWeb,t.AlertPlagiarismReferencePublication=s.AlertPlagiarismReferencePublication,t.parsePlagiarism=s.parsePlagiarism;var a;!function(e){e.contextualSpelling="ContextualSpelling",e.grammar="Grammar",e.sentenceStructure="SentenceStructure",e.punctuation="Punctuation",e.style="Style",e.enhancement="Enhancement",e.plagiarism="Plagiarism",e.synonym="Synonyms"}(a=t.AlertGroup||(t.AlertGroup={}));var c={Spelling:a.contextualSpelling,ContextualSpelling:a.contextualSpelling,Grammar:a.grammar,SentenceStructure:a.sentenceStructure,Punctuation:a.punctuation,Style:a.style,Enhancement:a.enhancement,Plagiarism:a.plagiarism};t.alertGroupFromString=r},89:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(41),o=n(262),s=n(177),a=n(90);!function(e){function t(e,t){var n={};try{n=JSON.parse(e)}catch(e){n={info:"unknown",status:e.message}}switch(n.info){case"too_big":return new c(o.MAX_FILE_SIZE,n.status,n.info,t.url);case"document not found":return new u(n.status,n.info,t.url);case"user not found":return new l(n.status,n.info,t.url);case"tracked":return new p(n.status,n.info,t.url);case"too many requests":return new h(n.status,n.info,t.url);default:return i.Ajax.mapToHTTPError(e,t)}}var n;!function(e){e[e.NOT_FOUND=404]="NOT_FOUND",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS"}(n=e.HttpCodes||(e.HttpCodes={})),e.CLOSED_ERROR=new s.WSError({status:"closed",message:"client was closed from client side"});var c=function(e){function t(t,r,i,o){void 0===r&&(r="too_big"),void 0===i&&(i="Document is too big");var s=e.call(this,{code:n.BAD_REQUEST,message:i,url:o,status:r})||this;return s.maxSizeLimit=t,s.name="FileSizeOutOfRangeError",s}return r.__extends(t,e),t}(i.HTTPError);e.FileSizeOutOfRangeError=c;var u=function(e){function t(t,r,i){void 0===t&&(t="not_found"),void 0===r&&(r="Document doesn't exist");var o=e.call(this,{code:n.NOT_FOUND,message:r,url:i,status:t})||this;return o.name="DocumentNotFoundError",o}return r.__extends(t,e),t}(i.HTTPError);e.DocumentNotFoundError=u;var l=function(e){function t(t,r,i){void 0===t&&(t="error"),void 0===r&&(r="user not found");var o=e.call(this,{code:n.UNAUTHORIZED,message:r,url:i,status:t})||this;return o.name="UnauthorizedError",o}return r.__extends(t,e),t}(i.HTTPError);e.UnauthorizedError=l;var d=function(e){function t(t,r,i,o){void 0===r&&(r="bad_type"),void 0===i&&(i="Unsupported file type");var s=e.call(this,{code:n.BAD_REQUEST,message:i,url:o,status:r})||this;return s.originalFileName=t,s.name="UnsupportedFileTypeError",s}return r.__extends(t,e),t}(i.HTTPError);e.UnsupportedFileTypeError=d;var p=function(e){function t(t,r,i){void 0===t&&(t="error"),void 0===r&&(r="Document with tracked changes is not supported");var o=e.call(this,{code:n.BAD_REQUEST,message:r,url:i,status:t})||this;return o.name="TrackedChangesIsUnsupported",o}return r.__extends(t,e),t}(i.HTTPError);e.TrackedChangesIsUnsupported=p;var h=function(e){function t(t,r,i){void 0===t&&(t="error"),void 0===r&&(r="Too many requests");var o=e.call(this,{code:n.TOO_MANY_REQUESTS,message:r,url:i,status:t})||this;return o.name="TooManyRequestsError",o}return r.__extends(t,e),t}(i.HTTPError);e.TooManyRequestsError=h;var f=function(e){function t(t,n,r,i){void 0===n&&(n=0),void 0===r&&(r="connect_error"),void 0===i&&(i="Cannot connect");var o=e.call(this,{code:n,message:i,url:t,status:r})||this;return o.name="ConnectionError",o}return r.__extends(t,e),t}(i.HTTPError);e.ConnectionError=f;var g=function(e){function t(t,n,r,i){void 0===n&&(n="disconnected"),void 0===r&&(r="Cannot connect to DOX");var o=e.call(this,{status:n,message:r,code:t,url:i})||this;return o.name="WSDisconnectedOnInitError",o}return r.__extends(t,e),t}(s.WSError);e.WSDisconnectedOnInitError=g;var m=function(e){function t(t,n,r){void 0===t&&(t="too_big"),void 0===n&&(n="Message is too big, server rejected it");var i=e.call(this,{status:t,message:n,code:a.Reconnect.WsCodes.TOO_BIG,url:r})||this;return i.name="WSMessageIsTooBigError",i}return r.__extends(t,e),t}(s.WSError);e.WSMessageIsTooBigError=m;var _=function(e){function t(t,n,r,i,o){void 0===i&&(i="Disconnected after multiple retries");var s=e.call(this,{status:r,message:i,code:n,url:o})||this;return s.retriesMade=t,s}return r.__extends(t,e),t}(s.WSError);e.WSDisconnectedAfterMultipleRetries=_;var y=function(e){function t(t){return e.call(this,{code:a.Reconnect.WsCodes.GOING_AWAY,status:"closed",message:"timeout",url:t})||this}return r.__extends(t,e),t}(s.WSError);e.WSGoingAway=y;var v=function(e){function t(t,n){var r=e.call(this,{status:"closed",message:n,code:t})||this;return r.name="WSNotRetryableError",r}return r.__extends(t,e),t}(s.WSError);e.WSNotRetryableError=v,e.doxErrorMapper=t}(t.DoxErrors||(t.DoxErrors={}))},90:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(2);!function(e){function t(e,t,n){if(void 0===n&&(n="backOffReconnect"),e.reconnect.reconnectCounter>s)return"error";switch(e.code){case o.NORMAL_CLOSURE:case o.GOING_AWAY:return t.canGoIdle?"idle":"backOffReconnect";case o.TOO_BIG:return"error";case o.UNEXPECTED_CONDITION:case o.CLOSED_ABNORMALLY:case o.VIOLATED_POLICY:return"backOffReconnect";case o.SERVICE_RESTART:return"fixedReconnect";case o.TOO_MANY_REQUESTS:return"backOffReconnect";case o.NOT_FOUND:case o.UNAUTHORIZED:return"error";case o.CLIENT_MALFUNCTION:case o.BLOCKED_BY_CLIENT:return!t.isInitialized&&e.reconnect.reconnectCounter>a?"error":"backOffReconnect";case o.NOT_CONSISTENT:return e.reconnect.reconnectCounter>a?"error":"backOffReconnect";case o.PRECONDITION_FAILED:return"error";default:return n}}function n(e,t){var n=this;return function(o,s,a,c){return r.__awaiter(n,void 0,void 0,function(){var n;return r.__generator(this,function(u){switch(n={code:o.code,reason:o.reason,reconnectAction:c},c){case"backOffReconnect":return e.warn("Try to reconnect",r.__assign({},n,{client:t})),[2,a(s)];case"fixedReconnect":return e.warn("Try to reconnect",r.__assign({},n,{client:t})),[2,a(o.reconnect.initialDelay)];case"error":throw e.error("Reconnect error",o.error,r.__assign({},n,{client:t})),o.error;default:i.assertNever(c)}return[2]})})}}var o;!function(e){e[e.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",e[e.GOING_AWAY=1001]="GOING_AWAY",e[e.CLOSED_ABNORMALLY=1006]="CLOSED_ABNORMALLY",e[e.NOT_CONSISTENT=1007]="NOT_CONSISTENT",e[e.VIOLATED_POLICY=1008]="VIOLATED_POLICY",e[e.TOO_BIG=1009]="TOO_BIG",e[e.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",e[e.SERVICE_RESTART=1012]="SERVICE_RESTART",e[e.CLIENT_MALFUNCTION=3e3]="CLIENT_MALFUNCTION",e[e.BLOCKED_BY_CLIENT=4e3]="BLOCKED_BY_CLIENT",e[e.UNAUTHORIZED=4001]="UNAUTHORIZED",e[e.NOT_FOUND=4004]="NOT_FOUND",e[e.PRECONDITION_FAILED=4012]="PRECONDITION_FAILED",e[e.TOO_MANY_REQUESTS=4029]="TOO_MANY_REQUESTS",e[e.UNKNOWN_WS_ERROR=-1]="UNKNOWN_WS_ERROR"}(o=e.WsCodes||(e.WsCodes={}));!function(e){e.capi="capi",e.dox="dox"}(e.ClientType||(e.ClientType={}));var s=10,a=1;e.getReconnectAction=t,e.getDefaultReconnect=n}(t.Reconnect||(t.Reconnect={}))},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(539);t.LocalStorage=r;var i=n(1315);t.DemoText=i;var o=n(1316);t.ReactUtils=o;var s=n(1314);t.ConnectionManager=s.ConnectionManager;var a=n(1317);t.URLWithParams=a.URLWithParams},945:function(e,t,n){n(786),e.exports=n(1327)},946:function(e,t,n){n(787),e.exports=n(1328)},947:function(e,t,n){n(788),e.exports=n(1329)},948:function(e,t,n){n(789),e.exports=n(1330)}},[1366]);